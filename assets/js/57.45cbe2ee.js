(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{424:function(t,v,a){"use strict";a.r(v);var r=a(25),_=Object(r.a)({},(function(){var t=this,v=t.$createElement,a=t._self._c||v;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"splitavro"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#splitavro"}},[t._v("#")]),t._v(" SplitAvro")]),t._v(" "),a("hr"),t._v(" "),a("p",[t._v("编辑人(全网同名)："),a("strong",[a("strong",[t._v("酷酷的诚")])]),t._v("  邮箱："),a("strong",[t._v("zhangchengk@foxmail.com")])]),t._v(" "),a("hr"),t._v(" "),a("h2",{attrs:{id:"描述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#描述"}},[t._v("#")]),t._v(" 描述")]),t._v(" "),a("p",[t._v("该处理器根据配置将二进制编码的Avro数据文件分割成更小的文件。输出策略决定split后的文件是Avro数据文件，还是只保留Avro记录(在FlowFile属性中包含元数据信息 )。输出总是二进制编码的。")]),t._v(" "),a("h2",{attrs:{id:"属性配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#属性配置"}},[t._v("#")]),t._v(" 属性配置")]),t._v(" "),a("p",[t._v("在下面的列表中，必需属性的名称以粗体显示。任何其他属性(不是粗体)都被认为是可选的，并且指出属性默认值（如果有默认值），以及属性是否支持表达式语言。")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("属性名称")]),t._v(" "),a("th",[t._v("默认值")]),t._v(" "),a("th",[t._v("可选值")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("Split Strategy")]),t._v(" "),a("td",[t._v("Record")]),t._v(" "),a("td",[t._v("▪Record")]),t._v(" "),a("td",[t._v("分解传入数据文件的策略。Record策略将通过反序列化每个记录来读取传入的数据文件。")])]),t._v(" "),a("tr",[a("td",[t._v("Output Size")]),t._v(" "),a("td",[t._v("1")]),t._v(" "),a("td"),t._v(" "),a("td",[t._v("每个分割文件包含的Avro记录的数量。在传入文件的记录小于输出大小的情况下，或者当记录的总数不均匀地除以输出大小时，可以得到少于Output Size数的分割文件。")])]),t._v(" "),a("tr",[a("td",[t._v("Output Strategy")]),t._v(" "),a("td",[t._v("Datafile")]),t._v(" "),a("td",[t._v("▪Datafile"),a("br"),t._v(" ▪Bare Record")]),t._v(" "),a("td",[t._v("确定数据输出的格式。要么是Avro数据，要么是Bare Record（不含元数据信息及字段信息）。Bare Record仅用于已知该数据的系统，不具有通用性。")])]),t._v(" "),a("tr",[a("td",[t._v("Transfer Metadata")]),t._v(" "),a("td",[t._v("true")]),t._v(" "),a("td",[t._v("▪true"),a("br"),t._v(" ▪false")]),t._v(" "),a("td",[t._v("是否将元数据从父数据流传输到子数流。如果输出策略是Bare Record，则元数据将存储为FlowFile属性，否则将存储在数据文件头中。")])])])]),t._v(" "),a("h2",{attrs:{id:"连接关系"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#连接关系"}},[t._v("#")]),t._v(" 连接关系")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名称")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("failure")]),t._v(" "),a("td",[t._v("如果一个流文件因为某种原因无法处理(例如，流文件不是有效的Avro)，它将被路由到这个关系")])]),t._v(" "),a("tr",[a("td",[t._v("original")]),t._v(" "),a("td",[t._v("被分割的原始流文件。如果流文件处理失败，则不会向该关系发送任何内容")])]),t._v(" "),a("tr",[a("td",[t._v("split")]),t._v(" "),a("td",[t._v("所有从原始流文件中分离出来的新文件都将被路由到这个关系")])])])]),t._v(" "),a("h2",{attrs:{id:"读取属性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#读取属性"}},[t._v("#")]),t._v(" 读取属性")]),t._v(" "),a("p",[t._v("没有指定。")]),t._v(" "),a("h2",{attrs:{id:"写属性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#写属性"}},[t._v("#")]),t._v(" 写属性")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("名称")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("fragment.identifier")]),t._v(" "),a("td",[t._v("从同一个父流文件生成的所有分割流文件都将为该属性添加相同的UUID(随机生成)")])]),t._v(" "),a("tr",[a("td",[t._v("fragment.index")]),t._v(" "),a("td",[t._v("一个增长的数字，表示从单个父流文件创建的分割流文件的顺序")])]),t._v(" "),a("tr",[a("td",[t._v("fragment.count")]),t._v(" "),a("td",[t._v("从父流文件生成的分割流文件的数量")])]),t._v(" "),a("tr",[a("td",[t._v("segment.original.filename")]),t._v(" "),a("td",[t._v("父流文件的文件名")])])])]),t._v(" "),a("h2",{attrs:{id:"状态管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#状态管理"}},[t._v("#")]),t._v(" 状态管理")]),t._v(" "),a("p",[t._v("此组件不存储状态。")]),t._v(" "),a("h2",{attrs:{id:"限制"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#限制"}},[t._v("#")]),t._v(" 限制")]),t._v(" "),a("p",[t._v("此组件不受限制。")]),t._v(" "),a("h2",{attrs:{id:"输入要求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#输入要求"}},[t._v("#")]),t._v(" 输入要求")]),t._v(" "),a("p",[t._v("此组件需要传入关系。")]),t._v(" "),a("h2",{attrs:{id:"系统资源方面的考虑"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#系统资源方面的考虑"}},[t._v("#")]),t._v(" 系统资源方面的考虑")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("资源")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("内存")]),t._v(" "),a("td",[t._v("此组件的实例可能会导致系统资源的大量使用。多个实例或高并发性设置可能导致性能下降。")])])])]),t._v(" "),a("h2",{attrs:{id:"应用场景"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#应用场景"}},[t._v("#")]),t._v(" 应用场景")]),t._v(" "),a("p",[t._v("用于切分较大的 avro文件。")]),t._v(" "),a("h2",{attrs:{id:"示例说明"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#示例说明"}},[t._v("#")]),t._v(" 示例说明")]),t._v(" "),a("p",[t._v("此组件的split功能与"),a("a",{attrs:{href:"./SplitJson"}},[t._v("SplitJson")]),t._v("大体相似，可以参考它的"),a("a",{attrs:{href:"./SplitJson#%E7%A4%BA%E4%BE%8B%E8%AF%B4%E6%98%8E"}},[t._v("示例")]),t._v("，这里主要通过实例看一下Datafile 和Bare Record 的区别，")]),t._v(" "),a("p",[t._v("1：Output Strategy 设置为DataFile")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://nifichina.gitee.io/image/processors/splitavro/DataFile.png",alt:""}})]),t._v(" "),a("p",[t._v("结果为：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://nifichina.gitee.io/image/processors/splitavro/result.png",alt:""}})]),t._v(" "),a("p",[t._v("2：Output Strategy 设置为Bare Record")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://nifichina.gitee.io/image/processors/splitavro/Bare-Record.png",alt:""}})]),t._v(" "),a("p",[t._v("结果为")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://nifichina.gitee.io/image/processors/splitavro/result2.png",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"公众号"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#公众号"}},[t._v("#")]),t._v(" 公众号")]),t._v(" "),a("p",[t._v("关注公众号 得到第一手文章/文档更新推送。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://nifichina.gitee.io/image/donate/wechat.jpg",alt:""}})])])}),[],!1,null,null,null);v.default=_.exports}}]);