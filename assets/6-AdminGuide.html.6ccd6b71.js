import{_ as a}from"./i.ee9778eb.js";import{_ as r,r as d,o as c,c as p,a as e,b as s,e as o,d as t}from"./app.3ad1c1e4.js";var l="/assets/https_proxy.dd2ef577.png",u="/assets/https_proxy_error.c5617daf.png",h="/assets/nifi_jwt.8df06108.png",g="/assets/nifi-users-dialog.4e533e8f.png",m="/assets/user-creation-dialog.5c55bc88.png",v="/assets/group-creation-dialog.a831c8ba.png",b="/assets/user-policies.85bda541.png",k="/assets/user-policies-detail.b7c30092.png",f="/assets/access-policy-config-start.20e8c1fd.png",y="/assets/user1-full-access.e6c5ccb9.png",_="/assets/user2-restricted-access.867fd2fd.png",F="/assets/processor-modify-policy.2268c23c.png",q="/assets/override_policy_copy_empty.aac3f83e.png",x="/assets/processor-replacement-modify-policy.5a21bf9b.png",N="/assets/user2-moved-processor.44804099.png",P="/assets/processor-view-policy.f4dcd416.png",A="/assets/processor-replacement-view-policy.8dd59c99.png",S="/assets/user2-edit-processor.5354bc88.png",T="/assets/user1-create-connection.3abdcedd.png",w="/assets/user2-no-connection.764afae7.png",E="/assets/process-group-modify-policy.9863fc5c.png",U="/assets/process-group-modify-policy-add-user2.061696a9.png",C="/assets/processor-inherited-modify-policy.a2241c51.png",L="/assets/user2-can-connect.7cb568fe.png",I="/assets/user2-connected-processors.2bfcf840.png",K="/assets/replacetext-processor-added.3e983499.png",z="/assets/user1-edit-connection.9931e634.png",D="/assets/user2-no-edit-connection.88895765.png",B="/assets/process-group-view-policy.2343ac55.png",R="/assets/process-group-view-policy-add-user2.01913df4.png",G="/assets/user2-edit-connection.7eb05d7b.png",M="/assets/nifi-legacy-salt.3b5126bf.png",H="/assets/openssl-salt.1d39bce0.png",O="/assets/bcrypt-salt.1502defb.png",Z="/assets/scrypt-salt.32073b6a.png",W="/assets/pbkdf2-salt.53128fb6.png",j="/assets/allow-weak-crypto.dd6f4218.png",i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD0AAAA1CAYAAADyMeOEAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAEnQAABJ0Ad5mH3gAAAaxSURBVGhD1ZpZTFxVGMdF64PGusbU+FL70DdjtGnUxPigTTSmNdVq+misaTRiS2mNkNZULFraRltRwYYugBW0DFW2YRjWTssOlbIqS9jaoUApULZS6PJ3/kcvHYYzzL137h3hJP+cQOZcvt/9zv3O/37DXQjwuH37ttCtW7dmpPwuUCOg0AS7efMmpqenMTk5iYmJCTHzZ/4+UOABgxbAN26gry4blVGrURz+JKpjNqCzsRxXrlzBtWvXAgYeEGglw22ZETgdfDdOf3zXHW17EOfyk9HT04Px8fGAgAcEms/tUHcdisOemA38n/Iinse5qnL09vaK7c7PmzlMh2bWpqem0JC4SQpMFQUvgS0+Ak1NTRgeHhbPuJnZNhWagTNr/X87cCZ0qRRYkT1sJc4W5uDChQuiwClV3YxhOvTU5ARq4zZKQd1VFHwPrD/tQH19PQYHB03NtmnQDJhF6VJtNhwh90tBPWX/dDmKctLQ1dVlalEzFXpybBjVB1+RAsoVBOuhTTh//jwGBgYw5aoFiwZayXJ3cQIcnyyRwHlXXujjyM9IQnt7O8bGxkzJtinQLELjgz0oj3xGCuZL2VHrUF1dhf7+fly/ft3wI8xwaGblhst5tdn2zzUiKlWwdSnsKbFobW3FyMiIuJ6R2TYcmlkZvdyF0t0rpUBqZd2zBhUV5hgWQ6GVLDf/vlMKokWFW+6DLekgmpubcfXqVUOzbSg0szHUVeuym8ukIFpl+3wVSosdwpfzhcSobBsGzSzQbtYnyO1mdsgyJEZsRNLe93HywGakfPMhLC5xPvXV2yKznmtoT7OPfSHs6dDQkGGGxRBoBsIszGc3j+95D/Hx8cjKyoLD4UBJSQlKS0vFzJ/zI1+WrrN/thJnCmyG2lPDoH3ZzRNRm5GRkYHa2lp0d3eLAtXX1ydm/lz67evSdWbYU7+hGYAau5l84CPk5eWho6NDHEOsyHRcnEdchaoy+g3pOspoe2oItBq7mbrnTRQUFIht6t4l4Tw21Ifyvaul6/6VsfbUL2glaDV2M/XLdSLT3MrulZizb2hj7alf0AxYrd20uKDtdrvYonqgKaPsqW5o3mUtdtMSsRY5OTno7OycqcIcnEcH+1D2tW9oo+ypbmgRrAa7eWr3GthsNin08KU20R2VrfOUEfZUF7SSZS12Mz18FaxWq3gmWYHdoYd6WnFWJbQR9lQXtAhUo90kdGZmJtra2maOHQ7Og84WnA1TB035a081Q/Ouzmc3vYnQNCd8Ht2rrx5of+2pJmhemHdVTXfTU2nhzyE9PR0tLS0YHR2dBd3fWo4zOx6VrvMmf+ypZmi13U1PWXeswB8pv8z0tnnk8Hnk7KzLh2PbA9J13uSPPVUNrWRFS3fTXblbH8GpmHBUOrLR0VSF3o4GXO7+C73ttai3uAqixl4apdeeaoLW3t00W/rsqSpoJct6uptmS489VQ3tT3fTbHnaU7+heQEWnI7CGN3dTcq+5SHERW7GsR/3I+loNFISY2BJjEVKwg9I27dRFCbZOjXKD3kY9tSjwgPwZPBlWHxC8ygYG3C95PvZ3cwMXY4jsdHCoJSVlaGmpkY0FDiXZB5F0VbtxdFdtKeVlRXCnvp6GZkXWsmyEd3NrO1PITnxiMs3V4jXS/73AY8uzq3l6ZqPLE/RnuYkH1JlT+eF5t0yqruZtX0FUpITUFdXJ85V93P6Yl2e39CUWnvqFZp3SY/d9Caak9Rff0ZjY+OsTHDuaSgwBFqtPZVC84O8S3rspjcR2pKciIaGhpn/NuDf4NxTr92ReZMae+oVWq/d9CZu75NJ8aJwsQvKM5VBce7802YYtBp7OgeaH/DHbnqT2Ho7n8XpA6+h/Pv1qIrZgOrYd8RcEvG0dI1e+bKnUmjazXMHX5VecHHojj3l6eBpT+dA8644qywLzm5qVV7oMhRYLaI95d604JgFzbvBamrks/z/KQgZh8PEs81K7n5uz4HmVqg5/K7kIotNQUiNDnW5tErhyd23uBS6rTBO1/vtQpI95DH8duw7ddDcBoMDfa4K+5brBSNIesGFrsLge5EU9QHS0tKEL5h3e3PwMOf56XReRJn1OOz71iJr90vI2PUi0ne9sOCVGrkeJ+IOCWD6fKfTOavPzjEHWsk2TQMXsBDwO2R++cbvonJzcxesGB/jZLyMm/GTwz3LHHOgORRwmnZuDb6u0dbx7YgH/kIV42OcjJdxM35PYA4pNAc/qHhjvgnxKxReZKGLcTJexdt7AnN4hebgAkW8wGKRe9xzB/APETne8hHic/IAAAAASUVORK5CYII=",J="/assets/zero-master-cluster-http-access.f392d175.png",V="/assets/primary-node-cluster-mgt.3d4d4024.png",X="/assets/disconnected-node-cluster-mgt.c71c1884.png",$="/assets/offloading-node-cluster-mgt.78473af4.png",Y="/assets/offloaded-node-cluster-mgt.ecbb673a.png",Q="/assets/ncm.e8c12a0d.png";const ee={},te=o('<h1 id="\u7CFB\u7EDF\u7BA1\u7406\u5458\u6307\u5357-1-15-3" tabindex="-1"><a class="header-anchor" href="#\u7CFB\u7EDF\u7BA1\u7406\u5458\u6307\u5357-1-15-3" aria-hidden="true">#</a> \u7CFB\u7EDF\u7BA1\u7406\u5458\u6307\u5357(1.15.3)</h1><hr><p>\u7F16\u8F91\u4EBA:<strong><strong>\u9177\u9177\u7684\u8BDA</strong></strong> \u90AE\u7BB1:<strong>zhangchengk@foxmail.com</strong></p><hr><h2 id="\u7CFB\u7EDF\u8981\u6C42-system-requirements" tabindex="-1"><a class="header-anchor" href="#\u7CFB\u7EDF\u8981\u6C42-system-requirements" aria-hidden="true">#</a> \u7CFB\u7EDF\u8981\u6C42(System Requirements)</h2><p>Apache NiFi\u53EF\u4EE5\u8FD0\u884C\u5728\u50CF\u7B14\u8BB0\u672C\u7535\u8111\u8FD9\u6837\u7B80\u5355\u7684\u8BBE\u5907\u4E0A\uFF0C\u540C\u65F6\u5B83\u4E5F\u53EF\u4EE5\u5728\u591A\u4E2A\u4F01\u4E1A\u7EA7\u670D\u52A1\u5668\u4E0A\u4EE5\u96C6\u7FA4\u7684\u65B9\u5F0F\u8FD0\u884C\u3002NiFi\u6240\u9700\u7684\u786C\u4EF6\u6570\u91CF\u548C\u5185\u5B58\u5927\u5C0F\u4E0E\u8981\u5904\u7406\u7684\u6570\u636E\u91CF\u76F8\u5173\u3002\u5728NiFi\u5904\u7406\u6570\u636E\u65F6\uFF0C\u6570\u636E\u662F\u5B58\u50A8\u5728\u78C1\u76D8\u4E0A\u7684(\u9ED8\u8BA4\u914D\u7F6E\u5982\u6B64)\uFF0C\u56E0\u6B64\uFF0CNiFi\u9700\u8981\u4E3A\u5176\u5404\u79CD<code>\u5B58\u50A8\u5E93(repository)</code>\u5206\u914D\u8DB3\u591F\u7684\u78C1\u76D8\u7A7A\u95F4\uFF0C\u5C24\u5176\u662F<code>\u5185\u5BB9\u5B58\u50A8\u5E93(content repository)</code>\uFF0C<code>\u6D41\u6587\u4EF6\u5B58\u50A8\u5E93(flowfile repository)</code>\u548C<code>\u6E90\u6587\u4EF6\u5B58\u50A8\u5E93(provenance repository)</code>(\u6709\u5173\u8FD9\u4E9B\u5B58\u50A8\u5E93\u7684\u66F4\u591A\u4FE1\u606F\uFF0C\u8BF7\u53C2\u9605<a href="#%E7%B3%BB%E7%BB%9F%E5%B1%9E%E6%80%A7(System%20Properties)">\u7CFB\u7EDF\u5C5E\u6027(System Properties)</a>\u90E8\u5206)\u3002</p><p>NiFi\u5177\u6709\u4EE5\u4E0B\u6700\u4F4E\u7CFB\u7EDF\u8981\u6C42:</p><ul><li><p>\u9700\u8981Java8\u6216\u66F4Java11</p></li><li><p>\u652F\u6301\u7684\u64CD\u4F5C\u7CFB\u7EDF:</p><ul><li>Linux</li><li>Unix</li><li>Windows</li><li>macOS</li></ul></li><li><p>\u652F\u6301\u7684Web\u6D4F\u89C8\u5668:</p><ul><li>Microsoft Edge: Current &amp; ((Current - 1)</li><li>Mozilla FireFox: Current &amp;(Current - 1)</li><li>Google Chrome: Current &amp;(Current - 1)</li><li>Safari: Current &amp;(Current - 1)</li></ul></li></ul><blockquote><p><strong>\u6CE8\u610F</strong> \u5728\u6301\u7EED\u4E14\u6781\u9AD8\u7684\u541E\u5410\u91CF\u4E0B\uFF0C\u53EF\u80FD\u9700\u8981\u8C03\u6574<code>CodeCache(JVM)</code>\u8BBE\u7F6E\u4EE5\u907F\u514D\u7A81\u7136\u7684\u6027\u80FD\u635F\u5931\u3002\u6709\u5173\u66F4\u591A\u4FE1\u606F\uFF0C\u8BF7\u53C2\u9605<a href="#Bootstrap%E5%B1%9E%E6%80%A7(Bootstrap%20Properties)">Bootstrap\u5C5E\u6027(Bootstrap Properties)</a>\u90E8\u5206\u3002</p></blockquote><h2 id="\u5982\u4F55\u5B89\u88C5\u548C\u542F\u52A8nifi" tabindex="-1"><a class="header-anchor" href="#\u5982\u4F55\u5B89\u88C5\u548C\u542F\u52A8nifi" aria-hidden="true">#</a> \u5982\u4F55\u5B89\u88C5\u548C\u542F\u52A8NiFi</h2><ul><li><p>Linux/Unix/macOS</p><ul><li>\u89E3\u538BNiFi\u5230\u6240\u9700\u7684\u5B89\u88C5\u76EE\u5F55</li><li>\u6309\u7167\u9700\u8981\uFF0C\u914D\u7F6E<code>conf</code>\u76EE\u5F55\u4E0B\u7684\u6587\u4EF6 <ul><li>\u81F3\u5C11\uFF0C\u6211\u4EEC\u5EFA\u8BAE\u4F60\u4FEE\u6539<code>nifi.properties</code>\u6587\u4EF6\u5E76\u4E3A<code>nifi.sensitive.props.key</code>\u8BBE\u7F6E\u4E00\u4E2A\u5BC6\u7801\u503C(\u8BF7\u53C2\u9605\u4E0B\u9762\u7684<a href="#%E7%B3%BB%E7%BB%9F%E5%B1%9E%E6%80%A7(System%20Properties)">\u7CFB\u7EDF\u5C5E\u6027(System Properties)</a></li></ul></li><li><code>bin</code>\u76EE\u5F55\u4E2D\uFF0C\u8F93\u5165\u6267\u884C\u4EE5\u4E0B\u547D\u4EE4<code>./nifi.sh &lt;command&gt;</code>: <ul><li>start:\u5728\u540E\u53F0\u542F\u52A8NiFi</li><li>stop:\u505C\u6B62\u5728\u540E\u53F0\u8FD0\u884C\u7684NiFi</li><li>status:\u63D0\u4F9BNiFi\u7684\u5F53\u524D\u72B6\u6001</li><li>run:\u5728\u524D\u53F0\u8FD0\u884CNiFi\u5E76\u7B49\u5F85<code>Ctrl-C</code>\u547D\u4EE4\u6765\u5173\u95EDNiFi</li><li>install:\u628ANiFi\u5B89\u88C5\u4E3A\u670D\u52A1\uFF0C\u7136\u540E\u53EF\u4EE5\u901A\u8FC7\u4EE5\u4E0B\u547D\u4EE4\u63A7\u5236NiFi <ul><li><code>service NiFi start</code></li><li><code>service NiFi stop</code></li><li><code>service NiFi status</code></li></ul></li></ul></li></ul></li><li><p>Windows</p><ul><li>\u89E3\u538BNiFi\u5230\u6240\u9700\u7684\u5B89\u88C5\u76EE\u5F55</li><li>\u6309\u7167\u9700\u8981\u914D\u7F6E<code>conf</code>\u76EE\u5F55\u4E0B\u7684\u6587\u4EF6 <ul><li>\u81F3\u5C11\uFF0C\u6211\u4EEC\u5EFA\u8BAE\u4F60\u4FEE\u6539<code>nifi.properties</code>\u6587\u4EF6\u5E76\u4E3A<code>nifi.sensitive.props.key</code>\u8BBE\u7F6E\u4E00\u4E2A\u5BC6\u7801\u503C(\u8BF7\u53C2\u9605\u4E0B\u9762\u7684<a href="#%E7%B3%BB%E7%BB%9F%E5%B1%9E%E6%80%A7(System%20Properties)">\u7CFB\u7EDF\u5C5E\u6027(System Properties)</a>)</li></ul></li><li>\u8FDB\u5165<code>bin</code>\u76EE\u5F55</li><li>\u53CC\u51FB<code>run-nifi.bat</code>\uFF0C\u8FD9\u4F1A\u5728\u524D\u53F0\u8FD0\u884CNiFi\u5E76\u7B49\u5F85<code>Ctrl-C</code>\u547D\u4EE4\u6765\u5173\u95EDNiFi</li><li>\u8981\u67E5\u770BNiFi\u7684\u5F53\u524D\u72B6\u6001\uFF0C\u8BF7\u53CC\u51FB<code>status-nifi.bat</code></li></ul></li></ul><p>\u9996\u6B21\u542F\u52A8NiFi\u65F6\uFF0C\u4F1A\u521B\u5EFA\u4EE5\u4E0B\u6587\u4EF6\u548C\u76EE\u5F55:</p><ul><li><code>content_repository</code> \u76EE\u5F55</li><li><code>database_repository</code> \u76EE\u5F55</li><li><code>flowfile_repository</code> \u76EE\u5F55</li><li><code>provenance_repository</code> \u76EE\u5F55</li><li><code>work</code> \u76EE\u5F55</li><li><code>logs</code> \u76EE\u5F55</li><li>\u5728<code>conf</code>\u76EE\u5F55\u4E2D\uFF0C\u5C06\u521B\u5EFA<code>flow.xml.gz</code>\u6587\u4EF6</li></ul><blockquote><p>For security purposes, when no security configuration is provided NiFi will now bind to 127.0.0.1 by default and the UI will only be accessible through this loopback interface. HTTPS properties should be configured to access NiFi from other interfaces. See the Security Configuration for guidance on how to do this.</p></blockquote><blockquote><p>Panda\u8BDA\u89E3\u8BFB\uFF1A\u4E0A\u65B9\u5B98\u65B9\u6587\u6863\u6709\u8BEF\uFF0C\u6545\u62F7\u8D1D\u539F\u6587\u800C\u4E0D\u7FFB\u8BD1\uFF0C\u6B64\u5904\u4E88\u4EE5\u7EA0\u6B63\u3002\u53C2\u7167<code>NIFI-8516 Enabled HTTPS and Single User Authentication in default configuration</code>\uFF0C\u73B0\u5728\u7684NiFi\u9ED8\u8BA4\u81EA\u52A8\u751F\u6210\u4E86\u8BC1\u4E66\u4EE5HTTPS\u6A21\u5F0F\u542F\u52A8\uFF0C\u5E76\u4F7F\u7528<code>single user</code>\u7684\u7528\u6237\u767B\u9646\u548C\u6743\u9650\u9A8C\u8BC1\u673A\u5236\uFF0C\u9ED8\u8BA4\u7ED1\u5B9A\u5230127.0.0.1:8443\uFF0C\u4F60\u53EA\u80FD\u4ECE\u8FD9\u4E2A\u5730\u5740(https://127.0.0.1:8443)\u53BB\u8BBF\u95EE\uFF0C\u4E00\u822C\u4E0A\u5C40\u57DF\u7F51\u5185\u4F60\u5C06<code>nifi.web.https.host</code>\u8FD9\u4E2A\u503C\u7F6E\u7A7A(\u6216\u8005\u4F7F\u7528<code>0.0.0.0</code>)\u5C31\u53EF\u4EE5\u901A\u8FC7\u670D\u52A1\u5668\u6216\u865A\u673A\u7684IP\u5730\u5740\u6765\u8BBF\u95EE\u4E86\uFF0C\u4E2A\u522B\u7684\u4F7F\u7528\u4E91\u73AF\u5883\u6216\u8005\u4F7F\u7528\u4E86\u5BB9\u5668\u6280\u672F\u7684\u65E0\u6CD5\u8BBF\u95EENiFi\u7684\uFF0C\u5C31\u5F97\u8003\u8651\u914D\u7F6E<code>nifi.web.proxy.host</code>\u624D\u80FD\u8FDB\u4E00\u6B65\u901A\u8FC7\u5177\u4F53\u7684IP:Port\u6765\u8BBF\u95EENiFi\u7684\u754C\u9762\u3002\u6BD4\u5982\u6211\u6D4B\u8BD5\u8D77\u4E86\u4E00\u4E2Adocker\u955C\u50CF\u8FD0\u884CNiFi\uFF0C\u5982\u679C\u6211\u6CA1\u6709\u50CF\u5982\u56FE\u914D\u7F6Eproxy <img src="'+l+'" alt=""> \u5C31\u4F1A\u62A5\u7C7B\u4F3C\u5982\u4E0B\u7684\u9519\u8BEF <img src="'+u+`" alt=""></p></blockquote><p>\u6709\u5173\u914D\u7F6ENiFi\u5B58\u50A8\u5E93\u548C\u914D\u7F6E\u6587\u4EF6\u7684\u66F4\u591A\u4FE1\u606F\uFF0C\u8BF7\u53C2\u9605\u672C\u6307\u5357\u7684<a href="#%E7%B3%BB%E7%BB%9F%E5%B1%9E%E6%80%A7(System%20Properties)">\u7CFB\u7EDF\u5C5E\u6027(System Properties)</a>\u90E8\u5206\u3002</p><h2 id="\u7AEF\u53E3\u914D\u7F6E-port-configuration" tabindex="-1"><a class="header-anchor" href="#\u7AEF\u53E3\u914D\u7F6E-port-configuration" aria-hidden="true">#</a> \u7AEF\u53E3\u914D\u7F6E(Port Configuration)</h2><h3 id="nifi" tabindex="-1"><a class="header-anchor" href="#nifi" aria-hidden="true">#</a> NiFi</h3><p>\u4E0B\u8868\u5217\u51FA\u4E86NiFi\u4F7F\u7528\u7684\u9ED8\u8BA4\u7AEF\u53E3\u4EE5\u53CA<code>nifi.properties</code>\u6587\u4EF6\u4E2D\u7684\u5BF9\u5E94\u5C5E\u6027\u3002</p><table><thead><tr><th>\u529F\u80FD</th><th>\u5C5E\u6027</th><th>\u9ED8\u8BA4\u503C</th></tr></thead><tbody><tr><td>HTTPS Port*</td><td><code>nifi.web.https.port</code></td><td><code>8443</code></td></tr><tr><td>Remote Input Socket Port*</td><td><code>nifi.remote.input.socket.port</code></td><td><code>10443</code></td></tr><tr><td>Cluster Node Protocol Port*</td><td><code>nifi.cluster.node.protocol.port</code></td><td><code>11443</code></td></tr><tr><td>Cluster Node Load Balancing Port</td><td><code>nifi.cluster.node.load.balance.port</code></td><td><code>6342</code></td></tr><tr><td>Web HTTP Forwarding Port</td><td><code>nifi.web.http.port.forwarding</code></td><td><code>none</code></td></tr></tbody></table><blockquote><p>\u6807\u6709\u661F\u53F7(*)\u7684\u7AEF\u53E3\u7684\u5C5E\u6027\u503C\u5728<code>nifi.properties</code>\u4E2D\u9ED8\u8BA4\u662F\u7A7A\u7684\u3002\u5F53\u4F7F\u7528<a href="./7-ToolkitGuide">TLS Toolkit</a>\u751F\u6210\u5B89\u5168\u7684NiFi\u5B9E\u4F8B\u65F6\uFF0C\u8868\u4E2D\u663E\u793A\u7684\u503C\u662F\u8FD9\u4E9B\u7AEF\u53E3\u5728<code>nifi.properties</code>\u7684\u9ED8\u8BA4\u503C\u3002\u6CE8\u610F\uFF0C<a href="./7-ToolkitGuide">TLS Toolkit</a>\u4F7F\u7528\u7684HTTPS\u7AEF\u53E3\u9ED8\u8BA4\u662F<code>9443</code>\uFF0C\u800C\u4E0D\u662F8443\u3002</p></blockquote><h3 id="\u5D4C\u5165\u5F0Fzookeeper-embedded-zookeeper" tabindex="-1"><a class="header-anchor" href="#\u5D4C\u5165\u5F0Fzookeeper-embedded-zookeeper" aria-hidden="true">#</a> \u5D4C\u5165\u5F0FZookeeper(Embedded ZooKeeper)</h3><p>\u4E0B\u8868\u5217\u51FA\u4E86<a href="#%E5%B5%8C%E5%85%A5%E5%BC%8FZooKeeper%E6%9C%8D%E5%8A%A1%E5%99%A8(Embedded%20ZooKeeper%20Server)">\u5D4C\u5165\u5F0FZooKeeper\u670D\u52A1\u5668(Embedded ZooKeeper Server)</a>\u4F7F\u7528\u7684\u9ED8\u8BA4\u7AEF\u53E3\u4EE5\u53CA<code>zookeeper.properties</code>\u6587\u4EF6\u4E2D\u7684\u76F8\u5E94\u5C5E\u6027\u3002</p><table><thead><tr><th>\u529F\u80FD</th><th>\u5C5E\u6027</th><th>\u9ED8\u8BA4\u503C</th></tr></thead><tbody><tr><td>Zookeeper Server Quorum and Leader Election Ports</td><td><code>server.1</code></td><td><code>none</code></td></tr><tr><td>Zookeeper Client Port(\u5F03\u7528\uFF1A\u4ECENiFi 1.10.x\u5F00\u59CB\uFF0C\u4E0D\u518D\u5728\u5355\u72EC\u7684\u884C\u4E0A\u6307\u5B9A\u5BA2\u6237\u7AEF\u7AEF\u53E3)</td><td><code>clientPort</code></td><td><code>2181</code></td></tr></tbody></table><blockquote><p>Zookeeper\u670D\u52A1\u5668\u7AEF\u53E3\u7684\u6CE8\u91CA\u793A\u4F8B\u5305\u542B\u5728<code>zookeeper.properties</code>\u6587\u4EF6\u4E2D\uFF0C\u683C\u5F0F\u4E3A<code>server.N=nifi-nodeN-hostname:2888:3888;2181</code>\u3002</p></blockquote><h2 id="\u914D\u7F6E\u6700\u4F73\u5B9E\u8DF5-configuration-best-practices" tabindex="-1"><a class="header-anchor" href="#\u914D\u7F6E\u6700\u4F73\u5B9E\u8DF5-configuration-best-practices" aria-hidden="true">#</a> \u914D\u7F6E\u6700\u4F73\u5B9E\u8DF5(Configuration Best Practices)</h2><p>\u5982\u679C\u4F60\u5728Linux\u4E0A\u8FD0\u884C\uFF0C\u8BF7\u8003\u8651\u8FD9\u4E9B\u6700\u4F73\u5B9E\u8DF5\u3002\u5178\u578B\u7684Linux\u9ED8\u8BA4\u8BBE\u7F6E\u4E0D\u4E00\u5B9A\u80FD\u591F\u6EE1\u8DB3\u50CFNiFi\u8FD9\u6837\u7684IO\u5BC6\u96C6\u578B\u5E94\u7528\u7A0B\u5E8F\u7684\u9700\u6C42\u3002\u5BF9\u4E8E\u8FD9\u4E9B\u6700\u4F73\u5B9E\u8DF5\uFF0C\u5BF9\u4E8E\u4E0D\u540C\u7684Linux\u53D1\u884C\u7248\uFF0C\u5B9E\u9645\u60C5\u51B5\u53EF\u80FD\u4F1A\u6709\u6240\u4E0D\u540C\uFF0C\u53EF\u4EE5\u53C2\u8003\u4E0B\u9762\u7684\u4ECB\u7ECD\uFF0C\u4F46\u662F\u8BF7\u53C2\u8003\u7279\u5B9ALinux\u53D1\u884C\u7248\u7684\u6587\u6863\u3002</p><p><strong>\u6700\u5927\u6587\u4EF6\u53E5\u67C4(Maximum File Handles)</strong></p><p>NiFi\u5728\u4EFB\u4F55\u65F6\u5019\u90FD\u53EF\u80FD\u4F1A\u6253\u5F00\u975E\u5E38\u5927\u91CF\u7684\u6587\u4EF6\u53E5\u67C4\u3002\u901A\u8FC7\u7F16\u8F91<code>/etc/security/limits.conf</code>\u6765\u589E\u52A0\u9650\u5236\uFF0C\u6DFB\u52A0\u7C7B\u4F3C\u7684\u5185\u5BB9</p><blockquote><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>* hard nofile 50000
* soft nofile 50000
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p><strong>\u6700\u5927\u6D3E\u751F\u8FDB\u7A0B\u6570(Maximum Forked Processes)</strong></p><p>NiFi\u53EF\u4EE5\u914D\u7F6E\u751F\u6210\u5927\u91CF\u7684\u7EBF\u7A0B\u3002\u8981\u589E\u52A0Linux\u5141\u8BB8\u7684\u6570\u91CF\uFF0C\u8BF7\u7F16\u8F91<code>/etc/security/limits.conf</code></p><blockquote><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>*  hard  nproc  10000
*  soft  nproc  10000
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div></blockquote><p>\u4F60\u7684\u53D1\u884C\u7248Linux\u53EF\u80FD\u9700\u8981\u7F16\u8F91<code>/etc/security/limits.d/90-nproc.conf</code></p><blockquote><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>* soft nproc 10000
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></blockquote><p><strong>\u589E\u52A0\u53EF\u7528\u7684TCP\u5957\u63A5\u5B57\u7AEF\u53E3\u6570(Increase the number of TCP socket ports available)</strong></p><p>\u5982\u679C\u4F60\u7684\u6D41\u7A0B\u5C06\u5728\u77ED\u65F6\u95F4\u5185\u5EFA\u7ACB\u5E76\u62C6\u9664\u5927\u91CF\u5957\u63A5\u5B57\uFF0C\u5219\u5982\u4E0B\u914D\u7F6E\u5C24\u5176\u91CD\u8981\u3002</p><blockquote><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>sudo sysctl -w net.ipv4.ip_local_port_range =&quot;10000 65000&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></blockquote><p><strong>\u8BBE\u7F6E\u5957\u63A5\u5B57\u5728\u5173\u95ED\u65F6\u4FDD\u6301TIMED_WAIT\u72B6\u6001\u7684\u65F6\u95F4(Set how long sockets stay in a TIMED_WAIT state when closed)</strong></p><p>\u8003\u8651\u5230\u4F60\u5E0C\u671B\u80FD\u591F\u5FEB\u901F\u8BBE\u7F6E\u548C\u62C6\u5378\u65B0\u5957\u63A5\u5B57\uFF0C\u4F60\u4E0D\u5E0C\u671B\u4F60\u7684\u5957\u63A5\u5B57\u505C\u7559\u592A\u957F\u65F6\u95F4\u3002\u6700\u597D\u591A\u9605\u8BFB\u4E00\u4E0B\u5E76\u8C03\u6574\u7C7B\u4F3C\u7684\u4E1C\u897F</p><p>kernel 2.6</p><blockquote><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>sudo sysctl -w net.ipv4.netfilter.ip_conntrack_tcp_timeout_time_wait =&quot;1&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></blockquote><p>kernel 3.0</p><blockquote><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>sudo sysctl -w net.netfilter.nf_conntrack_tcp_timeout_time_wait=&quot;1&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></blockquote><p><strong>\u544A\u8BC9Linux\u4F60\u6C38\u8FDC\u4E0D\u5E0C\u671BNiFi\u53D1\u751Fswap(Tell Linux you never want NiFi to swap)</strong></p><p>\u5BF9\u4E8E\u67D0\u4E9B\u5E94\u7528\u7A0B\u5E8F\u6765\u8BF4\uFF0Cswapping\u975E\u5E38\u68D2\uFF0C\u4F46\u5BF9\u4E8E\u50CFNiFi\u8FD9\u6837\u4E00\u76F4\u60F3\u8981\u8FD0\u884C\u7684\u7A0B\u5E8F\u6765\u8BF4\u5E76\u4E0D\u597D\u3002\u8981\u544A\u8BC9Linux\u4F60\u60F3\u5173\u6389swapping\uFF0C\u4F60\u53EF\u4EE5\u7F16\u8F91<code>/etc/sysctl.conf</code>\u6765\u6DFB\u52A0\u4EE5\u4E0B\u884C</p><blockquote><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>vm.swappiness = 0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div></blockquote><p>\u5BF9\u4E8E\u5404\u79CDNiFi repos\u7684\u5206\u533A\uFF0C\u8BF7\u5173\u95ED\u8BF8\u5982<code>atime</code>\u4E4B\u7C7B\u7684\u9009\u9879\u3002\u8FD9\u6837\u505A\u4F1A\u5BFC\u81F4\u541E\u5410\u91CF\u5F97\u5230\u60CA\u4EBA\u7684\u63D0\u9AD8\u3002\u7F16\u8F91<code>/etc/fstab</code>\u6587\u4EF6\uFF0C\u5BF9\u4E8E\u611F\u5174\u8DA3\u7684\u5206\u533A\uFF0C\u6DFB\u52A0<code>noatime</code>\u9009\u9879\u3002</p><h2 id="\u63A8\u8350\u75C5\u6BD2\u626B\u63CF\u6392\u9664-recommended-antivirus-exclusions" tabindex="-1"><a class="header-anchor" href="#\u63A8\u8350\u75C5\u6BD2\u626B\u63CF\u6392\u9664-recommended-antivirus-exclusions" aria-hidden="true">#</a> \u63A8\u8350\u75C5\u6BD2\u626B\u63CF\u6392\u9664(Recommended Antivirus Exclusions)</h2><p>\u9632\u75C5\u6BD2\u8F6F\u4EF6\u53EF\u80FD\u9700\u8981\u5F88\u957F\u65F6\u95F4\u624D\u80FD\u626B\u63CF\u5B8C\u5927\u578B\u76EE\u5F55\u53CA\u5176\u4E2D\u7684\u5927\u91CF\u6587\u4EF6\u3002\u6B64\u5916\uFF0C\u5982\u679C\u9632\u75C5\u6BD2\u8F6F\u4EF6\u5728\u626B\u63CF\u8FC7\u7A0B\u4E2D\u9501\u5B9A\u4E86\u6587\u4EF6\u6216\u76EE\u5F55\uFF0C\u5219\u8FD9\u4E9B\u8D44\u6E90\u5C06\u65E0\u6CD5\u7528\u4E8ENiFi\u8FDB\u7A0B\uFF0C\u4ECE\u800C\u5BFC\u81F4\u8FD9\u4E9B\u8D44\u6E90\u5728NiFi\u5B9E\u4F8B/\u7FA4\u96C6\u4E2D\u7684\u5EF6\u8FDF\u6216\u4E0D\u53EF\u7528\u3002\u4E3A\u9632\u6B62\u51FA\u73B0\u8FD9\u4E9B\u6027\u80FD\u548C\u53EF\u9760\u6027\u95EE\u9898\uFF0C\u5F3A\u70C8\u5EFA\u8BAE\u5C06\u9632\u75C5\u6BD2\u8F6F\u4EF6\u914D\u7F6E\u4E3A\u8DF3\u8FC7\u5BF9\u4EE5\u4E0BNiFi\u76EE\u5F55\u7684\u626B\u63CF\uFF1A</p><ul><li><code>content_repository</code></li><li><code>flowfile_repository</code></li><li><code>logs</code></li><li><code>provenance_repository</code></li><li><code>state</code></li></ul><h2 id="\u5B89\u5168\u914D\u7F6E-security-configuration" tabindex="-1"><a class="header-anchor" href="#\u5B89\u5168\u914D\u7F6E-security-configuration" aria-hidden="true">#</a> \u5B89\u5168\u914D\u7F6E(Security Configuration)</h2><p>\u51FA\u4E8E\u5B89\u5168\u76EE\u7684NiFi\u63D0\u4F9B\u4E86\u591A\u79CD\u4E0D\u540C\u7684\u914D\u7F6E\u9009\u9879\u3002\u6700\u91CD\u8981\u7684\u662F<code>nifi.properties</code>\u6587\u4EF6\u4E2D<code>security properties(\u5B89\u5168\u5C5E\u6027)</code>\u6807\u9898\u4E0B\u7684\u5C5E\u6027\u3002\u4E3A\u4E86\u5B89\u5168\u8FD0\u884C\uFF0C\u5FC5\u987B\u8BBE\u7F6E\u4EE5\u4E0B\u5C5E\u6027:</p><table><thead><tr><th>Property Name</th><th>Description</th></tr></thead><tbody><tr><td><code>nifi.security.keystore</code></td><td>\u5305\u542B\u670D\u52A1\u5668\u79C1\u94A5\u7684\u5BC6\u94A5\u5E93\u7684\u6587\u4EF6\u540D\u3002</td></tr><tr><td><code>nifi.security.keystoreType</code></td><td>\u5BC6\u94A5\u5E93\u7684\u7C7B\u578B\uFF0C\u5FC5\u987B\u4E3A<code>PKCS12</code>\u6216<code>JKS</code>\u3002JKS\u662F\u9996\u9009\u7C7B\u578B\uFF0CBCFKS\u548CPKCS12\u6587\u4EF6\u5C06\u901A\u8FC7BouncyCastle\u63D0\u4F9B\u7A0B\u5E8F\u52A0\u8F7D\u3002</td></tr><tr><td><code>nifi.security.keystorePasswd</code></td><td>\u5BC6\u94A5\u5E93\u7684\u5BC6\u7801\u3002</td></tr><tr><td><code>nifi.security.keyPasswd</code></td><td>\u5BC6\u94A5\u5E93\u4E2D\u8BC1\u4E66\u7684\u5BC6\u7801\u3002\u5982\u679C\u672A\u8BBE\u7F6E\uFF0C\u5C06\u4F7F\u7528<code>nifi.security.keystorePasswd</code>\u7684\u503C\u3002</td></tr><tr><td><code>nifi.security.truststore</code></td><td>\u4FE1\u4EFB\u5E93\u7684\u6587\u4EF6\u540D\uFF0C\u5C06\u7528\u4E8E\u6388\u6743\u90A3\u4E9B\u8FDE\u63A5\u5230NiFi\u7684\u7528\u6237\u3002\u6CA1\u6709Truststore\u7684\u5B89\u5168\u5B9E\u4F8B\u5C06\u62D2\u7EDD\u6240\u6709\u4F20\u5165\u8FDE\u63A5\u3002</td></tr><tr><td><code>nifi.security.truststoreType</code></td><td>\u4FE1\u4EFB\u5E93\u7684\u7C7B\u578B\u3002\u5FC5\u987B\u4E3A<code>PKCS12</code>\u6216<code>JKS</code>\u3002 JKS\u662F\u9996\u9009\u7C7B\u578B\uFF0CBCFKS\u548CPKCS12\u6587\u4EF6\u5C06\u901A\u8FC7BouncyCastle\u63D0\u4F9B\u7A0B\u5E8F\u52A0\u8F7D\u3002</td></tr><tr><td><code>nifi.security.truststorePasswd</code></td><td>\u4FE1\u4EFB\u5E93\u7684\u5BC6\u7801\u3002</td></tr></tbody></table><p>\u4E00\u65E6\u914D\u7F6E\u4E86\u4E0A\u8FF0\u5C5E\u6027\uFF0C\u6211\u4EEC\u5C31\u53EF\u4EE5\u901A\u8FC7HTTPS\u800C\u4E0D\u662FHTTP\u6765\u8BBF\u95EE\u7528\u6237\u754C\u9762\u3002\u8FD9\u662F\u901A\u8FC7\u8BBE\u7F6E<code>nifi.web.https.host</code>\u548C<code>nifi.web.https.port</code>\u5C5E\u6027\u6765\u5B9E\u73B0\u7684\u3002<code>nifi.web.https.host</code>\u5C5E\u6027\u6307\u793A\u670D\u52A1\u5668\u5E94\u5728\u54EA\u4E2A\u4E3B\u673A\u540D\u4E0A\u8FD0\u884C\u3002\u5982\u679C\u5E0C\u671B\u53EF\u4EE5\u4ECE\u6240\u6709\u7F51\u7EDC\u63A5\u53E3\u8BBF\u95EEHTTPS\u7684NiFi\uFF0C\u5219\u5E94\u4F7F\u7528<code>0.0.0.0</code>\u503C\u3002\u4E3A\u4E86\u5141\u8BB8\u7BA1\u7406\u5458\u5C06\u5E94\u7528\u7A0B\u5E8F\u914D\u7F6E\u4E3A\u4EC5\u5728\u7279\u5B9A\u7684\u7F51\u7EDC\u63A5\u53E3\u4E0A\u8FD0\u884C\uFF0C\u53EF\u4EE5\u6307\u5B9A<code>nifi.web.http.network.interface*</code>\u6216<code>nifi.web.https.network.interface*</code>\u5C5E\u6027\u3002</p><blockquote><p>\u542F\u7528HTTPS\u65F6\u91CD\u8981\u7684\u662F\u53D6\u6D88\u8BBE\u7F6E<code>nifi.web.http.port</code>\u5C5E\u6027\u3002NiFi\u4EC5\u652F\u6301\u5728HTTP<strong>\u6216</strong>HTTPS\u4E0A\u8FD0\u884C\uFF0C\u800C\u4E0D\u662F\u540C\u65F6\u4E24\u79CD\u90FD\u652F\u6301\u3002</p></blockquote><p>\u5F53\u6CA1\u6709\u914D\u7F6E\u9700\u8981\u5355\u5411SSL(\u4F8B\u5982LDAP\uFF0COpenId Connect\u7B49)\u7684\u66FF\u4EE3\u8BA4\u8BC1\u673A\u5236\u65F6\uFF0CNiFi\u7684Web\u670D\u52A1\u5668\u5C06\u8981\u6C42\u90A3\u4E9B\u6765\u8BBF\u95EENiFi\u7528\u6237\u754C\u9762\u7684\u7528\u6237\u53BB\u4F7F\u7528\u57FA\u4E8E\u8BC1\u4E66\u7684\u5BA2\u6237\u7AEF\u8EAB\u4EFD\u9A8C\u8BC1\u3002\u542F\u7528\u4E00\u4E2A\u8EAB\u4EFD\u9A8C\u8BC1\u673A\u5236\u4F1A\u5C06Web\u670D\u52A1\u5668\u914D\u7F6E\u4E3A\u57FA\u4E8EWANT\u8BC1\u4E66\u7684\u5BA2\u6237\u7AEF\u8EAB\u4EFD\u9A8C\u8BC1\u3002\u8FD9\u5C06\u5141\u8BB8\u5B83\u652F\u6301\u5177\u6709\u8BC1\u4E66\u7684\u7528\u6237\uFF0C\u800C\u6CA1\u6709\u8BC1\u4E66\u7684\u7528\u6237\u53EF\u4EE5\u4F7F\u7528\u51ED\u8BC1\u767B\u5F55\u3002\u6709\u5173\u8BE6\u7EC6\u4FE1\u606F\uFF0C\u8BF7\u53C2\u9605<a href="#%E7%94%A8%E6%88%B7%E8%AE%A4%E8%AF%81(User%20Authentication)">\u7528\u6237\u8BA4\u8BC1(User Authentication)</a></p><blockquote><p>Panda\u8BDA\u89E3\u8BFB\uFF1A\u6B64\u5904\u63CF\u8FF0\u6709\u5F02\u8BAE\uFF0C\u65B0\u7248\u672C\u63D0\u4F9B\u4E86\u9ED8\u8BA4\u7684\u7528\u6237\u8BA4\u8BC1\u673A\u5236(single user)\uFF0C\u800C\u4E0D\u662F\u57FA\u4E8E\u8BC1\u4E66\u7684\u8BA4\u8BC1\u4E86\u3002</p></blockquote><p>\u73B0\u5728\u7528\u6237\u754C\u9762\u5DF2\u7ECF\u53D7\u5230\u4FDD\u62A4\uFF0C\u63A5\u4E0B\u6765\u6211\u4EEC\u4E5F\u53EF\u4EE5\u8F7B\u677E\u4FDD\u62A4<code>Site-to-Site</code>\u7684\u8FDE\u63A5\u548C\u5185\u90E8\u96C6\u7FA4\u901A\u4FE1\uFF0C\u8FD9\u662F\u901A\u8FC7\u5206\u522B\u8BBE\u7F6E<code>nifi.remote.input.secure</code>\u548C<code>nifi.cluster.protocol.is.secure</code>\u5C5E\u6027\u4E3A<code>true</code>\u6765\u5B9E\u73B0\u7684\u3002\u8FD9\u4E9B\u901A\u4FE1\u603B\u662F\u9700\u8981\u53CC\u5411SSL\uFF0C\u56E0\u4E3A\u8282\u70B9\u5C06\u4F7F\u7528\u5176\u914D\u7F6E\u7684<code>keystore/truststore</code>\u8FDB\u884C\u9A8C\u8BC1\u3002</p><p>NiFi\u7684web SSL\u4E0A\u4E0B\u6587\u7684\u81EA\u52A8\u5237\u65B0\u53EF\u4EE5\u4F7F\u7528\u4EE5\u4E0B\u5C5E\u6027\u8FDB\u884C\u542F\u7528:</p><table><thead><tr><th>Property Name</th><th>Description</th></tr></thead><tbody><tr><td><code>nifi.security.autoreload.enabled</code></td><td>\u6307\u5B9A\u5982\u679C\u68C0\u6D4B\u5230\u5BC6\u94A5\u5B58\u50A8\u5E93\u548C\u4FE1\u4EFB\u5B58\u50A8\u5E93\u7684\u66F4\u65B0\uFF0C\u662F\u5426\u5E94\u81EA\u52A8\u91CD\u65B0\u52A0\u8F7DSSL\u4E0A\u4E0B\u6587\u3002\u7F3A\u7701\u503C\u4E3Afalse\u3002</td></tr><tr><td><code>nifi.security.autoreload.interval</code></td><td>\u6307\u5B9A\u68C0\u67E5\u5BC6\u94A5\u5B58\u50A8\u5E93\u548C\u4FE1\u4EFB\u5B58\u50A8\u5E93\u66F4\u65B0\u7684\u65F6\u95F4\u95F4\u9694\u3002\u4EC5\u5F53<code>nifi.security.autoreload.enabled</code>\u8BBE\u7F6E\u4E3Atrue\u65F6\u9002\u7528\u3002\u7F3A\u7701\u503C\u662F10\u79D2\u3002</td></tr></tbody></table><p>\u4E00\u65E6\u5C06<code>nifi.security.autoreload.enabled</code>\u5C5E\u6027\u8BBE\u7F6E\u4E3Atrue\uFF0C\u4EFB\u4F55\u5BF9\u914D\u7F6E\u7684\u5BC6\u94A5\u5B58\u50A8\u5E93\u548C\u4FE1\u4EFB\u5B58\u50A8\u5E93\u7684\u6709\u6548\u66F4\u6539\u90FD\u5C06\u5BFC\u81F4NiFi\u7684SSL\u4E0A\u4E0B\u6587\u88AB\u91CD\u65B0\u52A0\u8F7D\uFF0C\u4ECE\u800C\u5141\u8BB8\u5BA2\u6237\u7AEF\u83B7\u53D6\u8FD9\u4E9B\u66F4\u6539\u3002\u8FD9\u662F\u4E3A\u4E86\u5141\u8BB8\u5728\u5BC6\u94A5\u5E93\u4E2D\u66F4\u65B0\u8FC7\u671F\u7684\u8BC1\u4E66\uFF0C\u5E76\u5728\u4FE1\u4EFB\u5E93\u4E2D\u6DFB\u52A0\u65B0\u7684\u53D7\u4FE1\u4EFB\u7684\u8BC1\u4E66\uFF0C\u800C\u4E0D\u9700\u8981\u91CD\u542FNiFi\u670D\u52A1\u5668\u3002</p><blockquote><p>\u5BF9\u4EFB\u4F55<code>nifi.security.keystore*</code>\u6216\u8005<code>nifi.security.truststore* </code>\u7684\u66F4\u6539\u90FD\u4E0D\u4F1A\u88AB\u81EA\u52A8\u5237\u65B0\u903B\u8F91\u83B7\u53D6\uFF0C\u5B83\u5047\u5B9A\u5BC6\u7801\u548C\u5B58\u50A8\u8DEF\u5F84\u4FDD\u6301\u4E0D\u53D8\u3002</p></blockquote><h3 id="tls\u751F\u6210\u5DE5\u5177\u5305-tls-generation-toolkit" tabindex="-1"><a class="header-anchor" href="#tls\u751F\u6210\u5DE5\u5177\u5305-tls-generation-toolkit" aria-hidden="true">#</a> TLS\u751F\u6210\u5DE5\u5177\u5305(TLS Generation Toolkit)</h3><p>\u4E3A\u4E86\u4FBF\u4E8ENiFi\u7684\u5B89\u5168\u8BBE\u7F6E\uFF0C\u4F60\u53EF\u4EE5\u4F7F\u7528<code>tls-toolkit</code>\u547D\u4EE4\u884C\u4F7F\u7A0B\u5E8F\u81EA\u52A8\u751F\u6210\u6240\u9700\u7684<code>keystores</code>\uFF0C <code>truststore</code>\u548C\u76F8\u5173\u914D\u7F6E\u6587\u4EF6\u3002\u8FD9\u5BF9\u4E8E\u4FDD\u62A4\u591A\u4E2ANiFi\u8282\u70B9\u7279\u522B\u6709\u7528\uFF0C\u8FD9\u53EF\u80FD\u662F\u4E00\u4E2A\u5355\u8C03\u4E4F\u5473\u4E14\u5BB9\u6613\u51FA\u9519\u7684\u8FC7\u7A0B\u3002\u6709\u5173\u66F4\u591A\u4FE1\u606F\uFF0C\u8BF7\u53C2\u9605<a href="./7-ToolkitGuide">NiFi\u5DE5\u5177\u5305\u6307\u5357\u4E2D</a>\u7684<a href="./7-ToolkitGuide#TLS%20Toolkit">TLS\u5DE5\u5177\u5305</a>\u90E8\u5206\u3002\u76F8\u5173\u4E3B\u9898\u5305\u62EC:</p><ul><li><a href="./7-ToolkitGuide#%E9%80%9A%E9%85%8D%E7%AC%A6%E8%AF%81%E4%B9%A6(Wildcard%20Certificates)">\u901A\u914D\u7B26\u8BC1\u4E66(Wildcard Certificates)</a></li><li><a href="./7-ToolkitGuide#%E6%93%8D%E4%BD%9C%E6%A8%A1%E5%BC%8F(Operation%20Modes)">\u64CD\u4F5C\u6A21\u5F0F:\u72EC\u7ACB\u548C\u5BA2\u6237\u7AEF/\u670D\u52A1\u5668</a></li><li><a href="./7-ToolkitGuide#%E4%BD%BF%E7%94%A8%E7%8E%B0%E6%9C%89%E7%9A%84Intermediate%20CA(Using%20An%20Existing%20Intermediate%20Certificate%20Authority%20)">\u4F7F\u7528\u73B0\u6709\u7684Intermediate CA</a></li><li><a href="./7-ToolkitGuide#%E9%A2%9D%E5%A4%96%E7%9A%84%E8%AF%81%E4%B9%A6%E5%91%BD%E4%BB%A4(Additional%20Certificate%20Commands)">\u989D\u5916\u7684\u8BC1\u4E66\u547D\u4EE4</a></li></ul><h3 id="tls\u5BC6\u7801\u5957\u4EF6-tls-cipher-suites" tabindex="-1"><a class="header-anchor" href="#tls\u5BC6\u7801\u5957\u4EF6-tls-cipher-suites" aria-hidden="true">#</a> TLS\u5BC6\u7801\u5957\u4EF6(TLS Cipher Suites)</h3>`,67),ne=t("Java\u8FD0\u884C\u65F6\u73AF\u5883\u63D0\u4F9B\u4E86\u6307\u5B9A\u670D\u52A1\u5668\u5728\u63A5\u53D7\u5BA2\u6237\u7AEF\u8FDE\u63A5\u65F6\u4F7F\u7528\u7684\u81EA\u5B9A\u4E49TLS\u52A0\u5BC6\u5957\u4EF6\u7684\u80FD\u529B\u3002\u8BF7"),se={href:"https://java.com/en/configure_crypto.html",target:"_blank",rel:"noopener noreferrer"},oe=t("\u70B9\u51FB\u8FD9\u91CC"),ae=t("\u4E86\u89E3\u66F4\u591A\u4FE1\u606F\u3002\u8981\u5728NiFi web\u670D\u52A1\u4E2D\u4F7F\u7528\u6B64\u7279\u6027\uFF0C\u53EF\u4EE5\u8BBE\u7F6E\u4EE5\u4E0BNiFi\u5C5E\u6027:"),ie=o("<table><thead><tr><th>Property Name</th><th>Description</th></tr></thead><tbody><tr><td><code>nifi.web.https.ciphersuites.include</code></td><td>\u4E00\u7EC4\u53EF\u4F9B\u4F20\u5165\u7684\u5BA2\u6237\u7AEF\u8FDE\u63A5\u4F7F\u7528\u7684\u5BC6\u7801\u3002\u66FF\u6362\u7CFB\u7EDF\u9ED8\u8BA4\u503C(\u5982\u679C\u8BBE\u7F6E)\u3002</td></tr><tr><td><code>nifi.web.https.ciphersuites.exclude</code></td><td>\u4E00\u7EC4\u4E0D\u80FD\u88AB\u4F20\u5165\u7684\u5BA2\u6237\u7AEF\u8FDE\u63A5\u4F7F\u7528\u7684\u5BC6\u7801\u3002\u8FC7\u6EE4\u53EF\u7528\u7684\u5BC6\u7801(\u5982\u679C\u8BBE\u7F6E)\u3002</td></tr></tbody></table>",1),re=t("\u6BCF\u4E2A\u5C5E\u6027\u5E94\u8BE5\u91C7\u7528\u9017\u53F7\u5206\u9694\u7684\u5E38\u89C1\u5BC6\u7801\u540D\u5217\u8868\u7684\u5F62\u5F0F\uFF0C\u5982"),de={href:"https://docs.oracle.com/javase/8/docs/technotes/guides/security/StandardNames.html#ciphersuites",target:"_blank",rel:"noopener noreferrer"},ce=t("\u8FD9\u91CC"),pe=t("\u6240\u6307\u5B9A\u7684\u3002\u4E5F\u53EF\u4EE5\u6307\u5B9A\u6B63\u5219\u8868\u8FBE\u5F0F(\u4F8B\u5982"),le=e("code",null,"^.*GCM_SHA256$",-1),ue=t(")\u3002"),he=e("p",null,"\u8BED\u4E49\u5339\u914D\u4F7F\u7528\u4EE5\u4E0BJetty api:",-1),ge={href:"https://www.eclipse.org/jetty/javadoc/jetty-9/org/eclipse/jetty/util/ssl/SslContextFactory.html#setIncludeCipherSuites(java.lang.String...)",target:"_blank",rel:"noopener noreferrer"},me=t("SslContextFactory.setIncludeCipherSuites()"),ve={href:"https://www.eclipse.org/jetty/javadoc/jetty-9/org/eclipse/jetty/util/ssl/SslContextFactory.html#setExcludeCipherSuites(java.lang.String...)",target:"_blank",rel:"noopener noreferrer"},be=t("SslContextFactory.setExcludeCipherSuites()"),ke=e("h2",{id:"\u7528\u6237\u8BA4\u8BC1-user-authentication",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#\u7528\u6237\u8BA4\u8BC1-user-authentication","aria-hidden":"true"},"#"),t(" \u7528\u6237\u8BA4\u8BC1(User Authentication)")],-1),fe=t("NiFi\u652F\u6301\u901A\u8FC7"),ye=e("code",null,"\u5BA2\u6237\u7AEF\u8BC1\u4E66",-1),_e=t("\uFF0C"),Fe=e("code",null,"\u7528\u6237\u540D/\u5BC6\u7801",-1),qe=t("\uFF0C"),xe=e("code",null,"Apache Knox",-1),Ne=t("\u6216"),Pe={href:"http://openid.net/connect",target:"_blank",rel:"noopener noreferrer"},Ae=t("OpenId Connect"),Se=t("\u8FDB\u884C\u7528\u6237\u8EAB\u4EFD\u9A8C\u8BC1\u3002"),Te=o('<p>\u7528\u6237\u540D/\u5BC6\u7801\u7684\u9A8C\u8BC1\u662F\u7531<code>Login Identity Provider</code>\u6267\u884C\u7684\uFF0C<code>Login Identity Provider</code>\u662F\u4E00\u79CD\u53EF\u63D2\u62D4\u7684\u673A\u5236\u3002\u5728<code>nifi.properties</code>\u6587\u4EF6\u4E2D\u914D\u7F6E\u8981\u4F7F\u7528\u7684<code>Login Identity Provider</code>\u3002\u76EE\u524D\u7684NiFi\u5728<code>Login Identity Provider</code>\u63D0\u4F9B\u4E86\u5E26\u6709\u7528\u6237\u540D/\u5BC6\u7801\u767B\u9646\u7684\u8BA4\u8BC1\u9009\u9879\uFF1A<a href="#%E5%8D%95%E7%94%A8%E6%88%B7(Single%20User)">Single User</a>\uFF0C<a href="#%E8%BD%BB%E9%87%8F%E7%BA%A7%E7%9B%AE%E5%BD%95%E8%AE%BF%E9%97%AE%E5%8D%8F%E8%AE%AE(LDAP)">\u8F7B\u91CF\u7EA7\u76EE\u5F55\u8BBF\u95EE\u534F\u8BAE(LDAP)</a>\u548C<a href="#Kerberos">Kerberos</a>\u3002</p><p><code>nifi.login.identity.provider.configuration.file</code>\u5C5E\u6027\u6307\u5B9A<code>Login Identity Provider</code>\u7684\u914D\u7F6E\u6587\u4EF6\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u6B64\u5C5E\u6027\u8BBE\u7F6E\u4E3A<code>./conf/login-identity-providers.xml</code>\u3002</p><p><code>nifi.security.user.login.identity.provider</code>\u5C5E\u6027\u6307\u793A\u5E94\u4F7F\u7528\u54EA\u4E2A\u5DF2\u914D\u7F6E\u7684<code>Login Identity Provider</code>\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u914D\u7F6E\u4E3A<code>single-user-provider</code>\uFF0C\u4F7F\u7528\u7684\u662F\u81EA\u52A8\u751F\u6210\u7684\u7528\u6237\u540D\u5BC6\u7801\u3002</p><p>\u5728<code>OpenId Connect</code>\u8EAB\u4EFD\u9A8C\u8BC1\u671F\u95F4\uFF0CNiFi\u4F1A\u5728\u8FD4\u56DENiFi\u4E4B\u524D\u5C06\u7528\u6237\u91CD\u5B9A\u5411\u5230\u63D0\u4F9B\u5546\u7684\u767B\u5F55\u9875\u9762\u3002\u7136\u540E\uFF0CNiFi\u5C06\u8C03\u7528\u7B2C\u4E09\u65B9\u63D0\u4F9B\u5546\u4EE5\u83B7\u53D6\u7528\u6237\u8EAB\u4EFD\u3002</p><p>\u5728<code>Apache Knox</code>\u8EAB\u4EFD\u9A8C\u8BC1\u671F\u95F4\uFF0CNiFi\u5C06\u91CD\u5B9A\u5411\u7528\u6237\u4EE5\u4F7F\u7528<code>Apache Knox</code>\u767B\u5F55\uFF0C\u7136\u540E\u518D\u8FD4\u56DENiFi\u3002NiFi\u5C06\u5728\u8EAB\u4EFD\u9A8C\u8BC1\u671F\u95F4\u9A8C\u8BC1<code>Apache Knox</code>\u4EE4\u724C\u3002</p><blockquote><p>NiFi\u53EA\u80FD\u914D\u7F6E\u4E3A<code>\u7528\u6237\u540D/\u5BC6\u7801</code>\uFF0C<code>OpenId Connect</code>\u6216<code>Apache Knox</code>\u4E2D\u7684\u4E00\u4E2A\u3002\u5B83\u4E0D\u652F\u6301\u540C\u65F6\u8FD0\u884C\u591A\u4E2A\u3002\u5982\u679C\u6CA1\u6709\u914D\u7F6E\u8FD9\u4E9B\uFF0C\u5219NiFi\u5C06\u9700\u8981<code>\u5BA2\u6237\u7AEF\u8BC1\u4E66</code>\u6765\u901A\u8FC7HTTPS\u5BF9\u7528\u6237\u8FDB\u884C\u8EAB\u4EFD\u9A8C\u8BC1\u3002</p></blockquote>',6),we=t("\u9664\u975E\u5C06"),Ee=e("code",null,"nifi.security.allow.anonymous.authentication",-1),Ue=t("\u8BBE\u7F6E\u4E3A"),Ce=e("code",null,"true",-1),Le=t("\uFF0C\u5426\u5219\u7528\u6237\u4E0D\u80FD\u4F7F\u7528\u5B89\u5168\u7684NiFi\u5B9E\u4F8B\u8FDB\u884C\u533F\u540D\u8BA4\u8BC1\u3002\u5982\u679C\u8BBE\u7F6E\u4E3Atrue\u4E86\uFF0CNiFi\u8FD8\u5FC5\u987B\u914D\u7F6E\u4E00\u4E2A\u652F\u6301\u6388\u6743\u533F\u540D\u7528\u6237\u7684\u6388\u6743\u5668\uFF0C\u76EE\u524D\uFF0CNiFi\u6CA1\u6709\u53D1\u5E03\u8FC7\u8FD9\u6837\u7684\u6388\u6743\u5668\uFF0C\u4F46\u672A\u6765\u4F1A\u52AA\u529B\u89E3\u51B3\u8FD9\u4E9B\u95EE\u9898\u7684("),Ie={href:"https://issues.apache.org/jira/browse/NiFi-2730",target:"_blank",rel:"noopener noreferrer"},Ke=t("NiFi-2730"),ze=t(")\u3002"),De=o(`<p>\u5728\u8BBE\u7F6E<code>nifi.security.allow.anonymous.authentication</code>\u65F6\u9700\u8981\u8003\u8651\u4E09\u4E2A\u573A\u666F\u3002\u5F53\u7528\u6237\u76F4\u63A5\u8C03\u7528\u7AEF\u70B9\u800C\u6CA1\u6709\u5C1D\u8BD5\u8EAB\u4EFD\u9A8C\u8BC1\u65F6\uFF0C<code>nifi.security.allow.anonymous.authentication</code>\u5C06\u63A7\u5236\u8BF7\u6C42\u662F\u88AB\u8EAB\u4EFD\u9A8C\u8BC1\u901A\u8FC7\u8FD8\u662F\u88AB\u62D2\u7EDD\u3002\u53E6\u5916\u4E24\u79CD\u60C5\u51B5\u662F\u8BF7\u6C42\u88AB\u4EE3\u7406\u65F6\uFF0C\u53EF\u4EE5\u662F\u7531NiFi\u8282\u70B9(\u4F8B\u5982NiFi\u96C6\u7FA4\u4E2D\u7684\u8282\u70B9)\u4EE3\u7406\uFF0C\u4E5F\u53EF\u80FD\u662F\u7531\u4EE3\u7406\u533F\u540D\u7528\u6237\u8BF7\u6C42\u7684\u72EC\u7ACB\u4EE3\u7406\u3002\u5728\u8FD9\u4E9B\u4EE3\u7406\u573A\u666F\u4E2D\uFF0C<code>nifi.security.allow.anonymous.authentication</code>\u5C06\u63A7\u5236\u8BF7\u6C42\u662F\u88AB\u8EAB\u4EFD\u9A8C\u8BC1\u901A\u8FC7\u8FD8\u662F\u88AB\u62D2\u7EDD\u3002\u5728\u6240\u6709\u8FD9\u4E09\u4E2A\u573A\u666F\u4E2D\uFF0C\u5982\u679C\u8BF7\u6C42\u7ECF\u8FC7\u8EAB\u4EFD\u9A8C\u8BC1\uFF0C\u5B83\u968F\u540E\u5C06\u57FA\u4E8E\u6240\u8BF7\u6C42\u7684\u8D44\u6E90\u63A5\u53D7\u6B63\u5E38\u6388\u6743\u3002</p><blockquote><p>NiFi\u4E0D\u901A\u8FC7HTTP\u6267\u884C\u7528\u6237\u8EAB\u4EFD\u9A8C\u8BC1\u3002\u4F7F\u7528HTTP\uFF0C\u6240\u6709\u7528\u6237\u90FD\u5C06\u88AB\u6388\u4E88\u6240\u6709\u89D2\u8272\uFF0C\u62E5\u6709\u6240\u6709\u6743\u9650\u3002</p></blockquote><h3 id="\u5355\u7528\u6237-single-user" tabindex="-1"><a class="header-anchor" href="#\u5355\u7528\u6237-single-user" aria-hidden="true">#</a> \u5355\u7528\u6237(Single User)</h3><p>\u9ED8\u8BA4\u7684<code>Single User Login Identity Provider</code>\u652F\u6301\u81EA\u52A8\u751F\u6210\u7528\u6237\u540D\u548C\u5BC6\u7801\u3002</p><p>\u751F\u6210\u7684\u7528\u6237\u540D\u5C06\u662F\u753136\u4E2A\u5B57\u7B26\u7EC4\u6210\u7684\u968F\u673AUUID\u3002\u751F\u6210\u7684\u5BC6\u7801\u5C06\u662F\u4E00\u4E2A\u753132\u4E2A\u5B57\u7B26\u7EC4\u6210\u7684\u968F\u673A\u5B57\u7B26\u4E32\uFF0C\u5E76<code>bcrypt</code>\u54C8\u5E0C\u3002</p><p><code>nifi.properties</code>\u4E2D\u7684\u9ED8\u8BA4\u914D\u7F6E\u662F\u542F\u7528\u4E86\u5355\u7528\u6237\u8EAB\u4EFD\u9A8C\u8BC1:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>nifi.security.user.login.identity.provider=single-user-provider
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u9ED8\u8BA4\u7684<code>login-identity-providers.xml</code>\u5305\u542B\u4E00\u4E2A\u7A7A\u767D\u7684<code>provider</code>:</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>provider</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>identifier</span><span class="token punctuation">&gt;</span></span>single-user-provider<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>identifier</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span><span class="token punctuation">&gt;</span></span>org.apache.nifi.authentication.single.user.SingleUserLoginIdentityProvider<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>class</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Username<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Password<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>provider</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4F7F\u7528\u4E0B\u9762\u7684\u547D\u4EE4\u53EF\u4EE5\u4FEE\u6539\u7528\u6237\u540D\u5BC6\u7801</p><div class="language-powershell ext-powershell line-numbers-mode"><pre class="language-powershell"><code>$ <span class="token punctuation">.</span><span class="token operator">/</span>bin/nifi<span class="token punctuation">.</span>sh <span class="token function">set-single</span><span class="token operator">-</span>user-credentials &lt;username&gt; &lt;password&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="\u8F7B\u91CF\u7EA7\u76EE\u5F55\u8BBF\u95EE\u534F\u8BAE-ldap" tabindex="-1"><a class="header-anchor" href="#\u8F7B\u91CF\u7EA7\u76EE\u5F55\u8BBF\u95EE\u534F\u8BAE-ldap" aria-hidden="true">#</a> \u8F7B\u91CF\u7EA7\u76EE\u5F55\u8BBF\u95EE\u534F\u8BAE(LDAP)</h3><p>\u4EE5\u4E0B\u662F\u914D\u7F6E<code>Login Identity Provider</code>\u7684\u793A\u4F8B\u548C\u8BF4\u660E\uFF0C\u8BE5<code>Login Identity Provider</code>\u4E0E<code>Directory Server</code>\u96C6\u6210\u4EE5\u5BF9\u7528\u6237\u8FDB\u884C\u8EAB\u4EFD\u9A8C\u8BC1\u3002</p><p>\u5728<code>nifi.properties</code>\u4E2D\u8BBE\u7F6E\u4EE5\u4E0B\u5185\u5BB9\u4EE5\u542F\u7528<code>LDAP username/password</code>\u8EAB\u4EFD\u9A8C\u8BC1:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>nifi.security.user.login.identity.provider=ldap-provider
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4FEE\u6539<code>login-identity-providers.xml</code>\u4EE5\u542F\u7528<code>ldap-provider</code>\u3002\u4EE5\u4E0B\u662F\u6587\u4EF6\u4E2D\u63D0\u4F9B\u7684\u793A\u4F8B:</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>provider</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>identifier</span><span class="token punctuation">&gt;</span></span>ldap-provider<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>identifier</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span><span class="token punctuation">&gt;</span></span>org.apache.nifi.ldap.LdapProvider<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>class</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Authentication Strategy<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>START_TLS<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Manager DN<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Manager Password<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>TLS - Keystore<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>TLS - Keystore Password<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>TLS - Keystore Type<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>TLS - Truststore<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>TLS - Truststore Password<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>TLS - Truststore Type<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>TLS - Client Auth<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>TLS - Protocol<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>TLS - Shutdown Gracefully<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Referral Strategy<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>FOLLOW<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Connect Timeout<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>10 secs<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Read Timeout<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>10 secs<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Url<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>User Search Base<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>User Search Filter<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Identity Strategy<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>USE_DN<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Authentication Expiration<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>12 hours<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>provider</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>ldap-provider</code>\u5177\u6709\u4EE5\u4E0B\u5C5E\u6027:</p><table><thead><tr><th>\u5C5E\u6027\u540D\u79F0</th><th>\u63CF\u8FF0</th></tr></thead><tbody><tr><td><code>Authentication Expiration</code></td><td>\u7528\u6237\u8EAB\u4EFD\u9A8C\u8BC1\u6709\u6548\u671F\u7684\u6301\u7EED\u65F6\u95F4\u3002\u5982\u679C\u7528\u6237\u4ECE\u672A\u6CE8\u9500\uFF0C\u5219\u9700\u8981\u5728\u6B64\u6301\u7EED\u65F6\u95F4\u4E4B\u540E\u91CD\u65B0\u767B\u5F55\u3002</td></tr><tr><td><code>Authentication Strategy</code></td><td>\u5982\u4F55\u9A8C\u8BC1\u4E0ELDAP\u670D\u52A1\u5668\u7684\u8FDE\u63A5\u3002\u53EF\u80FD\u7684\u503C\u662F<code>ANONYMOUS</code>\uFF0C<code>SIMPLE</code>\uFF0C<code>LDAPS</code>\uFF0C\u6216<code>START_TLS</code>\u3002</td></tr><tr><td><code>Manager DN</code></td><td>\u7528\u4E8E\u7ED1\u5B9A\u5230LDAP\u670D\u52A1\u5668\u4EE5\u641C\u7D22\u7528\u6237\u7684\u7BA1\u7406\u5668\u7684DN\u3002</td></tr><tr><td><code>Manager Password</code></td><td>\u7528\u4E8E\u7ED1\u5B9A\u5230LDAP\u670D\u52A1\u5668\u4EE5\u641C\u7D22\u7528\u6237\u7684\u7BA1\u7406\u5668\u7684\u5BC6\u7801\u3002</td></tr><tr><td><code>TLS - Keystore</code></td><td>\u4F7F\u7528LDAPS\u6216START_TLS\u8FDE\u63A5\u5230LDAP\u65F6\u4F7F\u7528\u7684\u5BC6\u94A5\u5E93\u7684\u8DEF\u5F84\u3002</td></tr><tr><td><code>TLS - Keystore Password</code></td><td>\u4F7F\u7528LDAPS\u6216START_TLS\u8FDE\u63A5\u5230LDAP\u65F6\u4F7F\u7528\u7684\u5BC6\u94A5\u5E93\u7684\u5BC6\u7801\u3002</td></tr><tr><td><code>TLS - Keystore Type</code></td><td>\u4F7F\u7528LDAPS\u6216START_TLS(\u5373<code>JKS</code>\u6216<code>PKCS12</code>)\u8FDE\u63A5\u5230LDAP\u65F6\u4F7F\u7528\u7684\u5BC6\u94A5\u5E93\u7684\u7C7B\u578B\u3002</td></tr><tr><td><code>TLS - Truststore</code></td><td>\u4F7F\u7528LDAPS\u6216START_TLS\u8FDE\u63A5\u5230LDAP\u65F6\u4F7F\u7528\u7684Truststore\u7684\u8DEF\u5F84\u3002</td></tr><tr><td><code>TLS - Truststore Password</code></td><td>\u4F7F\u7528LDAPS\u6216START_TLS\u8FDE\u63A5\u5230LDAP\u65F6\u4F7F\u7528\u7684Truststore\u7684\u5BC6\u7801\u3002</td></tr><tr><td><code>TLS - Truststore Type</code></td><td>\u4F7F\u7528LDAPS\u6216START_TLS(\u5373<code>JKS</code>\u6216<code>PKCS12</code>)\u8FDE\u63A5\u5230LDAP\u65F6\u4F7F\u7528\u7684Truststore\u7684\u7C7B\u578B\u3002</td></tr><tr><td><code>TLS - Client Auth</code></td><td>\u4F7F\u7528LDAPS\u6216START_TLS\u8FDE\u63A5\u5230LDAP\u65F6\u7684\u5BA2\u6237\u7AEF\u8EAB\u4EFD\u9A8C\u8BC1\u7B56\u7565\u3002\u53EF\u80FD\u7684\u503C\u662F<code>REQUIRED</code>\uFF0C<code>WANT</code>\uFF0C<code>NONE</code>\u3002</td></tr><tr><td><code>TLS - Protocol</code></td><td>\u4F7F\u7528LDAPS\u6216START_TLS\u8FDE\u63A5\u5230LDAP\u65F6\u4F7F\u7528\u7684\u534F\u8BAE\u3002(\u5373<code>TLS</code>\uFF0C<code>TLSv1.1</code>\uFF0C<code>TLSv1.2</code>\uFF0C\u7B49\u7B49)\u3002</td></tr><tr><td><code>TLS - Shutdown Gracefully</code></td><td>\u6307\u5B9A\u5728\u5173\u95ED\u76EE\u6807\u4E0A\u4E0B\u6587\u4E4B\u524D\u662F\u5426\u5E94\u6B63\u5E38\u5173\u95EDTLS\u3002\u9ED8\u8BA4\u4E3Afalse\u3002</td></tr><tr><td><code>Referral Strategy</code></td><td>\u5904\u7406\u63A8\u8350\u7684\u7B56\u7565\u3002\u53EF\u80FD\u7684\u503C\u662F<code>FOLLOW</code>\uFF0C<code>IGNORE</code>\uFF0C<code>THROW</code>\u3002</td></tr><tr><td><code>Connect Timeout</code></td><td>\u8FDE\u63A5\u8D85\u65F6\u7684\u6301\u7EED\u65F6\u95F4\u3002(\u5373<code>10 secs</code>)\u3002</td></tr><tr><td><code>Read Timeout</code></td><td>\u8BFB\u53D6\u8D85\u65F6\u7684\u6301\u7EED\u65F6\u95F4\u3002(\u5373<code>10 secs</code>)\u3002</td></tr><tr><td><code>Url</code></td><td>\u4EE5\u7A7A\u683C\u5206\u9694\u7684LDAP\u670D\u52A1\u5668\u7684URL\u5217\u8868(\u5373<code>ldap://&lt;hostname&gt;:&lt;port&gt;</code>)\u3002</td></tr><tr><td><code>User Search Base</code></td><td>\u7528\u4E8E\u641C\u7D22\u7528\u6237\u7684\u57FA\u672CDN(\u5373<code>CN=Users\uFF0CDC=example\uFF0CDC=com</code>)\u3002</td></tr><tr><td><code>User Search Filter</code></td><td>\u8FC7\u6EE4\u641C\u7D22\u7528\u6237<code>User Search Base</code>\u3002(\u5373<code>sAMAccountName={0}</code>)\u3002\u7528\u6237\u6307\u5B9A\u7684\u540D\u79F0\u5C06\u63D2\u5165&quot;{0}&quot;\u3002</td></tr><tr><td><code>Identity Strategy</code></td><td>\u8BC6\u522B\u7528\u6237\u7684\u7B56\u7565\u3002\u53EF\u80FD\u7684\u503C\u662F<code>USE_DN</code>\u548C<code>USE_USERNAME</code>\u3002\u7F3A\u5C11\u6B64\u5C5E\u6027\u7684\u9ED8\u8BA4\u529F\u80FD\u662FUSE_DN\uFF0C\u4EE5\u4FDD\u6301\u5411\u540E\u517C\u5BB9\u6027\u3002<code>USE_DN</code>\u5C06\u5C3D\u53EF\u80FD\u4F7F\u7528\u7528\u6237\u6761\u76EE\u7684\u5B8C\u6574DN\u3002<code>USE_USERNAME</code>\u5C06\u4F7F\u7528\u7528\u6237\u767B\u5F55\u7684\u7528\u6237\u540D\u3002</td></tr></tbody></table><blockquote><p>\u8981\u4F7F<code>nifi.properties</code>\u548C<code>login-identity-providers.xml</code>\u7684\u66F4\u6539\u751F\u6548\uFF0C\u9700\u8981\u91CD\u65B0\u542F\u52A8NiFi\u3002\u5982\u679CNiFi\u662F\u96C6\u7FA4\u7684\uFF0C\u6240\u6709\u8282\u70B9\u4E0A\u7684\u914D\u7F6E\u6587\u4EF6\u5FC5\u987B\u76F8\u540C\u3002</p></blockquote><h3 id="kerberos" tabindex="-1"><a class="header-anchor" href="#kerberos" aria-hidden="true">#</a> Kerberos</h3><p>\u4EE5\u4E0B\u662F\u914D\u7F6E\u4E0E<code>Kerberos Key Distribution Center (KDC)</code>\u96C6\u6210\u4EE5\u9A8C\u8BC1\u7528\u6237\u8EAB\u4EFD\u7684<code>Login Identity Provider</code>\u7684\u793A\u4F8B\u548C\u8BF4\u660E\u3002</p><p>\u5728<code>nifi.properties</code>\u4E2D\u8BBE\u7F6E\u4EE5\u4E0B\u5185\u5BB9\u4EE5\u542F\u7528<code>Kerberos username/password</code>\u8EAB\u4EFD\u9A8C\u8BC1\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>nifi.security.user.login.identity.provider=kerberos-provider
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u4FEE\u6539<code>login-identity-providers.xml</code>\u4EE5\u542F\u7528<code>kerberos-provider</code>\u3002\u4EE5\u4E0B\u662F\u6587\u4EF6\u4E2D\u63D0\u4F9B\u7684\u793A\u4F8B:</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>provider</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>identifier</span><span class="token punctuation">&gt;</span></span>kerberos-provider<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>identifier</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span><span class="token punctuation">&gt;</span></span>org.apache.nifi.kerberos.KerberosProvider<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>class</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Default Realm<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>nifi.APACHE.ORG<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Authentication Expiration<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>12 hours<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>provider</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>kerberos-provider</code>\u5177\u6709\u4EE5\u4E0B\u5C5E\u6027:</p><table><thead><tr><th>Property Name</th><th>Description</th></tr></thead><tbody><tr><td><code>Default Realm</code></td><td>\u5F53\u7528\u6237\u8F93\u5165\u4E0D\u5B8C\u6574\u7684\u7528\u6237\u4E3B\u4F53\u65F6\u8981\u63D0\u4F9B\u7684\u9ED8\u8BA4\u57DF (i.e. nifi.APACHE.ORG).</td></tr><tr><td><code>Authentication Expiration</code></td><td>\u7528\u6237\u8BA4\u8BC1\u7684\u6709\u6548\u65F6\u95F4\u3002\u5982\u679C\u7528\u6237\u4ECE\u672A\u767B\u51FA\uFF0C\u5219\u5C06\u8981\u6C42\u4ED6\u4EEC\u5728\u8FD9\u6BB5\u65F6\u95F4\u540E\u91CD\u65B0\u767B\u5F55\u3002</td></tr></tbody></table><p>\u5982\u679C\u8981\u901A\u8FC7Kerberos\u8FDB\u884C\u5355\u70B9\u767B\u5F55\u8BBF\u95EE\u8BF7\u53C2\u89C1<a href="#Kerberos%E6%9C%8D%E5%8A%A1(Kerberos%20Service)">Kerberos\u670D\u52A1(Kerberos Service)</a>\u3002</p><blockquote><p>\u5BF9\u4E8E<code>nifi.properties</code>\u548C<code>login-identity-providers.xml</code>\u7684\u66F4\u6539\u8981\u751F\u6548\uFF0C\u9700\u8981\u91CD\u65B0\u542F\u52A8NiFi\u3002NiFi\u96C6\u7FA4\u65F6\uFF0C\u6240\u6709\u8282\u70B9\u7684\u914D\u7F6E\u6587\u4EF6\u5FC5\u987B\u4E00\u81F4\u3002</p></blockquote><h3 id="openid-connect" tabindex="-1"><a class="header-anchor" href="#openid-connect" aria-hidden="true">#</a> OpenId Connect</h3><p>\u8981\u901A\u8FC7OpenId Connect\u542F\u7528\u8EAB\u4EFD\u9A8C\u8BC1\uFF0C\u5FC5\u987B\u5728<code>nifi.properties</code>\u4E2D\u914D\u7F6E\u4EE5\u4E0B\u5C5E\u6027\u3002</p><table><thead><tr><th>Property Name</th><th>Description</th></tr></thead><tbody><tr><td><code>nifi.security.user.oidc.discovery.url</code></td><td>The discovery URL for the desired OpenId Connect Provider (link:http://openid.net/specs/openid-connect-discovery-1_0.html[http://openid.net/specs/openid-connect-discovery-1_0.html^]).</td></tr><tr><td><code>nifi.security.user.oidc.connect.timeout</code></td><td>Connect timeout when communicating with the OpenId Connect Provider.</td></tr><tr><td><code>nifi.security.user.oidc.read.timeout</code></td><td>Read timeout when communicating with the OpenId Connect Provider.</td></tr><tr><td><code>nifi.security.user.oidc.client.id</code></td><td>The client id for NiFi after registration with the OpenId Connect Provider.</td></tr><tr><td><code>nifi.security.user.oidc.client.secret</code></td><td>The client secret for NiFi after registration with the OpenId Connect Provider.</td></tr><tr><td><code>nifi.security.user.oidc.preferred.jwsalgorithm</code></td><td>The preferred algorithm for validating identity tokens. If this value is blank\uFF0C it will default to <code>RS256</code> which is required to be supported</td></tr><tr><td>by the OpenId Connect Provider according to the specification. If this value is <code>HS256</code>\uFF0C <code>HS384</code>\uFF0C or <code>HS512</code>\uFF0C NiFi will attempt to validate HMAC protected tokens using the specified client secret.</td><td></td></tr><tr><td>If this value is <code>none</code>\uFF0C NiFi will attempt to validate unsecured/plain tokens. Other values for this algorithm will attempt to parse as an RSA or EC algorithm to be used in conjunction with the</td><td></td></tr><tr><td>JSON Web Key (JWK) provided through the jwks_uri in the metadata found at the discovery URL.</td><td></td></tr><tr><td><code>nifi.security.user.oidc.additional.scopes</code></td><td>Comma separated scopes that are sent to OpenId Connect Provider in addition to <code>openid</code> and <code>email</code>.</td></tr><tr><td><code>nifi.security.user.oidc.claim.identifying.user</code></td><td>Claim that identifies the user to be logged in; default is <code>email</code>. May need to be requested via the <code>nifi.security.user.oidc.additional.scopes</code> before usage.</td></tr><tr><td><code>nifi.security.user.oidc.fallback.claims.identifying.user</code></td><td>Comma separated possible fallback claims used to identify the user in case <code>nifi.security.user.oidc.claim.identifying.user</code> claim is not present for the login user.</td></tr></tbody></table><h3 id="saml" tabindex="-1"><a class="header-anchor" href="#saml" aria-hidden="true">#</a> SAML</h3><p>\u8981\u901A\u8FC7SAML\u542F\u7528\u8EAB\u4EFD\u9A8C\u8BC1\uFF0C\u5FC5\u987B\u5728<code>nifi.properties</code>\u4E2D\u914D\u7F6E\u4EE5\u4E0B\u5C5E\u6027\u3002</p><table><thead><tr><th>Property Name</th><th>Description</th></tr></thead><tbody><tr><td><code>nifi.security.user.saml.idp.metadata.url</code></td><td>The URL for obtaining the identity provider&#39;s metadata. The metadata can be retrieved from the identity provider via <code>http://</code> or <code>https://</code>\uFF0C or a local file can be referenced using <code>file://</code> .</td></tr><tr><td><code>nifi.security.user.saml.sp.entity.id</code></td><td>The entity id of the service provider (i.e. NiFi). This value will be used as the <code>Issuer</code> for SAML authentication requests and should be a valid URI. In some cases the service provider entity id must be registered ahead of time with the identity provider.</td></tr><tr><td><code>nifi.security.user.saml.identity.attribute.name</code></td><td>The name of a SAML assertion attribute containing the user&#39;sidentity. This property is optional and if not specified\uFF0C or if the attribute is not found\uFF0C then the NameID of the Subject will be used.</td></tr><tr><td><code>nifi.security.user.saml.group.attribute.name</code></td><td>The name of a SAML assertion attribute containing group names the user belongs to. This property is optional\uFF0C but if populated the groups will be passed along to the authorization process.</td></tr><tr><td><code>nifi.security.user.saml.metadata.signing.enabled</code></td><td>Enables signing of the generated service provider metadata.</td></tr><tr><td><code>nifi.security.user.saml.request.signing.enabled</code></td><td>Controls the value of <code>AuthnRequestsSigned</code> in the generated service provider metadata from <code>NiFi-api/access/saml/metadata</code>. This indicates that the service provider (i.e. NiFi) should not sign authentication requests sent to the identity provider\uFF0C but the requests may still need to be signed if the identity provider indicates <code>WantAuthnRequestSigned=true</code>.</td></tr><tr><td><code>nifi.security.user.saml.want.assertions.signed</code></td><td>Controls the value of <code>WantAssertionsSigned</code> in the generated service provider metadata from <code>NiFi-api/access/saml/metadata</code>. This indicates that the identity provider should sign assertions\uFF0C but some identity providers may provide their own configuration for controlling whether assertions are signed.</td></tr><tr><td><code>nifi.security.user.saml.signature.algorithm</code></td><td>The algorithm to use when signing SAML messages. Reference the link:https://git.shibboleth.net/view/?p=java-xmltooling.git;a=blob;f=src/main/java/org/opensaml/xml/signature/SignatureConstants.java[Open SAML Signature Constants] for a list of valid values. If not specified\uFF0C a default of SHA-256 will be used.</td></tr><tr><td><code>nifi.security.user.saml.signature.digest.algorithm</code></td><td>The digest algorithm to use when signing SAML messages. Reference the link:https://git.shibboleth.net/view/?p=java-xmltooling.git;a=blob;f=src/main/java/org/opensaml/xml/signature/SignatureConstants.java[Open SAML Signature Constants] for a list of valid values. If not specified\uFF0C a default of SHA-256 will be used.</td></tr><tr><td><code>nifi.security.user.saml.message.logging.enabled</code></td><td>Enables logging of SAML messages for debugging purposes.</td></tr><tr><td><code>nifi.security.user.saml.authentication.expiration</code></td><td>The expiration of the NiFi JWT that will be produced from a successful SAML authentication response.</td></tr><tr><td><code>nifi.security.user.saml.single.logout.enabled</code></td><td>Enables SAML SingleLogout which causes a logout from NiFi to logout of the identity provider. By default\uFF0C a logout of NiFi will only remove the NiFi JWT.</td></tr><tr><td><code>nifi.security.user.saml.http.client.truststore.strategy</code></td><td>The truststore strategy when the IDP metadata URL begins with https. A value of <code>JDK</code> indicates to use the JDK&#39;s default truststore. A value of<code>NiFi</code>indicates to use the truststore specified by <code>nifi.security.truststore</code>.</td></tr><tr><td><code>nifi.security.user.saml.http.client.connect.timeout</code></td><td>The connection timeout when communicating with the SAML IDP.</td></tr><tr><td><code>nifi.security.user.saml.http.client.read.timeout</code></td><td>The read timeout when communicating with the SAML IDP.</td></tr></tbody></table><h3 id="apache-knox" tabindex="-1"><a class="header-anchor" href="#apache-knox" aria-hidden="true">#</a> Apache Knox</h3><p>\u8981\u901A\u8FC7Apache Knox\u542F\u7528\u8EAB\u4EFD\u9A8C\u8BC1\uFF0C\u5FC5\u987B\u5728<code>nifi.properties</code>\u4E2D\u914D\u7F6E\u4EE5\u4E0B\u5C5E\u6027\u3002</p><table><thead><tr><th>\u5C5E\u6027\u540D\u79F0</th><th>\u63CF\u8FF0</th></tr></thead><tbody><tr><td><code>nifi.security.user.knox.audiences</code></td><td>\u53EF\u9009\u7684\u3002\u9017\u53F7\u5206\u9694\u5217\u51FA\u7684\u5141\u8BB8\u7684\u53D7\u4F17\u7FA4\u4F53\u3002\u5982\u679C\u8BBE\u7F6E\uFF0C\u5219\u4EE4\u724C\u4E2D\u7684\u53D7\u4F17\u5FC5\u987B\u51FA\u73B0\u5728\u6B64\u5217\u8868\u4E2D\u3002\u53EF\u4EE5\u5728Knox\u4E2D\u914D\u7F6E\u4EE4\u724C\u4E2D\u586B\u5145\u7684\u53D7\u4F17\u3002</td></tr><tr><td><code>nifi.security.user.knox.url</code></td><td>Apache Knox\u767B\u5F55\u9875\u9762\u7684URL\u3002</td></tr><tr><td><code>nifi.security.user.knox.publicKey</code></td><td>Apache Knox\u516C\u94A5\u7684\u8DEF\u5F84\uFF0C\u7528\u4E8E\u9A8C\u8BC1HTTP Cookie\u4E2D\u7684\u8EAB\u4EFD\u9A8C\u8BC1\u4EE4\u724C\u7684\u7B7E\u540D\u3002</td></tr><tr><td><code>nifi.security.user.knox.cookieName</code></td><td>\u6210\u529F\u767B\u5F55\u540EApache Knox\u5C06\u751F\u6210\u7684HTTP Cookie\u7684\u540D\u79F0\u3002</td></tr></tbody></table><h3 id="json-web-tokens" tabindex="-1"><a class="header-anchor" href="#json-web-tokens" aria-hidden="true">#</a> JSON Web Tokens</h3><p>\u5728\u767B\u5F55\u540ENiFi\u4F7F\u7528<code>JSON Web token</code>\u63D0\u4F9B\u8EAB\u4EFD\u9A8C\u8BC1\u8BBF\u95EE\u3002\u751F\u6210\u7684<code>JSON Web Token</code>\u5305\u62EC<code>\u7ECF\u8FC7\u8EAB\u4EFD\u9A8C\u8BC1\u7684\u7528\u6237\u6807\u8BC6</code>\uFF0C\u4EE5\u53CA\u914D\u7F6E\u7684<code>Login Identity Provider</code>\u7684\u53D1\u884C\u4EBA\u548C\u8FC7\u671F\u65F6\u95F4\u3002</p><p>NiFi\u4F7F\u7528\u751F\u6210\u7684RSA\u5BC6\u94A5\u5BF9\uFF0C\u5BC6\u94A5\u5927\u5C0F\u4E3A4096\u4F4D\uFF0C\u652F\u6301JSON Web\u7B7E\u540D\u7684PS512\u7B97\u6CD5\u3002\u7CFB\u7EDF\u4F7F\u7528\u914D\u7F6E\u7684<code>local State Provider</code>\u5B58\u50A8<code>RSA Public Key</code>\uFF0C\u5E76\u5C06<code>RSA Private Key</code>\u4FDD\u5B58\u5728\u5185\u5B58\u4E2D\u3002\u8FD9\u79CD\u65B9\u6CD5\u4E0D\u9700\u8981\u6301\u4E45\u5316\u79C1\u94A5\u5C31\u652F\u6301\u5728<code>Login Identity Provider</code>\u4E2D\u914D\u7F6E\u5E26\u8FC7\u671F\u65F6\u95F4\u7684\u7B7E\u540D\u9A8C\u8BC1\u3002</p><p><code>JSON Web Token</code>\u652F\u6301\u5305\u62EC\u6CE8\u9500\u65F6\u4F7F\u7528<code>JSON Web Token\u6807\u8BC6\u7B26</code>\u7684\u64A4\u9500\u3002\u7CFB\u7EDF\u6839\u636E<code>Login Identity Provider</code>\u914D\u7F6E\u62D2\u7EDD\u8FC7\u671F\u7684\u4EE4\u724C\u7684\u8BBF\u95EE\uFF0C\u800C\u64A4\u9500\u4EE4\u724C\u4F1A\u5728\u8FC7\u671F\u524D\u4F7F\u5176\u5931\u6548\u3002\u7CFB\u7EDF\u4F7F\u7528\u914D\u7F6E\u7684<code>local State Provider</code>\u5B58\u50A8\u5DF2\u64A4\u9500\u7684\u6807\u8BC6\u7B26\uFF0C\u5E76\u5728\u8FC7\u671F\u540E\u6267\u884C\u5B9A\u65F6\u547D\u4EE4\u5220\u9664\u5DF2\u64A4\u9500\u7684\u6807\u8BC6\u7B26\u3002</p><p>\u5728NiFi\u4E2D\u53EF\u4EE5\u8FDB\u884C\u4EE5\u4E0B\u5C5E\u6027\u6765\u63A7\u5236<code>JSON Web Token</code>\u7B7E\u540D\u3002</p><p>| Property Name | Description |<code>nifi.security.user.jws.key.rotation.period</code> | JSON Web\u7B7E\u540D\u5BC6\u94A5\u65CB\u8F6C\u5468\u671F\u5B9A\u4E49\u4E86\u7CFB\u7EDF\u591A\u957F\u65F6\u95F4\u751F\u6210\u4E00\u4E2A\u65B0\u7684RSA\u5BC6\u94A5\u5BF9\uFF0C\u8868\u793A\u4E3A<code>ISO 8601</code>\u6301\u7EED\u65F6\u95F4\u3002\u9ED8\u8BA4\u503C\u4E3A1\u5C0F\u65F6:&#39; PT1H &#39;</p><blockquote><p>Panda\u8BDA\u89E3\u8BFB\uFF1A\u5173\u4E8E\u66F4\u591A\u5173\u4E8ENIFI<code>JSON Web token</code>\u7684\u89E3\u8BFB\uFF0C\u8BBF\u95EE\u516C\u4F17\u53F7<code>NIFI\u7CFB\u5217\u6587\u7AE0</code>\u4E2D\u67E5\u9605\u6587\u7AE0\uFF0C<img src="`+h+'" alt="">\uFF0C\u7BC7\u5E45\u5F88\u957F\u8FD9\u91CC\u5C31\u4E0D\u5C55\u5F00\u4E86\u3002</p></blockquote><h2 id="\u591A\u79DF\u6237\u6388\u6743-multi-tenant-authorization" tabindex="-1"><a class="header-anchor" href="#\u591A\u79DF\u6237\u6388\u6743-multi-tenant-authorization" aria-hidden="true">#</a> \u591A\u79DF\u6237\u6388\u6743(Multi-Tenant Authorization)</h2><p>\u5C06NiFi\u914D\u7F6E\u4E3A\u5B89\u5168\u8FD0\u884C\u5E76\u5177\u6709\u8EAB\u4EFD\u8BA4\u8BC1\u673A\u5236\u540E\uFF0C\u5FC5\u987B\u914D\u7F6E\u8C01\u6709\u6743\u8BBF\u95EE\u7CFB\u7EDF\u4EE5\u53CA\u4ED6\u4EEC\u7684\u8BBF\u95EE\u7EA7\u522B\u3002\u4F60\u53EF\u4EE5\u4F7F\u7528\u591A\u79DF\u6237\u6388\u6743\u6765\u6267\u884C\u6B64\u64CD\u4F5C\u3002\u591A\u79DF\u6237\u6388\u6743\u4F7F\u591A\u7EC4\u7528\u6237\uFF08\u79DF\u6237\uFF09\u53EF\u4EE5\u4F7F\u7528\u4E0D\u540C\u7684\u6388\u6743\u7EA7\u522B\u6765\u547D\u4EE4\uFF0C\u63A7\u5236\u548C\u89C2\u5BDF\u6570\u636E\u6D41\u7684\u4E0D\u540C\u90E8\u5206\u3002\u5F53\u901A\u8FC7\u8EAB\u4EFD\u9A8C\u8BC1\u7684\u7528\u6237\u5C1D\u8BD5\u67E5\u770B\u6216\u4FEE\u6539NiFi\u8D44\u6E90\u65F6\uFF0C\u7CFB\u7EDF\u4F1A\u68C0\u67E5\u8BE5\u7528\u6237\u662F\u5426\u5177\u6709\u6267\u884C\u8BE5\u64CD\u4F5C\u7684\u6743\u9650\u3002\u8FD9\u4E9B\u6743\u9650\u7531\u53EF\u4EE5\u5728\u7CFB\u7EDF\u8303\u56F4\u6216\u5355\u4E2A\u7EC4\u4EF6\u4E2D\u5E94\u7528\u7684<code>\u7B56\u7565(Policy)</code>\u5B9A\u4E49\u3002</p><h3 id="\u6388\u6743\u5668-authorizer-configuration" tabindex="-1"><a class="header-anchor" href="#\u6388\u6743\u5668-authorizer-configuration" aria-hidden="true">#</a> \u6388\u6743\u5668(Authorizer Configuration)</h3><p><code>authorizer</code>\u5728NiFi\u521D\u59CB\u5316\u6388\u6743\u7684\u65F6\u5019\uFF0C\u6388\u4E88\u7528\u6237\u7BA1\u7406\u7528\u6237\u548C\u7B56\u7565\u7684\u6743\u9650\u3002</p><p>\u4F7F\u7528<code>nifi.properties</code>\u6587\u4EF6\u4E2D\u7684\u4E24\u4E2A\u5C5E\u6027\u914D\u7F6E\u6388\u6743\u5668:</p><ul><li><code>nifi.authorizer.configuration.file</code>\u5C5E\u6027\u6307\u5B9A\u5B9A\u4E49\u6388\u6743\u5668\u7684\u914D\u7F6E\u6587\u4EF6\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u5C06\u9009\u62E9\u4F4D\u4E8Econf\u76EE\u5F55\u4E2D\u7684<code>authorizers.xml</code>\u6587\u4EF6\u3002</li><li><code>nifi.security.user.authorizer</code>\u5C5E\u6027\u6307\u793A<code>authorizers.xml</code>\u6587\u4EF6\u4E2D\u8981\u4F7F\u7528\u7684\u54EA\u4E2A\u5DF2\u914D\u7F6E\u7684\u6388\u6743\u5668\u3002</li></ul><h3 id="authorizers-xml\u8BBE\u7F6E" tabindex="-1"><a class="header-anchor" href="#authorizers-xml\u8BBE\u7F6E" aria-hidden="true">#</a> Authorizers.xml\u8BBE\u7F6E</h3><p>The authorizers.xml file is used to define and configure available authorizers. The default authorizer is the StandardManagedAuthorizer. The managed authorizer is comprised of a UserGroupProvider and a AccessPolicyProvider. The users, group, and access policies will be loaded and optionally configured through these providers. The managed authorizer will make all access decisions based on these provided users, groups, and access policies.</p><blockquote><p>Panda\u8BDA\u89E3\u8BFB\uFF1A\u4E0A\u8FF0\u5B98\u65B9\u6587\u6863\u63CF\u8FF0\u6709\u8BEF\uFF0C\u6545\u5728\u6B64\u8FDB\u884C\u7EA0\u6B63\uFF1A\u9ED8\u8BA4<code>authorizers.xml</code>\u6587\u4EF6\u7528\u4E8E\u5B9A\u4E49\u548C\u914D\u7F6E\u53EF\u7528\u7684\u6388\u6743\u5668\u3002\u9ED8\u8BA4\u7684\u6388\u6743\u5668\u662F<code>SingleUserAuthorizer</code>(\u5DF2\u7ECF\u4E0D\u662F<code>StandardManagedAuthorizer</code>\u4E86)\u3002 \u6388\u6743\u5668\u4E0BNiFi\u5B9A\u4E49\u4E86\u4E00\u4E2A\u6258\u7BA1\u6388\u6743\u5668(managed authorizer)\uFF0C\u4E00\u4E2A\u6258\u7BA1\u6388\u6743\u5668\u7531UserGroupProvider(\u7BA1\u7406users\u548Cgroup)\u548CAccessPolicyProvider(\u7BA1\u7406Policy)\u7EC4\u6210\uFF0C\u6258\u7BA1\u6388\u6743\u5668\u5C06\u6839\u636E\u8FD9\u4E9BProvider\u63D0\u4F9B\u7684<code>users</code>\uFF0C<code>group</code>\uFF0C\u548C<code>access policies</code>\u505A\u51FA\u6240\u6709\u8BBF\u95EE\u51B3\u5B9A\u3002\u6258\u7BA1\u6388\u6743\u5668\u7684\u539F\u7406\u662F\u6211\u4EEC\u81EA\u5B9A\u4E49\u5F00\u53D1NiFi\u6388\u6743\u6A21\u5757\u7684\u5FC5\u8981\u77E5\u8BC6\u3002</p></blockquote><p>\u5728\u542F\u52A8\u8FC7\u7A0B\u4E2D\uFF0C\u5C06\u8FDB\u884C\u68C0\u67E5\u4EE5\u786E\u4FDD\u4E0D\u5B58\u5728\u4E24\u4E2A\u5177\u6709\u76F8\u540Cidentity/name\u7684users/groups\u3002\u4E0D\u7BA1\u914D\u7F6E\u7684\u5B9E\u73B0\u5982\u4F55\uFF0C\u90FD\u4F1A\u6267\u884C\u6B64\u68C0\u67E5\uFF0C\u8FD9\u662F\u5FC5\u9700\u7684\uFF0C\u56E0\u4E3A\u8FD9\u662F\u5728\u8BBF\u95EE\u51B3\u7B56\u671F\u95F4\u8BC6\u522B\u548C\u6388\u6743users/groups\u7684\u65B9\u5F0F\u3002</p><h4 id="fileusergroupprovider" tabindex="-1"><a class="header-anchor" href="#fileusergroupprovider" aria-hidden="true">#</a> FileUserGroupProvider</h4><p>StandardManagedAuthorizer\u9ED8\u8BA4\u7684UserGroupProvider\u662FFileUserGroupProvider\uFF0C\u4F46\u662F\uFF0C\u4F60\u53EF\u4EE5\u5F00\u53D1\u5176\u4ED6UserGroupProvider\u4F5C\u4E3A\u6269\u5C55\u3002 FileUserGroupProvider\u5177\u6709\u4EE5\u4E0B\u5C5E\u6027\uFF1A</p><ul><li>\u7528\u6237\u6587\u4EF6(Users File) - FileUserGroupProvider\u5B58\u50A8\u7528\u6237\u548C\u79DF\u6237\u7684\u6587\u4EF6\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u4F7F\u7528<code>conf</code>\u76EE\u5F55\u4E2D\u7684<code>users.xml</code>\u6587\u4EF6\u3002</li><li>\u65E7\u7248\u6388\u6743\u7528\u6237\u6587\u4EF6(Legacy Authorized Users File) - authorized-users.xml\u7684\u5B8C\u6574\u8DEF\u5F84\uFF0C\u8BE5\u8DEF\u5F84\u5C06\u81EA\u52A8\u7528\u4E8E\u5C06\u7528\u6237\u548C\u79DF\u6237\u52A0\u8F7D\u5230\u7528\u6237\u6587\u4EF6\u4E2D\u3002</li><li>\u521D\u59CB\u7528\u6237\u8EAB\u4EFD(Initial User Identity) - \u7528\u6237\u548C\u7CFB\u7EDF\u7684\u6807\u8BC6\uFF0C\u7528\u4E8E\u6DFB\u52A0\u5230\u7528\u6237\u6587\u4EF6(Users File)\u4E2D\u3002\u6BCF\u4E2A\u5C5E\u6027\u7684\u540D\u79F0\u5FC5\u987B\u662F\u552F\u4E00\u7684\uFF0C\u4F8B\u5982:&quot;Initial User Identity A&quot;\uFF0C&quot;Initial User Identity B&quot;\uFF0C&quot;Initial User Identity C&quot;\u6216\u8005&quot;Initial User Identity 1&quot;\uFF0C&quot;Initial User Identity 2&quot;\uFF0C&quot;Initial User Identity 3&quot;\u3002</li></ul><h4 id="ldapusergroupprovider" tabindex="-1"><a class="header-anchor" href="#ldapusergroupprovider" aria-hidden="true">#</a> LdapUserGroupProvider</h4><p>UserGroupProvider\u7684\u53E6\u4E00\u4E2A\u9009\u9879\u662FLdapUserGroupProvider\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u6B64\u9009\u9879\u5DF2\u6CE8\u91CA\u6389\uFF0C\u4F46\u53EF\u4EE5\u914D\u7F6E\u4EE3\u66FFFileUserGroupProvider\u3002\u8FD9\u5C06\u4ECE\u76EE\u5F55\u670D\u52A1\u5668\u540C\u6B65\u7528\u6237\u548C\u79DF\u6237\uFF0C\u5E76\u4EE5\u53EA\u8BFB\u5F62\u5F0F\u5728NiFi UI\u4E2D\u663E\u793A\u5B83\u4EEC\u3002</p><p>LdapUserGroupProvider\u5177\u6709\u4EE5\u4E0B\u5C5E\u6027:</p><table><thead><tr><th>Property Name</th><th>Description</th></tr></thead><tbody><tr><td><code>Authentication Strategy</code></td><td>How the connection to the LDAP server is authenticated. Possible values are <code>ANONYMOUS</code>\uFF0C <code>SIMPLE</code>\uFF0C <code>LDAPS</code>\uFF0C or <code>START_TLS</code>.</td></tr><tr><td><code>Manager DN</code></td><td>The DN of the manager that is used to bind to the LDAP server to search for users.</td></tr><tr><td><code>Manager Password</code></td><td>The password of the manager that is used to bind to the LDAP server to search for users.</td></tr><tr><td><code>TLS - Keystore</code></td><td>Path to the Keystore that is used when connecting to LDAP using LDAPS or START_TLS.</td></tr><tr><td><code>TLS - Keystore Password</code></td><td>Password for the Keystore that is used when connecting to LDAP using LDAPS or START_TLS.</td></tr><tr><td><code>TLS - Keystore Type</code></td><td>Type of the Keystore that is used when connecting to LDAP using LDAPS or START_TLS (i.e. <code>JKS</code> or <code>PKCS12</code>).</td></tr><tr><td><code>TLS - Truststore</code></td><td>Path to the Truststore that is used when connecting to LDAP using LDAPS or START_TLS.</td></tr><tr><td><code>TLS - Truststore Password</code></td><td>Password for the Truststore that is used when connecting to LDAP using LDAPS or START_TLS.</td></tr><tr><td><code>TLS - Truststore Type</code></td><td>Type of the Truststore that is used when connecting to LDAP using LDAPS or START_TLS (i.e. <code>JKS</code> or <code>PKCS12</code>).</td></tr><tr><td><code>TLS - Client Auth</code></td><td>Client authentication policy when connecting to LDAP using LDAPS or START_TLS. Possible values are <code>REQUIRED</code>\uFF0C <code>WANT</code>\uFF0C <code>NONE</code>.</td></tr><tr><td><code>TLS - Protocol</code></td><td>Protocol to use when connecting to LDAP using LDAPS or START_TLS. (i.e. <code>TLS</code>\uFF0C <code>TLSv1.1</code>\uFF0C <code>TLSv1.2</code>\uFF0C etc).</td></tr><tr><td><code>TLS - Shutdown Gracefully</code></td><td>Specifies whether the TLS should be shut down gracefully before the target context is closed. Defaults to false.</td></tr><tr><td><code>Referral Strategy</code></td><td>Strategy for handling referrals. Possible values are <code>FOLLOW</code>\uFF0C <code>IGNORE</code>\uFF0C <code>THROW</code>.</td></tr><tr><td><code>Connect Timeout</code></td><td>Duration of connect timeout. (i.e. <code>10 secs</code>).</td></tr><tr><td><code>Read Timeout</code></td><td>Duration of read timeout. (i.e. <code>10 secs</code>).</td></tr><tr><td><code>Url</code></td><td>Space-separated list of URLs of the LDAP servers (i.e. <code>ldap://&lt;hostname&gt;:&lt;port&gt;</code>).</td></tr><tr><td><code>Page Size</code></td><td>Sets the page size when retrieving users and groups. If not specified\uFF0C no paging is performed.</td></tr><tr><td><code>Group Membership - Enforce Case Sensitivity</code></td><td>Sets whether group membership decisions are case sensitive. When a user or group is inferred (by not specifying or user or group search base or user identity attribute or group name attribute) case sensitivity is enforced since the value to use for the user identity or group name would be ambiguous. Defaults to false.</td></tr><tr><td><code>Sync Interval</code></td><td>Duration of time between syncing users and groups. (i.e. <code>30 mins</code>). Minimum allowable value is <code>10 secs</code>.</td></tr><tr><td><code>User Search Base</code></td><td>Base DN for searching for users (i.e. <code>ou=users\uFF0Co=NiFi</code>). Required to search users.</td></tr><tr><td><code>User Object Class</code></td><td>Object class for identifying users (i.e. <code>person</code>). Required if searching users.</td></tr><tr><td><code>User Search Scope</code></td><td>Search scope for searching users (<code>ONE_LEVEL</code>\uFF0C <code>OBJECT</code>\uFF0C or <code>SUBTREE</code>). Required if searching users.</td></tr><tr><td><code>User Search Filter</code></td><td>Filter for searching for users against the <code>User Search Base</code> (i.e. <code>(memberof=cn=team1\uFF0Cou=groups\uFF0Co=NiFi)</code>). Optional.</td></tr><tr><td><code>User Identity Attribute</code></td><td>Attribute to use to extract user identity (i.e. <code>cn</code>). Optional. If not set\uFF0C the entire DN is used.</td></tr><tr><td><code>User Group Name Attribute</code></td><td>Attribute to use to define group membership (i.e. <code>memberof</code>). Optional. If not set group membership will not be calculated through the users. Will rely on group membership being defined through <code>Group Member Attribute</code> if set. The value of this property is the name of the attribute in the user ldap entry that associates them with a group. The value of that user attribute could be a dn or group name for instance. What value is expected is configured in the <code>User Group Name Attribute - Referenced Group Attribute</code>.</td></tr><tr><td><code>User Group Name Attribute - Referenced Group Attribute</code></td><td>If blank\uFF0C the value of the attribute defined in <code>User Group Name Attribute</code> is expected to be the full dn of the group. If not blank\uFF0C this property will define the attribute of the group ldap entry that the value of the attribute defined in <code>User Group Name Attribute</code> is referencing (i.e. <code>name</code>). Use of this property requires that <code>Group Search Base</code> is also configured.</td></tr><tr><td><code>Group Search Base</code></td><td>Base DN for searching for groups (i.e. <code>ou=groups\uFF0Co=NiFi</code>). Required to search groups.</td></tr><tr><td><code>Group Object Class</code></td><td>Object class for identifying groups (i.e. <code>groupOfNames</code>). Required if searching groups.</td></tr><tr><td><code>Group Search Scope</code></td><td>Search scope for searching groups (<code>ONE_LEVEL</code>\uFF0C <code>OBJECT</code>\uFF0C or <code>SUBTREE</code>). Required if searching groups.</td></tr><tr><td><code>Group Search Filter</code></td><td>Filter for searching for groups against the <code>Group Search Base</code>. Optional.</td></tr><tr><td><code>Group Name Attribute</code></td><td>Attribute to use to extract group name (i.e. <code>cn</code>). Optional. If not set\uFF0C the entire DN is used.</td></tr><tr><td><code>Group Member Attribute</code></td><td>Attribute to use to define group membership (i.e. <code>member</code>). Optional. If not set group membership will not be calculated through the groups. Will rely on group membership being defined through <code>User Group Name Attribute</code> if set. The value of this property is the name of the attribute in the group ldap entry that associates them with a user. The value of that group attribute could be a dn or memberUid for instance. What value is expected is configured in the <code>Group Member Attribute - Referenced User Attribute</code>. (i.e. <code>member: cn=User 1\uFF0Cou=users\uFF0Co=NiFi</code> vs. <code>memberUid: user1</code>)</td></tr><tr><td><code>Group Member Attribute - Referenced User Attribute</code></td><td>If blank\uFF0C the value of the attribute defined in <code>Group Member Attribute</code> is expected to be the full dn of the user. If not blank\uFF0C this property will define the attribute of the user ldap entry that the value of the attribute defined in <code>Group Member Attribute</code> is referencing (i.e. <code>uid</code>). Use of this property requires that <code>User Search Base</code> is also configured. (i.e. <code>member: cn=User 1\uFF0Cou=users\uFF0Co=NiFi</code> vs. <code>memberUid: user1</code>)</td></tr></tbody></table><blockquote><p><code>nifi.properties</code>\u4E2D\u6307\u5B9A\u7684<code>identity mapping rules</code>\u4E5F\u5C06\u5E94\u7528\u4E8Euser identities\u3002Group\u540D\u79F0\u4E0D\u4F1A\u88AB\u6620\u5C04\u66FF\u6362\u3002</p></blockquote><h4 id="shellusergroupprovider" tabindex="-1"><a class="header-anchor" href="#shellusergroupprovider" aria-hidden="true">#</a> ShellUserGroupProvider</h4><p>ShellUserGroupProvider\u4F7F\u7528Shell\u547D\u4EE4\u4ECE\u7C7B\u4F3CUnix\u7684\u7CFB\u7EDF\u4E2D\u83B7\u53D6\u7528\u6237\u548C\u79DF\u6237\u6237\u8BE6\u7EC6\u4FE1\u606F\u3002\u8BE5\u63D0\u4F9B\u7A0B\u5E8F\u4F7F\u7528\u8BF8\u5982Linux\u4E0A\u7684getent\u548CMacOS\u4E0A\u7684dscl\u4E4B\u7C7B\u7684\u547D\u4EE4\u6267\u884C\u5404\u79CDShell\u7BA1\u9053\u3002\u53EF\u4EE5\u5C06\u53D7\u652F\u6301\u7684\u7CFB\u7EDF\u914D\u7F6E\u4E3A\u4ECE\u5916\u90E8\u6765\u6E90\uFF08\u4F8B\u5982LDAP\u6216NIS\uFF09\u68C0\u7D22\u7528\u6237\u548C\u79DF\u6237\u3002\u5728\u8FD9\u4E9B\u60C5\u51B5\u4E0B\uFF0Cshell\u547D\u4EE4\u5C06\u8FD4\u56DE\u8FD9\u4E9B\u5916\u90E8\u7528\u6237\u548C\u79DF\u6237\u3002\u8FD9\u4E3A\u7BA1\u7406\u5458\u63D0\u4F9B\u4E86\u53E6\u4E00\u79CD\u96C6\u6210\u7528\u6237\u548C\u79DF\u6237\u76EE\u5F55\u670D\u52A1\u7684\u673A\u5236\u3002 ShellUserGroupProvider\u5177\u6709\u4EE5\u4E0B\u5C5E\u6027\uFF1A</p><table><thead><tr><th>Property Name</th><th>Description</th></tr></thead><tbody><tr><td><code>Initial Refresh Delay</code></td><td>Duration of initial delay before first user and group refresh. (i.e. <code>10 secs</code>). Default is <code>5 mins</code>.</td></tr><tr><td><code>Refresh Delay</code></td><td>Duration of delay between each user and group refresh. (i.e. <code>10 secs</code>). Default is <code>5 mins</code>.</td></tr><tr><td><code>Exclude Groups</code></td><td>Regular expression used to exclude groups. Default is &#39;&#39;\uFF0C which means no groups are excluded.</td></tr><tr><td><code>Exclude Users</code></td><td>Regular expression used to exclude users. Default is &#39;&#39;\uFF0C which means no users are excluded.</td></tr></tbody></table><p>\u4E0ELdapUserGroupProvider\u4E00\u6837\uFF0CShellUserGroupProvider\u5728<code>authorizers.xml</code>\u6587\u4EF6\u4E2D\u88AB\u6CE8\u91CA\u6389\u3002\u6709\u5173\u7528\u6CD5\u793A\u4F8B\uFF0C\u8BF7\u53C2\u9605\u8BE5\u6CE8\u91CA\u3002</p><h4 id="azuregraphusergroupprovider" tabindex="-1"><a class="header-anchor" href="#azuregraphusergroupprovider" aria-hidden="true">#</a> AzureGraphUserGroupProvider</h4><p>The AzureGraphUserGroupProvider fetches users and groups from Azure Active Directory (AAD) using the Microsoft Graph API.</p><p>A subset of groups are fetched based on filter conditions (<code>Group Filter Prefix</code>, <code>Group Filter Suffix</code>, <code>Group Filter Substring</code>, and <code>Group Filter List Inclusion</code>) evaluated against the displayName property of the Azure AD group. Member users are then loaded from these groups. At least one filter condition should be specified.</p><p>This provider requires an Azure app registration with:</p><ul><li>Microsoft Graph Group.Read.All and User.Read.All API permissions with admin consent</li><li>A client secret or application password</li><li>ID token claims for upn and/or email</li></ul>',73),Be=t("See "),Re={href:"https://docs.microsoft.com/en-us/graph/auth-v2-service",target:"_blank",rel:"noopener noreferrer"},Ge=t("here"),Me=t(" and "),He={href:"https://docs.microsoft.com/en-us/azure/active-directory/develop/scenario-daemon-app-registration",target:"_blank",rel:"noopener noreferrer"},Oe=t("here"),Ze=t(" for more information on how to create a valid app registration."),We=e("p",null,"The AzureGraphUserGroupProvider has the following properties:",-1),je=e("thead",null,[e("tr",null,[e("th",null,"Property Name"),e("th",null,"Description")])],-1),Je=e("tr",null,[e("td",null,[e("code",null,"Refresh Delay")]),e("td",null,[t("Duration of delay between each user and group refresh. Default is "),e("code",null,"5 mins"),t(".")])],-1),Ve=e("td",null,[e("code",null,"Authority Endpoint")],-1),Xe=t("The endpoint of the Azure AD login. This can be found in the Azure portal under Azure Active Directory \u2192 App registrations \u2192 [application name] \u2192 Endpoints. For example, the global authority endpoint is "),$e={href:"https://login.microsoftonline.com/",target:"_blank",rel:"noopener noreferrer"},Ye=t("https://login.microsoftonline.com"),Qe=t("."),et=e("tr",null,[e("td",null,[e("code",null,"Directory ID")]),e("td",null,"Tenant ID or Directory ID of the Azure AD tenant. This can be found in the Azure portal under Azure Active Directory \u2192 App registrations \u2192 [application name] \u2192 Directory (tenant) ID.")],-1),tt=e("tr",null,[e("td",null,[e("code",null,"Application ID")]),e("td",null,"Client ID or Application ID of the Azure app registration. This can be found in the Azure portal under Azure Active Directory \u2192 App registrations \u2192 [application name] \u2192 Overview \u2192 Application (client) ID.")],-1),nt=e("tr",null,[e("td",null,[e("code",null,"Client Secret")]),e("td",null,"A client secret from the Azure app registration. Secrets can be created in the Azure portal under Azure Active Directory \u2192 App registrations \u2192 [application name] \u2192 Certificates & secrets \u2192 Client secrets \u2192 [+] New client secret.")],-1),st=e("tr",null,[e("td",null,[e("code",null,"Group Filter Prefix")]),e("td",null,"Prefix filter for Azure AD groups. Matches against the group displayName to retrieve only groups with names starting with the provided prefix.")],-1),ot=e("tr",null,[e("td",null,[e("code",null,"Group Filter Suffix")]),e("td",null,"Suffix filter for Azure AD groups. Matches against the group displayName to retrieve only groups with names ending with the provided suffix.")],-1),at=e("tr",null,[e("td",null,[e("code",null,"Group Filter Substring")]),e("td",null,"Substring filter for Azure AD groups. Matches against the group displayName to retrieve only groups with names containing the provided substring.")],-1),it=e("tr",null,[e("td",null,[e("code",null,"Group Filter List Inclusion")]),e("td",null,"Comma-separated list of Azure AD groups. If no string-based matching filter (i.e., prefix, suffix, and substring) is specified, set this property to avoid fetching all groups and users in the Azure AD tenant.")],-1),rt=e("tr",null,[e("td",null,[e("code",null,"Page Size")]),e("td",null,"Page size to use with the Microsoft Graph API. Set to 0 to disable paging API calls. Default: 50, Max: 999.")],-1),dt=e("tr",null,[e("td",null,[e("code",null,"Claim for Username")]),e("td",null,[t("The property of the user directory object mapped to the NiFi user name field. Default is 'upn'. 'email' is another option when "),e("code",null,"nifi.security.user.oidc.fallback.claims.identifying.user"),t(" is set to 'upn'.")])],-1),ct=o(`<p>Like LdapUserGroupProvider and ShellUserGroupProvider, the AzureGraphUserGroupProvider configuration is commented out in the <code>authorizers.xml</code>file. Refer to the comment for a starter configuration.</p><h4 id="compositeusergroupprovider" tabindex="-1"><a class="header-anchor" href="#compositeusergroupprovider" aria-hidden="true">#</a> CompositeUserGroupProvider</h4><p>UAnother option for the UserGroupProvider are composite implementations. This means that multiple sources/implementations can be configured and composed. For instance, an admin can configure users/groups to be loaded from a file and a directory server. There are two composite implementations, one that supports multiple UserGroupProviders and one that supports multiple UserGroupProviders and a single configurable UserGroupProvider.</p><p>The CompositeUserGroupProvider will provide support for retrieving users and groups from multiple sources. The CompositeUserGroupProvider has the following property:</p><table><thead><tr><th>Property Name</th><th>Description</th></tr></thead><tbody><tr><td><code>User Group Provider [unique key]</code></td><td>The identifier of user group providers to load from. The name of each property must be unique\uFF0C for example: &quot;User Group Provider A&quot;\uFF0C &quot;User Group Provider B&quot;\uFF0C &quot;User Group Provider C&quot; or &quot;User Group Provider 1&quot;\uFF0C &quot;User Group Provider 2&quot;\uFF0C &quot;User Group Provider 3&quot;</td></tr></tbody></table><blockquote><p>Any identity mapping rules specified in nifi.properties are not applied in this implementation. This behavior would need to be applied by the base implementation.</p></blockquote><p>The CompositeConfigurableUserGroupProvider will provide support for retrieving users and groups from multiple sources. Additionally, a single configurable user group provider is required. Users from the configurable user group provider are configurable, however users loaded from one of the User Group Provider [unique key] will not be. The CompositeConfigurableUserGroupProvider has the following properties:</p><table><thead><tr><th>Property Name</th><th>Description</th></tr></thead><tbody><tr><td><code>Configurable User Group Provider</code></td><td>A configurable user group provider.</td></tr><tr><td><code>User Group Provider [unique key]</code></td><td>The identifier of user group providers to load from. The name of each property must be unique\uFF0C for example: &quot;User Group Provider A&quot;\uFF0C &quot;User Group Provider B&quot;\uFF0C &quot;User Group Provider C&quot; or &quot;User Group Provider 1&quot;\uFF0C &quot;User Group Provider 2&quot;\uFF0C &quot;User Group Provider 3&quot;</td></tr></tbody></table><h4 id="fileaccesspolicyprovider" tabindex="-1"><a class="header-anchor" href="#fileaccesspolicyprovider" aria-hidden="true">#</a> FileAccessPolicyProvider</h4><p>StandardManagedAuthorizer\u9ED8\u8BA4\u7684AccessPolicyProvider\u662FFileAccessPolicyProvider\uFF0C\u4F46\u662F\uFF0C\u4F60\u53EF\u4EE5\u5F00\u53D1\u5176\u4ED6AccessPolicyProvider\u4F5C\u4E3A\u6269\u5C55\u3002 FileAccessPolicyProvider\u5177\u6709\u4EE5\u4E0B\u5C5E\u6027\uFF1A</p><table><thead><tr><th>Property Name</th><th>Description</th></tr></thead><tbody><tr><td><code>User Group Provider</code></td><td>The identifier for an User Group Provider defined above that will be used to access users and groups for use in the managed access policies.</td></tr><tr><td><code>Authorizations File</code></td><td>The file where the FileAccessPolicyProvider will store policies.</td></tr><tr><td><code>Initial Admin Identity</code></td><td>The identity of an initial admin user that will be granted access to the UI and given the ability to create additional users\uFF0C groups\uFF0C and policies. The value of this property could be a DN when using certificates or LDAP\uFF0C or a Kerberos principal. This property will only be used when there are no other policies defined. If this property is specified then a Legacy Authorized Users File can not be specified.</td></tr><tr><td><code>Legacy Authorized Users File</code></td><td>The full path to an existing <em>authorized-users.xml</em> that will be automatically converted to the new authorizations model. If this property is specified then an Initial Admin Identity can not be specified\uFF0C and this property will only be used when there are no other users\uFF0C groups\uFF0C and policies defined.</td></tr><tr><td><code>Node Identity</code></td><td>The identity of a NiFi cluster node. When clustered\uFF0C a property for each node should be defined\uFF0C so that every node knows about every other node. If not clustered these properties can be ignored. The name of each property must be unique\uFF0C for example for a three node cluster: &quot;Node Identity A&quot;\uFF0C &quot;Node Identity B&quot;\uFF0C &quot;Node Identity C&quot; or &quot;Node Identity 1&quot;\uFF0C &quot;Node Identity 2&quot;\uFF0C &quot;Node Identity 3&quot;</td></tr><tr><td><code>Node Group</code></td><td>The name of a group containing NiFi cluster nodes. The typical use for this is when nodes are dynamically added/removed from the cluster.</td></tr></tbody></table><blockquote><p>The identities configured in the Initial Admin Identity, the Node Identity properties, or discovered in a Legacy Authorized Users File must be available in the configured User Group Provider.</p></blockquote><blockquote><p>Any users in the legacy users file must be found in the configured User Group Provider.</p></blockquote><blockquote><p>Any identity mapping rules specified in nifi.properties will also be applied to the node identities, so the values should be the unmapped identities (i.e. full DN from a certificate). This identity must be found in the configured User Group Provider.</p></blockquote><h4 id="standardmanagedauthorizer" tabindex="-1"><a class="header-anchor" href="#standardmanagedauthorizer" aria-hidden="true">#</a> StandardManagedAuthorizer</h4><p>The default authorizer is the StandardManagedAuthorizer, however, you can develop additional authorizers as extensions. The StandardManagedAuthorizer has the following property:</p><table><thead><tr><th>Property Name</th><th>Description</th></tr></thead><tbody><tr><td><code>Access Policy Provider</code></td><td>The identifier for an Access Policy Provider defined above.</td></tr></tbody></table><h4 id="fileauthorizer" tabindex="-1"><a class="header-anchor" href="#fileauthorizer" aria-hidden="true">#</a> FileAuthorizer</h4><p>FileAuthorizer\u5DF2\u88AB\u4E0A\u8FF0\u66F4\u7CBE\u7EC6\u7684StandardManagedAuthorizer\u65B9\u6CD5\u53D6\u4EE3\u3002\u4F46\u662F\uFF0C\u7531\u4E8E\u5411\u540E\u517C\u5BB9\u7684\u539F\u56E0\uFF0C\u5B83\u4ECD\u7136\u53EF\u7528\u3002 FileAuthorizer\u5177\u6709\u4EE5\u4E0B\u5C5E\u6027\uFF1A</p><table><thead><tr><th>Property Name</th><th>Description</th></tr></thead><tbody><tr><td><code>Authorizations File</code></td><td>The file where the FileAuthorizer stores policies. By default\uFF0C the <em>authorizations.xml</em> in the <code>conf</code> directory is chosen.</td></tr><tr><td><code>Users File</code></td><td>The file where the FileAuthorizer stores users and groups. By default\uFF0C the <em>users.xml</em> in the <code>conf</code> directory is chosen.</td></tr><tr><td><code>Initial Admin Identity</code></td><td>The identity of an initial admin user that is granted access to the UI and given the ability to create additional users\uFF0C groups\uFF0C and policies. This property is only used when there are no other users\uFF0C groups\uFF0C and policies defined.</td></tr><tr><td><code>Legacy Authorized Users File</code></td><td>The full path to an existing <em>authorized-users.xml</em> that is automatically converted to the multi-tenant authorization model. This property is only used when there are no other users\uFF0C groups\uFF0C and policies defined.</td></tr><tr><td><code>Node Identity</code></td><td>The identity of a NiFi cluster node. When clustered\uFF0C a property for each node should be defined\uFF0C so that every node knows about every other node. If not clustered\uFF0C these properties can be ignored.</td></tr></tbody></table><blockquote><p>Any identity mapping rules specified in nifi.properties will also be applied to the initial admin identity, so the value should be the unmapped identity.</p></blockquote><blockquote><p>Any identity mapping rules specified in nifi.properties will also be applied to the node identities, so the values should be the unmapped identities (i.e. full DN from a certificate).</p></blockquote><h4 id="\u521D\u59CB\u5316\u7BA1\u7406\u5458-\u65B0nifi\u5B9E\u4F8B" tabindex="-1"><a class="header-anchor" href="#\u521D\u59CB\u5316\u7BA1\u7406\u5458-\u65B0nifi\u5B9E\u4F8B" aria-hidden="true">#</a> \u521D\u59CB\u5316\u7BA1\u7406\u5458(\u65B0NiFi\u5B9E\u4F8B)</h4><p>\u5982\u679C\u4F60\u662F\u7B2C\u4E00\u6B21\u8BBE\u7F6E\u5B89\u5168\u7684NiFi\u5B9E\u4F8B\uFF0C\u5219\u5FC5\u987B\u5728<code>authorizers.xml</code>\u6587\u4EF6\u4E2D\u624B\u52A8\u6307\u5B9A<code>Initial Admin Identity</code>\u3002\u6B64\u521D\u59CB\u7BA1\u7406\u5458\u7528\u6237\u88AB\u6388\u4E88\u5BF9UI\u7684\u8BBF\u95EE\u6743\u9650\uFF0C\u5E76\u4E14\u53EF\u4EE5\u521B\u5EFA\u5176\u4ED6\u7528\u6237\uFF0C\u79DF\u6237\u548C\u7B56\u7565\u3002\u6B64\u5C5E\u6027\u7684\u503C\u53EF\u4EE5\u662FDN(\u4F7F\u7528\u8BC1\u4E66\u6216LDAP\u65F6)\u6216Kerberos\u4E3B\u4F53\u3002\u5982\u679C\u4F60\u662FNiFi\u7BA1\u7406\u5458\uFF0C\u8BF7\u5C06\u81EA\u5DF1\u6DFB\u52A0\u4E3A<code>Initial Admin Identity</code>\u3002</p><p>\u7F16\u8F91\u5E76\u4FDD\u5B58<code>authorizers.xml</code>\u6587\u4EF6\u540E\uFF0C\u91CD\u65B0\u542F\u52A8NiFi\u3002\u91CD\u65B0\u542F\u52A8\u671F\u95F4\uFF0C<code>Initial Admin Identity</code>\u8FD9\u4E2A\u7528\u6237\u548C\u7CFB\u7EDF\u7BA1\u7406\u5458\u7EA7\u522B\u7684\u7B56\u7565\u5C06\u6DFB\u52A0\u5230<code>users.xml</code>\u548C<code>authorizations.xml</code>\u6587\u4EF6\u4E2D\u3002\u4E00\u65E6NiFi\u542F\u52A8\uFF0C<code>Initial Admin Identity</code>\u7528\u6237\u5C31\u53EF\u4EE5\u8BBF\u95EEUI\u5E76\u5F00\u59CB\u7BA1\u7406\u7528\u6237\uFF0C\u79DF\u6237\u548C\u7B56\u7565\u3002</p><blockquote><p>\u5BF9\u4E8E\u5168\u65B0\u7684\u5B89\u5168\u6D41\u7A0B\uFF0C\u63D0\u4F9B<code>Initial Admin Identity</code>\u4F7F\u8BE5\u7528\u6237\u53EF\u4EE5\u8BBF\u95EEUI\u5E76\u7BA1\u7406\u7528\u6237\uFF0C\u79DF\u6237\u548C\u7B56\u7565\u3002\u4F46\u662F\uFF0C\u5982\u679C\u8BE5\u7528\u6237\u8981\u5F00\u59CB\u4FEE\u6539\u6D41\uFF0C\u5219\u9700\u8981\u4E3Aroot\u8FDB\u7A0B\u7EC4\u6388\u4E88\u81EA\u5DF1\u7684\u7B56\u7565\u3002\u7CFB\u7EDF\u65E0\u6CD5\u81EA\u52A8\u6267\u884C\u6B64\u64CD\u4F5C\uFF0C\u56E0\u4E3A\u5728\u65B0\u6D41\u7A0B\u4E2D\uFF0C\u6839\u6D41\u7A0B\u7EC4\u7684UUID\u5728\u751F\u6210<code>flow.xml.gz</code>\u4E4B\u524D\u4E0D\u662F\u6C38\u4E45\u7684\u3002\u5982\u679CNiFi\u5B9E\u4F8B\u662F\u4ECE\u73B0\u6709<code>flow.xml.gz</code>\u7684\u5347\u7EA7\u6216\u4ECE\u4E0D\u5B89\u5168\u5230\u5B89\u5168\u76841.x\u5B9E\u4F8B\u7684\u5347\u7EA7\uFF0C\u5219\u5C06\u81EA\u52A8\u4E3A<code>Initial Admin Identity</code>\u7528\u6237\u6388\u4E88\u4FEE\u6539\u6D41\u7A0B\u7684\u6743\u9650\u3002</p></blockquote><p>\u4E00\u4E9B\u5E38\u89C1\u7528\u4F8B\u5982\u4E0B\u6240\u8FF0\u3002</p><h5 id="\u57FA\u4E8E\u6587\u4EF6-ldap\u8EAB\u4EFD\u9A8C\u8BC1" tabindex="-1"><a class="header-anchor" href="#\u57FA\u4E8E\u6587\u4EF6-ldap\u8EAB\u4EFD\u9A8C\u8BC1" aria-hidden="true">#</a> \u57FA\u4E8E\u6587\u4EF6(LDAP\u8EAB\u4EFD\u9A8C\u8BC1)</h5><p>\u4EE5\u4E0B\u662F\u4F7F\u7528John Smith\u540D\u79F0\u7684LDAP\u6761\u76EE\u793A\u4F8B:</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>authorizers</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>userGroupProvider</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>identifier</span><span class="token punctuation">&gt;</span></span>file-user-group-provider<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>identifier</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span><span class="token punctuation">&gt;</span></span>org.apache.nifi.authorization.FileUserGroupProvider<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>class</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Users File<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>./conf/users.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Legacy Authorized Users File<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Initial User Identity 1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>cn=John Smith\uFF0Cou=people\uFF0Cdc=example\uFF0Cdc=com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>userGroupProvider</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>accessPolicyProvider</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>identifier</span><span class="token punctuation">&gt;</span></span>file-access-policy-provider<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>identifier</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span><span class="token punctuation">&gt;</span></span>org.apache.nifi.authorization.FileAccessPolicyProvider<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>class</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>User Group Provider<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>file-user-group-provider<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Authorizations File<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>./conf/authorizations.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Initial Admin Identity<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>cn=John Smith\uFF0Cou=people\uFF0Cdc=example\uFF0Cdc=com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Legacy Authorized Users File<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Node Identity 1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>accessPolicyProvider</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>authorizer</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>identifier</span><span class="token punctuation">&gt;</span></span>managed-authorizer<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>identifier</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span><span class="token punctuation">&gt;</span></span>org.apache.nifi.authorization.StandardManagedAuthorizer<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>class</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Access Policy Provider<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>file-access-policy-provider<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>authorizer</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>authorizers</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u57FA\u4E8E\u6587\u4EF6-kerberos\u8EAB\u4EFD\u9A8C\u8BC1" tabindex="-1"><a class="header-anchor" href="#\u57FA\u4E8E\u6587\u4EF6-kerberos\u8EAB\u4EFD\u9A8C\u8BC1" aria-hidden="true">#</a> \u57FA\u4E8E\u6587\u4EF6(Kerberos\u8EAB\u4EFD\u9A8C\u8BC1)</h5><p>\u4EE5\u4E0B\u662F\u4F7F\u7528\u540D\u79F0John Smith\u548Crealm\u7684\u793A\u4F8BKerberos\u6761\u76EE<code>NIFI.APACHE.ORG</code>:</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>authorizers</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>userGroupProvider</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>identifier</span><span class="token punctuation">&gt;</span></span>file-user-group-provider<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>identifier</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span><span class="token punctuation">&gt;</span></span>org.apache.nifi.authorization.FileUserGroupProvider<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>class</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Users File<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>./conf/users.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Legacy Authorized Users File<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Initial User Identity 1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>johnsmith@nifi.APACHE.ORG<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>userGroupProvider</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>accessPolicyProvider</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>identifier</span><span class="token punctuation">&gt;</span></span>file-access-policy-provider<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>identifier</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span><span class="token punctuation">&gt;</span></span>org.apache.nifi.authorization.FileAccessPolicyProvider<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>class</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>User Group Provider<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>file-user-group-provider<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Authorizations File<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>./conf/authorizations.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Initial Admin Identity<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>johnsmith@nifi.APACHE.ORG<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Legacy Authorized Users File<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Node Identity 1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>accessPolicyProvider</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>authorizer</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>identifier</span><span class="token punctuation">&gt;</span></span>managed-authorizer<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>identifier</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span><span class="token punctuation">&gt;</span></span>org.apache.nifi.authorization.StandardManagedAuthorizer<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>class</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Access Policy Provider<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>file-access-policy-provider<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>authorizer</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>authorizers</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="\u57FA\u4E8Eldap\u7684\u7528\u6237-\u7EC4\u5F15\u7528\u7528\u6237dn" tabindex="-1"><a class="header-anchor" href="#\u57FA\u4E8Eldap\u7684\u7528\u6237-\u7EC4\u5F15\u7528\u7528\u6237dn" aria-hidden="true">#</a> \u57FA\u4E8ELDAP\u7684\u7528\u6237/\u7EC4\u5F15\u7528\u7528\u6237DN</h5><p>\u4EE5\u4E0B\u662F\u4ECELDAP\u52A0\u8F7D\u7528\u6237\u548C\u79DF\u6237\u7684\u793A\u4F8B\u3002\u7EC4\u6210\u5458\u8D44\u683C\u5C06\u901A\u8FC7\u6BCF\u4E2A\u7EC4\u7684\u6210\u5458\u5C5E\u6027\u6765\u9A71\u52A8\u3002\u6388\u6743\u4ECD\u5C06\u4F7F\u7528\u57FA\u4E8E\u6587\u4EF6\u7684\u8BBF\u95EE\u7B56\u7565:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>dn: cn=User 1\uFF0Cou=users\uFF0Co=NiFi
objectClass: organizationalPerson
objectClass: person
objectClass: inetOrgPerson
objectClass: top
cn: User 1
sn: User1
uid: user1

dn: cn=User 2\uFF0Cou=users\uFF0Co=NiFi
objectClass: organizationalPerson
objectClass: person
objectClass: inetOrgPerson
objectClass: top
cn: User 2
sn: User2
uid: user2

dn: cn=admins\uFF0Cou=groups\uFF0Co=NiFi
objectClass: groupOfNames
objectClass: top
cn: admins
member: cn=User 1\uFF0Cou=users\uFF0Co=NiFi
member: cn=User 2\uFF0Cou=users\uFF0Co=NiFi

&lt;authorizers&gt;
    &lt;userGroupProvider&gt;
        &lt;identifier&gt;ldap-user-group-provider&lt;/identifier&gt;
        &lt;class&gt;org.apache.nifi.ldap.tenants.LdapUserGroupProvider&lt;/class&gt;
        &lt;property name=&quot;Authentication Strategy&quot;&gt;ANONYMOUS&lt;/property&gt;

        &lt;property name=&quot;Manager DN&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;Manager Password&quot;&gt;&lt;/property&gt;

        &lt;property name=&quot;TLS - Keystore&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;TLS - Keystore Password&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;TLS - Keystore Type&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;TLS - Truststore&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;TLS - Truststore Password&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;TLS - Truststore Type&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;TLS - Client Auth&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;TLS - Protocol&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;TLS - Shutdown Gracefully&quot;&gt;&lt;/property&gt;

        &lt;property name=&quot;Referral Strategy&quot;&gt;FOLLOW&lt;/property&gt;
        &lt;property name=&quot;Connect Timeout&quot;&gt;10 secs&lt;/property&gt;
        &lt;property name=&quot;Read Timeout&quot;&gt;10 secs&lt;/property&gt;

        &lt;property name=&quot;Url&quot;&gt;ldap://localhost:10389&lt;/property&gt;
        &lt;property name=&quot;Page Size&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;Sync Interval&quot;&gt;30 mins&lt;/property&gt;

        &lt;property name=&quot;User Search Base&quot;&gt;ou=users\uFF0Co=NiFi&lt;/property&gt;
        &lt;property name=&quot;User Object Class&quot;&gt;person&lt;/property&gt;
        &lt;property name=&quot;User Search Scope&quot;&gt;ONE_LEVEL&lt;/property&gt;
        &lt;property name=&quot;User Search Filter&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;User Identity Attribute&quot;&gt;cn&lt;/property&gt;
        &lt;property name=&quot;User Group Name Attribute&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;User Group Name Attribute - Referenced Group Attribute&quot;&gt;&lt;/property&gt;

        &lt;property name=&quot;Group Search Base&quot;&gt;ou=groups\uFF0Co=NiFi&lt;/property&gt;
        &lt;property name=&quot;Group Object Class&quot;&gt;groupOfNames&lt;/property&gt;
        &lt;property name=&quot;Group Search Scope&quot;&gt;ONE_LEVEL&lt;/property&gt;
        &lt;property name=&quot;Group Search Filter&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;Group Name Attribute&quot;&gt;cn&lt;/property&gt;
        &lt;property name=&quot;Group Member Attribute&quot;&gt;member&lt;/property&gt;
        &lt;property name=&quot;Group Member Attribute - Referenced User Attribute&quot;&gt;&lt;/property&gt;
    &lt;/userGroupProvider&gt;
    &lt;accessPolicyProvider&gt;
        &lt;identifier&gt;file-access-policy-provider&lt;/identifier&gt;
        &lt;class&gt;org.apache.nifi.authorization.FileAccessPolicyProvider&lt;/class&gt;
        &lt;property name=&quot;User Group Provider&quot;&gt;ldap-user-group-provider&lt;/property&gt;
        &lt;property name=&quot;Authorizations File&quot;&gt;./conf/authorizations.xml&lt;/property&gt;
        &lt;property name=&quot;Initial Admin Identity&quot;&gt;John Smith&lt;/property&gt;
        &lt;property name=&quot;Legacy Authorized Users File&quot;&gt;&lt;/property&gt;

        &lt;property name=&quot;Node Identity 1&quot;&gt;&lt;/property&gt;
    &lt;/accessPolicyProvider&gt;
    &lt;authorizer&gt;
        &lt;identifier&gt;managed-authorizer&lt;/identifier&gt;
        &lt;class&gt;org.apache.nifi.authorization.StandardManagedAuthorizer&lt;/class&gt;
        &lt;property name=&quot;Access Policy Provider&quot;&gt;file-access-policy-provider&lt;/property&gt;
    &lt;/authorizer&gt;
&lt;/authorizers&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6839\u636E<code>User Identity Attribute</code>\uFF0C<code>Initial Admin Identity</code>\u5C06\u4ECEJohn Smith\u7684\u6761\u76EE\u7684cn\u4E2D\u52A0\u8F7D\u3002</p><h5 id="ldap-based-users-groups-referencing-user-attribute" tabindex="-1"><a class="header-anchor" href="#ldap-based-users-groups-referencing-user-attribute" aria-hidden="true">#</a> LDAP-based Users/Groups Referencing User Attribute</h5><p>Here is an example loading users and groups from LDAP. Group membership will be driven through the member uid attribute of each group. Authorization will still use file-based access policies:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>dn: uid=User 1\uFF0Cou=Users\uFF0Cdc=local
objectClass: inetOrgPerson
objectClass: posixAccount
objectClass: shadowAccount
uid: user1
cn: User 1

dn: uid=User 2\uFF0Cou=Users\uFF0Cdc=local
objectClass: inetOrgPerson
objectClass: posixAccount
objectClass: shadowAccount
uid: user2
cn: User 2

dn: cn=Managers\uFF0Cou=Groups\uFF0Cdc=local
objectClass: posixGroup
cn: Managers
memberUid: user1
memberUid: user2

&lt;authorizers&gt;
    &lt;userGroupProvider&gt;
        &lt;identifier&gt;ldap-user-group-provider&lt;/identifier&gt;
        &lt;class&gt;org.apache.nifi.ldap.tenants.LdapUserGroupProvider&lt;/class&gt;
        &lt;property name=&quot;Authentication Strategy&quot;&gt;ANONYMOUS&lt;/property&gt;

        &lt;property name=&quot;Manager DN&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;Manager Password&quot;&gt;&lt;/property&gt;

        &lt;property name=&quot;TLS - Keystore&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;TLS - Keystore Password&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;TLS - Keystore Type&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;TLS - Truststore&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;TLS - Truststore Password&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;TLS - Truststore Type&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;TLS - Client Auth&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;TLS - Protocol&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;TLS - Shutdown Gracefully&quot;&gt;&lt;/property&gt;

        &lt;property name=&quot;Referral Strategy&quot;&gt;FOLLOW&lt;/property&gt;
        &lt;property name=&quot;Connect Timeout&quot;&gt;10 secs&lt;/property&gt;
        &lt;property name=&quot;Read Timeout&quot;&gt;10 secs&lt;/property&gt;

        &lt;property name=&quot;Url&quot;&gt;ldap://localhost:10389&lt;/property&gt;
        &lt;property name=&quot;Page Size&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;Sync Interval&quot;&gt;30 mins&lt;/property&gt;

        &lt;property name=&quot;User Search Base&quot;&gt;ou=Users\uFF0Cdc=local&lt;/property&gt;
        &lt;property name=&quot;User Object Class&quot;&gt;posixAccount&lt;/property&gt;
        &lt;property name=&quot;User Search Scope&quot;&gt;ONE_LEVEL&lt;/property&gt;
        &lt;property name=&quot;User Search Filter&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;User Identity Attribute&quot;&gt;cn&lt;/property&gt;
        &lt;property name=&quot;User Group Name Attribute&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;User Group Name Attribute - Referenced Group Attribute&quot;&gt;&lt;/property&gt;

        &lt;property name=&quot;Group Search Base&quot;&gt;ou=Groups\uFF0Cdc=local&lt;/property&gt;
        &lt;property name=&quot;Group Object Class&quot;&gt;posixGroup&lt;/property&gt;
        &lt;property name=&quot;Group Search Scope&quot;&gt;ONE_LEVEL&lt;/property&gt;
        &lt;property name=&quot;Group Search Filter&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;Group Name Attribute&quot;&gt;cn&lt;/property&gt;
        &lt;property name=&quot;Group Member Attribute&quot;&gt;memberUid&lt;/property&gt;
        &lt;property name=&quot;Group Member Attribute - Referenced User Attribute&quot;&gt;uid&lt;/property&gt;
    &lt;/userGroupProvider&gt;
    &lt;accessPolicyProvider&gt;
        &lt;identifier&gt;file-access-policy-provider&lt;/identifier&gt;
        &lt;class&gt;org.apache.nifi.authorization.FileAccessPolicyProvider&lt;/class&gt;
        &lt;property name=&quot;User Group Provider&quot;&gt;ldap-user-group-provider&lt;/property&gt;
        &lt;property name=&quot;Authorizations File&quot;&gt;./conf/authorizations.xml&lt;/property&gt;
        &lt;property name=&quot;Initial Admin Identity&quot;&gt;John Smith&lt;/property&gt;
        &lt;property name=&quot;Legacy Authorized Users File&quot;&gt;&lt;/property&gt;

        &lt;property name=&quot;Node Identity 1&quot;&gt;&lt;/property&gt;
    &lt;/accessPolicyProvider&gt;
    &lt;authorizer&gt;
        &lt;identifier&gt;managed-authorizer&lt;/identifier&gt;
        &lt;class&gt;org.apache.nifi.authorization.StandardManagedAuthorizer&lt;/class&gt;
        &lt;property name=&quot;Access Policy Provider&quot;&gt;file-access-policy-provider&lt;/property&gt;
    &lt;/authorizer&gt;
&lt;/authorizers&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h5 id="composite-file-and-ldap-based-users-groups" tabindex="-1"><a class="header-anchor" href="#composite-file-and-ldap-based-users-groups" aria-hidden="true">#</a> Composite - File and LDAP-based Users/Groups</h5><p>Here is an example composite implementation loading users and groups from LDAP and a local file. Group membership will be driven through the member attribute of each group. The users from LDAP will be read only while the users loaded from the file will be configurable in UI.</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>dn: cn=User 1\uFF0Cou=users\uFF0Co=NiFi
objectClass: organizationalPerson
objectClass: person
objectClass: inetOrgPerson
objectClass: top
cn: User 1
sn: User1
uid: user1

dn: cn=User 2\uFF0Cou=users\uFF0Co=NiFi
objectClass: organizationalPerson
objectClass: person
objectClass: inetOrgPerson
objectClass: top
cn: User 2
sn: User2
uid: user2

dn: cn=admins\uFF0Cou=groups\uFF0Co=NiFi
objectClass: groupOfNames
objectClass: top
cn: admins
member: cn=User 1\uFF0Cou=users\uFF0Co=NiFi
member: cn=User 2\uFF0Cou=users\uFF0Co=NiFi

&lt;authorizers&gt;
    &lt;userGroupProvider&gt;
        &lt;identifier&gt;file-user-group-provider&lt;/identifier&gt;
        &lt;class&gt;org.apache.nifi.authorization.FileUserGroupProvider&lt;/class&gt;
        &lt;property name=&quot;Users File&quot;&gt;./conf/users.xml&lt;/property&gt;
        &lt;property name=&quot;Legacy Authorized Users File&quot;&gt;&lt;/property&gt;

        &lt;property name=&quot;Initial User Identity 1&quot;&gt;cn=NiFi-node1\uFF0Cou=servers\uFF0Cdc=example\uFF0Cdc=com&lt;/property&gt;
        &lt;property name=&quot;Initial User Identity 2&quot;&gt;cn=NiFi-node2\uFF0Cou=servers\uFF0Cdc=example\uFF0Cdc=com&lt;/property&gt;
    &lt;/userGroupProvider&gt;
    &lt;userGroupProvider&gt;
        &lt;identifier&gt;ldap-user-group-provider&lt;/identifier&gt;
        &lt;class&gt;org.apache.nifi.ldap.tenants.LdapUserGroupProvider&lt;/class&gt;
        &lt;property name=&quot;Authentication Strategy&quot;&gt;ANONYMOUS&lt;/property&gt;

        &lt;property name=&quot;Manager DN&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;Manager Password&quot;&gt;&lt;/property&gt;

        &lt;property name=&quot;TLS - Keystore&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;TLS - Keystore Password&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;TLS - Keystore Type&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;TLS - Truststore&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;TLS - Truststore Password&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;TLS - Truststore Type&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;TLS - Client Auth&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;TLS - Protocol&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;TLS - Shutdown Gracefully&quot;&gt;&lt;/property&gt;

        &lt;property name=&quot;Referral Strategy&quot;&gt;FOLLOW&lt;/property&gt;
        &lt;property name=&quot;Connect Timeout&quot;&gt;10 secs&lt;/property&gt;
        &lt;property name=&quot;Read Timeout&quot;&gt;10 secs&lt;/property&gt;

        &lt;property name=&quot;Url&quot;&gt;ldap://localhost:10389&lt;/property&gt;
        &lt;property name=&quot;Page Size&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;Sync Interval&quot;&gt;30 mins&lt;/property&gt;

        &lt;property name=&quot;User Search Base&quot;&gt;ou=users\uFF0Co=NiFi&lt;/property&gt;
        &lt;property name=&quot;User Object Class&quot;&gt;person&lt;/property&gt;
        &lt;property name=&quot;User Search Scope&quot;&gt;ONE_LEVEL&lt;/property&gt;
        &lt;property name=&quot;User Search Filter&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;User Identity Attribute&quot;&gt;cn&lt;/property&gt;
        &lt;property name=&quot;User Group Name Attribute&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;User Group Name Attribute - Referenced Group Attribute&quot;&gt;&lt;/property&gt;

        &lt;property name=&quot;Group Search Base&quot;&gt;ou=groups\uFF0Co=NiFi&lt;/property&gt;
        &lt;property name=&quot;Group Object Class&quot;&gt;groupOfNames&lt;/property&gt;
        &lt;property name=&quot;Group Search Scope&quot;&gt;ONE_LEVEL&lt;/property&gt;
        &lt;property name=&quot;Group Search Filter&quot;&gt;&lt;/property&gt;
        &lt;property name=&quot;Group Name Attribute&quot;&gt;cn&lt;/property&gt;
        &lt;property name=&quot;Group Member Attribute&quot;&gt;member&lt;/property&gt;
        &lt;property name=&quot;Group Member Attribute - Referenced User Attribute&quot;&gt;&lt;/property&gt;
    &lt;/userGroupProvider&gt;
    &lt;userGroupProvider&gt;
        &lt;identifier&gt;composite-user-group-provider&lt;/identifier&gt;
        &lt;class&gt;org.apache.nifi.authorization.CompositeConfigurableUserGroupProvider&lt;/class&gt;
        &lt;property name=&quot;Configurable User Group Provider&quot;&gt;file-user-group-provider&lt;/property&gt;
        &lt;property name=&quot;User Group Provider 1&quot;&gt;ldap-user-group-provider&lt;/property&gt;
    &lt;/userGroupProvider&gt;
    &lt;accessPolicyProvider&gt;
        &lt;identifier&gt;file-access-policy-provider&lt;/identifier&gt;
        &lt;class&gt;org.apache.nifi.authorization.FileAccessPolicyProvider&lt;/class&gt;
        &lt;property name=&quot;User Group Provider&quot;&gt;composite-user-group-provider&lt;/property&gt;
        &lt;property name=&quot;Authorizations File&quot;&gt;./conf/authorizations.xml&lt;/property&gt;
        &lt;property name=&quot;Initial Admin Identity&quot;&gt;John Smith&lt;/property&gt;
        &lt;property name=&quot;Legacy Authorized Users File&quot;&gt;&lt;/property&gt;

        &lt;property name=&quot;Node Identity 1&quot;&gt;cn=NiFi-node1\uFF0Cou=servers\uFF0Cdc=example\uFF0Cdc=com&lt;/property&gt;
        &lt;property name=&quot;Node Identity 2&quot;&gt;cn=NiFi-node2\uFF0Cou=servers\uFF0Cdc=example\uFF0Cdc=com&lt;/property&gt;
    &lt;/accessPolicyProvider&gt;
    &lt;authorizer&gt;
        &lt;identifier&gt;managed-authorizer&lt;/identifier&gt;
        &lt;class&gt;org.apache.nifi.authorization.StandardManagedAuthorizer&lt;/class&gt;
        &lt;property name=&quot;Access Policy Provider&quot;&gt;file-access-policy-provider&lt;/property&gt;
    &lt;/authorizer&gt;
&lt;/authorizers&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>In this example, the users and groups are loaded from LDAP but the servers are managed in a local file. The Initial Admin Identity value came from an attribute in a LDAP entry based on the User Identity Attribute. The Node Identity values are established in the local file using the Initial User Identity properties.</p><h4 id="\u65E7\u7248\u6388\u6743\u7528\u6237-nifi\u5B9E\u4F8B\u5347\u7EA7" tabindex="-1"><a class="header-anchor" href="#\u65E7\u7248\u6388\u6743\u7528\u6237-nifi\u5B9E\u4F8B\u5347\u7EA7" aria-hidden="true">#</a> \u65E7\u7248\u6388\u6743\u7528\u6237(NiFi\u5B9E\u4F8B\u5347\u7EA7)</h4><p>If you are upgrading from a 0.x NiFi instance, you can convert your previously configured users and roles to the multi-tenant authorization model. In the authorizers.xml file, specify the location of your existing authorized-users.xml file in the Legacy Authorized Users File property.</p><p>Here is an example entry:</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>authorizers</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>userGroupProvider</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>identifier</span><span class="token punctuation">&gt;</span></span>file-user-group-provider<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>identifier</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span><span class="token punctuation">&gt;</span></span>org.apache.nifi.authorization.FileUserGroupProvider<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>class</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Users File<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>./conf/users.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Legacy Authorized Users File<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>/Users/johnsmith/config_files/authorized-users.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Initial User Identity 1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>userGroupProvider</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>accessPolicyProvider</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>identifier</span><span class="token punctuation">&gt;</span></span>file-access-policy-provider<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>identifier</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span><span class="token punctuation">&gt;</span></span>org.apache.nifi.authorization.FileAccessPolicyProvider<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>class</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>User Group Provider<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>file-user-group-provider<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Authorizations File<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>./conf/authorizations.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Initial Admin Identity<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Legacy Authorized Users File<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>/Users/johnsmith/config_files/authorized-users.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Node Identity 1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>accessPolicyProvider</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>authorizer</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>identifier</span><span class="token punctuation">&gt;</span></span>managed-authorizer<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>identifier</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span><span class="token punctuation">&gt;</span></span>org.apache.nifi.authorization.StandardManagedAuthorizer<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>class</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Access Policy Provider<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>file-access-policy-provider<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>authorizer</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>authorizers</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>After you have edited and saved the authorizers.xml file, restart NiFi. Users and roles from the authorized-users.xml file are converted and added as identities and policies in the users.xml and authorizations.xml files. Once the application starts, users who previously had a legacy Administrator role can access the UI and begin managing users, groups, and policies.</p><p>The following tables summarize the global and component policies assigned to each legacy role if the NiFi instance has an existing flow.xml.gz:</p><h5 id="\u5168\u5C40\u8BBF\u95EE\u653F\u7B56" tabindex="-1"><a class="header-anchor" href="#\u5168\u5C40\u8BBF\u95EE\u653F\u7B56" aria-hidden="true">#</a> \u5168\u5C40\u8BBF\u95EE\u653F\u7B56</h5><table><thead><tr><th></th><th>Admin</th><th>DFM</th><th>Monitor</th><th>Provenance</th><th>NiFi</th><th>Proxy</th></tr></thead><tbody><tr><td>view the UI</td><td>*</td><td>*</td><td>*</td><td></td><td></td><td></td></tr><tr><td>access the controller - view</td><td>*</td><td>*</td><td>*</td><td></td><td>*</td><td></td></tr><tr><td>access the controller - modify</td><td></td><td>*</td><td></td><td></td><td></td><td></td></tr><tr><td>access parameter contexts - view</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>access parameter contexts - modify</td><td></td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>query provenance</td><td></td><td></td><td></td><td>*</td><td></td><td></td></tr><tr><td>access restricted components</td><td></td><td>*</td><td></td><td></td><td></td><td></td></tr><tr><td>access all policies - view</td><td>*</td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>access all policies - modify</td><td>*</td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>access users/user groups - view</td><td>*</td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>access users/user groups - modify</td><td>*</td><td></td><td></td><td></td><td></td><td></td></tr><tr><td>retrieve site-to-site details</td><td></td><td></td><td></td><td></td><td>*</td><td></td></tr><tr><td>view system diagnostics</td><td></td><td>*</td><td>*</td><td></td><td></td><td></td></tr><tr><td>proxy user requests</td><td></td><td></td><td></td><td></td><td></td><td>*</td></tr><tr><td>access counters</td><td></td><td></td><td></td><td></td><td></td><td></td></tr></tbody></table><h4 id="root\u8FDB\u7A0B\u7EC4\u4E0A\u7684\u7EC4\u4EF6\u8BBF\u95EE\u7B56\u7565" tabindex="-1"><a class="header-anchor" href="#root\u8FDB\u7A0B\u7EC4\u4E0A\u7684\u7EC4\u4EF6\u8BBF\u95EE\u7B56\u7565" aria-hidden="true">#</a> Root\u8FDB\u7A0B\u7EC4\u4E0A\u7684\u7EC4\u4EF6\u8BBF\u95EE\u7B56\u7565</h4><table><thead><tr><th></th><th>Admin</th><th>DFM</th><th>Monitor</th><th>Provenance</th><th>NiFi</th><th>Proxy</th></tr></thead><tbody><tr><td>view the component</td><td>*</td><td>*</td><td>*</td><td></td><td></td><td></td></tr><tr><td>modify the component</td><td></td><td>*</td><td></td><td></td><td></td><td></td></tr><tr><td>view the data</td><td></td><td>*</td><td></td><td>*</td><td></td><td>*</td></tr><tr><td>modify the data</td><td></td><td>*</td><td></td><td></td><td></td><td>*</td></tr><tr><td>view provenance</td><td></td><td></td><td></td><td>*</td><td></td><td></td></tr></tbody></table><p>\u6709\u5173\u8868\u4E2D\u5404\u4E2A\u7B56\u7565\u7684\u8BE6\u7EC6\u4FE1\u606F\uFF0C\u8BF7\u53C2\u9605<a href="#%E8%AE%BF%E9%97%AE%E7%AD%96%E7%95%A5(Access%20Policies)">\u8BBF\u95EE\u7B56\u7565(Access Policies)</a>\u3002</p><blockquote><p>\u5982\u679C\u5C5E\u6027<code>Initial Admin Identity</code>\u548C<code>Legacy Authorized Users File</code>\u5C5E\u6027\u90FD\u5B58\u5728\u503C\uFF0C\u5219NiFi\u65E0\u6CD5\u91CD\u65B0\u542F\u52A8\u3002\u4F60\u53EA\u80FD\u6307\u5B9A\u5176\u4E2D\u4E00\u4E2A\u503C\u6765\u521D\u59CB\u5316\u6388\u6743\u3002</p></blockquote><blockquote><p>\u4E0D\u8981\u624B\u52A8\u7F16\u8F91<code>authorizations.xml</code>\u6587\u4EF6\u3002\u4EC5\u5728\u521D\u59CB\u8BBE\u7F6E\u671F\u95F4\u4EE5\u53CA\u4E4B\u540E\u4F7F\u7528NiFi UI\u521B\u5EFA\u6388\u6743\u3002</p></blockquote><h4 id="\u96C6\u7FA4\u8282\u70B9\u6807\u8BC6-cluster-node-identities" tabindex="-1"><a class="header-anchor" href="#\u96C6\u7FA4\u8282\u70B9\u6807\u8BC6-cluster-node-identities" aria-hidden="true">#</a> \u96C6\u7FA4\u8282\u70B9\u6807\u8BC6(Cluster Node Identities)</h4><p>\u5982\u679C\u5728\u96C6\u7FA4\u73AF\u5883\u4E2D\u8FD0\u884CNiFi\uFF0C\u5219\u5FC5\u987B\u4E3A\u6BCF\u4E2A\u8282\u70B9\u6307\u5B9A\u6807\u8BC6\u3002\u5728\u542F\u52A8\u671F\u95F4\u521B\u5EFA\u8282\u70B9\u901A\u4FE1\u6240\u9700\u7684\u6388\u6743\u7B56\u7565\u3002</p><p>\u4F8B\u5982\uFF0C\u5982\u679C\u8981\u4E3A\u6BCF\u4E2A\u8282\u70B9\u8BBE\u7F6E\u5177\u6709\u4EE5\u4E0BDN\u76842\u8282\u70B9\u96C6\u7FA4:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>cn=NiFi-1\uFF0Cou=people\uFF0Cdc=example\uFF0Cdc=com
cn=NiFi-2\uFF0Cou=people\uFF0Cdc=example\uFF0Cdc=com
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>authorizers</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>userGroupProvider</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>identifier</span><span class="token punctuation">&gt;</span></span>file-user-group-provider<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>identifier</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span><span class="token punctuation">&gt;</span></span>org.apache.nifi.authorization.FileUserGroupProvider<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>class</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Users File<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>./conf/users.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Legacy Authorized Users File<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Initial User Identity 1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>johnsmith@nifi.APACHE.ORG<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Initial User Identity 2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>cn=NiFi-1\uFF0Cou=people\uFF0Cdc=example\uFF0Cdc=com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Initial User Identity 3<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>cn=NiFi-2\uFF0Cou=people\uFF0Cdc=example\uFF0Cdc=com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>userGroupProvider</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>accessPolicyProvider</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>identifier</span><span class="token punctuation">&gt;</span></span>file-access-policy-provider<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>identifier</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span><span class="token punctuation">&gt;</span></span>org.apache.nifi.authorization.FileAccessPolicyProvider<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>class</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>User Group Provider<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>file-user-group-provider<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Authorizations File<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>./conf/authorizations.xml<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Initial Admin Identity<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>johnsmith@nifi.APACHE.ORG<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Legacy Authorized Users File<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Node Identity 1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>cn=NiFi-1\uFF0Cou=people\uFF0Cdc=example\uFF0Cdc=com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Node Identity 2<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>cn=NiFi-2\uFF0Cou=people\uFF0Cdc=example\uFF0Cdc=com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>accessPolicyProvider</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>authorizer</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>identifier</span><span class="token punctuation">&gt;</span></span>managed-authorizer<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>identifier</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span><span class="token punctuation">&gt;</span></span>org.apache.nifi.authorization.StandardManagedAuthorizer<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>class</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Access Policy Provider<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>file-access-policy-provider<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>authorizer</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>authorizers</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>\u5728\u96C6\u7FA4\u4E2D\uFF0C\u6240\u6709\u8282\u70B9\u5FC5\u987B\u5177\u6709\u76F8\u540C\u7684<code>authorizations.xml</code>\u548C<code>users.xml</code>\u3002\u552F\u4E00\u7684\u4F8B\u5916\u662F\uFF0C\u5728\u52A0\u5165\u96C6\u7FA4\u4E4B\u524D\uFF0C\u5982\u679C\u8282\u70B9\u7684<code>authorizations.xml</code>\u548C<code>user.xml</code>\u6587\u4EF6\u4E3A\u7A7A\u3002\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u8282\u70B9\u5C06\u5728\u542F\u52A8\u671F\u95F4\u4ECE\u96C6\u7FA4\u7EE7\u627F\u5B83\u4EEC\u3002</p></blockquote><p>\u73B0\u5728\u5DF2\u7ECF\u521B\u5EFA\u4E86\u521D\u59CB\u6388\u6743\uFF0C\u53EF\u4EE5\u5728NiFi UI\u4E2D\u521B\u5EFA\u548C\u7BA1\u7406\u5176\u4ED6\u7528\u6237\uFF0C\u79DF\u6237\u548C\u6388\u6743\u7B56\u7565\u3002</p><h3 id="\u914D\u7F6E\u7528\u6237\u548C\u8BBF\u95EE\u7B56\u7565-configuring-users-access-policies" tabindex="-1"><a class="header-anchor" href="#\u914D\u7F6E\u7528\u6237\u548C\u8BBF\u95EE\u7B56\u7565-configuring-users-access-policies" aria-hidden="true">#</a> \u914D\u7F6E\u7528\u6237\u548C\u8BBF\u95EE\u7B56\u7565(Configuring Users &amp; Access Policies)</h3><p>\u6839\u636E\u914D\u7F6E\u7684UserGroupProvider\u548CAccessPolicyProvider\u7684\u529F\u80FD\uFF0C\u53EF\u4EE5\u5728UI\u4E2D\u914D\u7F6E\u7528\u6237\uFF0C\u79DF\u6237\u548C\u7B56\u7565\u3002</p><p>\u672C\u8282\u5047\u5B9A\u7528\u6237\uFF0C\u79DF\u6237\u548C\u7B56\u7565\u53EF\u5728UI\u4E2D\u914D\u7F6E\uFF0C\u5E76\u63CF\u8FF0:</p><ul><li>\u5982\u4F55\u521B\u5EFA\u7528\u6237\u548C\u79DF\u6237</li><li>\u8BBF\u95EE\u7B56\u7565\u5982\u4F55\u7528\u4E8E\u5B9A\u4E49\u6388\u6743</li><li>\u5982\u4F55\u67E5\u770B\u5728\u7528\u6237\u4E0A\u8BBE\u7F6E\u7684\u7B56\u7565</li><li>\u5982\u4F55\u901A\u8FC7\u904D\u5386\u7279\u5B9A\u793A\u4F8B\u6765\u914D\u7F6E\u8BBF\u95EE\u7B56\u7565</li></ul><blockquote><p>\u4EE5\u4E0B\u8BF4\u660E\u5047\u5B9AUser1\u662F\u5177\u6709\u7BA1\u7406\u5458\u6743\u9650\u7684\u7528\u6237\uFF0C\u4F8B\u5982<code>Initial Admin Identity</code>\u7528\u6237\u6216\u8F6C\u6362\u540E\u7684\u65E7\u7BA1\u7406\u5458\u7528\u6237(\u8BF7\u53C2\u9605<a href="#Authorizers.xml%E8%AE%BE%E7%BD%AE">Authorizers.xml\u8BBE\u7F6E</a>)\u3002</p></blockquote><h4 id="\u521B\u5EFA\u7528\u6237\u548C\u79DF\u6237-creating-users-and-groups" tabindex="-1"><a class="header-anchor" href="#\u521B\u5EFA\u7528\u6237\u548C\u79DF\u6237-creating-users-and-groups" aria-hidden="true">#</a> \u521B\u5EFA\u7528\u6237\u548C\u79DF\u6237(Creating Users and Groups)</h4><p>\u5728UI\u4E2D\uFF0C\u4ECE\u5168\u5C40\u83DC\u5355\u4E2D\u9009\u62E9<code>Users</code>\u3002\u8FD9\u5C06\u6253\u5F00\u4E00\u4E2A\u7528\u4E8E\u521B\u5EFA\u548C\u7BA1\u7406\u7528\u6237\u548C\u79DF\u6237\u7684\u5BF9\u8BDD\u6846\u3002</p><p><img src="`+g+'" alt=""></p><p>\u5355\u51FB<code>Add</code>\u56FE\u6807(<img src="https://nifichina.gitee.io/image/general/iconAddUser.png" alt="\u6DFB\u52A0\u7528\u6237\u56FE\u6807">)\u3002\u8981\u521B\u5EFA\u7528\u6237\uFF0C\u8BF7\u8F93\u5165\u4E0E\u4E3A\u4FDD\u62A4\u4F60\u7684NiFi\u5B9E\u4F8B\u800C\u9009\u62E9\u7684\u8EAB\u4EFD\u9A8C\u8BC1\u65B9\u6CD5\u76F8\u5173\u7684<code>Identity</code>\u4FE1\u606F\u3002\u5355\u51FB\u786E\u5B9A\u3002</p><p><img src="'+m+'" alt=""></p><p>\u8981\u521B\u5EFA\u79DF\u6237\uFF0C\u8BF7\u9009\u62E9&quot;Group&quot;\u5355\u9009\u6309\u94AE\uFF0C\u8F93\u5165\u7EC4\u7684\u540D\u79F0\uFF0C\u7136\u540E\u9009\u62E9\u8981\u5305\u62EC\u5728\u7EC4\u4E2D\u7684\u7528\u6237\u3002\u5355\u51FB\u786E\u5B9A\u3002</p><p><img src="'+v+'" alt=""></p><h4 id="\u8BBF\u95EE\u7B56\u7565-access-policies" tabindex="-1"><a class="header-anchor" href="#\u8BBF\u95EE\u7B56\u7565-access-policies" aria-hidden="true">#</a> \u8BBF\u95EE\u7B56\u7565(Access Policies)</h4><p>\u4F60\u53EF\u4EE5\u4F7F\u7528&quot;access policies&quot;\u7BA1\u7406\u7528\u6237\u548C\u79DF\u6237\u67E5\u770B\u6216\u4FEE\u6539NiFi\u8D44\u6E90\u7684\u80FD\u529B\u3002\u53EF\u4EE5\u5C06\u4E24\u79CD\u7C7B\u578B\u7684\u8BBF\u95EE\u7B56\u7565\u5E94\u7528\u4E8E\u8D44\u6E90:</p><ul><li><p>View - \u5982\u679C\u4E3A\u8D44\u6E90\u521B\u5EFA\u4E86\u89C6\u56FE\u7B56\u7565\uFF0C\u5219\u53EA\u6709\u6DFB\u52A0\u5230\u8BE5\u7B56\u7565\u7684\u7528\u6237\u6216\u7EC4\u624D\u80FD\u770B\u5230\u8BE5\u8D44\u6E90\u7684\u8BE6\u7EC6\u4FE1\u606F\u3002</p></li><li><p>Modify - \u5982\u679C\u8D44\u6E90\u5177\u6709\u4FEE\u6539\u7B56\u7565\uFF0C\u5219\u53EA\u6709\u6DFB\u52A0\u5230\u8BE5\u7B56\u7565\u7684\u7528\u6237\u6216\u7EC4\u624D\u80FD\u66F4\u6539\u8BE5\u8D44\u6E90\u7684\u914D\u7F6E\u3002</p></li></ul><p>\u4F60\u53EF\u4EE5\u5728\u5168\u5C40\u548C\u7EC4\u4EF6\u7EA7\u522B\u521B\u5EFA\u548C\u5E94\u7528\u8BBF\u95EE\u7B56\u7565\u3002</p><h5 id="\u5168\u5C40\u8BBF\u95EE\u653F\u7B56-1" tabindex="-1"><a class="header-anchor" href="#\u5168\u5C40\u8BBF\u95EE\u653F\u7B56-1" aria-hidden="true">#</a> \u5168\u5C40\u8BBF\u95EE\u653F\u7B56</h5><p>\u5168\u5C40\u8BBF\u95EE\u7B56\u7565\u7BA1\u7406\u4EE5\u4E0B\u7CFB\u7EDF\u7EA7\u6388\u6743:</p><table><thead><tr><th>Policy</th><th>Privilege</th><th>Global Menu Selection</th><th>Resource Descriptor</th></tr></thead><tbody><tr><td>view the UI</td><td>\u5141\u8BB8\u7528\u6237\u67E5\u770BUI</td><td>N/A</td><td><code>/flow</code></td></tr><tr><td>access the controller</td><td>\u5141\u8BB8\u7528\u6237\u67E5\u770B/\u4FEE\u6539\u63A7\u5236\u5668\uFF0C\u5305\u62EC\u62A5\u544A\u4EFB\u52A1\uFF0C\u63A7\u5236\u5668\u670D\u52A1\uFF0C\u53C2\u6570\u4E0A\u4E0B\u6587\u548C\u96C6\u7FA4\u4E2D\u7684\u8282\u70B9</td><td>Controller Settings</td><td><code>/controller</code></td></tr><tr><td>access parameter contexts</td><td>\u5141\u8BB8\u7528\u6237\u67E5\u770B/\u4FEE\u6539\u53C2\u6570\u4E0A\u4E0B\u6587\u3002\u9664\u975E\u88AB\u8986\u76D6\uFF0C\u5426\u5219\u5BF9\u53C2\u6570\u4E0A\u4E0B\u6587\u7684\u8BBF\u95EE\u5C06\u4ECE\u201Caccess the controller\u201D\u7B56\u7565\u7EE7\u627F\u3002</td><td>Parameter Contexts</td><td><code>/parameter-contexts</code></td></tr><tr><td>query provenance</td><td>\u5141\u8BB8\u7528\u6237\u63D0\u4EA4Provenance Search\u548C\u8BF7\u6C42\u8840\u7F18\u5173\u7CFB</td><td>Data Provenance</td><td><code>/provenance</code></td></tr><tr><td>access restricted components</td><td>\u5047\u8BBE\u5176\u4ED6\u6743\u9650\u5C31\u8DB3\u591F\u4E86\uFF0C\u5141\u8BB8\u7528\u6237\u521B\u5EFA/\u4FEE\u6539\u53D7\u9650\u7EC4\u4EF6\u3002\u53D7\u9650\u7EC4\u4EF6\u53EF\u4EE5\u6307\u793A\u9700\u8981\u54EA\u4E9B\u7279\u5B9A\u6743\u9650\u3002\u53EF\u4EE5\u6388\u4E88\u7279\u5B9A\u9650\u5236\u7684\u6743\u9650\uFF0C\u4E5F\u53EF\u4EE5\u4E0D\u53D7\u9650\u5236\u5730\u6388\u4E88\u6743\u9650\u3002\u5982\u679C\u65E0\u8BBA\u9650\u5236\u5982\u4F55\u90FD\u6388\u4E88\u8BB8\u53EF\uFF0C\u5219\u7528\u6237\u53EF\u4EE5\u521B\u5EFA/\u4FEE\u6539\u6240\u6709\u53D7\u9650\u5236\u7684\u7EC4\u4EF6\u3002</td><td>N/A</td><td><code>/restricted-components</code></td></tr><tr><td>access all policies</td><td>\u5141\u8BB8\u7528\u6237\u67E5\u770B/\u4FEE\u6539\u6240\u6709\u7EC4\u4EF6\u7684\u7B56\u7565</td><td>Policies</td><td><code>/policies</code></td></tr><tr><td>access users/user groups</td><td>\u5141\u8BB8\u7528\u6237\u67E5\u770B/\u4FEE\u6539\u7528\u6237\u548C\u7528\u6237\u7EC4</td><td>Users</td><td><code>/tenants</code></td></tr><tr><td>retrieve site-to-site details</td><td>\u5141\u8BB8\u5176\u4ED6NiFi\u5B9E\u4F8B\u68C0\u7D22\u7AD9\u70B9\u5230\u7AD9\u70B9\u8BE6\u7EC6\u4FE1\u606F</td><td>N/A</td><td><code>/site-to-site</code></td></tr><tr><td>view system diagnostics</td><td>\u5141\u8BB8\u7528\u6237\u67E5\u770B\u7CFB\u7EDF\u8BCA\u65AD</td><td>Summary</td><td><code>/system</code></td></tr><tr><td>proxy user requests</td><td>\u5141\u8BB8\u4EE3\u7406\u8BA1\u7B97\u673A\u4EE3\u8868\u4ED6\u4EBA\u53D1\u9001\u8BF7\u6C42</td><td>N/A</td><td><code>/proxy</code></td></tr><tr><td>access counters</td><td>\u5141\u8BB8\u7528\u6237\u67E5\u770B/\u4FEE\u6539\u8BA1\u6570\u5668</td><td>Counters</td><td><code>/counters</code></td></tr></tbody></table><h5 id="\u7EC4\uFFFD\uFFFD\uFFFD\u7EA7\u8BBF\u95EE\u7B56\u7565" tabindex="-1"><a class="header-anchor" href="#\u7EC4\uFFFD\uFFFD\uFFFD\u7EA7\u8BBF\u95EE\u7B56\u7565" aria-hidden="true">#</a> \u7EC4\uFFFD\uFFFD\uFFFD\u7EA7\u8BBF\u95EE\u7B56\u7565</h5><p>\u7EC4\u4EF6\u7EA7\u8BBF\u95EE\u7B56\u7565\u7BA1\u7406\u4EE5\u4E0B\u7EC4\u4EF6\u7EA7\u522B\u6388\u6743:</p><table><thead><tr><th>Policy</th><th>Privilege</th><th>Resource Descriptor &amp; Action</th></tr></thead><tbody><tr><td>view the component</td><td>\u5141\u8BB8\u7528\u6237\u67E5\u770B\u7EC4\u4EF6\u914D\u7F6E\u8BE6\u7EC6\u4FE1\u606F</td><td><code>resource=&quot;/&lt;component-type&gt;/&lt;component-UUID&gt;&quot; action=&quot;R&quot;</code></td></tr><tr><td>modify the component</td><td>\u5141\u8BB8\u7528\u6237\u4FEE\u6539\u7EC4\u4EF6\u914D\u7F6E\u8BE6\u7EC6\u4FE1\u606F</td><td><code>resource=&quot;/&lt;component-type&gt;/&lt;component-UUID&gt;&quot; action=&quot;W&quot;</code></td></tr><tr><td>operate the component</td><td>\u5141\u8BB8\u7528\u6237\u901A\u8FC7\u66F4\u6539\u7EC4\u4EF6\u8FD0\u884C\u72B6\u6001\uFF08\u542F\u52A8/\u505C\u6B62/\u542F\u7528/\u7981\u7528\uFF09\uFF0C\u8FDC\u7A0B\u7AEF\u53E3\u4F20\u8F93\u72B6\u6001\u6216\u7EC8\u6B62\u5904\u7406\u5668\u7EBF\u7A0B\u6765\u64CD\u4F5C\u7EC4\u4EF6</td><td><code>resource=&quot;/operation/&lt;component-type&gt;/&lt;component-UUID&gt;&quot; action=&quot;W&quot;</code></td></tr><tr><td>view provenance</td><td>\u5141\u8BB8\u7528\u6237\u67E5\u770B\u6B64\u7EC4\u4EF6\u751F\u6210\u7684provenance events</td><td><code>resource=&quot;/provenance-data/&lt;component-type&gt;/&lt;component-UUID&gt;&quot; action=&quot;R&quot;</code></td></tr><tr><td>view the data</td><td>\u5141\u8BB8\u7528\u6237\u5728\u51FA\u7AD9\u8FDE\u63A5\u4E2D\u548C\u901A\u8FC7provenance events\u67E5\u770B\u6D41\u6587\u4EF6\u961F\u5217\u4E2D\u8BE5\u7EC4\u4EF6\u7684\u5143\u6570\u636E\u548C\u5185\u5BB9</td><td><code>resource=&quot;/data/&lt;component-type&gt;/&lt;component-UUID&gt;&quot; action=&quot;R&quot;</code></td></tr><tr><td>modify the data</td><td>\u5141\u8BB8\u7528\u6237\u6E05\u7A7A\u51FA\u7AD9\u8FDE\u63A5\u4E2D\u7684\u6D41\u6587\u4EF6\u961F\u5217\uFF0C\u5E76\u901A\u8FC7provenance events\u63D0\u4EA4\u91CD\u64AD</td><td><code>resource=&quot;/data/&lt;component-type&gt;/&lt;component-UUID&gt;&quot; action=&quot;W&quot;</code></td></tr><tr><td>view the policies</td><td>\u5141\u8BB8\u7528\u6237\u67E5\u770B\u53EF\u4EE5\u67E5\u770B/\u4FEE\u6539\u7EC4\u4EF6\u7684\u7528\u6237\u5217\u8868</td><td><code>resource=&quot;/policies/&lt;component-type&gt;/&lt;component-UUID&gt;&quot; action=&quot;R&quot;</code></td></tr><tr><td>modify the policies</td><td>\u5141\u8BB8\u7528\u6237\u4FEE\u6539\u53EF\u4EE5\u67E5\u770B/\u4FEE\u6539\u7EC4\u4EF6\u7684\u7528\u6237\u5217\u8868</td><td><code>resource=&quot;/policies/&lt;component-type&gt;/&lt;component-UUID&gt;&quot; action=&quot;W&quot;</code></td></tr><tr><td>receive data via site-to-site</td><td>\u5141\u8BB8\u7AEF\u53E3\u4ECENiFi\u5B9E\u4F8B\u63A5\u6536\u6570\u636E</td><td><code>resource=&quot;/data-transfer/input-ports/&lt;port-UUID&gt;&quot; action=&quot;W&quot;</code></td></tr><tr><td>send data via site-to-site</td><td>\u5141\u8BB8\u7AEF\u53E3\u4ECENiFi\u5B9E\u4F8B\u53D1\u9001\u6570\u636E</td><td><code>resource=&quot;/data-transfer/output-ports/&lt;port-UUID&gt;&quot; action=&quot;W&quot;</code></td></tr></tbody></table><p><img src="'+a+'" alt="">\u4F60\u53EF\u4EE5\u5C06\u8BBF\u95EE\u7B56\u7565\u5E94\u7528\u4E8E\u9664\u8FDE\u63A5\u4E4B\u5916\u7684\u6240\u6709\u7EC4\u4EF6\u7C7B\u578B\u3002\u8FDE\u63A5\u6388\u6743\u7531\u8FDE\u63A5\u7684\u6E90\u548C\u76EE\u6807\u7EC4\u4EF6\u4E0A\u7684\u5404\u4E2A\u8BBF\u95EE\u7B56\u7565\u4EE5\u53CA\u5305\u542B\u7EC4\u4EF6\u7684\u8FDB\u7A0B\u7EC4\u7684\u8BBF\u95EE\u7B56\u7565\u63A8\u65AD\u3002\u5728\u4E0B\u9762\u7684<a href="#%E5%88%9B%E5%BB%BA%E8%BF%9E%E6%8E%A5">\u521B\u5EFA\u8FDE\u63A5</a>\u548C<a href="#%E7%BC%96%E8%BE%91%E8%BF%9E%E6%8E%A5">\u7F16\u8F91\u8FDE\u63A5</a>\u793A\u4F8B\u4E2D\u5C06\u5BF9\u6B64\u8FDB\u884C\u66F4\u8BE6\u7EC6\u7684\u8BA8\u8BBA\u3002</p><p><img src="'+a+'" alt="">\u4E3A\u4E86\u8BBF\u95EE\u8FDE\u63A5\u7684\u5217\u8868\u961F\u5217\u6216\u5220\u9664\u961F\u5217\uFF0C\u7528\u6237\u9700\u8981\u5728\u7EC4\u4EF6\u4E0A&quot;view the data&quot;\u548C&quot;modify the data&quot;\u7B56\u7565\u7684\u6743\u9650\u3002\u5728\u96C6\u7FA4\u73AF\u5883\u4E2D\uFF0C\u6240\u6709\u8282\u70B9\u4E5F\u5FC5\u987B\u6DFB\u52A0\u5230\u8FD9\u4E9B\u7B56\u7565\u4E2D\uFF0C\u56E0\u4E3A\u53EF\u4EE5\u901A\u8FC7\u96C6\u7FA4\u4E2D\u7684\u4EFB\u4F55\u8282\u70B9\u590D\u5236\u7528\u6237\u8BF7\u6C42\u3002</p><h5 id="\u8BBF\u95EE\u7B56\u7565\u7EE7\u627F" tabindex="-1"><a class="header-anchor" href="#\u8BBF\u95EE\u7B56\u7565\u7EE7\u627F" aria-hidden="true">#</a> \u8BBF\u95EE\u7B56\u7565\u7EE7\u627F</h5><p>\u7BA1\u7406\u5458\u65E0\u9700\u4E3A\u6570\u636E\u6D41\u4E2D\u7684\u6BCF\u4E2A\u7EC4\u4EF6\u624B\u52A8\u521B\u5EFA\u7B56\u7565\u3002\u4E3A\u4E86\u51CF\u5C11\u7BA1\u7406\u5458\u5728\u6388\u6743\u7BA1\u7406\u4E0A\u82B1\u8D39\u7684\u65F6\u95F4\uFF0C\u7B56\u7565\u5C06\u4ECE\u7236\u8D44\u6E90\u7EE7\u627F\u5230\u5B50\u8D44\u6E90\u3002\u4F8B\u5982\uFF0C\u5982\u679C\u6388\u4E88\u7528\u6237\u67E5\u770B\u548C\u4FEE\u6539\u8FDB\u7A0B\u7EC4\u7684\u6743\u9650\uFF0C\u5219\u8BE5\u7528\u6237\u8FD8\u53EF\u4EE5\u67E5\u770B\u548C\u4FEE\u6539\u8FDB\u7A0B\u7EC4\u4E2D\u7684\u7EC4\u4EF6\u3002\u7B56\u7565\u7EE7\u627F\u4F7F\u7BA1\u7406\u5458\u53EF\u4EE5\u4E00\u6B21\u5206\u914D\u7B56\u7565\uFF0C\u5E76\u5728\u6574\u4E2A\u6570\u636E\u6D41\u4E2D\u5E94\u7528\u7B56\u7565\u3002</p><p>\u4F60\u53EF\u4EE5\u8986\u76D6\u7EE7\u627F\u7684\u7B56\u7565(\u5982\u4E0B\u9762\u7684<a href="#%E7%A7%BB%E5%8A%A8%E5%A4%84%E7%90%86%E5%99%A8">\u79FB\u52A8\u5904\u7406\u5668</a>\u793A\u4F8B\u4E2D\u6240\u8FF0)\u3002\u8986\u76D6\u7B56\u7565\u4F1A\u5220\u9664\u7EE7\u627F\u7684\u7B56\u7565\uFF0C\u4ECE\u7236\u9879\u5230\u5B50\u9879\u65AD\u5F00\u7EE7\u627F\u94FE\uFF0C\u5E76\u521B\u5EFA\u66FF\u6362\u7B56\u7565\u4EE5\u6839\u636E\u9700\u8981\u6DFB\u52A0\u7528\u6237\u3002\u53EF\u4EE5\u901A\u8FC7\u5220\u9664\u66FF\u6362\u7B56\u7565\u6765\u6062\u590D\u7EE7\u627F\u7684\u7B56\u7565\u53CA\u5176\u7528\u6237\u3002</p><p><img src="'+a+'" alt="">&quot;View the policies&quot;\u548C&quot;modify the policies&quot;\u7EC4\u4EF6\u7EA7\u8BBF\u95EE\u7B56\u7565\u662F\u6B64\u7EE7\u627F\u884C\u4E3A\u7684\u4E00\u4E2A\u4F8B\u5916\u3002\u5C06\u7528\u6237\u6DFB\u52A0\u5230\u4EFB\u4E00\u7B56\u7565\u540E\uFF0C\u5B83\u4EEC\u5C06\u6DFB\u52A0\u5230\u5F53\u524D\u7BA1\u7406\u5458\u5217\u8868\u4E2D\u3002\u4ED6\u4EEC\u4E0D\u4F1A\u8986\u76D6\u66F4\u9AD8\u7EA7\u522B\u7684\u7BA1\u7406\u5458\u3002\u56E0\u6B64\uFF0C\u4EC5\u663E\u793A\u7279\u5B9A\u4E8E\u7EC4\u4EF6\u7684\u7BA1\u7406\u5458\u4EE5\u67E5\u770B&quot;View the policies&quot;\u548C&quot;modify the policies&quot;\u8BBF\u95EE\u7B56\u7565\u3002</p><p><img src="'+a+'" alt="">\u4F60\u65E0\u6CD5\u4FEE\u6539\u7EE7\u627F\u7B56\u7565\u4E0A\u7684users/groups\u3002\u53EA\u80FD\u5728\u7236\u7B56\u7565\u6216\u8986\u76D6\u7B56\u7565\u4E2D\u6DFB\u52A0\u6216\u5220\u9664\u7528\u6237\u548C\u79DF\u6237\u3002</p><h4 id="\u67E5\u770B\u7528\u6237\u7B56\u7565" tabindex="-1"><a class="header-anchor" href="#\u67E5\u770B\u7528\u6237\u7B56\u7565" aria-hidden="true">#</a> \u67E5\u770B\u7528\u6237\u7B56\u7565</h4><p>\u5728UI\u4E2D\uFF0C\u4ECE\u5168\u5C40\u83DC\u5355\u4E2D\u9009\u62E9&quot;Users&quot;\u3002\u8FD9\u5C06\u6253\u5F00NiFi\u7528\u6237\u5BF9\u8BDD\u6846\u3002</p><p><img src="'+b+'" alt=""></p><p>\u9009\u62E9&quot;View User Policies&quot;\u56FE\u6807(<img src="https://nifichina.gitee.io/image/general/iconUserPolicies.png" alt="\u7528\u6237\u653F\u7B56\u56FE\u6807">)\u3002</p><p><img src="'+k+'" alt=""></p><p>\u7528\u6237\u7B56\u7565\u7A97\u53E3\u663E\u793A\u5DF2\u4E3A\u6240\u9009\u7528\u6237\u8BBE\u7F6E\u7684\u5168\u5C40\u548C\u7EC4\u4EF6\u7EA7\u7B56\u7565\u3002\u9009\u62E9&quot;Go To&quot;\u56FE\u6807(<img src="https://nifichina.gitee.io/image/general/iconGoTo.png" alt="\u8F6C\u5230\u56FE\u6807">\u4EE5\u5BFC\u822A\u5230\u753B\u5E03\u4E2D\u7684\u8BE5\u7EC4\u4EF6\u3002</p><h4 id="\u8BBF\u95EE\u7B56\u7565\u914D\u7F6E\u793A\u4F8B" tabindex="-1"><a class="header-anchor" href="#\u8BBF\u95EE\u7B56\u7565\u914D\u7F6E\u793A\u4F8B" aria-hidden="true">#</a> \u8BBF\u95EE\u7B56\u7565\u914D\u7F6E\u793A\u4F8B</h4><p>\u4E86\u89E3\u5982\u4F55\u521B\u5EFA\u548C\u5E94\u7528\u8BBF\u95EE\u7B56\u7565\u7684\u6700\u6709\u6548\u65B9\u6CD5\u662F\u4ECB\u7ECD\u4E00\u4E9B\u5E38\u89C1\u793A\u4F8B\u3002\u4EE5\u4E0B\u65B9\u6848\u5047\u5B9AUser1\u662F\u7BA1\u7406\u5458\uFF0C\u800CUser2\u662F\u65B0\u6DFB\u52A0\u7684\u7528\u6237\uFF0C\u4EC5\u5177\u6709\u5BF9UI\u7684\u8BBF\u95EE\u6743\u9650\u3002</p><p>\u8BA9\u6211\u4EEC\u4ECE\u753B\u5E03\u4E0A\u7684\u4E24\u4E2A\u5904\u7406\u5668\u5F00\u59CB\u4F5C\u4E3A\u6211\u4EEC\u7684\u8D77\u70B9:GenerateFlowFile\u548CLogAttribute\u3002</p><p><img src="'+f+'" alt=""></p><p>User1\u53EF\u4EE5\u5411\u6570\u636E\u6D41\u6DFB\u52A0\u7EC4\u4EF6\uFF0C\u5E76\u80FD\u591F\u79FB\u52A8\uFF0C\u7F16\u8F91\u548C\u8FDE\u63A5\u6240\u6709\u5904\u7406\u5668\u3002User1\u53EF\u4EE5\u770B\u5230\u6839\u8FDB\u7A0B\u7EC4\u548C\u5904\u7406\u5668\u7684\u8BE6\u7EC6\u4FE1\u606F\u548C\u5C5E\u6027\u3002</p><p><img src="'+y+'" alt=""></p><p>User1\u5E0C\u671B\u4FDD\u6301\u5176\u5BF9\u6570\u636E\u6D41\u53CA\u5176\u7EC4\u4EF6\u7684\u5F53\u524D\u6743\u9650\u3002</p><p>User2\u65E0\u6CD5\u5C06\u7EC4\u4EF6\u6DFB\u52A0\u5230\u6570\u636E\u6D41\u6216\u79FB\u52A8\uFF0C\u7F16\u8F91\u6216\u8FDE\u63A5\u7EC4\u4EF6\u3002User2\u5C06\u9690\u85CF\u6839\u8FDB\u7A0B\u7EC4\u548C\u5904\u7406\u5668\u7684\u8BE6\u7EC6\u4FE1\u606F\u548C\u5C5E\u6027\u3002</p><p><img src="'+_+'" alt=""></p><h5 id="\u79FB\u52A8\u5904\u7406\u5668" tabindex="-1"><a class="header-anchor" href="#\u79FB\u52A8\u5904\u7406\u5668" aria-hidden="true">#</a> \u79FB\u52A8\u5904\u7406\u5668</h5><p>\u4E3A\u4E86\u5141\u8BB8User2\u5728\u6570\u636E\u6D41\u4E2D\u79FB\u52A8GenerateFlowFile\u5904\u7406\u5668\u800C\u4EC5\u79FB\u52A8\u8BE5\u5904\u7406\u5668\uFF0CUser1\u6267\u884C\u4EE5\u4E0B\u6B65\u9AA4:</p><ol><li><p>\u9009\u62E9GenerateFlowFile\u5904\u7406\u5668\u4EE5\u4F7F\u5176\u7A81\u51FA\u663E\u793A\u3002</p></li><li><p>\u4ECE\u64CD\u4F5C\u9009\u9879\u677F\u4E2D\u9009\u62E9\u8BBF\u95EE\u7B56\u7565\u56FE\u6807(<img src="https://nifichina.gitee.io/image/general/iconAccessPolicies.png" alt="\u8BBF\u95EE\u653F\u7B56\u56FE\u6807">)\uFF0C\u7136\u540E\u6253\u5F00\u8BBF\u95EE\u7B56\u7565\u5BF9\u8BDD\u6846\u3002</p></li><li><p>\u4ECE\u7B56\u7565\u4E0B\u62C9\u5217\u8868\u4E2D\u9009\u62E9\u4FEE\u6539\u7EC4\u4EF6\u3002\u5904\u7406\u5668(\u5B50)\u4E0A\u5F53\u524D\u5B58\u5728\u7684\u4FEE\u6539\u7EC4\u4EF6\u7B56\u7565\u662F\u4ECEUser1\u5177\u6709\u6743\u9650\u7684\u6839\u8FDB\u7A0B\u7EC4(\u7236)\u7EE7\u627F\u7684\u4FEE\u6539\u7EC4\u4EF6\u7B56\u7565\u3002</p><p><img src="'+F+'" alt=""></p></li><li><p>\u5728\u7B56\u7565\u7EE7\u627F\u6D88\u606F\u4E2D\u9009\u62E9&quot;\u8986\u76D6&quot;\u94FE\u63A5\u3002\u521B\u5EFA\u66FF\u6362\u7B56\u7565\u65F6\uFF0C\u4F60\u53EF\u4EE5\u9009\u62E9\u4F7F\u7528\u7EE7\u627F\u7B56\u7565\u7684\u526F\u672C\u6216\u7A7A\u7B56\u7565\u8986\u76D6\u3002\u9009\u62E9&quot;\u8986\u76D6&quot;\u6309\u94AE\u4EE5\u521B\u5EFA\u526F\u672C\u3002</p><p><img src="'+q+'" alt=""></p></li><li><p>\u5728\u521B\u5EFA\u7684\u66FF\u6362\u7B56\u7565\u4E0A\uFF0C\u9009\u62E9\u6DFB\u52A0\u7528\u6237\u56FE\u6807(<img src="https://nifichina.gitee.io/image/general/iconAddUser.png" alt="\u6DFB\u52A0\u7528\u6237\u56FE\u6807">)\u3002\u5728\u7528\u6237\u6807\u8BC6\u5B57\u6BB5\u4E2D\u67E5\u627E\u6216\u8F93\u5165User2\uFF0C\u7136\u540E\u9009\u62E9\u786E\u5B9A\u3002\u901A\u8FC7\u8FD9\u4E9B\u66F4\u6539\uFF0CUser1\u53EF\u4EE5\u5728\u753B\u5E03\u4E0A\u79FB\u52A8\u4E24\u4E2A\u5904\u7406\u5668\u3002User2\u73B0\u5728\u53EF\u4EE5\u79FB\u52A8GenerateFlowFile\u5904\u7406\u5668\uFF0C\u4F46\u65E0\u6CD5\u79FB\u52A8LogAttribute\u5904\u7406\u5668\u3002</p><p><img src="'+x+'" alt=""></p><p><img src="'+N+'" alt=""></p></li></ol><h5 id="\u7F16\u8F91\u5904\u7406\u5668" tabindex="-1"><a class="header-anchor" href="#\u7F16\u8F91\u5904\u7406\u5668" aria-hidden="true">#</a> \u7F16\u8F91\u5904\u7406\u5668</h5><p>\u5728\u4E0A\u9762\u7684\u79FB\u52A8\u5904\u7406\u5668\u793A\u4F8B\u4E2D\uFF0CUser2\u88AB\u6DFB\u52A0\u5230GenerateFlowFile\u7684\u4FEE\u6539\u7EC4\u4EF6\u7B56\u7565\u4E2D\u3002\u5982\u679C\u65E0\u6CD5\u67E5\u770B\u5904\u7406\u5668\u5C5E\u6027\uFF0CUser2\u5C06\u65E0\u6CD5\u4FEE\u6539\u5904\u7406\u5668\u7684\u914D\u7F6E\u3002\u4E3A\u4E86\u7F16\u8F91\u7EC4\u4EF6\uFF0C\u7528\u6237\u5FC5\u987B\u540C\u65F6\u5904\u4E8E\u67E5\u770B\u7EC4\u4EF6\u548C\u4FEE\u6539\u7EC4\u4EF6\u7B56\u7565\u3002\u4E3A\u5B9E\u73B0\u6B64\u76EE\u7684\uFF0CUser1\u6267\u884C\u4EE5\u4E0B\u6B65\u9AA4:</p><ol><li><p>\u9009\u62E9GenerateFlowFile\u5904\u7406\u5668\u3002</p></li><li><p>\u4ECE\u64CD\u4F5C\u9009\u9879\u677F\u4E2D\u9009\u62E9\u8BBF\u95EE\u7B56\u7565\u56FE\u6807(<img src="https://nifichina.gitee.io/image/general/iconAccessPolicies.png" alt="\u8BBF\u95EE\u653F\u7B56\u56FE\u6807">)\uFF0C\u7136\u540E\u6253\u5F00\u8BBF\u95EE\u7B56\u7565\u5BF9\u8BDD\u6846\u3002</p></li><li><p>\u4ECE\u7B56\u7565\u4E0B\u62C9\u5217\u8868\u4E2D\u9009\u62E9\u67E5\u770B\u7EC4\u4EF6\u3002\u7EC4\u4EF6\u5F53\u524D\u5B58\u5728\u4E8E\u5904\u7406\u5668(\u5B50)\u4E0A\u7684\u7B56\u7565\u89C6\u56FE\u662F\u67E5\u770B\u7EC4\u4EF6\u7B56\u7565\u7EE7\u627F\u81EAUser1\u5177\u6709\u6743\u9650\u7684\u6839\u8FDB\u7A0B\u7EC4(\u7236\u7EC4\u4EF6) \u3002</p><p><img src="'+P+'" alt="">)</p></li><li><p>\u5728\u7B56\u7565\u7EE7\u627F\u6D88\u606F\u4E2D\u9009\u62E9\u8986\u76D6\u94FE\u63A5\uFF0C\u4FDD\u7559\u590D\u5236\u7B56\u7565\u7684\u9ED8\u8BA4\u503C\u5E76\u9009\u62E9\u8986\u76D6\u6309\u94AE\u3002</p></li><li><p>\u5728\u521B\u5EFA\u7684\u8986\u76D6\u7B56\u7565\u4E0A\uFF0C\u9009\u62E9&quot;\u6DFB\u52A0\u7528\u6237&quot;\u56FE\u6807(<img src="https://nifichina.gitee.io/image/general/iconAddUser.png" alt="\u6DFB\u52A0\u7528\u6237\u56FE\u6807">)\u3002\u5728\u7528\u6237\u6807\u8BC6\u5B57\u6BB5\u4E2D\u67E5\u627E\u6216\u8F93\u5165User2\uFF0C\u7136\u540E\u9009\u62E9\u786E\u5B9A\u3002\u901A\u8FC7\u8FD9\u4E9B\u66F4\u6539\uFF0CUser1\u53EF\u4EE5\u5728\u753B\u5E03\u4E0A\u67E5\u770B\u548C\u7F16\u8F91\u5904\u7406\u5668\u3002User2\u73B0\u5728\u53EF\u4EE5\u67E5\u770B\u548C\u7F16\u8F91GenerateFlowFile\u5904\u7406\u5668\u3002</p><p><img src="'+A+'" alt=""></p><p><img src="'+S+'" alt=""></p></li></ol><h5 id="\u521B\u5EFA\u8FDE\u63A5" tabindex="-1"><a class="header-anchor" href="#\u521B\u5EFA\u8FDE\u63A5" aria-hidden="true">#</a> \u521B\u5EFA\u8FDE\u63A5</h5><p>\u901A\u8FC7\u524D\u9762\u4E24\u4E2A\u793A\u4F8B\u4E2D\u8BA8\u8BBA\u7684\u914D\u7F6E\u8BBF\u95EE\u7B56\u7565\uFF0CUser1\u80FD\u591F\u5C06GenerateFlowFile\u8FDE\u63A5\u5230LogAttribute:</p><p><img src="'+T+'" alt=""></p><p>User2\u65E0\u6CD5\u5EFA\u7ACB\u8FDE\u63A5::</p><p><img src="'+w+'" alt=""></p><p>\u8FD9\u662F\u56E0\u4E3A:</p><ul><li><p>User2\u5BF9\u8FDB\u7A0B\u7EC4\u6CA1\u6709\u4FEE\u6539\u6743\u9650\u3002</p></li><li><p>\u5373\u4F7FUser2\u5177\u6709\u67E5\u770B\u548C\u4FEE\u6539\u5BF9\u6E90\u7EC4\u4EF6(GenerateFlowFile)\u7684\u8BBF\u95EE\u6743\u9650\uFF0CUser2\u4E5F\u6CA1\u6709\u5BF9\u76EE\u6807\u7EC4\u4EF6(LogAttribute)\u7684\u8BBF\u95EE\u7B56\u7565\u3002</p></li></ul><p>\u5141\u8BB8User2\u5C06GenerateFlowFile\u8FDE\u63A5\u5230LogAttribute\uFF0C\u5982User1:</p><ol><li><p>\u9009\u62E9\u6839\u8FDB\u7A0B\u7EC4\u3002\u64CD\u4F5C\u9009\u9879\u677F\u5C06\u66F4\u65B0\u6839\u8FDB\u7A0B\u7EC4\u7684\u8BE6\u7EC6\u4FE1\u606F\u3002</p></li><li><p>\u4ECE\u64CD\u4F5C\u9009\u9879\u677F\u4E2D\u9009\u62E9\u8BBF\u95EE\u7B56\u7565\u56FE\u6807(<img src="https://nifichina.gitee.io/image/general/iconAccessPolicies.png" alt="\u8BBF\u95EE\u653F\u7B56\u56FE\u6807">)\uFF0C\u7136\u540E\u6253\u5F00\u8BBF\u95EE\u7B56\u7565\u5BF9\u8BDD\u6846\u3002</p></li><li><p>\u4ECE\u7B56\u7565\u4E0B\u62C9\u5217\u8868\u4E2D\u9009\u62E9\u4FEE\u6539\u7EC4\u4EF6\u3002 <img src="'+E+'" alt=""></p></li><li><p>\u9009\u62E9\u6DFB\u52A0\u7528\u6237\u56FE\u6807(<img src="https://nifichina.gitee.io/image/general/iconAddUser.png" alt="\u6DFB\u52A0\u7528\u6237\u56FE\u6807">)\u3002\u627E\u5230\u6216\u8F93\u5165User2\u5E76\u9009\u62E9\u786E\u5B9A\u3002</p></li></ol><p><img src="'+U+'" alt=""></p><p>\u901A\u8FC7\u5C06User2\u6DFB\u52A0\u5230\u8FDB\u7A0B\u7EC4\u4E0A\u7684\u4FEE\u6539\u7EC4\u4EF6\u7B56\u7565\uFF0CUser2\u5C06\u901A\u8FC7\u7B56\u7565\u7EE7\u627F\u6DFB\u52A0\u5230LogAttribute\u5904\u7406\u5668\u4E0A\u7684\u4FEE\u6539\u7EC4\u4EF6\u7B56\u7565\u3002\u8981\u786E\u8BA4\u8FD9\u4E00\u70B9\uFF0C\u8BF7\u7A81\u51FA\u663E\u793ALogAttribute\u5904\u7406\u5668\uFF0C\u7136\u540E\u4ECEOperate\u9762\u677F\u4E2D\u9009\u62E9Access Policies\u56FE\u6807(<img src="https://nifichina.gitee.io/image/general/iconAccessPolicies.png" alt="\u8BBF\u95EE\u653F\u7B56\u56FE\u6807">):</p><p><img src="'+C+'" alt=""></p><p>\u901A\u8FC7\u8FD9\u4E9B\u66F4\u6539\uFF0CUser2\u73B0\u5728\u53EF\u4EE5\u5C06GenerateFlowFile\u5904\u7406\u5668\u8FDE\u63A5\u5230LogAttribute\u5904\u7406\u5668\u3002</p><p><img src="'+L+'" alt=""></p><p><img src="'+I+'" alt=""></p><h5 id="\u7F16\u8F91\u8FDE\u63A5" tabindex="-1"><a class="header-anchor" href="#\u7F16\u8F91\u8FDE\u63A5" aria-hidden="true">#</a> \u7F16\u8F91\u8FDE\u63A5</h5><p>\u5047\u8BBEUser1\u6216User2\u5C06ReplaceText\u5904\u7406\u5668\u6DFB\u52A0\u5230\u6839\u8FDB\u7A0B\u7EC4:</p><p><img src="'+K+'" alt=""></p><p>User1\u53EF\u4EE5\u9009\u62E9\u5E76\u66F4\u6539\u73B0\u6709\u8FDE\u63A5(\u5728GenerateFlowFile\u548CLogAttribute\u4E4B\u95F4)\uFF0C\u73B0\u5728\u5C06GenerateFlowFile\u8FDE\u63A5\u5230ReplaceText:</p><p><img src="'+z+'" alt=""></p><p>\u7528\u62372\u65E0\u6CD5\u6267\u884C\u6B64\u64CD\u4F5C\u3002</p><p><img src="'+D+'" alt=""></p><p>\u5141\u8BB8User2\u5C06GenerateFlowFile\u8FDE\u63A5\u5230ReplaceText\uFF0C\u5982User1:</p><ol><li><p>\u9009\u62E9\u6839\u8FDB\u7A0B\u7EC4\u3002\u64CD\u4F5C\u9009\u9879\u677F\u5C06\u66F4\u65B0\u6839\u8FDB\u7A0B\u7EC4\u7684\u8BE6\u7EC6\u4FE1\u606F\u3002</p></li><li><p>\u9009\u62E9\u8BBF\u95EE\u7B56\u7565\u56FE\u6807(<img src="https://nifichina.gitee.io/image/general/iconAccessPolicies.png" alt="\u8BBF\u95EE\u653F\u7B56\u56FE\u6807">)\u3002</p></li><li><p>\u4ECE\u7B56\u7565\u4E0B\u62C9\u5217\u8868\u4E2D\u9009\u62E9\u67E5\u770B\u7EC4\u4EF6\u3002 <img src="'+B+'" alt=""></p></li><li><p>\u9009\u62E9\u6DFB\u52A0\u7528\u6237\u56FE\u6807(<img src="https://nifichina.gitee.io/image/general/iconAddUser.png" alt="\u6DFB\u52A0\u7528\u6237\u56FE\u6807">)\u3002\u627E\u5230\u6216\u8F93\u5165User2\u5E76\u9009\u62E9\u786E\u5B9A\u3002</p></li></ol><p><img src="'+R+'" alt=""></p><p>\u8981\u6DFB\u52A0\u5230\u8FDB\u7A0B\u7EC4\u7684\u89C6\u56FE\u548C\u4FEE\u6539\u7B56\u7565\uFF0CUser2\u73B0\u5728\u53EF\u4EE5\u5C06GenerateFlowFile\u5904\u7406\u5668\u8FDE\u63A5\u5230ReplaceText\u5904\u7406\u5668\u3002</p><p><img src="'+G+'" alt=""></p><h2 id="\u52A0\u5BC6\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u52A0\u5BC6\u914D\u7F6E" aria-hidden="true">#</a> \u52A0\u5BC6\u914D\u7F6E</h2><p>\u672C\u8282\u6982\u8FF0\u4E86NiFi\u52A0\u5BC6\u548C\u89E3\u5BC6\u6570\u636E\u7684\u529F\u80FD\u3002EncryptContent\u5904\u7406\u5668\u5141\u8BB8\u52A0\u5BC6\u548C\u89E3\u5BC6\u6570\u636E\uFF0C\u8FD9\u4E9B\u6570\u636E\u65E2\u5305\u542B\u5728NiFi\u5185\u90E8\uFF0C\u4E5F\u5305\u542B\u5728\u5916\u90E8\u7CFB\u7EDF(\u5982<code>openssl</code>\u5176\u4ED6\u6570\u636E\u6E90\u548C\u6D88\u8D39\u8005)\u4E2D\u3002</p><h3 id="\u5BC6\u94A5\u6D3E\u751F\u51FD\u6570" tabindex="-1"><a class="header-anchor" href="#\u5BC6\u94A5\u6D3E\u751F\u51FD\u6570" aria-hidden="true">#</a> \u5BC6\u94A5\u6D3E\u751F\u51FD\u6570</h3>',144),pt=t("\u5BC6\u94A5\u5BFC\u51FA\u51FD\u6570(KDF)\u662F\u5C06\u4EBA\u7C7B\u53EF\u8BFB\u4FE1\u606F(\u901A\u5E38\u662F\u5BC6\u7801\u6216\u5176\u4ED6\u79D8\u5BC6\u4FE1\u606F)\u8F6C\u6362\u4E3A\u9002\u5408\u4E8E\u6570\u636E\u4FDD\u62A4\u7684\u52A0\u5BC6\u5BC6\u94A5\u7684\u673A\u5236\u3002\u6709\u5173\u8BE6\u7EC6\u4FE1\u606F\uFF0C\u8BF7\u9605\u8BFB"),lt={href:"https://en.wikipedia.org/wiki/Key_derivation_function",target:"_blank",rel:"noopener noreferrer"},ut=t("\u5173\u952E\u5BFC\u51FA\u51FD\u6570"),ht=t("\u7684"),gt={href:"https://en.wikipedia.org/wiki/Key_derivation_function",target:"_blank",rel:"noopener noreferrer"},mt=t("Wikipedia\u6761\u76EE"),vt=t("\u3002\u76EE\u524D\uFF0CKDF\u7531"),bt=e("code",null,"CipherProvider",-1),kt=t("\u5B9E\u73B0\u63D0\u53D6\u5E76\u8FD4\u56DE"),ft=e("code",null,"Cipher",-1),yt=t("\u7528\u4E8E\u52A0\u5BC6\u6216\u89E3\u5BC6\u7684\u5B8C\u5168\u521D\u59CB\u5316\u7684\u5BF9\u8C61\u3002\u7531\u4E8E\u4F7F\u7528\u4E86a "),_t=e("code",null,"CipherProviderFactory",-1),Ft=t("\uFF0CKDF\u76EE\u524D\u65E0\u6CD5\u81EA\u5B9A\u4E49\u3002\u672A\u6765\u7684\u589E\u5F3A\u529F\u80FD\u5305\u62EC\u5728\u521D\u59CB\u5316\u65F6\u5411KDF\u63D0\u4F9B\u81EA\u5B9A\u4E49\u6210\u672C\u53C2\u6570\u7684\u80FD\u529B\u3002\u4F5C\u4E3A\u89E3\u51B3\u65B9\u6CD5\uFF0C"),qt=e("code",null,"CipherProvider",-1),xt=t("\u53EF\u4EE5\u5728\u6784\u9020\u51FD\u6570\u4E2D\u4F7F\u7528\u81EA\u5B9A\u4E49\u6210\u672C\u53C2\u6570\u521D\u59CB\u5316\u5B9E\u4F8B\uFF0C\u4F46\u76EE\u524D\u4E0D\u652F\u6301"),Nt=e("code",null,"CipherProviderFactory",-1),Pt=t("\u3002\u4EE5\u4E0B\u662FNiFi\u76EE\u524D\u652F\u6301\u7684KDF(\u4E3B\u8981"),At=e("code",null,"EncryptContent",-1),St=t("\u7528\u4E8E\u57FA\u4E8E\u5BC6\u7801\u7684\u52A0\u5BC6\u5904\u7406\u5668(PBE))\u548C\u76F8\u5173\u8BF4\u660E:"),Tt=o("<li><p>NiFi Legacy KDF</p><ul><li><p>NiFi\u7528\u4E8EPBE\u7684\u5185\u90E8\u5BC6\u94A5\u63A8\u5BFC\u7684\u539F\u59CBKDF\uFF0C\u8FD9\u662F\u5728\u5BC6\u7801\u548C8\u621616\u5B57\u8282\u968F\u673A\u76D0\u7684\u4E32\u8054\u4E0A\u7684MD5\u6458\u8981\u76841000\u6B21\u8FED\u4EE3(\u76D0\u957F\u5EA6\u53D6\u51B3\u4E8E\u6240\u9009\u62E9\u7684\u5BC6\u7801\u5757\u5927\u5C0F)\u3002</p></li><li><p><strong>\u4ECENiFi 0.5.0\u5F00\u59CB</strong>\uFF0C\u8BE5KDF\u5DF2 <strong>\u5F03\u7528\uFF0C</strong> \u5E76\u4E14\u4EC5\u5E94\u7528\u4E8E\u5411\u540E\u517C\u5BB9\u4EE5\u89E3\u5BC6\u5148\u524D\u7531\u4F20\u7EDF\u7248\u672C\u7684NiFi\u52A0\u5BC6\u7684\u6570\u636E\u3002</p></li></ul></li><li><p>OpenSSL PKCS\uFF035 v1.5 EVP_BytesToKey</p><ul><li><p>\u8BE5KDF\u5728v0.4.0\u4E2D\u6DFB\u52A0\u3002</p></li><li><p>\u6B64KDF\u7528\u4E8E\u4E0E\u4F7F\u7528OpenSSL\u7684\u9ED8\u8BA4PBE\u52A0\u5BC6\u7684\u6570\u636E\u517C\u5BB9\uFF0C\u79F0\u4E3A<code>EVP_BytesToKey</code>\u3002\u8FD9\u662FMD5\u5728\u5BC6\u7801\u548C8\u5B57\u8282\u968F\u673AASCII\u76D0\u7684\u4E32\u8054\u4E0A\u7684\u5355\u6B21\u8FED\u4EE3\u3002OpenSSL\u5EFA\u8BAE\u4F7F\u7528<code>PBKDF2</code>\u5BC6\u94A5\u6D3E\u751F\uFF0C\u4F46\u4E0D\u516C\u5F00\u547D\u4EE4\u884C\u5DE5\u5177\u6240\u9700\u7684\u5E93\u65B9\u6CD5\uFF0C\u56E0\u6B64\u8BE5KDF\u4ECD\u7136\u662F\u547D\u4EE4\u884C\u52A0\u5BC6\u7684\u4E8B\u5B9E\u4E0A\u7684\u9ED8\u8BA4\u503C\u3002</p></li></ul></li>",2),wt=e("p",null,"Bcrypt",-1),Et=e("li",null,[e("p",null,"\u8BE5KDF\u5728v0.5.0\u4E2D\u6DFB\u52A0\u3002")],-1),Ut={href:"https://en.wikipedia.org/wiki/Bcrypt",target:"_blank",rel:"noopener noreferrer"},Ct=t("Bcrypt"),Lt=t("\u662F\u4E00\u79CD\u57FA\u4E8E"),It={href:"https://en.wikipedia.org/wiki/Blowfish_(cipher)",target:"_blank",rel:"noopener noreferrer"},Kt=t("Blowfish"),zt=t('\u5BC6\u7801\u7684\u81EA\u9002\u5E94\u51FD\u6570\u3002\u5F3A\u70C8\u5EFA\u8BAE\u4F7F\u7528\u6B64KDF\uFF0C\u56E0\u4E3A\u5B83\u4F1A\u81EA\u52A8\u5408\u5E76\u4E00\u4E2A\u968F\u673A\u768416\u5B57\u8282\u76D0\uFF0C\u53EF\u914D\u7F6E\u7684\u6210\u672C\u53C2\u6570(\u6216"\u5DE5\u4F5C\u56E0\u7D20")\uFF0C\u5E76\u4E14\u53EF\u4EE5\u901A\u8FC7\u8981\u6C42\u8BBF\u95EE"\u5927"\u6765\u4F7F\u7528'),Dt={href:"https://en.wikipedia.org/wiki/General-purpose_computing_on_graphics_processing_units",target:"_blank",rel:"noopener noreferrer"},Bt=t("GPGPU"),Rt=t("(\u5728\u5185\u6838\u4E4B\u95F4\u5171\u4EAB\u5185\u5B58)\u6765\u62B5\u5FA1\u66B4\u529B\u653B\u51FB\u3002\u5BC6\u94A5\u63A8\u5BFC\u671F\u95F4\u7684\u5185\u5B58\u5757\u3002\u5B83\u5BF9"),Gt={href:"https://en.wikipedia.org/wiki/Field-programmable_gate_array",target:"_blank",rel:"noopener noreferrer"},Mt=t("FPGA"),Ht=t("\u66B4\u529B\u653B\u51FB\u7684\u62B5\u6297\u529B\u8F83\u5F31\uFF0C\u95E8\u9635\u5217\u53EF\u4EE5\u8BBF\u95EE\u5404\u4E2A\u5D4C\u5165\u5F0FRAM\u5757\u3002"),Ot=e("li",null,[e("p",null,[t("\u7531\u4E8EBcrypt\u6D3E\u751F\u5BC6\u94A5\u7684\u957F\u5EA6\u59CB\u7EC8\u4E3A184\u4F4D\uFF0C\u56E0\u6B64\u5C06\u5B8C\u6574\u8F93\u51FA\u63D0\u4F9B\u7ED9"),e("code",null,"SHA-512"),t("\u6458\u8981\u5E76\u622A\u65AD\u4E3A\u6240\u9700\u7684\u5BC6\u94A5\u957F\u5EA6\u3002\u8FD9\u4E3A\u683C\u5F0F\u5316\u8F93\u5165\u63D0\u4F9B\u4E86\u96EA\u5D29\u6548\u5E94\u7684\u597D\u5904\u3002")])],-1),Zt=e("li",null,[e("p",null,[t("\u5EFA\u8BAE\u7684\u6700\u5C0F\u5DE5\u4F5C\u56E0\u6570\u662F12(2 12\u4E2A\u5BC6\u94A5\u6D3E\u751F\u8F6E\u6B21)(\u622A\u81F32016\u5E742 \u6708 1 \u65E5\u7684\u5546\u54C1\u786C\u4EF6)\uFF0C\u5E94\u589E\u52A0\u5230\u5408\u6CD5\u7CFB\u7EDF\u9047\u5230\u6709\u5BB3\u5EF6\u8FDF\u7684\u9608\u503C(\u53C2\u89C1\u4E0B\u9762\u7684\u65F6\u95F4\u8868\u6216\u7528\u4E8E"),e("code",null,"BcryptCipherProviderGroovyTest#testDefaultConstructorShouldProvideStrongWorkFactor()"),t("\u8BA1\u7B97\u5B89\u5168\u6027)\u6700\u5C0F\u503C)\u3002")])],-1),Wt=e("p",null,[t("\u76D0\u683C\u5F0F\u662F"),e("code",null,"$2a$10$ABCDEFGHIJKLMNOPQRSTUV"),t("\u3002\u76D0\u88AB\u5212\u5206\uFF0C"),e("code",null,"$"),t("\u4E09\u4E2A\u90E8\u5206\u5982\u4E0B:")],-1),jt=e("code",null,"2a",-1),Jt=t(" - \u683C\u5F0F\u7684\u7248\u672C\u3002"),Vt={href:"http://blog.ircmaxell.com/2012/12/seven-ways-to-screw-up-bcrypt.html",target:"_blank",rel:"noopener noreferrer"},Xt=t("\u8FD9\u91CC"),$t=t("\u53EF\u4EE5\u627E\u5230\u5E7F\u6CDB\u7684\u89E3\u91CA\u3002NiFi\u76EE\u524D"),Yt=e("code",null,"2a",-1),Qt=t("\u7528\u4E8E\u5185\u90E8\u4EA7\u751F\u7684\u6240\u6709\u76D0\u3002"),en=e("li",null,[e("p",null,[e("code",null,"10"),t(" - \u5DE5\u4F5C\u56E0\u7D20\u3002\u8FD9\u5B9E\u9645\u4E0A\u662Flog 2\u503C\uFF0C\u56E0\u6B64\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\u603B\u8FED\u4EE3\u6B21\u6570\u5C06\u662F2 10\u3002")])],-1),tn=e("li",null,[e("p",null,[e("code",null,"ABCDEFGHIJKLMNOPQRSTUV"),t(" - 22\u4E2A\u5B57\u7B26\uFF0CBase64\u7F16\u7801\uFF0C\u672A\u586B\u5145\uFF0C\u539F\u76D0\u503C\u3002\u8FD9\u89E3\u7801\u4E3A\u5BC6\u94A5\u6D3E\u751F\u4E2D\u4F7F\u7528\u768416\u5B57\u8282\u76D0\u3002")])],-1),nn=e("p",null,"Scrypt",-1),sn=e("li",null,[e("p",null,"\u8BE5KDF\u5728v0.5.0\u4E2D\u6DFB\u52A0\u3002")],-1),on={href:"https://en.wikipedia.org/wiki/Scrypt",target:"_blank",rel:"noopener noreferrer"},an=t("Scrypt"),rn=t("\u662F\u4E3A\u54CD\u5E94\u800C\u8BBE\u8BA1\u7684\u81EA\u9002\u5E94\u529F\u80FD"),dn=e("code",null,"bcrypt",-1),cn=t("\u3002\u5EFA\u8BAE\u4F7F\u7528\u6B64KDF\uFF0C\u56E0\u4E3A\u5B83\u9700\u8981\u76F8\u5BF9\u5927\u91CF\u7684\u5185\u5B58\u7528\u4E8E\u6BCF\u4E2A\u6D3E\u751F\uFF0C\u4ECE\u800C\u62B5\u6297\u786C\u4EF6\u66B4\u529B\u653B\u51FB\u3002"),pn=o("<li><p>\u5EFA\u8BAE\u7684\u6700\u4F4E\u6210\u672C\u662F<code>N</code>= 2 14\uFF0C<code>r</code>= 8\uFF0C<code>p</code>= 1(\u622A\u81F32016\u5E742 \u6708 1\u65E5\u7684\u5546\u54C1\u786C\u4EF6)\uFF0C\u5E94\u589E\u52A0\u5230\u5408\u6CD5\u7CFB\u7EDF\u9047\u5230\u6709\u5BB3\u5EF6\u8FDF\u7684\u9608\u503C(\u53C2\u89C1\u4E0B\u9762\u7684\u65F6\u95F4\u8868\u6216\u7528\u4E8E<code>ScryptCipherProviderGroovyTest#testDefaultConstructorShouldProvideStrongParameters()</code>\u8BA1\u7B97\u5B89\u5168\u6027)\u6700\u5C0F\u503C)\u3002</p></li><li><p>\u76D0\u683C\u5F0F\u662F<code>$s0$e0101$ABCDEFGHIJKLMNOPQRSTUV</code>\u3002\u76D0\u88AB\u5212\u5206\uFF0C<code>$</code>\u4E09\u4E2A\u90E8\u5206\u5982\u4E0B:</p><ul><li><p><code>s0</code> - \u683C\u5F0F\u7684\u7248\u672C\u3002NiFi\u76EE\u524D<code>s0</code>\u7528\u4E8E\u5185\u90E8\u4EA7\u751F\u7684\u6240\u6709\u76D0\u3002</p></li><li><p><code>e0101</code> - \u6210\u672C\u53C2\u6570\u3002\u8FD9\u5B9E\u9645\u4E0A\u662F\u4E00\u4E2A\u5341\u516D\u8FDB\u5236\u7F16\u7801<code>N</code>\uFF0C<code>r</code>\uFF0C<code>p</code>\u4F7F\u7528\u504F\u79FB\u3002\u8FD9\u53EF\u4EE5\u4F7F\u7528<code>Scrypt#encodeParams()</code>\u548C\u5F62\u6210/\u89E3\u6790<code>Scrypt#parseParameters()</code>\u3002</p><ul><li>\u4E00\u4E9B\u5916\u90E8\u5E93\u4EE5\u5F62\u5F0F\u7F16\u7801<code>N</code>\uFF0C<code>r</code>\u5E76<code>p</code>\u5355\u72EC\u7F16\u7801<code>$400$1$1$</code>\u3002\u53EF\u4EE5\u4F7F\u7528\u5B9E\u7528\u65B9\u6CD5<code>ScryptCipherProvider#translateSalt()</code>\u5C06\u5916\u90E8\u8868\u5355\u8F6C\u6362\u4E3A\u5185\u90E8\u8868\u5355\u3002</li></ul></li><li><p><code>ABCDEFGHIJKLMNOPQRSTUV</code> - 12-44\u5B57\u7B26\uFF0CBase64\u7F16\u7801\uFF0C\u672A\u586B\u5145\uFF0C\u539F\u76D0\u503C\u3002\u8FD9\u89E3\u7801\u4E3A\u5BC6\u94A5\u6D3E\u751F\u4E2D\u4F7F\u7528\u76848-32\u5B57\u8282\u7684\u76D0\u3002</p></li></ul></li>",2),ln=e("p",null,"PBKDF2",-1),un=e("li",null,[e("p",null,"\u8BE5KDF\u5728v0.5.0\u4E2D\u6DFB\u52A0\u3002")],-1),hn={href:"https://en.wikipedia.org/wiki/PBKDF2",target:"_blank",rel:"noopener noreferrer"},gn=t("\u57FA\u4E8E\u5BC6\u7801\u7684\u5BC6\u94A5\u63A8\u5BFC\u529F\u80FD2"),mn=t("\u662F\u4E00\u79CD\u81EA\u9002\u5E94\u63A8\u5BFC\u529F\u80FD\uFF0C\u5B83\u4F7F\u7528\u5185\u90E8\u4F2A\u968F\u673A\u51FD\u6570(PRF)\u5E76\u901A\u8FC7\u5BC6\u7801\u548C\u76D0(\u81F3\u5C1116\u5B57\u8282)\u591A\u6B21\u8FED\u4EE3\u3002"),vn=e("li",null,[e("p",null,[t("PRF\u5EFA\u8BAE\u4E3A"),e("code",null,"HMAC/SHA-256"),t("\u6216"),e("code",null,"HMAC/SHA-512"),t("\u3002HMAC\u52A0\u5BC6\u6563\u5217\u51FD\u6570\u7684\u4F7F\u7528\u51CF\u8F7B\u4E86\u957F\u5EA6\u6269\u5C55\u653B\u51FB\u3002")])],-1),bn=e("li",null,[e("p",null,[t("\u5EFA\u8BAE\u7684\u6700\u5C0F\u8FED\u4EE3\u6B21\u6570\u4E3A160\uFF0C000(\u622A\u81F32016\u5E742\u67081\u65E5\u7684\u5546\u54C1\u786C\u4EF6)\u3002\u8FD9\u4E2A\u6570\u5B57\u5E94\u8BE5\u6BCF\u4E24\u5E74\u589E\u52A0\u4E00\u500D(\u89C1\u4E0B\u9762\u7684\u65F6\u95F4\u8868\u6216"),e("code",null,"PBKDF2CipherProviderGroovyTest#testDefaultConstructorShouldProvideStrongIterationCount()"),t("\u7528\u6765\u8BA1\u7B97\u5B89\u5168\u6700\u5C0F\u503C)\u3002")])],-1),kn=t("\u8FD9\u4E2AKDF\u4E0D\u662F\u5185\u5B58\u5F88\u96BE(\u53EF\u4EE5\u7528\u5546\u7528\u786C\u4EF6\u8FDB\u884C\u5927\u89C4\u6A21\u5E76\u884C\u5316)\uFF0C\u4F46\u4ECD\u7136\u5EFA\u8BAE"),fn={href:"http://csrc.nist.gov/publications/nistpubs/800-132/nist-sp800-132.pdf",target:"_blank",rel:"noopener noreferrer"},yn=t("NIST SP 800-132(PDF)"),_n=t("\u548C\u8BB8\u591A\u5BC6\u7801\u5B66\u5BB6(\u5F53\u4F7F\u7528\u9002\u5F53\u7684\u8FED\u4EE3\u8BA1\u6570\u548CHMAC\u52A0\u5BC6\u6563\u5217\u51FD\u6570\u65F6)\u3002"),Fn=e("li",null,[e("p",null,"None"),e("ul",null,[e("li",null,[e("p",null,"\u8BE5KDF\u5728v0.5.0\u4E2D\u6DFB\u52A0\u3002")]),e("li",null,[e("p",null,"\u8BE5KDF\u4E0D\u5BF9\u8F93\u5165\u6267\u884C\u64CD\u4F5C\uFF0C\u5E76\u4E14\u662F\u7528\u4E8E\u6307\u793A\u5411\u5BC6\u7801\u63D0\u4F9B\u539F\u59CB\u5BC6\u94A5\u7684\u6807\u8BB0\u3002\u5BC6\u94A5\u5FC5\u987B\u4EE5\u5341\u516D\u8FDB\u5236\u7F16\u7801\u63D0\u4F9B\uFF0C\u5E76\u4E14\u5BF9\u4E8E\u5173\u8054\u7684\u5BC6\u7801/\u7B97\u6CD5\u5177\u6709\u6709\u6548\u957F\u5EA6\u3002")])])],-1),qn=e("p",null,"\u5176\u4ED6\u8D44\u6E90",-1),xn={href:"http://stackoverflow.com/a/30308723/70465",target:"_blank",rel:"noopener noreferrer"},Nn=t("\u6700\u4F73scrypt\u6210\u672C\u53C2\u6570\u548C\u5173\u7CFB\u7684\u89E3\u91CA"),Pn={href:"http://csrc.nist.gov/publications/nistpubs/800-132/nist-sp800-132.pdf",target:"_blank",rel:"noopener noreferrer"},An=t("NIST\u7279\u520A800-132"),Sn={href:"https://www.owasp.org/index.php/Password_Storage_Cheat_Sheet#Work_Factor",target:"_blank",rel:"noopener noreferrer"},Tn=t("OWASP\u5BC6\u7801\u5B58\u50A8\u5DE5\u4F5C\u56E0\u5B50\u8BA1\u7B97"),wn={href:"http://security.stackexchange.com/a/3993/16485",target:"_blank",rel:"noopener noreferrer"},En=t("PBKDF2\u8F6E\u6B21\u8BA1\u7B97"),Un={href:"http://blog.ircmaxell.com/2014/03/why-i-dont-recommend-scrypt.html",target:"_blank",rel:"noopener noreferrer"},Cn=t("Scrypt\u4E3AKDF vs\u5BC6\u7801\u5B58\u50A8\u6F0F\u6D1E"),Ln={href:"http://security.stackexchange.com/a/26253/16485",target:"_blank",rel:"noopener noreferrer"},In=t("Scrypt vs. Bcrypt(\u622A\u81F32010\u5E74)"),Kn={href:"http://security.stackexchange.com/a/6415/16485",target:"_blank",rel:"noopener noreferrer"},zn=t("Bcrypt vs PBKDF2"),Dn={href:"http://wildlyinaccurate.com/bcrypt-choosing-a-work-factor/",target:"_blank",rel:"noopener noreferrer"},Bn=t("\u4E3ABcrypt\u9009\u62E9\u5DE5\u4F5C\u56E0\u7D20"),Rn={href:"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/crypto/bcrypt/BCrypt.html",target:"_blank",rel:"noopener noreferrer"},Gn=t("Spring Security Bcrypt"),Mn={href:"https://www.openssl.org/docs/man1.1.0/crypto/EVP_BytesToKey.html",target:"_blank",rel:"noopener noreferrer"},Hn=t("OpenSSL EVP BytesToKey PKCS\uFF031v1.5"),On={href:"https://wiki.openssl.org/index.php/Manual:PKCS5_PBKDF2_HMAC(3)",target:"_blank",rel:"noopener noreferrer"},Zn=t("OpenSSL PBKDF2 KDF"),Wn={href:"http://security.stackexchange.com/a/29139/16485",target:"_blank",rel:"noopener noreferrer"},jn=t("OpenSSL KDF\u7F3A\u9677\u63CF\u8FF0"),Jn=o('<h3 id="\u76D0\u548Civ\u7F16\u7801" tabindex="-1"><a class="header-anchor" href="#\u76D0\u548Civ\u7F16\u7801" aria-hidden="true">#</a> \u76D0\u548CIV\u7F16\u7801</h3><p>\u6700\u521D\uFF0C<code>EncryptContent</code>\u5904\u7406\u5668\u6709\u4E00\u79CD\u4ECE\u7528\u6237\u63D0\u4F9B\u7684\u5BC6\u7801\u5BFC\u51FA\u52A0\u5BC6\u5BC6\u94A5\u7684\u65B9\u6CD5\u3002\u73B0\u5728<code>NiFiLegacy</code>\u6709\u6548\u5730\u5C06\u5176\u79F0\u4E3A\u6A21\u5F0F<code>MD5 digest\uFF0C 1000 iterations</code>\u3002\u5728v0.4.0\u4E2D\uFF0C\u6DFB\u52A0\u4E86\u53E6\u4E00\u79CD\u5BFC\u51FA\u5BC6\u94A5\u7684\u65B9\u6CD5\uFF0C<code>OpenSSL PKCS#5 v1.5 EVP_BytesToKey</code>\u4EE5\u4FBF\u4E0E\u4F7F\u7528<code>openssl</code>\u547D\u4EE4\u884C\u5DE5\u5177\u5728NiFi\u5916\u90E8\u52A0\u5BC6\u7684\u5185\u5BB9\u517C\u5BB9\u3002\u8FD9\u4E24\u4E2A<a href="#%E5%AF%86%E9%92%A5%E6%B4%BE%E7%94%9F%E5%87%BD%E6%95%B0">\u5BC6\u94A5\u6D3E\u751F\u51FD\u6570</a>(KDF)\u90FD\u5177\u6709\u786C\u7F16\u7801\u7684\u6458\u8981\u51FD\u6570\u548C\u8FED\u4EE3\u8BA1\u6570\uFF0C\u5E76\u4E14salt\u683C\u5F0F\u4E5F\u662F\u786C\u7F16\u7801\u7684\u3002\u4F7F\u7528v0.5.0\uFF0C\u5F15\u5165\u4E86\u5177\u6709\u53EF\u53D8\u8FED\u4EE3\u8BA1\u6570\uFF0C\u5DE5\u4F5C\u56E0\u5B50\u548C\u76D0\u683C\u5F0F\u7684\u9644\u52A0KDF\u3002\u53E6\u5916\uFF0C_\u539F\u59CB\u5BC6\u94A5\u52A0\u5BC6_\u8FD8\u4ECB\u7ECD\u4E86\u3002\u8FD9\u9700\u8981\u5C06\u4EFB\u610F\u76D0\u548C\u521D\u59CB\u5316\u77E2\u91CF(IV)\u7F16\u7801\u5230\u5BC6\u7801\u6D41\u4E2D\u7684\u80FD\u529B\uFF0C\u4EE5\u4FBF\u7531NiFi\u6216\u540E\u7EED\u7CFB\u7EDF\u6062\u590D\u4EE5\u89E3\u5BC6\u8FD9\u4E9B\u6D88\u606F\u3002</p><p>\u5BF9\u4E8E\u73B0\u6709\u7684KDF\uFF0Csalt\u683C\u5F0F\u6CA1\u6709\u6539\u53D8\u3002</p><h4 id="nifi-legacy" tabindex="-1"><a class="header-anchor" href="#nifi-legacy" aria-hidden="true">#</a> NiFi Legacy</h4><p>\u8F93\u5165\u7684\u524D8\u621616\u4E2A\u5B57\u8282\u662Fsalt\u3002\u76D0\u957F\u5EA6\u57FA\u4E8E\u6240\u9009\u7B97\u6CD5\u7684\u5BC6\u7801\u5757\u957F\u5EA6\u786E\u5B9A\u3002\u5982\u679C\u65E0\u6CD5\u786E\u5B9A\u5BC6\u7801\u5757\u5927\u5C0F(\u4F8B\u5982\u4F7F\u7528\u6D41\u5BC6\u7801<code>RC4</code>)\uFF0C\u5219\u4F7F\u7528\u9ED8\u8BA4\u503C8\u5B57\u8282\u3002\u5728\u89E3\u5BC6\u65F6\uFF0C\u76D0\u88AB\u8BFB\u5165\u5E76\u4E0E\u5BC6\u7801\u7EC4\u5408\u4EE5\u5BFC\u51FA\u52A0\u5BC6\u5BC6\u94A5\u548CIV\u3002</p><p><img src="'+M+'" alt=""></p><h4 id="openssl-pkcs-5-v1-5-evp-bytestokey" tabindex="-1"><a class="header-anchor" href="#openssl-pkcs-5-v1-5-evp-bytestokey" aria-hidden="true">#</a> OpenSSL PKCS\uFF035 v1.5 EVP_BytesToKey</h4><p>OpenSSL\u5141\u8BB8\u4F7F\u7528salted\u6216unsalted\u5BC6\u94A5\u6D3E\u751F\u3002_*\u65E0\u4FDD\u7559\u5BC6\u94A5\u6D3E\u751F\u662F\u4E00\u79CD\u5B89\u5168\u98CE\u9669\uFF0C\u4E0D\u5EFA\u8BAE\u4F7F\u7528\u3002*_\u5982\u679C\u5B58\u5728salt\uFF0C\u5219\u8F93\u5165\u7684\u524D8\u4E2A\u5B57\u8282\u4E3AASCII\u5B57\u7B26\u4E32&quot;Salted __&quot;(<code>0x53 61 6C 74 65 64 5F 5F</code>)\uFF0C\u63A5\u4E0B\u6765\u76848\u4E2A\u5B57\u8282\u4E3AASCII\u7F16\u7801\u7684salt\u3002\u5728\u89E3\u5BC6\u65F6\uFF0C\u76D0\u88AB\u8BFB\u5165\u5E76\u4E0E\u5BC6\u7801\u7EC4\u5408\u4EE5\u5BFC\u51FA\u52A0\u5BC6\u5BC6\u94A5\u548CIV\u3002\u5982\u679C\u6CA1\u6709salt\u6807\u5934\uFF0C\u5219\u6574\u4E2A\u8F93\u5165\u88AB\u8BA4\u4E3A\u662F\u5BC6\u6587\u3002</p><p><img src="'+H+'" alt=""></p><p>\u5BF9\u4E8E\u65B0\u7684KDF\uFF0C\u6BCF\u4E2A\u90FD\u5141\u8BB8\u975E\u786E\u5B9A\u6027IV\uFF0CIV\u5FC5\u987B\u4E0E\u5BC6\u6587\u4E00\u8D77\u5B58\u50A8\u3002\u8FD9\u4E0D\u662F\u4E00\u4E2A\u6F0F\u6D1E\uFF0C\u56E0\u4E3AIV\u4E0D\u9700\u8981\u4FDD\u5BC6\uFF0C\u800C\u53EA\u662F\u5BF9\u4E8E\u4F7F\u7528\u76F8\u540C\u5BC6\u94A5\u52A0\u5BC6\u7684\u6D88\u606F\u662F\u552F\u4E00\u7684\uFF0C\u4EE5\u51CF\u5C11\u52A0\u5BC6\u653B\u51FB\u7684\u6210\u529F\u3002\u5BF9\u4E8E\u8FD9\u4E9BKDF\uFF0C\u8F93\u51FA\u5305\u62EC\u76D0\uFF0C\u7136\u540E\u662F\u76D0\u5206\u9694\u7B26\uFF0CUTF-8\u5B57\u7B26\u4E32&quot;NiFiSALT&quot;(<code>0x4E 69 46 69 53 41 4C 54</code>)\u7136\u540E\u662FIV\uFF0C\u63A5\u7740\u662FIV\u5206\u9694\u7B26\uFF0CUTF-8\u5B57\u7B26\u4E32&quot;NiFiIV&quot;(<code>0x4E 69 46 69 49 56</code>)\uFF0C\u7136\u540E\u662F\u5BC6\u6587\u3002</p><h4 id="bcrypt-scrypt-pbkdf2" tabindex="-1"><a class="header-anchor" href="#bcrypt-scrypt-pbkdf2" aria-hidden="true">#</a> Bcrypt\uFF0CScrypt\uFF0CPBKDF2</h4><p><img src="'+O+'" alt=""></p><p><img src="'+Z+'" alt=""></p><p><img src="'+W+'" alt=""></p><p>EncryptContent\u5904\u7406\u5668\u5141\u8BB8\u52A0\u5BC6\u548C\u89E3\u5BC6\u6570\u636E\uFF0C\u8FD9\u4E9B\u6570\u636E\u65E2\u5305\u542B\u5728NiFi\u5185\u90E8\uFF0C\u4E5F\u5305\u542B\u5728\u5916\u90E8\u7CFB\u7EDF(\u5982<code>openssl</code>\u5176\u4ED6\u6570\u636E\u6E90\u548C\u6D88\u8D39\u8005)\u4E2D\u3002</p><h3 id="java\u5BC6\u7801\u672F\u6269\u5C55-jce-\u6709\u9650\u5F3A\u5EA6\u7BA1\u8F96\u653F\u7B56" tabindex="-1"><a class="header-anchor" href="#java\u5BC6\u7801\u672F\u6269\u5C55-jce-\u6709\u9650\u5F3A\u5EA6\u7BA1\u8F96\u653F\u7B56" aria-hidden="true">#</a> Java\u5BC6\u7801\u672F\u6269\u5C55(JCE)\u6709\u9650\u5F3A\u5EA6\u7BA1\u8F96\u653F\u7B56</h3>',16),Vn=t("\u7531\u4E8E\u7F8E\u56FD\u7684\u51FA\u53E3\u6CD5\u89C4\uFF0C\u9ED8\u8BA4JVM "),Xn={href:"http://docs.oracle.com/javase/7/docs/technotes/guides/security/SunProviders.html#importlimits",target:"_blank",rel:"noopener noreferrer"},$n=t("\u5BF9\u5176"),Yn=t("\u53EF\u7528"),Qn={href:"http://docs.oracle.com/javase/7/docs/technotes/guides/security/SunProviders.html#importlimits",target:"_blank",rel:"noopener noreferrer"},es=t("\u7684\u52A0\u5BC6\u64CD\u4F5C\u7684\u5F3A\u5EA6\u65BD\u52A0\u4E86\u9650\u5236"),ts=t("\u3002\u4F8B\u5982\uFF0CAES\u64CD\u4F5C"),ns=e("code",null,"128 bit keys",-1),ss=t("\u9ED8\u8BA4\u9650\u5236\u4E3A\u3002\u867D\u7136"),os=e("code",null,"AES-128",-1),as=t("\u5728\u52A0\u5BC6\u65B9\u9762\u662F\u5B89\u5168\u7684\uFF0C\u4F46\u8FD9\u53EF\u80FD\u4F1A\u4EA7\u751F\u610F\u60F3\u4E0D\u5230\u7684\u540E\u679C\uFF0C\u7279\u522B\u662F\u5728\u57FA\u4E8E\u5BC6\u7801\u7684\u52A0\u5BC6(PBE)\u4E0A\u3002"),is=o('<p>PBE\u662F\u4ECE_\u7528\u6237\u63D0\u4F9B\u7684\u79D8\u5BC6\u6750\u6599_(\u901A\u5E38\u662F\u5BC6\u7801)\u5BFC\u51FA\u7528\u4E8E\u52A0\u5BC6\u6216\u89E3\u5BC6\u7684\u52A0\u5BC6\u5BC6\u94A5\u7684\u8FC7\u7A0B\u3002\u4E0D\u662F\u4EBA\u7C7B\u8BB0\u4F4F(\u968F\u673A\u51FA\u73B0\u7684)32\u621664\u4E2A\u5B57\u7B26\u7684\u5341\u516D\u8FDB\u5236\u5B57\u7B26\u4E32\uFF0C\u800C\u662F\u4F7F\u7528\u5BC6\u7801\u6216\u5BC6\u7801\u3002</p><p>\u7531\u4E8E\u57FA\u7840\u5BC6\u94A5\u957F\u5EA6\u68C0\u67E5\uFF0CNiFi\u63D0\u4F9B\u7684\u8BB8\u591APBE\u7B97\u6CD5\u5BF9\u5BC6\u7801\u957F\u5EA6\u65BD\u52A0\u4E86\u4E25\u683C\u7684\u9650\u5236\u3002\u4E0B\u8868\u5217\u51FA\u4E86\u5177\u6709\u6709\u9650\u52A0\u5BC6\u5F3A\u5EA6\u7684JVM\u4E0A\u7684\u6700\u5927\u5BC6\u7801\u957F\u5EA6\u3002</p><table><thead><tr><th>\u7B97\u6CD5</th><th>\u6700\u5927\u5BC6\u7801\u957F\u5EA6</th></tr></thead><tbody><tr><td><code>PBEWITHMD5AND128BITAES-CBC-OPENSSL</code></td><td>16</td></tr><tr><td><code>PBEWITHMD5AND192BITAES-CBC-OPENSSL</code></td><td>16</td></tr><tr><td><code>PBEWITHMD5AND256BITAES-CBC-OPENSSL</code></td><td>16</td></tr><tr><td><code>PBEWITHMD5ANDDES</code></td><td>16</td></tr><tr><td><code>PBEWITHMD5ANDRC2</code></td><td>16</td></tr><tr><td><code>PBEWITHSHA1ANDRC2</code></td><td>16</td></tr><tr><td><code>PBEWITHSHA1ANDDES</code></td><td>16</td></tr><tr><td><code>PBEWITHSHAAND128BITAES-CBC-BC</code></td><td>7</td></tr><tr><td><code>PBEWITHSHAAND192BITAES-CBC-BC</code></td><td>7</td></tr><tr><td><code>PBEWITHSHAAND256BITAES-CBC-BC</code></td><td>7</td></tr><tr><td><code>PBEWITHSHAAND40BITRC2-CBC</code></td><td>7</td></tr><tr><td><code>PBEWITHSHAAND128BITRC2-CBC</code></td><td>7</td></tr><tr><td><code>PBEWITHSHAAND40BITRC4</code></td><td>7</td></tr><tr><td><code>PBEWITHSHAAND128BITRC4</code></td><td>7</td></tr><tr><td><code>PBEWITHSHA256AND128BITAES-CBC-BC</code></td><td>7</td></tr><tr><td><code>PBEWITHSHA256AND192BITAES-CBC-BC</code></td><td>7</td></tr><tr><td><code>PBEWITHSHA256AND256BITAES-CBC-BC</code></td><td>7</td></tr><tr><td><code>PBEWITHSHAAND2-KEYTRIPLEDES-CBC</code></td><td>7</td></tr><tr><td><code>PBEWITHSHAAND3-KEYTRIPLEDES-CBC</code></td><td>7</td></tr><tr><td><code>PBEWITHSHAANDTWOFISH-CBC</code></td><td>7</td></tr></tbody></table><h3 id="\u5141\u8BB8\u4E0D\u5B89\u5168\u7684\u52A0\u5BC6\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#\u5141\u8BB8\u4E0D\u5B89\u5168\u7684\u52A0\u5BC6\u6A21\u5F0F" aria-hidden="true">#</a> \u5141\u8BB8\u4E0D\u5B89\u5168\u7684\u52A0\u5BC6\u6A21\u5F0F</h3><p>\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u5904\u7406\u5668\u8BBE\u7F6E\u4E2D\u7684<code>Allow Insecure Cryptographic Modes</code>\u5C5E\u6027<code>EncryptContent</code>\u8BBE\u7F6E\u4E3A<code>not-allowed</code>\u3002\u8FD9\u610F\u5473\u7740\u5982\u679C\u63D0\u4F9B\u7684\u5BC6\u7801\u5C11\u4E8E<code>10</code>\u5B57\u7B26\uFF0C\u5219\u4F1A\u53D1\u751F\u9A8C\u8BC1\u9519\u8BEF\u300210\u4E2A\u5B57\u7B26\u662F\u4FDD\u5B88\u4F30\u8BA1\uFF0C\u4E0D\u8003\u8651\u5B8C\u6574\u71B5\u8BA1\u7B97\uFF0C\u6A21\u5F0F\u7B49\u3002</p><p><img src="'+j+'" alt=""></p><p>\u5728\u5177\u6709\u6709\u9650\u5F3A\u5EA6\u52A0\u5BC6\u7684JVM\u4E0A\uFF0C\u4E00\u4E9BPBE\u7B97\u6CD5\u5C06\u6700\u5927\u5BC6\u7801\u957F\u5EA6\u9650\u5236\u4E3A7\uFF0C\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u5C06\u65E0\u6CD5\u63D0\u4F9B&quot;\u5B89\u5168&quot;\u5BC6\u7801\u3002\u5EFA\u8BAE\u4E3AJVM\u5B89\u88C5JCE Unlimited Strength Jurisdiction Policy\u6587\u4EF6\u4EE5\u7F13\u89E3\u6B64\u95EE\u9898\u3002</p>',7),rs={href:"http://www.oracle.com/technetwork/java/javase/downloads/jce8-download-2133166.html",target:"_blank",rel:"noopener noreferrer"},ds=t("Java 8\u7684JCE Unlimited Strength Jurisdiction\u7B56\u7565\u6587\u4EF6"),cs=e("p",null,"\u5982\u679C\u5728\u65E0\u6CD5\u5B89\u88C5\u65E0\u9650\u5F3A\u5EA6\u7B56\u7565\u7684\u7CFB\u7EDF\u4E0A\uFF0C\u5EFA\u8BAE\u5207\u6362\u5230\u652F\u6301\u66F4\u957F\u5BC6\u7801\u7684\u7B97\u6CD5(\u53C2\u89C1\u4E0A\u8868)\u3002",-1),ps=e("p",null,[e("img",{src:i,alt:""}),t(),e("em",null,"\u5141\u8BB8\u5F31\u52A0\u5BC6"),t(" \u5982\u679C\u5B83\u662F\u4E0D\u53EF\u80FD\u5B89\u88C5\u65E0\u9650\u5F3A\u5EA6\u7BA1\u8F96\u7684\u653F\u7B56\uFF0C\u8BE5"),e("code",null,"Allow Weak Crypto"),t("\u8BBE\u7F6E\u53EF\u4EE5\u6539\u53D8"),e("code",null,"allowed"),t("\uFF0C\u4F46\u662F"),e("strong",null,"\u8FD9\u662F_\u4E0D_\u63A8\u8350\u7684"),t("\u3002\u66F4\u6539\u6B64\u8BBE\u7F6E\u660E\u786E\u627F\u8BA4\u4F7F\u7528\u5F31\u52A0\u5BC6\u914D\u7F6E\u7684\u56FA\u6709\u98CE\u9669\u3002")],-1),ls=t("\u6700\u597D\u662F\u8BF7\u6C42\u4E0A\u6E38/\u4E0B\u6E38\u7CFB\u7EDF\u5207\u6362\u5230"),us={href:"https://cwiki.apache.org/confluence/display/NiFi/Encryption+Information",target:"_blank",rel:"noopener noreferrer"},hs=t("\u5BC6\u94A5\u52A0\u5BC6"),gs=t("\u6216\u4F7F\u7528"),ms={href:"https://cwiki.apache.org/confluence/display/NiFi/Key+Derivation+Function+Explanations",target:"_blank",rel:"noopener noreferrer"},vs=t("NiFi\u652F\u6301"),bs=t('\u7684"\u5F3A" '),ks={href:"https://cwiki.apache.org/confluence/display/NiFi/Key+Derivation+Function+Explanations",target:"_blank",rel:"noopener noreferrer"},fs=t("\u5BC6\u94A5\u5BFC\u51FA\u529F\u80FD(KDF)"),ys=t("\u3002"),_s=o('<h2 id="\u914D\u7F6E\u6587\u4EF6\u4E2D\u7684\u52A0\u5BC6\u5BC6\u7801" tabindex="-1"><a class="header-anchor" href="#\u914D\u7F6E\u6587\u4EF6\u4E2D\u7684\u52A0\u5BC6\u5BC6\u7801" aria-hidden="true">#</a> \u914D\u7F6E\u6587\u4EF6\u4E2D\u7684\u52A0\u5BC6\u5BC6\u7801</h2><p>\u4E3A\u4E86\u4FBF\u4E8E\u5B89\u5168\u8BBE\u7F6ENiFi\uFF0C\u4F60\u53EF\u4EE5\u4F7F\u7528<code>encrypt-config</code>\u547D\u4EE4\u884C\u5B9E\u7528\u7A0B\u5E8F\u52A0\u5BC6NiFi\u5728\u542F\u52A8\u65F6\u5728\u5185\u5B58\u4E2D\u89E3\u5BC6\u7684\u539F\u59CB\u914D\u7F6E\u503C\u3002\u8FD9\u79CD\u53EF\u6269\u5C55\u7684\u4FDD\u62A4\u65B9\u6848\u900F\u660E\u5730\u5141\u8BB8NiFi\u5728\u64CD\u4F5C\u4E2D\u4F7F\u7528\u539F\u59CB\u503C\uFF0C\u540C\u65F6\u4FDD\u62A4\u5B83\u4EEC\u9759\u6B62\u3002\u5C06\u6765\uFF0C\u5C06\u96C6\u6210\u786C\u4EF6\u5B89\u5168\u6A21\u5757(HSM)\u548C\u5916\u90E8\u5B89\u5168\u5B58\u50A8\u673A\u5236\uFF0C\u4F46\u76EE\u524D\uFF0CAES\u52A0\u5BC6\u63D0\u4F9B\u7A0B\u5E8F\u662F\u9ED8\u8BA4\u5B9E\u73B0\u3002</p><p>\u8FD9\u662F\u884C\u4E3A\u7684\u6539\u53D8; \u57281.0\u4E4B\u524D\uFF0C\u6240\u6709\u914D\u7F6E\u503C\u90FD\u4EE5\u660E\u6587\u5F62\u5F0F\u5B58\u50A8\u5728\u6587\u4EF6\u7CFB\u7EDF\u4E0A\u3002\u5EFA\u8BAE\u4F7F\u7528POSIX\u6587\u4EF6\u6743\u9650\u6765\u9650\u5236\u5BF9\u8FD9\u4E9B\u6587\u4EF6\u7684\u672A\u6388\u6743\u8BBF\u95EE\u3002</p><p>\u5982\u679C\u672A\u6267\u884C\u7BA1\u7406\u5458\u64CD\u4F5C\uFF0C\u5219\u914D\u7F6E\u503C\u4FDD\u6301\u672A\u52A0\u5BC6\u72B6\u6001\u3002</p><p>\u6709\u5173\u66F4\u591A\u4FE1\u606F\uFF0C\u8BF7\u53C2\u9605<a href="./ToolkitGuide">NiFi\u5DE5\u5177\u5305\u6307\u5357</a>\u4E2D\u7684<a href="./ToolkitGuide#encrypt_config_tool">\u52A0\u5BC6\u914D\u7F6E\u5DE5\u5177</a>\u90E8\u5206\u3002</p><h2 id="nifi-toolkit-administrative-tools" tabindex="-1"><a class="header-anchor" href="#nifi-toolkit-administrative-tools" aria-hidden="true">#</a> NiFi Toolkit Administrative Tools</h2><p>\u9664\u4E86<code>tls-toolkit</code>\u548C\u4E4B\u5916<code>encrypt-config</code>\uFF0CNiFi Toolkit\u8FD8\u5305\u542B\u547D\u4EE4\u884C\u5B9E\u7528\u7A0B\u5E8F\uFF0C\u4F9B\u7BA1\u7406\u5458\u5728\u72EC\u7ACB\u548C\u96C6\u7FA4\u73AF\u5883\u4E2D\u652F\u6301NiFi\u7EF4\u62A4\u3002\u8FD9\u4E9B\u5DE5\u5177\u5305\u62EC\uFF1A</p><ul><li><p>CLI - \u8BE5<code>cli</code>\u5DE5\u5177\u4F7F\u7BA1\u7406\u5458\u80FD\u591F\u4E0ENiFi\u548CNiFi Registry\u5B9E\u4F8B\u8FDB\u884C\u4EA4\u4E92\uFF0C\u4EE5\u81EA\u52A8\u6267\u884C\u8BF8\u5982\u90E8\u7F72\u7248\u672C\u5316\u6D41\u7A0B\u4EE5\u53CA\u7BA1\u7406\u6D41\u7A0B\u7EC4\u548C\u96C6\u7FA4\u8282\u70B9\u7B49\u4EFB\u52A1\u3002</p></li><li><p>\u6587\u4EF6\u7BA1\u7406\u5668(File Manager) - \u8BE5<code>file-manager</code>\u5DE5\u5177\u4F7F\u7BA1\u7406\u5458\u80FD\u591F\u4ECE\u5907\u4EFD\u4E2D\u5907\u4EFD\uFF0C\u5B89\u88C5\u6216\u6062\u590DNiFi\u5B89\u88C5\u3002</p></li><li><p>\u6D41\u91CF\u5206\u6790\u5668(Flow Analyzer) - \u8BE5<code>flow-analyzer</code>\u5DE5\u5177\u751F\u6210\u4E00\u4E2A\u62A5\u544A\uFF0C\u5E2E\u52A9\u7BA1\u7406\u5458\u4E86\u89E3\u53EF\u4EE5\u5B58\u50A8\u5728\u7ED9\u5B9A\u6D41\u91CF\u7684\u80CC\u538B\u4E2D\u7684\u6700\u5927\u6570\u636E\u91CF\u3002</p></li><li><p>\u8282\u70B9\u7BA1\u7406\u5668(Node Manager\u2009) - \u8BE5<code>node-manager</code>\u5DE5\u5177\u4F7F\u7BA1\u7406\u5458\u80FD\u591F\u5BF9\u8282\u70B9\u6267\u884C\u72B6\u6001\u68C0\u67E5\uFF0C\u4EE5\u53CA\u4ECE\u96C6\u7FA4\u8FDE\u63A5\uFF0C\u65AD\u5F00\u8FDE\u63A5\u6216\u5220\u9664\u8282\u70B9\u7684\u529F\u80FD\u3002</p></li><li><p>\u901A\u77E5(Notify) - \u8BE5<code>notify</code>\u5DE5\u5177\u4F7F\u7BA1\u7406\u5458\u80FD\u591F\u5C06\u516C\u544A\u53D1\u9001\u5230NiFi UI\u3002</p></li><li><p>S2S - \u8BE5<code>s2s</code>\u5DE5\u5177\u4F7F\u7BA1\u7406\u5458\u80FD\u591F\u901A\u8FC7\u7AD9\u70B9\u5230\u7AD9\u70B9\u5C06\u6570\u636E\u53D1\u9001\u5230NiFi\u6D41\u4E2D\u6216\u4ECE\u4E2D\u53D1\u9001\u51FA\u6765\u3002</p></li></ul><p>\u6709\u5173\u6BCF\u4E2A\u5B9E\u7528\u7A0B\u5E8F\u7684\u8BE6\u7EC6\u4FE1\u606F\uFF0C\u8BF7\u53C2\u9605<a href="./ToolkitGuide">NiFi\u5DE5\u5177\u5305\u6307\u5357</a>\u3002</p><h2 id="\u96C6\u7FA4\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u96C6\u7FA4\u914D\u7F6E" aria-hidden="true">#</a> \u96C6\u7FA4\u914D\u7F6E</h2><p>\u672C\u8282\u7B80\u8981\u6982\u8FF0\u4E86NiFi\u96C6\u7FA4\u4EE5\u53CA\u5982\u4F55\u8BBE\u7F6E\u57FA\u672C\u96C6\u7FA4\u7684\u8BF4\u660E\u3002\u5728\u672A\u6765\uFF0C\u6211\u4EEC\u5E0C\u671B\u63D0\u4F9B\u6DB5\u76D6NiFi\u96C6\u7FA4\u67B6\u6784\u7684\u8865\u5145\u6587\u6863\u3002</p><p><img src="'+J+'" alt=""></p><h3 id="\u96F6\u4E3B\u96C6\u7FA4" tabindex="-1"><a class="header-anchor" href="#\u96F6\u4E3B\u96C6\u7FA4" aria-hidden="true">#</a> \u96F6\u4E3B\u96C6\u7FA4</h3><p>NiFi\u91C7\u7528Zero-Master Clustering\u8303\u4F8B\u3002\u96C6\u7FA4\u4E2D\u7684\u6BCF\u4E2A\u8282\u70B9\u90FD\u5BF9\u6570\u636E\u6267\u884C\u76F8\u540C\u7684\u4EFB\u52A1\uFF0C\u4F46\u6BCF\u4E2A\u8282\u70B9\u90FD\u5728\u4E0D\u540C\u7684\u6570\u636E\u96C6\u4E0A\u8FD0\u884C\u3002\u5176\u4E2D\u4E00\u4E2A\u8282\u70B9\u81EA\u52A8\u9009\u62E9(\u901A\u8FC7Apache ZooKeeper)\u4F5C\u4E3A\u96C6\u7FA4\u534F\u8C03\u5668\u3002\u7136\u540E\uFF0C\u96C6\u7FA4\u4E2D\u7684\u6240\u6709\u8282\u70B9\u90FD\u4F1A\u5411\u6B64\u8282\u70B9\u53D1\u9001\u5FC3\u8DF3/\u72B6\u6001\u4FE1\u606F\uFF0C\u5E76\u4E14\u6B64\u8282\u70B9\u8D1F\u8D23\u65AD\u5F00\u5728\u4E00\u6BB5\u65F6\u95F4\u5185\u672A\u62A5\u544A\u4EFB\u4F55\u5FC3\u8DF3\u72B6\u6001\u7684\u8282\u70B9\u3002\u6B64\u5916\uFF0C\u5F53\u65B0\u8282\u70B9\u9009\u62E9\u52A0\u5165\u96C6\u7FA4\u65F6\uFF0C\u65B0\u8282\u70B9\u5FC5\u987B\u9996\u5148\u8FDE\u63A5\u5230\u5F53\u524D\u9009\u5B9A\u7684\u96C6\u7FA4\u534F\u8C03\u5668\uFF0C\u4EE5\u83B7\u53D6\u6700\u65B0\u7684\u6D41\u3002\u5982\u679C\u96C6\u7FA4\u534F\u8C03\u5668\u786E\u5B9A\u5141\u8BB8\u8BE5\u8282\u70B9\u52A0\u5165(\u57FA\u4E8E\u5176\u914D\u7F6E\u7684\u9632\u706B\u5899\u6587\u4EF6)\uFF0C\u5219\u5C06\u5F53\u524D\u6D41\u63D0\u4F9B\u7ED9\u8BE5\u8282\u70B9\uFF0C\u5E76\u4E14\u8BE5\u8282\u70B9\u80FD\u591F\u52A0\u5165\u96C6\u7FA4\uFF0C\u5047\u8BBE\u8282\u70B9\u7684\u6D41\u526F\u672C\u4E0E\u96C6\u7FA4\u534F\u8C03\u5668\u63D0\u4F9B\u7684\u526F\u672C\u5339\u914D\u3002\u5982\u679C\u8282\u70B9\u7684\u6D41\u914D\u7F6E\u7248\u672C\u4E0E\u96C6\u7FA4\u534F\u8C03\u5668\u7684\u7248\u672C\u4E0D\u540C\uFF0C\u5219\u8BE5\u8282\u70B9\u5C06\u4E0D\u4F1A\u52A0\u5165\u96C6\u7FA4\u3002</p><h3 id="\u4E3A\u4EC0\u4E48\u96C6\u7FA4" tabindex="-1"><a class="header-anchor" href="#\u4E3A\u4EC0\u4E48\u96C6\u7FA4" aria-hidden="true">#</a> \u4E3A\u4EC0\u4E48\u96C6\u7FA4\uFF1F</h3><p>NiFi\u7BA1\u7406\u5458\u6216DataFlow\u7BA1\u7406\u5668(DFM)\u53EF\u80FD\u4F1A\u53D1\u73B0\u5728\u5355\u4E2A\u670D\u52A1\u5668\u4E0A\u4F7F\u7528\u4E00\u4E2ANiFi\u5B9E\u4F8B\u4E0D\u8DB3\u4EE5\u5904\u7406\u4ED6\u4EEC\u62E5\u6709\u7684\u6570\u636E\u91CF\u3002\u56E0\u6B64\uFF0C\u4E00\u79CD\u89E3\u51B3\u65B9\u6848\u662F\u5728\u591A\u4E2ANiFi\u670D\u52A1\u5668\u4E0A\u8FD0\u884C\u76F8\u540C\u7684\u6570\u636E\u6D41\u3002\u4F46\u662F\uFF0C\u8FD9\u4F1A\u4EA7\u751F\u7BA1\u7406\u95EE\u9898\uFF0C\u56E0\u4E3A\u6BCF\u6B21DFM\u60F3\u8981\u66F4\u6539\u6216\u66F4\u65B0\u6570\u636E\u6D41\u65F6\uFF0C\u4ED6\u4EEC\u5FC5\u987B\u5728\u6BCF\u4E2A\u670D\u52A1\u5668\u4E0A\u8FDB\u884C\u8FD9\u4E9B\u66F4\u6539\uFF0C\u7136\u540E\u5355\u72EC\u76D1\u89C6\u6BCF\u4E2A\u670D\u52A1\u5668\u3002\u901A\u8FC7\u96C6\u7FA4NiFi\u670D\u52A1\u5668\uFF0C\u53EF\u4EE5\u589E\u52A0\u5904\u7406\u80FD\u529B\u4EE5\u53CA\u5355\u4E2A\u63A5\u53E3\uFF0C\u901A\u8FC7\u8BE5\u63A5\u53E3\u53EF\u4EE5\u66F4\u6539\u6570\u636E\u6D41\u5E76\u76D1\u63A7\u6570\u636E\u6D41\u3002\u96C6\u7FA4\u5141\u8BB8DFM\u4EC5\u8FDB\u884C\u4E00\u6B21\u66F4\u6539\uFF0C\u7136\u540E\u5C06\u66F4\u6539\u590D\u5236\u5230\u96C6\u7FA4\u7684\u6240\u6709\u8282\u70B9\u3002\u901A\u8FC7\u5355\u4E00\u63A5\u53E3\uFF0CDFM\u8FD8\u53EF\u4EE5\u76D1\u89C6\u6240\u6709\u8282\u70B9\u7684\u5065\u5EB7\u72B6\u51B5\u548C\u72B6\u6001\u3002</p><h3 id="\u672F\u8BED" tabindex="-1"><a class="header-anchor" href="#\u672F\u8BED" aria-hidden="true">#</a> \u672F\u8BED</h3><p>NiFi Clustering\u662F\u72EC\u4E00\u65E0\u4E8C\u7684\uFF0C\u6709\u81EA\u5DF1\u7684\u672F\u8BED\u3002\u5728\u8BBE\u7F6E\u96C6\u7FA4\u4E4B\u524D\u4E86\u89E3\u4EE5\u4E0B\u672F\u8BED\u975E\u5E38\u91CD\u8981\uFF1A</p><p><strong>NiFi\u96C6\u7FA4\u534F\u8C03\u5668(<strong><strong>NiFi Cluster Coordinator</strong></strong>)</strong>\uFF1ANiFi\u96C6\u7FA4\u534F\u8C03\u5668\u662FNiFi\u96C6\u7FA4\u4E2D\u7684\u8282\u70B9\uFF0C\u8D1F\u8D23\u6267\u884C\u4EFB\u52A1\u4EE5\u7BA1\u7406\u96C6\u7FA4\u4E2D\u5141\u8BB8\u7684\u8282\u70B9\uFF0C\u5E76\u4E3A\u65B0\u52A0\u5165\u7684\u8282\u70B9\u63D0\u4F9B\u6700\u65B0\u7684\u6D41\u91CF\u3002\u5F53DataFlow Manager\u7BA1\u7406\u96C6\u7FA4\u4E2D\u7684\u6570\u636E\u6D41\u65F6\uFF0C\u4ED6\u4EEC\u53EF\u4EE5\u901A\u8FC7\u96C6\u7FA4\u4E2D\u4EFB\u4F55\u8282\u70B9\u7684\u7528\u6237\u754C\u9762\u6267\u884C\u6B64\u64CD\u4F5C\u3002\u7136\u540E\uFF0C\u6240\u505A\u7684\u4EFB\u4F55\u66F4\u6539\u90FD\u5C06\u590D\u5236\u5230\u96C6\u7FA4\u4E2D\u7684\u6240\u6709\u8282\u70B9\u3002</p><p><strong>\u8282\u70B9(<strong><strong>Nodes</strong></strong>)</strong>\uFF1A\u6BCF\u4E2A\u96C6\u7FA4\u7531\u4E00\u4E2A\u6216\u591A\u4E2A\u8282\u70B9\u7EC4\u6210\u3002\u8282\u70B9\u6267\u884C\u5B9E\u9645\u7684\u6570\u636E\u5904\u7406\u3002</p><p><strong>\u4E3B\u8282\u70B9(<strong><strong>Primary Node</strong></strong>)</strong>\uFF1A\u6BCF\u4E2A\u96C6\u7FA4\u90FD\u6709\u4E00\u4E2A\u4E3B\u8282\u70B9\u3002\u5728\u6B64\u8282\u70B9\u4E0A\uFF0C\u53EF\u4EE5\u8FD0\u884C&quot;\u9694\u79BB\u5904\u7406\u5668&quot;(\u89C1\u4E0B\u6587)\u3002ZooKeeper\u7528\u4E8E\u81EA\u52A8\u9009\u62E9\u4E3B\u8282\u70B9\u3002\u5982\u679C\u8BE5\u8282\u70B9\u7531\u4E8E\u4EFB\u4F55\u539F\u56E0\u65AD\u5F00\u4E0E\u96C6\u7FA4\u7684\u8FDE\u63A5\uFF0C\u5C06\u81EA\u52A8\u9009\u62E9\u65B0\u7684\u4E3B\u8282\u70B9\u3002\u7528\u6237\u53EF\u4EE5\u901A\u8FC7\u67E5\u770B\u7528\u6237\u754C\u9762\u7684&quot;\u96C6\u7FA4\u7BA1\u7406&quot;\u9875\u9762\u6765\u786E\u5B9A\u5F53\u524D\u9009\u62E9\u54EA\u4E2A\u8282\u70B9\u4F5C\u4E3A\u4E3B\u8282\u70B9\u3002</p><p><img src="'+V+'" alt=""></p><p><strong>\u5B64\u7ACB\u7684\u5904\u7406\u5668</strong>\uFF1A\u5728NiFi\u96C6\u7FA4\u4E2D\uFF0C\u76F8\u540C\u7684\u6570\u636E\u6D41\u5728\u6240\u6709\u8282\u70B9\u4E0A\u8FD0\u884C\u3002\u56E0\u6B64\uFF0C\u6D41\u4E2D\u7684\u6BCF\u4E2A\u7EC4\u4EF6\u90FD\u5728\u6BCF\u4E2A\u8282\u70B9\u4E0A\u8FD0\u884C\u3002\u4F46\u662F\uFF0C\u53EF\u80FD\u5B58\u5728DFM\u4E0D\u5E0C\u671B\u6BCF\u4E2A\u5904\u7406\u5668\u5728\u6BCF\u4E2A\u8282\u70B9\u4E0A\u8FD0\u884C\u7684\u60C5\u51B5\u3002\u6700\u5E38\u89C1\u7684\u60C5\u51B5\u662F\u4F7F\u7528\u7684\u5904\u7406\u5668\u4F7F\u7528\u4E0D\u80FD\u5F88\u597D\u6269\u5C55\u7684\u534F\u8BAE\u4E0E\u5916\u90E8\u670D\u52A1\u8FDB\u884C\u901A\u4FE1\u3002\u4F8B\u5982\uFF0CGetSFTP\u5904\u7406\u5668\u4ECE\u8FDC\u7A0B\u76EE\u5F55\u4E2D\u63D0\u53D6\u3002\u5982\u679CGetSFTP\u5904\u7406\u5668\u5728\u96C6\u7FA4\u4E2D\u7684\u6BCF\u4E2A\u8282\u70B9\u4E0A\u8FD0\u884C\u5E76\u540C\u65F6\u5C1D\u8BD5\u4ECE\u540C\u4E00\u4E2A\u8FDC\u7A0B\u76EE\u5F55\u4E2D\u63D0\u53D6\uFF0C\u5219\u53EF\u80FD\u5B58\u5728\u7ADE\u4E89\u6761\u4EF6\u3002\u56E0\u6B64\uFF0CDFM\u53EF\u4EE5\u5C06\u4E3B\u8282\u70B9\u4E0A\u7684GetSFTP\u914D\u7F6E\u4E3A\u72EC\u7ACB\u8FD0\u884C\uFF0C\u8FD9\u610F\u5473\u7740\u5B83\u4EC5\u5728\u8BE5\u8282\u70B9\u4E0A\u8FD0\u884C\u3002\u901A\u8FC7\u9002\u5F53\u7684\u6570\u636E\u6D41\u914D\u7F6E\uFF0C\u5B83\u53EF\u4EE5\u63D0\u53D6\u6570\u636E\u5E76\u5728\u96C6\u7FA4\u4E2D\u7684\u5176\u4F59\u8282\u70B9\u4E4B\u95F4\u5BF9\u5176\u8FDB\u884C\u8D1F\u8F7D\u5E73\u8861\u3002\u8BF7\u6CE8\u610F\uFF0C\u867D\u7136\u5B58\u5728\u6B64\u529F\u80FD\uFF0C\u4F46\u4EC5\u4F7F\u7528\u72EC\u7ACB\u7684NiFi\u5B9E\u4F8B\u6765\u63D0\u53D6\u6570\u636E\u5E76\u5C06\u5176\u63D0\u4F9B\u7ED9\u96C6\u7FA4\u4E5F\u5F88\u5E38\u89C1\u3002\u5B83\u4EC5\u53D6\u51B3\u4E8E\u53EF\u7528\u8D44\u6E90\u4EE5\u53CA\u7BA1\u7406\u5458\u51B3\u5B9A\u914D\u7F6E\u96C6\u7FA4\u7684\u65B9\u5F0F\u3002</p><p><strong>\u5FC3\u8DF3</strong>\uFF1A\u8282\u70B9\u901A\u8FC7&quot;\u5FC3\u8DF3&quot;\u5C06\u5176\u5065\u5EB7\u72B6\u51B5\u548C\u72B6\u6001\u4F20\u8FBE\u7ED9\u5F53\u524D\u9009\u5B9A\u7684\u96C6\u7FA4\u534F\u8C03\u5668\uFF0C\u8FD9\u4F7F\u534F\u8C03\u5668\u77E5\u9053\u5B83\u4EEC\u4ECD\u7136\u8FDE\u63A5\u5230\u96C6\u7FA4\u5E76\u6B63\u5E38\u5DE5\u4F5C\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u8282\u70B9\u6BCF5\u79D2\u53D1\u51FA\u4E00\u6B21\u5FC3\u8DF3\uFF0C\u5982\u679C\u96C6\u7FA4\u534F\u8C03\u5668\u572840\u79D2\u5185\u6CA1\u6709\u4ECE\u8282\u70B9\u6536\u5230\u5FC3\u8DF3\uFF0C\u5219\u7531\u4E8E&quot;\u7F3A\u4E4F\u5FC3\u8DF3&quot;\u800C\u65AD\u5F00\u8282\u70B9\u30025\u79D2\u8BBE\u7F6E\u53EF\u5728_nifi.properties_\u6587\u4EF6\u4E2D\u914D\u7F6E(\u8BF7\u53C2\u9605<a href="#%E9%9B%86%E7%BE%A4%E5%85%AC%E5%85%B1%E5%B1%9E%E6%80%A7">\u96C6\u7FA4\u516C\u5171\u5C5E\u6027</a>)\u90E8\u5206\u4E86\u89E3\u66F4\u591A\u4FE1\u606F)\u3002\u96C6\u7FA4\u534F\u8C03\u5668\u65AD\u5F00\u8282\u70B9\u7684\u539F\u56E0\u662F\u534F\u8C03\u5668\u9700\u8981\u786E\u4FDD\u96C6\u7FA4\u4E2D\u7684\u6BCF\u4E2A\u8282\u70B9\u90FD\u5904\u4E8E\u540C\u6B65\u72B6\u6001\uFF0C\u5E76\u4E14\u5982\u679C\u6CA1\u6709\u5B9A\u671F\u542C\u5230\u8282\u70B9\uFF0C\u534F\u8C03\u5668\u65E0\u6CD5\u786E\u5B9A\u5B83\u662F\u5426\u4ECD\u4E0E\u5176\u4F59\u8282\u70B9\u540C\u6B65\u96C6\u7FA4\u3002\u5982\u679C\u572840\u79D2\u540E\u8282\u70B9\u53D1\u9001\u65B0\u7684\u5FC3\u8DF3\uFF0C\u534F\u8C03\u5668\u5C06\u81EA\u52A8\u8BF7\u6C42\u8282\u70B9\u91CD\u65B0\u52A0\u5165\u96C6\u7FA4\uFF0C\u4EE5\u5305\u62EC\u91CD\u65B0\u9A8C\u8BC1\u8282\u70B9\u7684\u6D41\u3002\u4E00\u65E6\u63A5\u6536\u5230\u5FC3\u8DF3\uFF0C\u7531\u4E8E\u5FC3\u8DF3\u4E0D\u8DB3\u5BFC\u81F4\u7684\u65AD\u5F00\u8FDE\u63A5\u548C\u91CD\u65B0\u8FDE\u63A5\u90FD\u4F1A\u62A5\u544A\u7ED9\u7528\u6237\u754C\u9762\u4E2D\u7684DFM\u3002</p><h3 id="\u96C6\u7FA4\u5185\u7684\u901A\u4FE1" tabindex="-1"><a class="header-anchor" href="#\u96C6\u7FA4\u5185\u7684\u901A\u4FE1" aria-hidden="true">#</a> \u96C6\u7FA4\u5185\u7684\u901A\u4FE1</h3><p>\u5982\u4E0A\u6240\u8FF0\uFF0C\u8282\u70B9\u901A\u8FC7\u5FC3\u8DF3\u4E0E\u96C6\u7FA4\u534F\u8C03\u5668\u901A\u4FE1\u3002\u5F53\u9009\u62E9\u96C6\u7FA4\u534F\u8C03\u5668\u65F6\uFF0C\u5B83\u4F1A\u4F7F\u7528\u5176\u8FDE\u63A5\u4FE1\u606F\u66F4\u65B0Apache ZooKeeper\u4E2D\u4F17\u6240\u5468\u77E5\u7684ZNode\uFF0C\u4EE5\u4FBF\u8282\u70B9\u4E86\u89E3\u53D1\u9001\u5FC3\u8DF3\u7684\u4F4D\u7F6E\u3002\u5982\u679C\u5176\u4E2D\u4E00\u4E2A\u8282\u70B9\u53D1\u751F\u6545\u969C\uFF0C\u5219\u96C6\u7FA4\u4E2D\u7684\u5176\u4ED6\u8282\u70B9\u5C06\u4E0D\u4F1A\u81EA\u52A8\u83B7\u53D6\u4E22\u5931\u8282\u70B9\u7684\u8D1F\u8F7D\u3002DFM\u53EF\u4EE5\u914D\u7F6E\u6545\u969C\u8F6C\u79FB\u610F\u5916\u4E8B\u4EF6\u7684\u6570\u636E\u6D41; \u4F46\u662F\uFF0C\u8FD9\u53D6\u51B3\u4E8E\u6570\u636E\u6D41\u8BBE\u8BA1\uFF0C\u5E76\u4E0D\u4F1A\u81EA\u52A8\u53D1\u751F\u3002</p><p>\u5F53DFM\u5BF9\u6570\u636E\u6D41\u8FDB\u884C\u66F4\u6539\u65F6\uFF0C\u63A5\u6536\u66F4\u6539\u6D41\u7684\u8BF7\u6C42\u7684\u8282\u70B9\u4F1A\u5C06\u8FD9\u4E9B\u66F4\u6539\u4F20\u9012\u7ED9\u6240\u6709\u8282\u70B9\uFF0C\u5E76\u7B49\u5F85\u6BCF\u4E2A\u8282\u70B9\u54CD\u5E94\uFF0C\u8868\u660E\u5B83\u5DF2\u5BF9\u5176\u672C\u5730\u6D41\u8FDB\u884C\u4E86\u66F4\u6539\u3002</p><h3 id="\u7BA1\u7406\u8282\u70B9" tabindex="-1"><a class="header-anchor" href="#\u7BA1\u7406\u8282\u70B9" aria-hidden="true">#</a> \u7BA1\u7406\u8282\u70B9</h3><h4 id="\u65AD\u5F00\u8282\u70B9" tabindex="-1"><a class="header-anchor" href="#\u65AD\u5F00\u8282\u70B9" aria-hidden="true">#</a> \u65AD\u5F00\u8282\u70B9</h4><p>DFM\u53EF\u4EE5\u624B\u52A8\u65AD\u5F00\u8282\u70B9\u4E0E\u96C6\u7FA4\u7684\u8FDE\u63A5\u3002\u8282\u70B9\u4E5F\u53EF\u80FD\u7531\u4E8E\u5176\u4ED6\u539F\u56E0\u800C\u65AD\u5F00\u8FDE\u63A5\uFF0C\u4F8B\u5982\u7531\u4E8E\u7F3A\u4E4F\u5FC3\u8DF3\u3002\u5F53\u8282\u70B9\u65AD\u5F00\u8FDE\u63A5\u65F6\uFF0C\u96C6\u7FA4\u534F\u8C03\u5668\u5C06\u5728\u7528\u6237\u754C\u9762\u4E0A\u663E\u793A\u516C\u544A\u3002\u5728\u89E3\u51B3\u65AD\u5F00\u8FDE\u63A5\u8282\u70B9\u7684\u95EE\u9898\u4E4B\u524D\uFF0CDFM\u5C06\u65E0\u6CD5\u5BF9\u6570\u636E\u6D41\u8FDB\u884C\u4EFB\u4F55\u66F4\u6539\u3002DFM\u6216\u7BA1\u7406\u5458\u9700\u8981\u5BF9\u8282\u70B9\u7684\u95EE\u9898\u8FDB\u884C\u6545\u969C\u6392\u9664\uFF0C\u5E76\u5728\u5BF9\u6570\u636E\u6D41\u8FDB\u884C\u4EFB\u4F55\u65B0\u7684\u66F4\u6539\u4E4B\u524D\u89E3\u51B3\u8BE5\u95EE\u9898\u3002\u4F46\u662F\uFF0C\u503C\u5F97\u6CE8\u610F\u7684\u662F\uFF0C\u4EC5\u4EC5\u56E0\u4E3A\u8282\u70B9\u65AD\u5F00\u8FDE\u63A5\u5E76\u4E0D\u610F\u5473\u7740\u5B83\u4E0D\u8D77\u4F5C\u7528\u3002\u8FD9\u53EF\u80FD\u7531\u4E8E\u67D0\u4E9B\u539F\u56E0\u800C\u53D1\u751F\uFF0C\u4F8B\u5982\uFF0C\u5F53\u8282\u70B9\u7531\u4E8E\u7F51\u7EDC\u95EE\u9898\u800C\u65E0\u6CD5\u4E0E\u96C6\u7FA4\u534F\u8C03\u5668\u901A\u4FE1\u65F6\u3002</p><p>\u8981\u624B\u52A8\u65AD\u5F00\u8282\u70B9\uFF0C\u8BF7\u4ECE\u8282\u70B9\u7684\u884C\u4E2D\u9009\u62E9&quot;\u65AD\u5F00\u8FDE\u63A5&quot;\u56FE\u6807(<img src="https://nifichina.gitee.io/image/general/iconDisconnect.png" alt="\u65AD\u5F00\u56FE\u6807">)\u3002</p><p><img src="'+X+'" alt=""></p><p>\u65AD\u5F00\u8FDE\u63A5\u7684\u8282\u70B9\u53EF\u4EE5\u8FDE\u63A5(<img src="https://nifichina.gitee.io/image/general/iconConnect.png" alt="\u8FDE\u63A5\u56FE\u6807">)\uFF0C\u5378\u8F7D(<img src="https://nifichina.gitee.io/image/general/iconOffload.png" alt="\u5378\u8F7D\u56FE\u6807">)\u6216\u5220\u9664(<img src="https://nifichina.gitee.io/image/general/iconDelete.png" alt="\u5220\u9664\u56FE\u6807">)\u3002</p><p><img src="'+a+'" alt="">\u5E76\u975E\u6240\u6709\u5904\u4E8E&quot;\u5DF2\u65AD\u5F00\u8FDE\u63A5&quot;\u72B6\u6001\u7684\u8282\u70B9\u90FD\u53EF\u4EE5\u5378\u8F7D\u3002\u5982\u679C\u8282\u70B9\u65AD\u5F00\u8FDE\u63A5\u4E14\u65E0\u6CD5\u8BBF\u95EE\uFF0C\u5219\u8282\u70B9\u65E0\u6CD5\u63A5\u6536\u5378\u8F7D\u8BF7\u6C42\u4EE5\u542F\u52A8\u5378\u8F7D\u3002\u6B64\u5916\uFF0C\u7531\u4E8E\u9632\u706B\u5899\u89C4\u5219\uFF0C\u53EF\u80FD\u4F1A\u4E2D\u65AD\u6216\u963B\u6B62\u5378\u8F7D\u3002</p><h4 id="\u5378\u8F7D\u8282\u70B9" tabindex="-1"><a class="header-anchor" href="#\u5378\u8F7D\u8282\u70B9" aria-hidden="true">#</a> \u5378\u8F7D\u8282\u70B9</h4><p>\u4FDD\u7559\u5728\u65AD\u5F00\u8FDE\u63A5\u7684\u8282\u70B9\u4E0A\u7684\u6D41\u6587\u4EF6\u53EF\u4EE5\u901A\u8FC7\u5378\u8F7D\u91CD\u65B0\u5E73\u8861\u5230\u96C6\u7FA4\u4E2D\u7684\u5176\u4ED6\u6D3B\u52A8\u8282\u70B9\u3002\u5728Cluster Management\u5BF9\u8BDD\u6846\u4E2D\uFF0C\u4E3ADisconnected\u8282\u70B9\u9009\u62E9&quot;Offload&quot;\u56FE\u6807(<img src="https://nifichina.gitee.io/image/general/iconOffload.png" alt="\u5378\u8F7D\u56FE\u6807">)\u3002\u8FD9\u5C06\u505C\u6B62\u6240\u6709\u5904\u7406\u5668\uFF0C\u7EC8\u6B62\u6240\u6709\u5904\u7406\u5668\uFF0C\u505C\u6B62\u5728\u6240\u6709\u8FDC\u7A0B\u8FDB\u7A0B\u7EC4\u4E0A\u4F20\u8F93\uFF0C\u5E76\u5C06\u6D41\u6587\u4EF6\u91CD\u65B0\u5E73\u8861\u5230\u96C6\u7FA4\u4E2D\u7684\u5176\u4ED6\u8FDE\u63A5\u8282\u70B9\u3002</p><p><img src="'+$+'" alt=""></p><p>\u7531\u4E8E\u9047\u5230\u9519\u8BEF(\u5185\u5B58\u4E0D\u8DB3\uFF0C\u6CA1\u6709\u7F51\u7EDC\u8FDE\u63A5\u7B49)\u800C\u4FDD\u6301&quot;\u5378\u8F7D&quot;\u72B6\u6001\u7684\u8282\u70B9\u53EF\u4EE5\u901A\u8FC7\u91CD\u65B0\u542F\u52A8\u8282\u70B9\u4E0A\u7684NiFi\u91CD\u65B0\u8FDE\u63A5\u5230\u96C6\u7FA4\u3002\u5378\u8F7D\u7684\u8282\u70B9\u53EF\u4EE5\u91CD\u65B0\u8FDE\u63A5\u5230\u96C6\u7FA4(\u901A\u8FC7\u9009\u62E9\u8FDE\u63A5\u6216\u91CD\u65B0\u542F\u52A8\u8282\u70B9\u4E0A\u7684NiFi)\u6216\u4ECE\u96C6\u7FA4\u4E2D\u5220\u9664\u3002</p><p><img src="'+Y+'" alt=""></p><h4 id="\u5220\u9664\u8282\u70B9" tabindex="-1"><a class="header-anchor" href="#\u5220\u9664\u8282\u70B9" aria-hidden="true">#</a> \u5220\u9664\u8282\u70B9</h4><p>\u5728\u67D0\u4E9B\u60C5\u51B5\u4E0B\uFF0CDFM\u53EF\u80FD\u5E0C\u671B\u7EE7\u7EED\u5BF9\u6D41\u8FDB\u884C\u66F4\u6539\uFF0C\u5373\u4F7F\u8282\u70B9\u672A\u8FDE\u63A5\u5230\u96C6\u7FA4\u4E5F\u662F\u5982\u6B64\u3002\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0CDFM\u53EF\u4EE5\u9009\u62E9\u5B8C\u5168\u4ECE\u96C6\u7FA4\u4E2D\u5220\u9664\u8282\u70B9\u3002\u5728Cluster Management\u5BF9\u8BDD\u6846\u4E2D\uFF0C\u4E3ADisconnected\u6216Offloaded\u8282\u70B9\u9009\u62E9&quot;Delete&quot;\u56FE\u6807(<img src="https://nifichina.gitee.io/image/general/iconDelete.png" alt="\u5220\u9664\u56FE\u6807">)\u3002\u5220\u9664\u540E\uFF0C\u5728\u91CD\u65B0\u542F\u52A8\u8282\u70B9\u4E4B\u524D\uFF0C\u8282\u70B9\u65E0\u6CD5\u91CD\u65B0\u52A0\u5165\u96C6\u7FA4\u3002</p><h4 id="\u9000\u5F79\u8282\u70B9" tabindex="-1"><a class="header-anchor" href="#\u9000\u5F79\u8282\u70B9" aria-hidden="true">#</a> \u9000\u5F79\u8282\u70B9</h4><p>\u505C\u7528\u8282\u70B9\u5E76\u5C06\u5176\u4ECE\u96C6\u7FA4\u4E2D\u5220\u9664\u7684\u6B65\u9AA4\u5982\u4E0B\uFF1A</p><ol><li><p>\u65AD\u5F00\u8282\u70B9\u3002</p></li><li><p>\u65AD\u5F00\u8FDE\u63A5\u5B8C\u6210\u540E\uFF0C\u5378\u8F7D\u8282\u70B9\u3002</p></li><li><p>\u5378\u8F7D\u5B8C\u6210\u540E\uFF0C\u5220\u9664\u8BE5\u8282\u70B9\u3002</p></li><li><p>\u5220\u9664\u8BF7\u6C42\u5B8C\u6210\u540E\uFF0C\u505C\u6B62/\u5220\u9664\u4E3B\u673A\u4E0A\u7684NiFi\u670D\u52A1\u3002</p></li></ol><p>NiFi CLI\u8282\u70B9\u547D\u4EE4</p><p>\u4F5C\u4E3AUI\u7684\u66FF\u4EE3\u65B9\u6848\uFF0C\u4EE5\u4E0BNiFi CLI\u547D\u4EE4\u53EF\u7528\u4E8E\u68C0\u7D22\u5355\u4E2A\u8282\u70B9\uFF0C\u68C0\u7D22\u8282\u70B9\u5217\u8868\u4EE5\u53CA\u8FDE\u63A5/\u65AD\u5F00/\u5378\u8F7D/\u5220\u9664(connecting/disconnecting/offloading/deleting ) \u8282\u70B9\uFF1A</p><ul><li><p><code>NiFi get-node</code></p></li><li><p><code>NiFi get-nodes</code></p></li><li><p><code>NiFi connect-node</code></p></li><li><p><code>NiFi disconnect-node</code></p></li><li><p><code>NiFi offload-node</code></p></li><li><p><code>NiFi delete-node</code></p></li></ul><p>\u6709\u5173\u66F4\u591A\u4FE1\u606F\uFF0C\u8BF7\u53C2\u9605<a href="./ToolkitGuide">NiFi\u5DE5\u5177\u5305\u6307\u5357\u4E2D</a>\u7684[NiFi CLI]((./ToolkitGuide#NiFi_CLI)\u90E8\u5206\u3002</p><h3 id="flow-election" tabindex="-1"><a class="header-anchor" href="#flow-election" aria-hidden="true">#</a> Flow Election</h3><p>\u5F53\u96C6\u7FA4\u9996\u6B21\u542F\u52A8\u65F6\uFF0CNiFi\u5FC5\u987B\u786E\u5B9A\u54EA\u4E2A\u8282\u70B9\u5177\u6709\u6D41\u7684&quot;\u6B63\u786E&quot;\u7248\u672C\u3002\u8FD9\u662F\u901A\u8FC7\u5BF9\u6BCF\u4E2A\u8282\u70B9\u5177\u6709\u7684\u6D41\u8FDB\u884C\u6295\u7968\u6765\u5B8C\u6210\u7684\u3002\u5F53\u8282\u70B9\u5C1D\u8BD5\u8FDE\u63A5\u5230\u96C6\u7FA4\u65F6\uFF0C\u5B83\u4F1A\u5C06\u5176\u672C\u5730\u6D41\u7684\u526F\u672C\u63D0\u4F9B\u7ED9\u96C6\u7FA4\u534F\u8C03\u5668\u3002\u5982\u679C\u5C1A\u672A\u9009\u62E9\u6D41&quot;\u6B63\u786E&quot;\u6D41\uFF0C\u5219\u5C06\u8282\u70B9\u7684\u6D41\u4E0E\u6BCF\u4E2A\u5176\u4ED6\u8282\u70B9\u7684\u6D41\u8FDB\u884C\u6BD4\u8F83\u3002\u5982\u679C\u53E6\u4E00\u4E2ANode\u7684\u6D41\u4E0E\u6B64\u6D41\u5339\u914D\uFF0C\u5219\u4E3A\u6B64\u6D41\u6295\u7968\u3002\u5982\u679C\u8FD8\u6CA1\u6709\u5176\u4ED6\u8282\u70B9\u62A5\u544A\u76F8\u540C\u7684\u6D41\uFF0C\u5219\u6B64\u6D41\u5C06\u4EE5\u4E00\u7968\u6295\u7968\u7684\u65B9\u5F0F\u6DFB\u52A0\u5230\u53EF\u80FD\u9009\u62E9\u7684\u6D41\u6C60\u4E2D\u3002\u7ECF\u8FC7\u4E00\u6BB5\u65F6\u95F4\u540E(\u901A\u8FC7\u8BBE\u7F6E<code>nifi.cluster.flow.election.max.wait.time</code>\u5C5E\u6027\u914D\u7F6E)\u6216\u4E00\u4E9B\u8282\u70B9\u6709\u6295\u7968(\u901A\u8FC7\u8BBE\u7F6E<code>nifi.cluster.flow.election.max.candidates</code>\u5C5E\u6027)\uFF0C\u6D41\u88AB\u9009\u4E3A\u6D41\u7684&quot;\u6B63\u786E&quot;\u526F\u672C\u3002\u7136\u540E\uFF0C\u5177\u6709\u4E0D\u517C\u5BB9\u6D41\u7684\u6240\u6709\u8282\u70B9\u5C06\u4E0E\u96C6\u7FA4\u65AD\u5F00\u8FDE\u63A5\uFF0C\u800C\u5177\u6709\u517C\u5BB9\u6D41\u7684\u8282\u70B9\u5C06\u7EE7\u627F\u96C6\u7FA4\u7684\u6D41\u3002\u9009\u4E3E\u662F\u6839\u636E&quot;\u6C11\u4F17\u6295\u7968&quot;\u8FDB\u884C\u7684\uFF0C\u4F46\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF0C\u9664\u975E\u6240\u6709\u6D41\u91CF\u90FD\u662F\u7A7A\u7684\uFF0C\u5426\u5219\u83B7\u80DC\u8005\u6C38\u8FDC\u4E0D\u4F1A\u662F&quot;\u7A7A\u6D41&quot;\u3002\u8FD9\u5141\u8BB8\u7BA1\u7406\u5458\u5220\u9664\u8282\u70B9\u7684_flow.xml.gz_\u6587\u4EF6\u5E76\u91CD\u65B0\u542F\u52A8\u8282\u70B9\uFF0C\u56E0\u4E3A\u77E5\u9053\u8282\u70B9\u7684\u6D41\u5C06\u4E0D\u4F1A\u88AB\u6295\u7968\u4E3A&quot;\u6B63\u786E&quot;\u6D41\uFF0C\u9664\u975E\u627E\u4E0D\u5230\u5176\u4ED6\u6D41\u3002</p><h3 id="\u57FA\u672C\u96C6\u7FA4\u8BBE\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u57FA\u672C\u96C6\u7FA4\u8BBE\u7F6E" aria-hidden="true">#</a> \u57FA\u672C\u96C6\u7FA4\u8BBE\u7F6E</h3><p>\u672C\u8282\u4ECB\u7ECD\u7531\u4E09\u4E2ANiFi\u5B9E\u4F8B\u7EC4\u6210\u7684\u7B80\u5355\u4E09\u8282\u70B9\u975E\u5B89\u5168\u96C6\u7FA4\u7684\u8BBE\u7F6E\u3002</p><p>\u5BF9\u4E8E\u6BCF\u4E2A\u5B9E\u4F8B\uFF0C\u90FD\u9700\u8981\u66F4\u65B0 <em>nifi.properties</em> \u6587\u4EF6\u4E2D\u7684\u67D0\u4E9B\u5C5E\u6027\u3002\u7279\u522B\u662F\uFF0C\u5E94\u6839\u636E\u4F60\u7684\u60C5\u51B5\u8BC4\u4F30Web\u548C\u96C6\u7FA4\u5C5E\u6027\u5E76\u8FDB\u884C\u76F8\u5E94\u8C03\u6574\u3002\u6240\u6709\u5C5E\u6027\u90FD\u5728\u672C\u6307\u5357\u7684 <a href="#%E7%B3%BB%E7%BB%9F%E5%B1%9E%E6%80%A7(System%20Properties)">\u7CFB\u7EDF\u5C5E\u6027(System Properties)</a>\u90E8\u5206\u4E2D\u63CF\u8FF0; \u4F46\u662F\uFF0C\u5728\u672C\u8282\u4E2D\uFF0C\u6211\u4EEC\u5C06\u91CD\u70B9\u5173\u6CE8\u5FC5\u987B\u4E3A\u7B80\u5355\u96C6\u7FA4\u8BBE\u7F6E\u7684\u6700\u5C0F\u5C5E\u6027\u3002</p><p>\u5BF9\u4E8E\u6240\u6709\u4E09\u4E2A\u5B9E\u4F8B\uFF0C\u53EF\u4EE5\u4F7F\u7528\u9ED8\u8BA4\u8BBE\u7F6E\u4FDD\u7559<a href="%E9%9B%86%E7%BE%A4%E5%85%AC%E5%85%B1%E5%B1%9E%E6%80%A7">\u96C6\u7FA4\u516C\u5171\u5C5E\u6027</a>\u3002\u4F46\u8BF7\u6CE8\u610F\uFF0C\u5982\u679C\u66F4\u6539\u8FD9\u4E9B\u8BBE\u7F6E\uFF0C\u5219\u5FC5\u987B\u5728\u96C6\u7FA4\u4E2D\u7684\u6BCF\u4E2A\u5B9E\u4F8B\u4E0A\u8BBE\u7F6E\u76F8\u540C\u7684\u8BBE\u7F6E\u3002</p><p>\u5BF9\u4E8E\u6BCF\u4E2A\u8282\u70B9\uFF0C\u8981\u914D\u7F6E\u7684\u6700\u5C0F\u5C5E\u6027\u5982\u4E0B:</p>',55),Fs=e("li",null,[e("p",null,"\u5728Web Properties\u90E8\u5206\u4E0B\uFF0C\u8BBE\u7F6E\u8981\u5728\u5176\u4E0A\u8FD0\u884C\u8282\u70B9\u7684HTTP\u6216HTTPS\u7AEF\u53E3\u3002\u53E6\u5916\uFF0C\u8BF7\u8003\u8651\u662F\u5426\u9700\u8981\u8BBE\u7F6EHTTP\u6216HTTPS\u4E3B\u673A\u5C5E\u6027\u3002\u96C6\u7FA4\u4E2D\u7684\u6240\u6709\u8282\u70B9\u90FD\u5E94\u4F7F\u7528\u76F8\u540C\u7684\u534F\u8BAE\u8BBE\u7F6E\u3002")],-1),qs=t("\u5728State Management \u5C06"),xs=e("code",null,"nifi.state.management.provider.cluster",-1),Ns=t('\u5C5E\u6027\u8BBE\u7F6E\u4E3A"\u96C6\u7FA4\u72B6\u6001\u63D0\u4F9B\u7A0B\u5E8F"\u7684\u6807\u8BC6\u7B26\u3002\u786E\u4FDD\u5DF2\u5728_state-management.xml_\u6587\u4EF6\u4E2D\u914D\u7F6E\u4E86\u96C6\u7FA4\u72B6\u6001\u63D0\u4F9B\u7A0B\u5E8F\u3002\u6709\u5173\u66F4\u591A\u4FE1\u606F\uFF0C\u8BF7\u53C2\u9605'),Ps={href:"http://nifi.apache.org/docs/NiFi-docs/html/administration-guide.html#state_providers",target:"_blank",rel:"noopener noreferrer"},As=t("\u914D\u7F6E\u72B6\u6001\u63D0\u4F9B\u7A0B\u5E8F"),Ss=o("<li><p>\u5728Cluster Node Properties\u4E0B\uFF0C\u8BBE\u7F6E\u4EE5\u4E0B\u5185\u5BB9:</p><ul><li><p><code>nifi.cluster.is.node</code>- \u5C06\u6B64\u8BBE\u7F6E\u4E3A <em>true</em>\u3002</p></li><li><p><code>nifi.cluster.node.address</code> - \u5C06\u5176\u8BBE\u7F6E\u4E3A\u8282\u70B9\u7684\u6807\u51C6\u4E3B\u673A\u540D\u3002\u5982\u679C\u7559\u7A7A\uFF0C\u5219\u9ED8\u8BA4\u4E3A<code>localhost</code>\u3002</p></li><li><p><code>nifi.cluster.node.protocol.port</code> - \u5C06\u5176\u8BBE\u7F6E\u4E3A\u9AD8\u4E8E1024\u7684\u5F00\u653E\u7AEF\u53E3(\u4EFB\u4F55\u4F4E\u7AEF\u90FD\u9700\u8981root)\u3002</p></li><li><p><code>nifi.cluster.node.protocol.threads</code> - \u5E94\u8BE5\u7528\u4E8E\u4E0E\u96C6\u7FA4\u4E2D\u7684\u5176\u4ED6\u8282\u70B9\u901A\u4FE1\u7684\u7EBF\u7A0B\u6570\u3002\u6B64\u5C5E\u6027\u9ED8\u8BA4\u4E3A<code>10</code>\u3002\u7EBF\u7A0B\u6C60\u7528\u4E8E\u5C06\u8BF7\u6C42\u590D\u5236\u5230\u6240\u6709\u8282\u70B9\uFF0C\u5E76\u4E14\u7EBF\u7A0B\u6C60\u7684\u7EBF\u7A0B\u6570\u6C38\u8FDC\u4E0D\u4F1A\u5C11\u4E8E\u6B64\u6570\u91CF\u3002\u5B83\u5C06\u6839\u636E\u9700\u8981\u589E\u957F\u5230<code>nifi.cluster.node.protocol.max.threads</code> \u5C5E\u6027\u8BBE\u7F6E\u7684\u6700\u5927\u503C\u3002</p></li><li><p><code>nifi.cluster.node.protocol.max.threads</code> - \u5E94\u8BE5\u7528\u4E8E\u4E0E\u96C6\u7FA4\u4E2D\u5176\u4ED6\u8282\u70B9\u901A\u4FE1\u7684\u6700\u5927\u7EBF\u7A0B\u6570\u3002\u6B64\u5C5E\u6027\u9ED8\u8BA4\u4E3A<code>50</code>\u3002\u7EBF\u7A0B\u6C60\u7528\u4E8E\u5BF9\u6240\u6709\u8282\u70B9\u7684\u590D\u5236\u8BF7\u6C42\uFF0C\u5E76\u4E14\u7EBF\u7A0B\u6C60\u5C06\u5177\u6709\u7531<code>nifi.cluster.node.protocol.threads</code>\u5C5E\u6027\u914D\u7F6E\u7684&quot;\u6838\u5FC3&quot;\u5927\u5C0F \u3002\u4F46\u662F\uFF0C\u5982\u6709\u5FC5\u8981\uFF0C\u7EBF\u7A0B\u6C60\u4F1A\u5C06\u6D3B\u52A8\u7EBF\u7A0B\u6570\u589E\u52A0\u5230\u6B64\u5C5E\u6027\u8BBE\u7F6E\u7684\u9650\u5236\u3002</p></li><li><p><code>nifi.zookeeper.connect.string</code> - \u8FDE\u63A5\u5230Apache ZooKeeper\u6240\u9700\u7684\u8FDE\u63A5\u5B57\u7B26\u4E32\u3002\u8FD9\u662F\u4E00\u4E2A\u4EE5\u9017\u53F7\u5206\u9694\u7684hostname:port\u5BF9\u5217\u8868\u3002\u4F8B\u5982\uFF0C<code>localhost:2181\uFF0Clocalhost:2182\uFF0Clocalhost:2183</code>\u3002\u8FD9\u5E94\u8BE5\u5305\u542BZooKeeper\u4EF2\u88C1\u4E2D\u6240\u6709ZooKeeper\u5B9E\u4F8B\u7684\u5217\u8868\u3002</p></li><li><p><code>nifi.zookeeper.root.node</code> - \u5E94\u5728ZooKeeper\u4E2D\u4F7F\u7528\u7684\u6839ZNode\u3002ZooKeeper\u63D0\u4F9B\u4E86\u4E00\u4E2A\u7C7B\u4F3C\u76EE\u5F55\u7684\u7ED3\u6784\u6765\u5B58\u50A8\u6570\u636E\u3002\u6B64\u7ED3\u6784\u4E2D\u7684\u6BCF\u4E2A&quot;\u76EE\u5F55&quot;\u79F0\u4E3AZNode\u3002\u8FD9\u8868\u793A\u5E94\u8BE5\u7528\u4E8E\u5B58\u50A8\u6570\u636E\u7684\u6839ZNode\u6216&quot;\u76EE\u5F55&quot;\u3002\u9ED8\u8BA4\u503C\u4E3A<code>/root</code>\u3002\u8FD9\u5BF9\u4E8E\u6B63\u786E\u8BBE\u7F6E\u5F88\u91CD\u8981\uFF0C\u56E0\u4E3ANiFi\u5B9E\u4F8B\u5C1D\u8BD5\u52A0\u5165\u7684\u96C6\u7FA4\u53D6\u51B3\u4E8E\u5B83\u8FDE\u63A5\u5230\u54EA\u4E2AZooKeeper\u5B9E\u4F8B\u4EE5\u53CA\u6307\u5B9A\u7684ZooKeeper\u6839\u8282\u70B9\u3002</p></li><li><p><code>nifi.cluster.flow.election.max.wait.time</code> - \u6307\u5B9A\u5728\u9009\u62E9Flow\u4F5C\u4E3A&quot;\u6B63\u786E&quot;\u6D41\u4E4B\u524D\u7B49\u5F85\u7684\u65F6\u95F4\u91CF\u3002\u5982\u679C\u5DF2\u6295\u7968\u7684\u8282\u70B9\u6570\u7B49\u4E8E<code>nifi.cluster.flow.election.max.candidates</code> \u5C5E\u6027\u6307\u5B9A\u7684\u6570\u91CF\uFF0C\u5219\u96C6\u7FA4\u5C06\u4E0D\u4F1A\u7B49\u5F85\u8FD9\u4E48\u957F\u65F6\u95F4\u3002\u9ED8\u8BA4\u503C\u4E3A<code>5 mins</code>\u3002\u8BF7\u6CE8\u610F\uFF0C\u4E00\u65E6\u6295\u7968\u7B2C\u4E00\u6B21\u6295\u7968\uFF0C\u65F6\u95F4\u5C31\u4F1A\u5F00\u59CB\u3002</p></li><li><p><code>nifi.cluster.flow.election.max.candidates</code> - \u6307\u5B9A\u96C6\u7FA4\u4E2D\u6240\u9700\u7684\u8282\u70B9\u6570\uFF0C\u4EE5\u4FBF\u63D0\u524D\u9009\u62E9\u6D41\u3002\u8FD9\u5141\u8BB8\u96C6\u7FA4\u4E2D\u7684\u8282\u70B9\u907F\u514D\u5728\u5F00\u59CB\u5904\u7406\u4E4B\u524D\u7B49\u5F85\u5F88\u957F\u65F6\u95F4\uFF0C\u5982\u679C\u6211\u4EEC\u81F3\u5C11\u8FBE\u5230\u96C6\u7FA4\u4E2D\u7684\u6B64\u6570\u91CF\u7684\u8282\u70B9\u3002</p></li></ul></li>",1),Ts=o('<p>\u73B0\u5728\uFF0C\u53EF\u4EE5\u542F\u52A8\u96C6\u7FA4\u3002\u5B9E\u4F8B\u542F\u52A8\u7684\u987A\u5E8F\u65E0\u5173\u7D27\u8981\u3002\u5BFC\u822A\u5230\u5176\u4E2D\u4E00\u4E2A\u8282\u70B9\u7684URL\uFF0C\u7528\u6237\u754C\u9762\u5E94\u7C7B\u4F3C\u4E8E\u4EE5\u4E0B\u5185\u5BB9:</p><p><img src="'+Q+'" alt=""></p><h3 id="\u6545\u969C\u6392\u9664" tabindex="-1"><a class="header-anchor" href="#\u6545\u969C\u6392\u9664" aria-hidden="true">#</a> \u6545\u969C\u6392\u9664</h3><p>\u5982\u679C\u9047\u5230\u95EE\u9898\u5E76\u4E14\u4F60\u7684\u96C6\u7FA4\u65E0\u6CD5\u6309\u7167\u63CF\u8FF0\u8FD0\u884C\uFF0C\u8BF7\u8C03\u67E5 \u8282\u70B9\u4E0A\u7684_NiFi-app.log_\u548C_NiFi-user.log_\u6587\u4EF6\u3002\u5982\u679C\u9700\u8981\uFF0C\u53EF\u4EE5\u901A\u8FC7\u7F16\u8F91<code>conf/logback.xml</code>\u6587\u4EF6\u5C06\u65E5\u5FD7\u8BB0\u5F55\u7EA7\u522B\u66F4\u6539\u4E3ADEBUG \u3002\u5177\u4F53\u6765\u8BF4\uFF0C\u8BBE\u7F6E<code>level=&quot;DEBUG&quot;</code>\u4EE5\u4E0B\u884C(\u800C\u4E0D\u662F<code>&quot;INFO&quot;</code>):</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>logger</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.apache.nifi.web.api.config<span class="token punctuation">&quot;</span></span> <span class="token attr-name">level</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>INFO<span class="token punctuation">&quot;</span></span> <span class="token attr-name">additivity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>appender-ref</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>USER_FILE<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>logger</span><span class="token punctuation">&gt;</span></span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="state\u7BA1\u7406" tabindex="-1"><a class="header-anchor" href="#state\u7BA1\u7406" aria-hidden="true">#</a> State\u7BA1\u7406</h2><p>NiFi\u4E3A\u5904\u7406\u5668\uFF0C\u62A5\u544A\u4EFB\u52A1\uFF0C\u63A7\u5236\u5668\u670D\u52A1\u548C\u6846\u67B6\u672C\u8EAB\u63D0\u4F9B\u4E86\u4E00\u79CD\u673A\u5236\u6765\u4FDD\u6301\u72B6\u6001\u3002\u4F8B\u5982\uFF0C\u8FD9\u5141\u8BB8\u5904\u7406\u5668\u5728\u91CD\u65B0\u542F\u52A8NiFi\u540E\u4ECE\u5176\u505C\u6B62\u7684\u4F4D\u7F6E\u6062\u590D\u3002\u6B64\u5916\uFF0C\u5B83\u5141\u8BB8\u5904\u7406\u5668\u5B58\u50A8\u67D0\u4E9B\u4FE1\u606F\uFF0C\u4EE5\u4FBF\u5904\u7406\u5668\u53EF\u4EE5\u4ECE\u96C6\u7FA4\u4E2D\u7684\u6240\u6709\u4E0D\u540C\u8282\u70B9\u8BBF\u95EE\u8BE5\u4FE1\u606F\u3002\u8FD9\u5141\u8BB8\u4E00\u4E2A\u8282\u70B9\u62FE\u53D6\u53E6\u4E00\u4E2A\u8282\u70B9\u505C\u6B62\u7684\u4F4D\u7F6E\uFF0C\u6216\u8005\u5728\u96C6\u7FA4\u4E2D\u7684\u6240\u6709\u8282\u70B9\u4E4B\u95F4\u8FDB\u884C\u534F\u8C03\u3002</p><h3 id="\u914D\u7F6E\u72B6\u6001\u63D0\u4F9B\u7A0B\u5E8F" tabindex="-1"><a class="header-anchor" href="#\u914D\u7F6E\u72B6\u6001\u63D0\u4F9B\u7A0B\u5E8F" aria-hidden="true">#</a> \u914D\u7F6E\u72B6\u6001\u63D0\u4F9B\u7A0B\u5E8F</h3><p>\u5F53\u7EC4\u4EF6\u51B3\u5B9A\u5B58\u50A8\u6216\u68C0\u7D22\u72B6\u6001\u65F6\uFF0C\u5B83\u901A\u8FC7\u63D0\u4F9B&quot;Scope(Local\u6216\u8005Cluster)&quot;\u6765\u5B9E\u73B0\u3002\u7136\u540E\uFF0C\u57FA\u4E8E\u6B64Scope\u4EE5\u53CA\u914D\u7F6E\u7684\u72B6\u6001\u63D0\u4F9B\u7A0B\u5E8F\u786E\u5B9A\u7528\u4E8E\u5B58\u50A8\u548C\u68C0\u7D22\u6B64\u72B6\u6001\u7684\u673A\u5236\u3002 <em>nifi.properties</em> \u6587\u4EF6\u5305\u542B\u6709\u5173\u914D\u7F6E\uFF1A</p><table><thead><tr><th><strong>\u5C5E\u6027</strong></th><th><strong>\u63CF\u8FF0</strong></th></tr></thead><tbody><tr><td><code>nifi.state.management.configuration.file</code></td><td>\u7B2C\u4E00\u4E2A\u662F\u6307\u5B9A\u5916\u90E8XML\u6587\u4EF6\u7684\u5C5E\u6027\uFF0C\u8BE5\u6587\u4EF6\u7528\u4E8E\u914D\u7F6E\u672C\u5730\u6216\u96C6\u7FA4\u8303\u56F4\u7684\u72B6\u6001\u63D0\u4F9B\u7A0B\u5E8F(StateProvider)\u3002\u6B64XML\u6587\u4EF6\u53EF\u80FD\u5305\u542B\u591A\u4E2A\u63D0\u4F9B\u7A0B\u5E8F\u7684\u914D\u7F6E</td></tr><tr><td><code>nifi.state.management.provider.local</code></td><td>\u63D0\u4F9B\u6B64XML\u6587\u4EF6\u4E2D\u914D\u7F6E\u7684\u672C\u5730State Provider\u6807\u8BC6\u7B26\u7684\u5C5E\u6027</td></tr><tr><td><code>nifi.state.management.provider.cluster</code></td><td>\u540C\u6837\uFF0C\u8BE5\u5C5E\u6027\u63D0\u4F9B\u5728\u6B64XML\u6587\u4EF6\u4E2D\u914D\u7F6E\u7684\u96C6\u7FA4\u8303\u56F4\u7684State Provider\u7684\u6807\u8BC6\u7B26\u3002</td></tr></tbody></table><p>\u6B64XML\u6587\u4EF6\u7531\u9876\u7EA7<code>state-management</code>\u5143\u7D20\u7EC4\u6210\uFF0C\u8BE5\u5143\u7D20\u5177\u6709\u4E00\u4E2A\u6216\u591A\u4E2A<code>local-provider</code>\u96F6\u4E2A\u6216\u591A\u4E2A<code>cluster-provider</code> \u5143\u7D20\u3002\u7136\u540E\uFF0C\u8FD9\u4E9B\u5143\u7D20\u4E2D\u7684\u6BCF\u4E00\u4E2A\u90FD\u5305\u542B\u4E00\u4E2A<code>id</code>\u5143\u7D20\uFF0C\u7528\u4E8E\u6307\u5B9A\u53EF\u5728 <em>nifi.properties</em> \u6587\u4EF6\u4E2D\u5F15\u7528\u7684\u6807\u8BC6\u7B26\uFF0C \u4EE5\u53CA\u4E00\u4E2A<code>class</code>\u5143\u7D20\uFF0C\u8BE5\u5143\u7D20\u6307\u5B9A\u8981\u7528\u4E8E\u5B9E\u4F8B\u5316State Provider\u7684\u5B8C\u5168\u9650\u5B9A\u7C7B\u540D\u3002\u6700\u540E\uFF0C\u8FD9\u4E9B\u5143\u7D20\u4E2D\u7684\u6BCF\u4E00\u4E2A\u53EF\u4EE5\u5177\u6709\u96F6\u4E2A\u6216\u591A\u4E2A<code>property</code>\u5143\u7D20\u3002\u6BCF\u4E2A<code>property</code>\u5143\u7D20\u90FD\u6709\u4E00\u4E2A\u5C5E\u6027\uFF0C<code>name</code>\u5373<code>property</code>State Provider\u652F\u6301\u7684\u540D\u79F0\u3002property\u5143\u7D20\u7684\u6587\u672C\u5185\u5BB9\u662F\u5C5E\u6027\u7684\u503C\u3002</p><p>\u5728 <em>state-management.xml</em> \u6587\u4EF6(\u6216\u914D\u7F6E\u7684\u4EFB\u4F55\u6587\u4EF6)\u4E2D\u914D\u7F6E\u4E86\u8FD9\u4E9B\u72B6\u6001\u63D0\u4F9B\u7A0B\u5E8F\u540E\uFF0C\u8FD9\u4E9B\u63D0\u4F9B\u7A0B\u5E8F\u53EF\u80FD\u4F1A\u88AB\u5176\u6807\u8BC6\u7B26\u5F15\u7528\u3002</p><p>\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u672C\u5730\u72B6\u6001\u63D0\u4F9B\u7A0B\u5E8F\u914D\u7F6E\u4E3A\u5C06<code>WriteAheadLocalStateProvider</code>\u6570\u636E\u6301\u4E45\u4FDD\u5B58\u5230 <code>$NiFi_HOME/state/local</code>\u76EE\u5F55\u3002\u9ED8\u8BA4\u7684\u96C6\u7FA4\u72B6\u6001\u63D0\u4F9B\u7A0B\u5E8F\u914D\u7F6E\u4E3A <code>ZooKeeperStateProvider</code>\u3002\u9ED8\u8BA4\u7684\u57FA\u4E8EZooKeeper\u7684\u63D0\u4F9B\u7A0B\u5E8F\u5FC5\u987B\u5148<code>Connect String</code>\u586B\u5145\u5176\u5C5E\u6027\uFF0C\u7136\u540E\u624D\u80FD\u4F7F\u7528\u5B83\u3002\u5982\u679C\u591A\u4E2ANiFi\u5B9E\u4F8B\u5C06\u4F7F\u7528\u76F8\u540C\u7684ZooKeeper\u5B9E\u4F8B\uFF0C\u5219\u5EFA\u8BAE<code>Root Node</code>\u66F4\u6539\u5C5E\u6027\u7684\u503C\u3002\u4F8B\u5982\uFF0C\u53EF\u4EE5\u5C06\u503C\u8BBE\u7F6E\u4E3A <code>/NiFi/&lt;team name&gt;/production</code>\u3002A <code>Connect String</code>\u91C7\u7528\u9017\u53F7\u5206\u9694\u7684<code>&lt;host&gt;:&lt;port&gt;</code>\u5143\u7EC4\u7684\u5F62\u5F0F\uFF0C\u4F8B\u5982 <code>my-zk-server1:2181\uFF0Cmy-zk-server2:2181\uFF0Cmy-zk-server3:2181</code>\u3002\u5982\u679C\u6CA1\u6709\u4E3A\u4EFB\u4F55\u4E3B\u673A\u6307\u5B9A\u7AEF\u53E3\uFF0C<code>2181</code>\u5219\u5047\u5B9A\u4E3AZooKeeper\u9ED8\u8BA4\u503C \u3002</p><p>\u5411ZooKeeper\u6DFB\u52A0\u6570\u636E\u65F6\uFF0CAccess Control\u6709\u4E24\u4E2A\u9009\u9879:<code>Open</code>\u548C<code>CreatorOnly</code>\u3002\u5982\u679C\u8BE5<code>Access Control</code>\u5C5E\u6027\u8BBE\u7F6E\u4E3A<code>Open</code>\uFF0C\u5219\u5141\u8BB8\u4EFB\u4F55\u4EBA\u767B\u5F55ZooKeeper\u5E76\u62E5\u6709\u67E5\u770B\uFF0C\u66F4\u6539\uFF0C\u5220\u9664\u6216\u7BA1\u7406\u6570\u636E\u7684\u5B8C\u5168\u6743\u9650\u3002\u5982\u679C<code>CreatorOnly</code>\u5DF2\u6307\u5B9A\uFF0C\u5219\u4EC5\u5141\u8BB8\u521B\u5EFA\u6570\u636E\u7684\u7528\u6237\u8BFB\u53D6\uFF0C\u66F4\u6539\uFF0C\u5220\u9664\u6216\u7BA1\u7406\u6570\u636E\u3002\u4E3A\u4E86\u4F7F\u7528\u8BE5<code>CreatorOnly</code>\u9009\u9879\uFF0CNiFi\u5FC5\u987B\u63D0\u4F9B\u67D0\u79CD\u5F62\u5F0F\u7684\u8EAB\u4EFD\u9A8C\u8BC1\u3002\u6709\u5173 \u5982\u4F55\u914D\u7F6E\u8EAB\u4EFD\u9A8C\u8BC1\u7684\u8BE6\u7EC6\u4FE1\u606F\uFF0C\u8BF7\u53C2\u9605\u4E0B\u9762\u7684<a href="#ZooKeeper%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6">ZooKeeper\u8BBF\u95EE\u63A7\u5236</a>\u90E8\u5206\u3002</p><p>\u5982\u679CNiFi\u914D\u7F6E\u4E3A\u5728\u72EC\u7ACB\u6A21\u5F0F\u4E0B\u8FD0\u884C\uFF0C\u5219<code>cluster-provider</code>\u65E0\u9700\u5728 <em>state-management.xml</em> \u6587\u4EF6\u4E2D\u586B\u5145\u8BE5\u5143\u7D20\uFF0C\u5982\u679C\u586B\u5145\u5B83\u4EEC\uFF0C\u5B9E\u9645\u4E0A\u5C06\u5FFD\u7565\u8BE5\u5143\u7D20\u3002\u4F46\u662F\uFF0C<code>local-provider</code>\u5143\u7D20\u5FC5\u987B\u59CB\u7EC8\u5B58\u5728\u5E76\u586B\u5145\u3002\u6B64\u5916\uFF0C\u5982\u679CNiFi\u5728\u96C6\u7FA4\u4E2D\u8FD0\u884C\uFF0C\u5219\u6BCF\u4E2A\u8282\u70B9\u8FD8\u5FC5\u987B\u5177\u6709\u8BE5<code>cluster-provider</code>\u5143\u7D20\u5E76\u4E14\u5DF2\u6B63\u786E\u914D\u7F6E\u3002\u5426\u5219\uFF0CNiFi\u5C06\u65E0\u6CD5\u542F\u52A8\u3002</p><p>\u867D\u7136\u6CA1\u6709\u5F88\u591A\u5C5E\u6027\u9700\u8981\u4E3A\u8FD9\u4E9B\u63D0\u4F9B\u7A0B\u5E8F\u914D\u7F6E\uFF0C\u4F46\u5B83\u4EEC\u88AB\u5916\u90E8\u5316\u4E3A\u5355\u72EC\u7684 <em>state-management.xml</em> \u6587\u4EF6\uFF0C\u800C\u4E0D\u662F\u901A\u8FC7 <em>nifi.properties</em> \u6587\u4EF6\u8FDB\u884C\u914D\u7F6E\uFF0C\u56E0\u4E3A\u4E0D\u540C\u7684\u5B9E\u73B0\u53EF\u80FD\u9700\u8981\u4E0D\u540C\u7684\u5C5E\u6027\uFF0C\u5E76\u4E14\u5B83\u66F4\u5BB9\u6613\u7EF4\u62A4\u548C\u7406\u89E3\u57FA\u4E8EXML\u7684\u6587\u4EF6\u4E2D\u7684\u914D\u7F6E\uFF0C\u800C\u4E0D\u662F\u5C06Provider\u7684\u5C5E\u6027\u4E0E\u6240\u6709\u5176\u4ED6NiFi\u6846\u67B6\u7279\u5B9A\u7684\u5C5E\u6027\u6DF7\u5408\u5728\u4E00\u8D77\u3002</p><p>\u5E94\u6CE8\u610F\uFF0C\u5982\u679C\u5904\u7406\u5668\u548C\u5176\u4ED6\u7EC4\u4EF6\u4F7F\u7528\u96C6\u7FA4\u4F5C\u7528\u57DF\u4FDD\u5B58\u72B6\u6001\uFF0C\u5219\u5982\u679C\u5B9E\u4F8B\u662F\u72EC\u7ACB\u5B9E\u4F8B(\u4E0D\u5728\u96C6\u7FA4\u4E2D)\u6216\u4E0E\u96C6\u7FA4\u65AD\u5F00\u8FDE\u63A5\uFF0C\u5219\u5C06\u4F7F\u7528\u672C\u5730\u72B6\u6001\u63D0\u4F9B\u7A0B\u5E8F\u3002\u8FD9\u4E5F\u610F\u5473\u7740\u5982\u679C\u5C06\u72EC\u7ACB\u5B9E\u4F8B\u8FC1\u79FB\u4E3A\u96C6\u7FA4\uFF0C\u5219\u8BE5\u72B6\u6001\u5C06\u4E0D\u518D\u53EF\u7528\uFF0C\u56E0\u4E3A\u8BE5\u7EC4\u4EF6\u5C06\u5F00\u59CB\u4F7F\u7528\u96C6\u7FA4\u72B6\u6001\u63D0\u4F9B\u7A0B\u5E8F\u800C\u4E0D\u662F\u672C\u5730\u72B6\u6001\u63D0\u4F9B\u7A0B\u5E8F\u3002</p><h3 id="\u5D4C\u5165\u5F0Fzookeeper\u670D\u52A1\u5668-embedded-zookeeper-server" tabindex="-1"><a class="header-anchor" href="#\u5D4C\u5165\u5F0Fzookeeper\u670D\u52A1\u5668-embedded-zookeeper-server" aria-hidden="true">#</a> \u5D4C\u5165\u5F0FZooKeeper\u670D\u52A1\u5668(Embedded ZooKeeper Server)</h3><p>\u5982\u4E0A\u6240\u8FF0\uFF0C\u96C6\u7FA4\u8303\u56F4\u72B6\u6001\u7684\u9ED8\u8BA4\u72B6\u6001\u63D0\u4F9B\u7A0B\u5E8F\u662F<code>ZooKeeperStateProvider</code>\u3002\u5728\u64B0\u5199\u672C\u6587\u65F6\uFF0C\u8FD9\u662F\u552F\u4E00\u5B58\u5728\u7528\u4E8E\u5904\u7406\u96C6\u7FA4\u8303\u56F4\u72B6\u6001\u7684\u72B6\u6001\u63D0\u4F9B\u7A0B\u5E8F\u3002\u8FD9\u610F\u5473\u7740NiFi\u4F9D\u8D56\u4E8EZooKeeper\u4EE5\u8868\u73B0\u4E3A\u96C6\u7FA4\u3002\u4F46\u662F\uFF0C\u5728\u8BB8\u591A\u73AF\u5883\u4E2D\uFF0C\u90E8\u7F72\u4E86NiFi\uFF0C\u800C\u6CA1\u6709\u7EF4\u62A4\u73B0\u6709\u7684ZooKeeper\u96C6\u5408\u3002\u4E3A\u4E86\u907F\u514D\u5F3A\u8FEB\u7BA1\u7406\u5458\u7EF4\u62A4\u5355\u72EC\u7684ZooKeeper\u5B9E\u4F8B\u7684\u8D1F\u62C5\uFF0CNiFi\u63D0\u4F9B\u4E86\u542F\u52A8\u5D4C\u5165\u5F0FZooKeeper\u670D\u52A1\u5668\u7684\u9009\u9879\u3002</p><table><thead><tr><th><strong>\u5C5E\u6027</strong></th><th><strong>\u63CF\u8FF0</strong></th></tr></thead><tbody><tr><td><code>nifi.state.management.embedded.zookeeper.start</code></td><td>\u6307\u5B9A\u6B64NiFi\u5B9E\u4F8B\u662F\u5426\u5E94\u8FD0\u884C\u5D4C\u5165\u5F0FZooKeeper\u670D\u52A1\u5668</td></tr><tr><td><code>nifi.state.management.embedded.zookeeper.properties</code></td><td>\u5982\u679C<code>nifi.state.management.embedded.zookeeper.start</code>\u8BBE\u7F6E\u4E3A\uFF0C\u5219\u63D0\u4F9B\u8981\u4F7F\u7528\u7684ZooKeeper\u5C5E\u6027\u7684\u5C5E\u6027\u6587\u4EF6<code>true</code></td></tr></tbody></table><p>\u8FD9\u53EF\u4EE5\u901A\u8FC7\u8BBE\u7F6E\u6765\u5B9E\u73B0<code>nifi.state.management.embedded.zookeeper.start</code>\u8D22\u4EA7 <em>nifi.properties</em> \u5230<code>true</code>\u5E94\u8BE5\u8FD0\u884C\u5D4C\u5165\u5F0F\u7684ZooKeeper\u670D\u52A1\u5668\u7684\u8282\u70B9\u4E0A\u3002\u901A\u5E38\uFF0C\u5EFA\u8BAE\u57283\u62165\u4E2A\u8282\u70B9\u4E0A\u8FD0\u884CZooKeeper\u3002\u5728\u5C11\u4E8E3\u4E2A\u8282\u70B9\u4E0A\u8FD0\u884C\u53EF\u5728\u9047\u5230\u6545\u969C\u65F6\u63D0\u4F9B\u8F83\u4F4E\u7684\u8010\u7528\u6027\u3002\u5728\u8D85\u8FC75\u4E2A\u8282\u70B9\u4E0A\u8FD0\u884C\u901A\u5E38\u4F1A\u4EA7\u751F\u6BD4\u5FC5\u8981\u66F4\u591A\u7684\u7F51\u7EDC\u6D41\u91CF\u3002\u6B64\u5916\uFF0C\u57284\u4E2A\u8282\u70B9\u4E0A\u8FD0\u884CZooKeeper\u63D0\u4F9B\u7684\u4F18\u52BF\u4E0D\u6BD4\u57283\u4E2A\u8282\u70B9\u4E0A\u8FD0\u884C\uFF0CZooKeeper\u8981\u6C42\u5927\u591A\u6570\u8282\u70B9\u5904\u4E8E\u6D3B\u52A8\u72B6\u6001\u624D\u80FD\u8FD0\u884C\u3002\u4F46\u662F\uFF0C\u7531\u7BA1\u7406\u5458\u51B3\u5B9A\u6700\u9002\u5408NiFi\u7279\u5B9A\u90E8\u7F72\u7684\u8282\u70B9\u6570\u3002</p><p>\u5982\u679C<code>nifi.state.management.embedded.zookeeper.start</code>\u5C5E\u6027\u8BBE\u7F6E\u4E3A<code>true</code>\uFF0C\u5219 <em>nifi.properties</em> \u4E2D\u7684<code>nifi.state.management.embedded.zookeeper.properties</code>\u5C5E\u6027\u4E5F\u53D8\u5F97\u76F8\u5173\u3002\u8FD9\u6307\u5B9A\u8981\u4F7F\u7528\u7684ZooKeeper\u5C5E\u6027\u6587\u4EF6\u3002\u6B64\u5C5E\u6027\u6587\u4EF6\u81F3\u5C11\u9700\u8981\u586B\u5145ZooKeeper\u670D\u52A1\u5668\u5217\u8868\u3002\u670D\u52A1\u5668\u88AB\u6307\u5B9A\u4E3A\u7684\u5F62\u5F0F\u5C5E\u6027\uFF0C\u4EE5\u3002\u6BCF\u4E2A\u670D\u52A1\u5668\u90FD\u914D\u7F6E\u4E3A<code>&lt;hostname&gt;:&lt;quorum port&gt; </code>[:<code>&lt;leader election port&gt;</code>]\u3002\u4F8B\u5982\uFF0C\u3002\u6B64\u8282\u70B9\u5217\u8868\u5E94\u8BE5\u662FNiFi\u96C6\u7FA4\u4E2D\u5177\u6709\u5C5E\u6027\u8BBE\u7F6E\u7684\u76F8\u540C\u8282\u70B9<code>server.1``server.2``server.n``myhost:2888:3888``nifi.state.management.embedded.zookeeper.start``true</code>\u3002\u53E6\u8BF7\u6CE8\u610F\uFF0C\u7531\u4E8EZooKeeper\u5C06\u4FA6\u542C\u8FD9\u4E9B\u7AEF\u53E3\uFF0C\u56E0\u6B64\u53EF\u80FD\u9700\u8981\u5C06\u9632\u706B\u5899\u914D\u7F6E\u4E3A\u6253\u5F00\u8FD9\u4E9B\u7AEF\u53E3\u4EE5\u7528\u4E8E\u4F20\u5165\u6D41\u91CF\uFF0C\u81F3\u5C11\u5728\u96C6\u7FA4\u4E2D\u7684\u8282\u70B9\u4E4B\u95F4\u3002\u6B64\u5916\uFF0C\u5FC5\u987B\u5728\u9632\u706B\u5899\u4E2D\u6253\u5F00\u4FA6\u542C\u5BA2\u6237\u7AEF\u8FDE\u63A5\u7684\u7AEF\u53E3\u3002\u9ED8\u8BA4\u503C\u4E3A\uFF0C<code>2181</code>\u4F46\u53EF\u4EE5\u901A\u8FC7_zookeeper.properties_\u6587\u4EF6\u4E2D\u7684_clientPort_\u5C5E\u6027\u8FDB\u884C\u914D\u7F6E\u3002</p><p>\u4F7F\u7528\u5D4C\u5165\u5F0FZooKeeper\u65F6\uFF0C\u3002/ _conf / zookeeper.properties_\u6587\u4EF6\u5177\u6709\u540D\u4E3A\u7684\u5C5E\u6027<code>dataDir</code>\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u6B64\u503C\u8BBE\u7F6E\u4E3A<code>./state/zookeeper</code>\u3002\u5982\u679C\u591A\u4E2ANiFi\u8282\u70B9\u6B63\u5728\u8FD0\u884C\u5D4C\u5165\u5F0FZooKeeper\uFF0C\u5219\u544A\u8BC9\u670D\u52A1\u5668\u5B83\u662F\u54EA\u4E00\u4E2A\u975E\u5E38\u91CD\u8981\u3002\u8FD9\u662F\u901A\u8FC7\u521B\u5EFA\u540D\u4E3A_myid_\u7684\u6587\u4EF6 \u5E76\u5C06\u5176\u653E\u5728ZooKeeper\u7684\u6570\u636E\u76EE\u5F55\u4E2D\u6765\u5B8C\u6210\u7684\u3002\u6B64\u6587\u4EF6\u7684\u5185\u5BB9\u5E94\u8BE5\u662F\u7279\u5B9A\u4E8E\u670D\u52A1\u5668\u7684\u7D22\u5F15<code>server.&lt;number&gt;</code>\u3002\u56E0\u6B64\uFF0C\u5BF9\u4E8E\u5176\u4E2D\u4E00\u4E2AZooKeeper\u670D\u52A1\u5668\uFF0C\u6211\u4EEC\u5C06\u901A\u8FC7\u6267\u884C\u4EE5\u4E0B\u547D\u4EE4\u6765\u5B8C\u6210\u6B64\u4EFB\u52A1:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>cd $NiFi_HOMEmkdir statemkdir state/zookeeperecho 1 &gt; state/zookeeper/myid\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5BF9\u4E8E\u5C06\u8FD0\u884CZooKeeper\u7684\u4E0B\u4E00\u4E2ANiFi\u8282\u70B9\uFF0C\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u6267\u884C\u4EE5\u4E0B\u547D\u4EE4\u6765\u5B9E\u73B0\u6B64\u76EE\u7684:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>cd $NiFi_HOMEmkdir statemkdir state/zookeeperecho 2 &gt; state/zookeeper/myid\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u7B49\u7B49\u3002</p>',27),ws=t("\u6709\u5173\u7528\u4E8E\u7BA1\u7406ZooKeeper\u7684\u5C5E\u6027\u7684\u66F4\u591A\u4FE1\u606F\uFF0C\u8BF7\u53C2\u9605 "),Es={href:"https://zookeeper.apache.org/doc/current/zookeeperAdmin.html",target:"_blank",rel:"noopener noreferrer"},Us=t("ZooKeeper\u7BA1\u7406\u5458\u6307\u5357"),Cs=t("\u3002"),Ls=o('<p>\u6709\u5173\u4FDD\u62A4\u5D4C\u5165\u5F0FZooKeeper\u670D\u52A1\u5668\u7684\u4FE1\u606F\uFF0C\u8BF7\u53C2\u9605\u4E0B\u9762\u7684<a href="#ZooKeeper%E5%AE%89%E5%85%A8">ZooKeeper\u5B89\u5168</a>\u90E8\u5206\u3002</p><h3 id="zookeeper\u8BBF\u95EE\u63A7\u5236" tabindex="-1"><a class="header-anchor" href="#zookeeper\u8BBF\u95EE\u63A7\u5236" aria-hidden="true">#</a> ZooKeeper\u8BBF\u95EE\u63A7\u5236</h3><p>ZooKeeper\u901A\u8FC7\u8BBF\u95EE\u63A7\u5236\u5217\u8868(ACL)\u673A\u5236\u4E3A\u5176\u6570\u636E\u63D0\u4F9B\u8BBF\u95EE\u63A7\u5236\u3002\u5F53\u6570\u636E\u5199\u5165ZooKeeper\u65F6\uFF0CNiFi\u5C06\u63D0\u4F9B\u4E00\u4E2AACL\uFF0C\u6307\u793A\u5141\u8BB8\u4EFB\u4F55\u7528\u6237\u62E5\u6709\u5BF9\u6570\u636E\u7684\u5B8C\u5168\u6743\u9650\uFF0C\u6216\u8005\u63D0\u4F9B\u4E00\u4E2AACL\uFF0C\u6307\u793A\u53EA\u5141\u8BB8\u521B\u5EFA\u6570\u636E\u7684\u7528\u6237\u8BBF\u95EE\u6570\u636E\u3002\u4F7F\u7528\u54EA\u4E2AACL\u53D6\u51B3\u4E8E\u8BE5<code>Access Control</code>\u5C5E\u6027\u7684\u503C<code>ZooKeeperStateProvider</code>(\u6709\u5173\u8BE6\u7EC6\u4FE1\u606F\uFF0C\u8BF7\u53C2\u9605<a href="#%E9%85%8D%E7%BD%AE%E7%8A%B6%E6%80%81%E6%8F%90%E4%BE%9B%E7%A8%8B%E5%BA%8F">\u914D\u7F6E\u72B6\u6001\u63D0\u4F9B\u7A0B\u5E8F</a>\u90E8\u5206)\u3002</p><p>\u4E3A\u4E86\u4F7F\u7528\u6307\u793A\u53EA\u5141\u8BB8Creator\u8BBF\u95EE\u6570\u636E\u7684ACL\uFF0C\u6211\u4EEC\u9700\u8981\u544A\u8BC9ZooKeeper\u521B\u5EFA\u8005\u662F\u8C01\u3002\u6709\u4E24\u79CD\u673A\u5236\u53EF\u4EE5\u5B9E\u73B0\u8FD9\u4E00\u76EE\u6807\u3002\u7B2C\u4E00\u79CD\u673A\u5236\u662F\u4F7F\u7528Kerberos\u63D0\u4F9B\u8EAB\u4EFD\u9A8C\u8BC1\u3002\u6709\u5173\u66F4\u591A\u4FE1\u606F\uFF0C\u8BF7\u53C2\u9605[Kerberizing NiFi\u7684ZooKeeper\u5BA2\u6237\u7AEF](#Kerberizing NiFi\u7684ZooKeeper\u5BA2\u6237\u7AEF)\u3002</p><p>\u7B2C\u4E8C\u4E2A\u9009\u9879\u662F\u4F7F\u7528\u7528\u6237\u540D\u548C\u5BC6\u7801\u3002\u8FD9\u662F\u901A\u8FC7\u4E3A\u5176\u6307\u5B9A\u503C<code>Username</code>\u548C<code>Password</code>\u5C5E\u6027\u503C\u6765\u914D\u7F6E\u7684<code>ZooKeeperStateProvider</code>(\u6709\u5173\u8BE6\u7EC6\u4FE1\u606F\uFF0C\u8BF7\u53C2\u9605&quot; <a href="#%E9%85%8D%E7%BD%AE%E7%8A%B6%E6%80%81%E6%8F%90%E4%BE%9B%E7%A8%8B%E5%BA%8F">\u914D\u7F6E\u72B6\u6001\u63D0\u4F9B\u7A0B\u5E8F&quot;</a>\u90E8\u5206)\u3002\u4E0D\u8FC7\uFF0C\u8981\u8BB0\u4F4F\u7684\u91CD\u8981\u4E00\u70B9\u662FZooKeeper\u4F1A\u4EE5\u7EAF\u6587\u672C\u4F20\u9012\u5BC6\u7801\u3002\u8FD9\u610F\u5473\u7740\u4E0D\u5E94\u4F7F\u7528\u7528\u6237\u540D\u548C\u5BC6\u7801\uFF0C\u9664\u975EZooKeeper\u5728localhost\u4E0A\u4F5C\u4E3A\u5355\u5B9E\u4F8B\u96C6\u7FA4\u8FD0\u884C\uFF0C\u6216\u8005\u4E0EZooKeeper\u7684\u901A\u4FE1\u4EC5\u5728\u52A0\u5BC6\u901A\u4FE1(\u4F8B\u5982VPN\u6216SSL\u8FDE\u63A5)\u4E0A\u53D1\u751F\u3002ZooKeeper\u5C06\u57283.5.0\u7248\u672C\u4E2D\u4E3ASSL\u8FDE\u63A5\u63D0\u4F9B\u652F\u6301\u3002</p><h3 id="zookeeper\u5B89\u5168" tabindex="-1"><a class="header-anchor" href="#zookeeper\u5B89\u5168" aria-hidden="true">#</a> ZooKeeper\u5B89\u5168</h3><p>\u5F53NiFi\u4E0EZooKeeper\u901A\u4FE1\u65F6\uFF0C\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u6240\u6709\u901A\u4FE1\u90FD\u662F\u4E0D\u5B89\u5168\u7684\uFF0C\u767B\u5F55ZooKeeper\u7684\u4EFB\u4F55\u4EBA\u90FD\u53EF\u4EE5\u67E5\u770B\u548C\u64CD\u4F5C\u5B58\u50A8\u5728ZooKeeper\u4E2D\u7684\u6240\u6709NiFi\u72B6\u6001\u3002\u4E3A\u4E86\u9632\u6B62\u8FD9\u79CD\u60C5\u51B5\uFF0C\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528Kerberos\u6765\u7BA1\u7406\u8EAB\u4EFD\u9A8C\u8BC1\u3002\u76EE\u524D\uFF0CZooKeeper\u4E0D\u652F\u6301\u901A\u8FC7SSL\u52A0\u5BC6\u3002\u6B63\u5728\u79EF\u6781\u5F00\u53D1\u5BF9ZooKeeper\u4E2D\u7684SSL\u7684\u652F\u6301\uFF0C\u9884\u8BA1\u5C06\u57283.5.0\u53D1\u884C\u7248\u4E2D\u63D0\u4F9B\u3002</p><p>\u4E3A\u4E86\u4FDD\u62A4\u901A\u4FE1\u5B89\u5168\uFF0C\u6211\u4EEC\u9700\u8981\u786E\u4FDD\u5BA2\u6237\u7AEF\u548C\u670D\u52A1\u5668\u90FD\u652F\u6301\u76F8\u540C\u7684\u914D\u7F6E\u3002\u4E0B\u9762\u63D0\u4F9B\u4E86\u914D\u7F6ENiFi ZooKeeper\u5BA2\u6237\u7AEF\u548C\u5D4C\u5165\u5F0FZooKeeper\u670D\u52A1\u5668\u4EE5\u4F7F\u7528Kerberos\u7684\u8BF4\u660E\u3002</p>',8),Is=t("\u5982\u679C\u4F60\u7684\u73AF\u5883\u4E2D\u5C1A\u672A\u8BBE\u7F6EKerberos\uFF0C\u5219\u53EF\u4EE5\u5728"),Ks={href:"https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Managing_Smart_Cards/Configuring_a_Kerberos_5_Server.html",target:"_blank",rel:"noopener noreferrer"},zs=t("Red Hat\u5BA2\u6237\u95E8\u6237"),Ds=t("\u4E0A\u627E\u5230\u6709\u5173\u5B89\u88C5\u548C\u8BBE\u7F6EKerberos\u670D\u52A1\u5668\u7684\u4FE1\u606F "),Bs={href:"https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Managing_Smart_Cards/Configuring_a_Kerberos_5_Server.html",target:"_blank",rel:"noopener noreferrer"},Rs=t(":\u914D\u7F6EKerberos 5\u670D\u52A1\u5668"),Gs=t("\u3002\u672C\u6307\u5357\u5047\u5B9AKerberos\u5DF2\u7ECF\u5B89\u88C5\u5728\u8FD0\u884CNiFi\u7684\u73AF\u5883\u4E2D\u3002"),Ms=o(`<p>\u8BF7\u6CE8\u610F\uFF0C\u4EE5\u4E0B\u7528\u4E8E\u5728NiFi\u8282\u70B9\u4E2D\u5BF9\u5D4C\u5165\u5F0FZooKeeper\u670D\u52A1\u5668\u8FDB\u884Ckerberizing\u5E76\u5BF9ZooKeeper NiFi\u5BA2\u6237\u7AEF\u8FDB\u884Ckerberizing\u7684\u8FC7\u7A0B\u5C06\u8981\u6C42\u5B89\u88C5Kerberos\u5BA2\u6237\u7AEF\u5E93\u3002\u8FD9\u662F\u901A\u8FC7\u4EE5\u4E0B\u65B9\u5F0F\u5728\u57FA\u4E8EFedora\u7684Linux\u53D1\u884C\u7248\u4E2D\u5B8C\u6210\u7684:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>yum install krb5-workstation
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5B8C\u6210\u540E\uFF0C\u9700\u8981\u4E3A\u7EC4\u7EC7\u7684Kerberos\u73AF\u5883\u6B63\u786E\u914D\u7F6E_/etc/krb5.conf_\u3002</p><h4 id="kerberizing\u5D4C\u5165\u5F0Fzookeeper\u670D\u52A1\u5668" tabindex="-1"><a class="header-anchor" href="#kerberizing\u5D4C\u5165\u5F0Fzookeeper\u670D\u52A1\u5668" aria-hidden="true">#</a> Kerberizing\u5D4C\u5165\u5F0FZooKeeper\u670D\u52A1\u5668</h4><p>\u6240\u8FF0_\u7684krb5.conf_\u4E0A\u5177\u6709\u5D4C\u5165\u7684\u52A8\u7269\u56ED\u7BA1\u7406\u5458\u670D\u52A1\u5668\u7CFB\u7EDF\u6587\u4EF6\u5E94\u8BE5\u662F\u76F8\u540C\u7684\uFF0C\u5176\u4E2Dkrb5kdc\u670D\u52A1\u8FD0\u884C\u5728\u7CFB\u7EDF\u4E0A\u7684\u4E00\u4E2A\u3002\u4F7F\u7528\u5D4C\u5165\u5F0FZooKeeper\u670D\u52A1\u5668\u65F6\uFF0C\u6211\u4EEC\u53EF\u80FD\u4F1A\u9009\u62E9\u4F7F\u7528Kerberos\u6765\u4FDD\u62A4\u670D\u52A1\u5668\u3002\u914D\u7F6E\u4E3A\u542F\u52A8\u5D4C\u5165\u5F0FZooKeeper\u5E76\u4F7F\u7528Kerberos\u7684\u6240\u6709\u8282\u70B9\u90FD\u5E94\u9075\u5FAA\u4EE5\u4E0B\u6B65\u9AA4\u3002\u4F7F\u7528\u5D4C\u5165\u5F0FZooKeeper\u670D\u52A1\u5668\u65F6\uFF0C\u6211\u4EEC\u53EF\u80FD\u4F1A\u9009\u62E9\u4F7F\u7528Kerberos\u6765\u4FDD\u62A4\u670D\u52A1\u5668\u3002\u914D\u7F6E\u4E3A\u542F\u52A8\u5D4C\u5165\u5F0FZooKeeper\u5E76\u4F7F\u7528Kerberos\u7684\u6240\u6709\u8282\u70B9\u90FD\u5E94\u9075\u5FAA\u4EE5\u4E0B\u6B65\u9AA4\u3002</p><p>\u4E3A\u4E86\u4F7F\u7528Kerberos\uFF0C\u6211\u4EEC\u9996\u5148\u9700\u8981\u4E3AZooKeeper\u670D\u52A1\u5668\u751F\u6210Kerberos Principal\u3002\u5728\u8FD0\u884Ckrb5kdc\u670D\u52A1\u7684\u670D\u52A1\u5668\u4E0A\u8FD0\u884C\u4EE5\u4E0B\u547D\u4EE4\u3002\u8FD9\u662F\u901A\u8FC7kadmin\u5DE5\u5177\u5B8C\u6210\u7684:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>kadmin: addprinc &quot;zookeeper/myHost.example.com@EXAMPLE.COM&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5728\u8FD9\u91CC\uFF0C\u6211\u4EEC<code>zookeeper/myHost.example.com</code>\u4F7F\u7528\u9886\u57DF\u521B\u5EFA\u4E00\u4E2A\u4E3B\u8981\u7684Principal <code>EXAMPLE.COM</code>\u3002\u6211\u4EEC\u9700\u8981\u4F7F\u7528\u540D\u79F0\u4E3A\u7684Principal <code>&lt;service name&gt;/&lt;instance name&gt;</code>\u3002\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u670D\u52A1\u662F<code>zookeeper</code>\uFF0C\u5B9E\u4F8B\u540D\u79F0\u662F<code>myHost.example.com</code>(\u6211\u4EEC\u7684\u4E3B\u673A\u7684\u5B8C\u5168\u9650\u5B9A\u540D\u79F0)\u3002</p><p>\u63A5\u4E0B\u6765\uFF0C\u6211\u4EEC\u9700\u8981\u4E3A\u6B64Principal\u521B\u5EFA\u4E00\u4E2AKeyTab\uFF0C\u6B64\u547D\u4EE4\u5728\u5177\u6709\u5D4C\u5165\u5F0Fzookeeper\u670D\u52A1\u5668\u7684NiFi\u5B9E\u4F8B\u7684\u670D\u52A1\u5668\u4E0A\u8FD0\u884C:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>kadmin: xst -k zookeeper-server.keytab zookeeper/myHost.example.com@EXAMPLE.COM
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8FD9\u5C06\u5728\u5F53\u524D\u76EE\u5F55\u4E2D\u521B\u5EFA\u4E00\u4E2A\u540D\u4E3A\u7684\u6587\u4EF6<code>zookeeper-server.keytab</code>\u3002\u6211\u4EEC\u73B0\u5728\u53EF\u4EE5\u5C06\u8BE5\u6587\u4EF6\u590D\u5236\u5230<code>$NiFi_HOME/conf/</code>\u76EE\u5F55\u4E2D\u3002\u6211\u4EEC\u5E94\u8BE5\u786E\u4FDD\u53EA\u5141\u8BB8\u8FD0\u884CNiFi\u7684\u7528\u6237\u8BFB\u53D6\u8BE5\u6587\u4EF6\u3002</p><p>\u6211\u4EEC\u9700\u8981\u91CD\u590D\u6BCF\u4E2ANiFi\u7684\u60C5\u51B5\u4E0B\uFF0C\u4E0A\u8FF0\u6B65\u9AA4\u5C06\u8FD0\u884C\u5D4C\u5165\u5F0F\u7684ZooKeeper\u670D\u52A1\u5668\uFF0C\u8BF7\u52A1\u5FC5\u66F4\u6362<code>myHost.example.com</code>\u540C<code>myHost2.example.com</code>\uFF0C\u6216\u4EFB\u4F55\u5B8C\u5168\u5408\u683C\u7684\u4E3B\u673A\u540D\u7684ZooKeeper\u670D\u52A1\u5668\u5C06\u8FD0\u884C\u3002</p><p>\u73B0\u5728\u6211\u4EEC\u5DF2\u7ECF\u4E3A\u6BCF\u4E2A\u5C06\u8FD0\u884CNiFi\u7684\u670D\u52A1\u5668\u63D0\u4F9B\u4E86KeyTab\uFF0C\u6211\u4EEC\u9700\u8981\u914D\u7F6ENiFi\u7684\u5D4C\u5165\u5F0FZooKeeper\u670D\u52A1\u5668\u624D\u80FD\u4F7F\u7528\u6B64\u914D\u7F6E\u3002ZooKeeper\u4F7F\u7528Java\u8EAB\u4EFD\u9A8C\u8BC1\u548C\u6388\u6743\u670D\u52A1(JAAS)\uFF0C\u56E0\u6B64\u6211\u4EEC\u9700\u8981\u521B\u5EFA\u4E00\u4E2A\u4E0EJAAS\u517C\u5BB9\u7684\u6587\u4EF6\u5728<code>$NiFi_HOME/conf/</code>\u76EE\u5F55\u4E2D\uFF0C\u521B\u5EFA\u4E00\u4E2A\u540D\u4E3A_zookeeper-jaas.conf\u7684_\u6587\u4EF6(\u5982\u679C\u5BA2\u6237\u7AEF\u5DF2\u914D\u7F6E\u4E3A\u8FDB\u884C\u8EAB\u4EFD\u9A8C\u8BC1\uFF0C\u5219\u6B64\u6587\u4EF6\u5DF2\u5B58\u5728\u901A\u8FC7Kerberos\u3002\u6CA1\u5173\u7CFB\uFF0C\u53EA\u9700\u6DFB\u52A0\u5230\u6587\u4EF6\u4E2D)\u3002\u6211\u4EEC\u5C06\u6DFB\u52A0\u5230\u6B64\u6587\u4EF6\uFF0C\u4EE5\u4E0B\u4EE3\u7801\u6BB5:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Server {  com.sun.security.auth.module.Krb5LoginModule required  useKeyTab=true  keyTab=&quot;./conf/zookeeper-server.keytab&quot;  storeKey=true  useTicketCache=false  principal=&quot;zookeeper/myHost.example.com@EXAMPLE.COM&quot;;};
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8BF7\u52A1\u5FC5<code>principal</code>\u4F7F\u7528\u9002\u5F53\u7684Principal \u66FF\u6362\u4E0A\u9762\u7684\u503C\uFF0C\u5305\u62EC\u670D\u52A1\u5668\u7684\u5B8C\u5168\u9650\u5B9A\u57DF\u540D\u3002</p><p>\u63A5\u4E0B\u6765\uFF0C\u6211\u4EEC\u9700\u8981\u544A\u8BC9NiFi\u4F7F\u7528\u5B83\u4F5C\u4E3A\u6211\u4EEC\u7684JAAS\u914D\u7F6E\u3002\u8FD9\u662F\u901A\u8FC7\u8BBE\u7F6EJVM\u7CFB\u7EDF\u5C5E\u6027\u6765\u5B8C\u6210\u7684\uFF0C\u56E0\u6B64\u6211\u4EEC\u5C06\u7F16\u8F91_conf / bootstrap.conf_\u6587\u4EF6\u3002\u5982\u679C\u5BA2\u6237\u7AEF\u5DF2\u914D\u7F6E\u4E3A\u4F7F\u7528Kerberos\uFF0C\u5219\u4E0D\u9700\u8981\u8FD9\u6837\u505A\uFF0C\u5982\u4E0A\u6240\u8FF0\u3002\u5426\u5219\uFF0C\u6211\u4EEC\u5C06\u4EE5\u4E0B\u884C\u6DFB\u52A0\u5230_bootstrap.conf_\u6587\u4EF6\u4E2D:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>java.arg.15=-Djava.security.auth.login.config=./conf/zookeeper-jaas.conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="`+a+`" alt="">\u6587\u4EF6\u4E2D\u7684\u8FD9\u4E00\u9644\u52A0\u884C\u4E0D\u5FC5\u662F15\u53F7\uFF0C\u53EA\u9700\u5C06\u5176\u6DFB\u52A0\u5230_bootstrap.conf_\u6587\u4EF6\u4E2D\u5373\u53EF\u3002\u4F7F\u7528\u9002\u5408\u4F60\u7684\u914D\u7F6E\u7684\u4EFB\u4F55\u6570\u5B57\u3002</p><p>\u6211\u4EEC\u5E0C\u671B\u901A\u8FC7\u8FD0\u884C\u4EE5\u4E0B\u547D\u4EE4\u6765\u521D\u59CB\u5316\u6211\u4EEC\u7684Kerberos\u7968\u8BC1:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>kinit \u2013kt zookeeper-server.keytab &quot;zookeeper/myHost.example.com@EXAMPLE.COM&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u540C\u6837\uFF0C\u8BF7\u52A1\u5FC5\u4F7F\u7528\u9002\u5F53\u7684\u503C\u66FF\u6362Principal\uFF0C\u5305\u62EC\u4F60\u7684\u9886\u57DF\u548C\u5B8C\u5168\u9650\u5B9A\u7684\u4E3B\u673A\u540D\u3002</p><p>\u6700\u540E\uFF0C\u6211\u4EEC\u9700\u8981\u544A\u8BC9Kerberos\u670D\u52A1\u5668\u4F7F\u7528SASL\u8EAB\u4EFD\u9A8C\u8BC1\u63D0\u4F9B\u7A0B\u5E8F\u3002\u4E3A\u6B64\uFF0C\u6211\u4EEC\u7F16\u8F91_$ NiFi_HOME / conf / zookeeper.properties_\u6587\u4EF6\u5E76\u6DFB\u52A0\u4EE5\u4E0B\u884C:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>authProvider.1=org.apache.zookeeper.server.auth.SASLAuthenticationProviderkerberos.removeHostFromPrincipal=truekerberos.removeRealmFromPrincipal=truejaasLoginRenew=3600000requireClientAuthScheme=sasl
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u7684<code>kerberos.removeHostFromPrincipal</code>\u548C<code>kerberos.removeRealmFromPrincipal</code>\u7279\u6027\u88AB\u7528\u6765\u6807\u8BC6\u8FDB\u884C\u6BD4\u8F83\u6765\u65BD\u52A0\u5728Z\u5E8F\u8282\u70B9\u7684ACL\u4E4B\u524D\u5F52\u4E00\u5316\u6240\u8FF0\u7528\u6237\u4E3B\u8981\u540D\u79F0\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u5168\u90E8\u672C\u91D1\u7528\u6765\u7136\u800C\u8BBE\u7F6E<code>kerberos.removeHostFromPrincipal</code>\u548C<code>kerberos.removeRealmFromPrincipal</code>\u5C5E\u6027\u4E3Atrue\uFF0C\u5C06\u6307\u793A\u52A8\u7269\u56ED\u7BA1\u7406\u5458\u5220\u9664\u7684\u4E3B\u673A\u548C\u767B\u5F55\u7528\u6237\u7684\u8EAB\u4EFD\u8FDB\u884C\u6BD4\u8F83\u7684\u5883\u754C\u3002\u5728NiFi\u8282\u70B9(\u5728\u540C\u4E00\u96C6\u7FA4\u5185)\u4F7F\u7528\u5177\u6709\u4E0D\u540C\u4E3B\u673A/\u57DF\u503C\u7684\u4E3B\u4F53\u7684\u60C5\u51B5\u4E0B\uFF0C\u53EF\u4EE5\u914D\u7F6E\u8FD9\u4E9Bkerberos\u5C5E\u6027\u4EE5\u786E\u4FDD\u8282\u70B9\u7684\u6807\u8BC6\u5C06\u88AB\u6807\u51C6\u5316\u5E76\u4E14\u8282\u70B9\u5C06\u5177\u6709\u9002\u5F53\u7684\u8BBF\u95EEZookeeper\u4E2D\u7684\u5171\u4EABZnodes\u3002</p><p>\u6700\u540E\u4E00\u884C\u662F\u53EF\u9009\u7684\uFF0C\u4F46\u6307\u5B9A\u5BA2\u6237\u7AEF\u5FC5\u987B\u4F7F\u7528Kerberos\u4E0E\u6211\u4EEC\u7684ZooKeeper\u5B9E\u4F8B\u8FDB\u884C\u901A\u4FE1\u3002</p><p>\u73B0\u5728\uFF0C\u6211\u4EEC\u53EF\u4EE5\u542F\u52A8NiFi\uFF0C\u5D4C\u5165\u5F0FZooKeeper\u670D\u52A1\u5668\u5C06\u4F7F\u7528Kerberos\u4F5C\u4E3A\u8EAB\u4EFD\u9A8C\u8BC1\u673A\u5236\u3002</p><p>Kerberizing NiFi\u7684ZooKeeper\u5BA2\u6237\u7AEF</p><p><img src="`+a+`" alt="">\u8FD0\u884C\u5D4C\u5165\u5F0Fzookeeper\u670D\u52A1\u5668\u7684NiFi\u8282\u70B9\u4E5F\u9700\u8981\u9075\u5FAA\u4EE5\u4E0B\u8FC7\u7A0B\uFF0C\u56E0\u4E3A\u5B83\u4EEC\u4E5F\u5C06\u540C\u65F6\u5145\u5F53\u5BA2\u6237\u7AEF\u3002</p><p>\u4F7F\u7528ZooKeeper\u9A8C\u8BC1\u7528\u6237\u7684\u9996\u9009\u673A\u5236\u662F\u4F7F\u7528Kerberos\u3002\u4E3A\u4E86\u4F7F\u7528Kerberos\u8FDB\u884C\u8EAB\u4EFD\u9A8C\u8BC1\uFF0C\u6211\u4EEC\u5FC5\u987B\u914D\u7F6E\u4E00\u4E9B\u7CFB\u7EDF\u5C5E\u6027\uFF0C\u4EE5\u4FBFZooKeeper\u5BA2\u6237\u7AEF\u77E5\u9053\u7528\u6237\u662F\u8C01\u4EE5\u53CAKeyTab\u6587\u4EF6\u6240\u5728\u7684\u4F4D\u7F6E\u3002\u914D\u7F6E\u4E3A\u4F7F\u7528<code>ZooKeeperStateProvider</code>\u548C\u4F7F\u7528Kerberos \u5B58\u50A8\u96C6\u7FA4\u8303\u56F4\u72B6\u6001\u7684\u6240\u6709\u8282\u70B9\u90FD\u5E94\u9075\u5FAA\u4EE5\u4E0B\u6B65\u9AA4\u3002</p><p>\u9996\u5148\uFF0C\u6211\u4EEC\u5FC5\u987B\u521B\u5EFA\u5728\u4E0EZooKeeper\u901A\u4FE1\u65F6\u4F7F\u7528\u7684Principal\u3002\u8FD9\u901A\u5E38\u901A\u8FC7<code>kadmin</code>\u5DE5\u5177\u5B8C\u6210:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>kadmin: addprinc &quot;NiFi@EXAMPLE.COM&quot;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>Kerberos Principal\u7531\u4E09\u90E8\u5206\u7EC4\u6210:\u4E3B\u8981\u90E8\u5206\uFF0C\u5B9E\u4F8B\u548C\u9886\u57DF\u3002\u5728\u8FD9\u91CC\uFF0C\u6211\u4EEC\u6B63\u5728\u521B\u5EFA\u4E00\u4E2A\u5177\u6709\u4E3B\u8981<code>NiFi</code>\uFF0C\u65E0\u5B9E\u4F8B\u548C\u9886\u57DF\u7684Principal <code>EXAMPLE.COM</code>\u3002\u4E3B\u8981(<code>NiFi</code>\u5728\u672C\u4F8B\u4E2D)\u662F\u5728\u901A\u8FC7Kerberos\u8FDB\u884C\u8EAB\u4EFD\u9A8C\u8BC1\u65F6\u7528\u4E8E\u6807\u8BC6\u7528\u6237\u7684\u6807\u8BC6\u7B26\u3002</p><p>\u5728\u6211\u4EEC\u521B\u5EFA\u4E86Principal\u540E\uFF0C\u6211\u4EEC\u9700\u8981\u4E3APrincipal\u521B\u5EFA\u4E00\u4E2AKeyTab:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>kadmin: xst -k nifi.keytab NiFi@EXAMPLE.COM
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u53EF\u4EE5\u5C06\u6B64\u5BC6\u94A5\u8868\u6587\u4EF6\u590D\u5236\u5230\u5177\u6709\u5D4C\u5165\u5F0Fzookeeper\u670D\u52A1\u5668\u7684\u5176\u4ED6NiFi\u8282\u70B9\u3002</p><p>\u8FD9\u5C06\u5728\u540D\u4E3A_nifi.keytab_\u7684\u5F53\u524D\u76EE\u5F55\u4E2D\u521B\u5EFA\u4E00\u4E2A\u6587\u4EF6\u3002\u6211\u4EEC\u73B0\u5728\u53EF\u4EE5\u5C06\u8BE5\u6587\u4EF6\u590D\u5236\u5230<code>$NiFi_HOME/conf/</code>\u76EE\u5F55\u4E2D\u3002\u6211\u4EEC\u5E94\u8BE5\u786E\u4FDD\u53EA\u5141\u8BB8\u8FD0\u884CNiFi\u7684\u7528\u6237\u8BFB\u53D6\u8BE5\u6587\u4EF6\u3002</p><p>\u63A5\u4E0B\u6765\uFF0C\u6211\u4EEC\u9700\u8981\u914D\u7F6ENiFi\u4EE5\u4F7F\u7528\u6B64KeyTab\u8FDB\u884C\u8EAB\u4EFD\u9A8C\u8BC1\u3002\u7531\u4E8EZooKeeper\u4F7F\u7528Java\u8EAB\u4EFD\u9A8C\u8BC1\u548C\u6388\u6743\u670D\u52A1(JAAS)\uFF0C\u56E0\u6B64\u6211\u4EEC\u9700\u8981\u521B\u5EFA\u4E00\u4E2A\u4E0EJAAS\u517C\u5BB9\u7684\u6587\u4EF6\u3002\u5728<code>$NiFi_HOME/conf/</code>\u76EE\u5F55\u4E2D\uFF0C\u521B\u5EFA\u4E00\u4E2A\u540D\u4E3A_zookeeper-jaas.conf_\u7684\u6587\u4EF6\uFF0C\u5E76\u5728\u5176\u4E2D\u6DFB\u52A0\u4EE5\u4E0B\u4EE3\u7801\u6BB5:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>Client {  com.sun.security.auth.module.Krb5LoginModule required  useKeyTab=true  keyTab=&quot;./conf/nifi.keytab&quot;  storeKey=true  useTicketCache=false  principal=&quot;NiFi@EXAMPLE.COM&quot;;};
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u7136\u540E\u6211\u4EEC\u9700\u8981\u544A\u8BC9NiFi\u4F7F\u7528\u5B83\u4F5C\u4E3A\u6211\u4EEC\u7684JAAS\u914D\u7F6E\u3002\u8FD9\u662F\u901A\u8FC7\u8BBE\u7F6EJVM\u7CFB\u7EDF\u5C5E\u6027\u6765\u5B8C\u6210\u7684\uFF0C\u56E0\u6B64\u6211\u4EEC\u5C06\u7F16\u8F91_conf / bootstrap.conf_\u6587\u4EF6\u3002\u6211\u4EEC\u5728\u6B64\u6587\u4EF6\u4E2D\u7684\u4EFB\u4F55\u4F4D\u7F6E\u6DFB\u52A0\u4EE5\u4E0B\u884C\uFF0C\u4EE5\u544A\u77E5NiFi JVM\u4F7F\u7528\u6B64\u914D\u7F6E:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>java.arg.15=-Djava.security.auth.login.config=./conf/zookeeper-jaas.conf
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u6700\u540E\uFF0C\u6211\u4EEC\u9700\u8981\u66F4\u65B0_nifi.properties\uFF0C<em>\u4EE5\u786E\u4FDDNiFi\u77E5\u9053\u4E3A\u5B83\u5C06\u5728Zookeeper\u4E2D\u521B\u5EFA\u7684\u7528\u4E8E\u96C6\u7FA4\u7BA1\u7406\u7684Znodes\u5E94\u7528SASL\u7279\u5B9A\u7684ACL\u3002\u8981\u542F\u7528\u6B64\u529F\u80FD\uFF0C\u8BF7\u5728</em>$ NiFi_HOME / conf / nifi.properties_\u6587\u4EF6\u4E2D\u7F16\u8F91\u4EE5\u4E0B\u5C5E\u6027\uFF0C\u5982\u4E0B\u6240\u793A:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>nifi.zookeeper.auth.type=saslnifi.zookeeper.kerberos.removeHostFromPrincipal=truenifi.zookeeper.kerberos.removeRealmFromPrincipal=true
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="`+a+`" alt="">\u8BE5<code>kerberos.removeHostFromPrincipal</code>\u548C<code>kerberos.removeRealmFromPrincipal</code>\u5E94\u4E0E\u4EC0\u4E48\u662F\u5728\u52A8\u7269\u56ED\u7BA1\u7406\u5458\u7684\u914D\u7F6E\u8BBE\u7F6E\u662F\u4E00\u81F4\u7684\u3002</p><p>\u6211\u4EEC\u53EF\u4EE5\u901A\u8FC7\u8FD0\u884C\u4EE5\u4E0B\u547D\u4EE4\u6765\u521D\u59CB\u5316\u6211\u4EEC\u7684Kerberos\u7968\u8BC1:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>kinit -kt nifi.keytab NiFi@EXAMPLE.COM
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u73B0\u5728\uFF0C\u5F53\u6211\u4EEC\u542F\u52A8NiFi\u65F6\uFF0C\u5B83\u5C06\u4F7F\u7528Kerberos <code>NiFi</code>\u5728\u4E0EZooKeeper\u901A\u4FE1\u65F6\u4F5C\u4E3A\u7528\u6237\u8FDB\u884C\u8EAB\u4EFD\u9A8C\u8BC1\u3002</p><p>Kerberos\u914D\u7F6E\u7591\u96BE\u89E3\u7B54</p><p>\u4F7F\u7528Kerberos\u65F6\uFF0C\u5BFC\u5165\u4F7F\u7528\u5B8C\u5168\u9650\u5B9A\u7684\u57DF\u540D\u800C\u4E0D\u4F7F\u7528_localhost_\u3002\u8BF7\u786E\u4FDD\u5728\u4EE5\u4E0B\u4F4D\u7F6E\u4F7F\u7528\u6BCF\u4E2A\u670D\u52A1\u5668\u7684\u5B8C\u5168\u9650\u5B9A\u4E3B\u673A\u540D:</p><ul><li><p>_\u7684conf / zookeeper.properties_\u6587\u4EF6\u5E94\u8BE5\u4F7F\u7528\u7684FQDN <code>server.1</code>\uFF0C<code>server.2</code>...\uFF0C<code>server.N</code>\u503C\u3002</p></li><li><p><code>Connect String</code>ZooKeeperStateProvider \u7684\u5C5E\u6027</p></li><li><p>\u5728_/ etc / hosts\u4E2D_\u7684\u6587\u4EF6\u4E5F\u5E94FQDN\u89E3\u6790\u4E3A\u662F\u4E00\u4E2AIP\u5730\u5740<strong>\u4E0D\u662F</strong> <code>127.0.0.1</code>\u3002</p></li></ul><p>\u5982\u679C\u4E0D\u8FD9\u6837\u505A\uFF0C\u53EF\u80FD\u4F1A\u5BFC\u81F4\u7C7B\u4F3C\u4EE5\u4E0B\u9519\u8BEF:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>2016-01-08 16:08:57\uFF0C888 ERROR [pool-26-thread-1-SendThread(localhost:2181)] o.a.zookeeper.client.ZooKeeperSaslClient An error:(java.security.PrivilegedActionException: javax.security.sasl.SaslException: GSS initiate failed [Caused by GSSException: No valid credentials provided(Mechanism level: Server not found in Kerberos database(7) - LOOKING_UP_SERVER)]) occurred when evaluating Zookeeper Quorum Member&#39;s  received SASL token. Zookeeper Client will go to AUTH_FAILED state.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,51),Hs=t("\u5982\u679C\u5728\u4F7F\u7528Kerberos\u8FDB\u884C\u901A\u4FE1\u6216\u8EAB\u4EFD\u9A8C\u8BC1\u65F6\u51FA\u73B0\u95EE\u9898\uFF0C\u5219\u672C "),Os={href:"http://docs.oracle.com/javase/7/docs/technotes/guides/security/jgss/tutorials/Troubleshooting.html",target:"_blank",rel:"noopener noreferrer"},Zs=t("\u6545\u969C\u6392\u9664\u6307\u5357"),Ws=t("\u53EF\u80FD\u5F88\u6709\u7528\u3002"),js=o(`<p>\u4E0A\u8FF0\u6545\u969C\u6392\u9664\u6307\u5357\u4E2D\u6700\u91CD\u8981\u7684\u6CE8\u610F\u4E8B\u9879\u4E4B\u4E00\u662F\u4E3AKerberos\u542F\u7528\u8C03\u8BD5\u8F93\u51FA\u7684\u673A\u5236\u3002\u8FD9\u662F\u901A\u8FC7\u8BBE\u7F6E<code>sun.security.krb5.debug</code>\u73AF\u5883\u53D8\u91CF\u6765\u5B8C\u6210\u7684\u3002\u5728NiFi\u4E2D\uFF0C\u8FD9\u53EF\u4EE5\u901A\u8FC7\u5728_$ NiFi_HOME / conf / bootstrap.conf_\u6587\u4EF6\u4E2D\u6DFB\u52A0\u4EE5\u4E0B\u884C\u6765\u5B9E\u73B0:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>java.arg.16=-Dsun.security.krb5.debug=true
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8FD9\u5C06\u5BFC\u81F4\u8C03\u8BD5\u8F93\u51FA\u5199\u5165NiFi Bootstrap\u65E5\u5FD7\u6587\u4EF6\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u5B83\u4F4D\u4E8E_$ NiFi_HOME / logs / NiFi-bootstrap.log\u4E2D_\u3002\u6B64\u8F93\u51FA\u53EF\u80FD\u76F8\u5F53\u5197\u957F\uFF0C\u4F46\u4E3A\u89E3\u51B3Kerberos\u6545\u969C\u63D0\u4F9B\u4E86\u6781\u6709\u4EF7\u503C\u7684\u4FE1\u606F\u3002</p><h3 id="zookeeper-migrator" tabindex="-1"><a class="header-anchor" href="#zookeeper-migrator" aria-hidden="true">#</a> ZooKeeper Migrator</h3><p>\u4F60\u53EF\u4EE5\u4F7F\u7528\u8BE5<code>zk-migrator</code>\u5DE5\u5177\u6267\u884C\u4EE5\u4E0B\u4EFB\u52A1:</p><ul><li><p>\u5C06ZooKeeper\u4FE1\u606F\u4ECE\u4E00\u4E2AZooKeeper\u96C6\u7FA4\u79FB\u52A8\u5230\u53E6\u4E00\u4E2A\u96C6\u7FA4</p></li><li><p>\u8FC1\u79FBZooKeeper\u8282\u70B9\u6240\u6709\u6743</p></li></ul><p>\u4F8B\u5982\uFF0C\u4F60\u53EF\u80FD\u5E0C\u671B\u5728\u4EE5\u4E0B\u60C5\u51B5\u4E0B\u4F7F\u7528ZooKeeper Migrator:</p><ul><li><p>\u4ECENiFi 0.x\u5347\u7EA7\u5230\u4F7F\u7528\u5D4C\u5165\u5F0FZooKeeper\u7684NiFi 1.x.</p></li><li><p>\u4ECENiFi 0.x\u62161.x\u4E2D\u7684\u5D4C\u5165\u5F0FZooKeeper\u8FC1\u79FB\u5230\u5916\u90E8ZooKeeper</p></li><li><p>\u4F7F\u7528\u5916\u90E8ZooKeeper\u4ECENiFi 0.x\u5347\u7EA7\u5230NiFi 1.x\uFF0C\u4F7F\u7528\u76F8\u540C\u7684\u5916\u90E8ZooKeeper</p></li><li><p>\u4ECE\u5916\u90E8ZooKeeper\u8FC1\u79FB\u5230NiFi 1.x\u4E2D\u7684\u5D4C\u5165\u5F0FZooKeeper</p></li></ul>`,8),Js=t("\u6709\u5173\u66F4\u591A\u4FE1\u606F\uFF0C\u8BF7\u53C2\u9605"),Vs={href:"http://nifi.apache.org/docs/NiFi-docs/html/toolkit-guide.html",target:"_blank",rel:"noopener noreferrer"},Xs=t("NiFi\u5DE5\u5177\u5305\u6307\u5357\u4E2D"),$s=t("\u7684"),Ys={href:"http://nifi.apache.org/docs/NiFi-docs/html/toolkit-guide.html#zookeeper_migrator",target:"_blank",rel:"noopener noreferrer"},Qs=t("Zookeeper Migrator"),eo=t("\u90E8\u5206\u3002"),to=o(`<h2 id="bootstrap\u5C5E\u6027-bootstrap-properties" tabindex="-1"><a class="header-anchor" href="#bootstrap\u5C5E\u6027-bootstrap-properties" aria-hidden="true">#</a> Bootstrap\u5C5E\u6027(Bootstrap Properties)</h2><p><code>conf</code>\u76EE\u5F55\u4E2D\u7684 <em>bootstrap.conf</em> \u6587\u4EF6\u5141\u8BB8\u7528\u6237\u914D\u7F6E\u5E94\u5982\u4F55\u542F\u52A8NiFi\u3002\u4F8B\u5982\u53EF\u4EE5\u8BBE\u7F6EJava\u5806\u7684\u5927\u5C0F\uFF0C\u8981\u8FD0\u884C\u7684Java\u547D\u4EE4\u4EE5\u53CAJava\u7CFB\u7EDF\u5C5E\u6027\u7B49\u7B49\u3002</p><p>\u53EA\u6709\u91CD\u542FNiFi\uFF0C\u5BF9\u6B64\u6587\u4EF6\u7684\u66F4\u6539\u624D\u4F1A\u751F\u6548\u3002</p><table><thead><tr><th><strong>\u5C5E\u6027</strong></th><th><strong>\u63CF\u8FF0</strong></th></tr></thead><tbody><tr><td>java</td><td>\u6307\u5B9A\u8981\u8FD0\u884C\u7684java\u547D\u4EE4\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u5B83\u7684\u503C\u53EA\u662F\u7B80\u5355java\uFF0C\u4F46\u53EF\u4EE5\u5C06\u5176\u66F4\u6539\u4E3A\u7EDD\u5BF9\u8DEF\u5F84\u6216\u5F15\u7528\u73AF\u5883\u53D8\u91CF\uFF0C\u4F8B\u5982$JAVA_HOME/bin/java</td></tr><tr><td>run.as</td><td>\u6307\u5B9A\u8FD0\u884CNiFi\u7684\u7528\u6237\u540D\u3002\u4F8B\u5982\uFF0C\u5982\u679CNiFi\u5E94\u4F5C\u4E3ANiFi\u7528\u6237\u8FD0\u884C\uFF0C\u5219\u5C06\u6B64\u503C\u8BBE\u7F6E\u4E3ANiFi\u5C06\u5BFC\u81F4NiFi Process\u4F5C\u4E3ANiFi\u7528\u6237\u8FD0\u884C\u3002\u5728Windows\u4E0A\u5FFD\u7565\u6B64\u5C5E\u6027\u3002\u5BF9\u4E8ELinux\uFF0C\u6307\u5B9A\u7684\u7528\u6237\u9700\u8981sudo\u6743\u9650\u3002</td></tr><tr><td>lib.dir</td><td>\u7528\u4E8ENiFi \u7684 <em>lib</em> \u76EE\u5F55\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u9ED8\u8BA4\u8BBE\u7F6E\u4E3A ./lib</td></tr><tr><td>conf.dir</td><td>\u7528\u4E8ENiFi \u7684 <em>conf</em> \u76EE\u5F55\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u9ED8\u8BA4\u8BBE\u7F6E\u4E3A ./conf</td></tr><tr><td>graceful.shutdown.seconds</td><td>\u5F53NiFi\u8981\u5173\u95ED\u65F6\uFF0CBootstrap\u5C06\u7B49\u5F85\u8FD9\u4E2A\u79D2\u6570\uFF0C\u4EE5\u4FBF\u80FD\u591F\u5E72\u51C0\u7684\u5173\u95ED\u8FDB\u7A0B\u3002\u8FC7\u4E86\u8FD9\u6BB5\u65F6\u95F4\uFF0C\u5982\u679CNiFi\u4ECD\u5728\u8FD0\u884C\uFF0C\u5219Bootstrap\u5C06kill\u8BE5\u8FDB\u7A0B\u3002</td></tr><tr><td>java.arg.N</td><td>\u542F\u52A8\u8FDB\u7A0B\u65F6\uFF0C\u53EF\u4EE5\u5C06\u4EFB\u610F\u6570\u91CF\u7684JVM\u53C2\u6570\u4F20\u9012\u7ED9NiFi JVM\u3002\u8FD9\u4E9B\u53C2\u6570\u662F\u901A\u8FC7\u5411\u4EE5 <em>bootstrap.conf</em> \u4E2D\u4EE5\u6DFB\u52A0java.arg.\u5F00\u5934\u7684\u5C5E\u6027\u6765\u5B9A\u4E49\u7684\u3002\u5C5E\u6027\u540D\u7684\u5176\u4F59\u90E8\u5206\u4E0D\u76F8\u5173\uFF0C\u53EA\u662F\u4E3A\u4E86\u533A\u5206\u5C5E\u6027\u540D\uFF0C\u5C06\u88AB\u5FFD\u7565\u3002\u9ED8\u8BA4\u503C\u5305\u62EC\u6700\u5C0F\u548C\u6700\u5927Java\u5806\u7684\u5C5E\u6027\uFF0C\u8981\u4F7F\u7528\u7684\u5783\u573E\u6536\u96C6\u5668\u7B49\u3002</td></tr><tr><td>notification.services.file</td><td>\u5F53NiFi\u542F\u52A8\u6216\u505C\u6B62\u65F6\uFF0C\u6216\u5F53Bootstrap\u68C0\u6D4B\u5230NiFi\u5DF2\u7ECF\u6B7B\u4EA1\u65F6\uFF0CBootstrap\u80FD\u591F\u5411\u76F8\u5173\u65B9\u53D1\u9001\u901A\u77E5\u3002\u8FD9\u662F\u901A\u8FC7\u6307\u5B9A\u53EF\u4EE5\u4F7F\u7528\u54EA\u4E9B\u901A\u77E5\u670D\u52A1\u7684XML\u6587\u4EF6\u6765\u914D\u7F6E\u7684\u3002\u6709\u5173\u6B64\u6587\u4EF6\u7684\u66F4\u591A\u4FE1\u606F\uFF0C\u8BF7\u53C2\u9605<a href="#%E9%80%9A%E7%9F%A5%E6%9C%8D%E5%8A%A1">\u901A\u77E5\u670D\u52A1</a>\u90E8\u5206\u3002</td></tr><tr><td>notification.max.attempts</td><td>\u5982\u679C\u914D\u7F6E\u4E86\u6B64\u5C5E\u6027\u4E3An\uFF0C\u5F53\u901A\u77E5\u670D\u52A1\u4F46\u65E0\u6CD5\u6267\u884C\u5176\u529F\u80FD\uFF0C\u5B83\u5C06\u518D\u6B21\u5C1D\u8BD5n\u6B21\u3002\u6B64\u5C5E\u6027\u914D\u7F6E\u6700\u5927\u5C1D\u8BD5\u6B21\u6570\u3002\u9ED8\u8BA4\u503C\u4E3A5\u3002</td></tr><tr><td>nifi.start.notification.services</td><td>\u6B64\u5C5E\u6027\u662F\u4EE5\u9017\u53F7\u5206\u9694\u7684\u901A\u77E5\u670D\u52A1\u6807\u8BC6\u7B26\u5217\u8868\uFF0C\u8FD9\u4E9B\u6807\u8BC6\u7B26\u5BF9\u5E94\u4E8Enotification.services.file\u5C5E\u6027\u4E2D\u5B9A\u4E49\u7684Notification Services \u3002\u5177\u6709\u6307\u5B9A\u6807\u8BC6\u7B26\u7684\u670D\u52A1\u5C06\u7528\u4E8E\u5728\u542F\u52A8NiFi\u65F6\u901A\u77E5\u5176\u914D\u7F6E\u7684\u6536\u4EF6\u4EBA\u3002</td></tr><tr><td>nifi.stop.notification.services</td><td>\u6B64\u5C5E\u6027\u662F\u4EE5\u9017\u53F7\u5206\u9694\u7684\u901A\u77E5\u670D\u52A1\u6807\u8BC6\u7B26\u5217\u8868\uFF0C\u8FD9\u4E9B\u6807\u8BC6\u7B26\u5BF9\u5E94\u4E8Enotification.services.file\u5C5E\u6027\u4E2D\u5B9A\u4E49\u7684Notification Services \u3002\u6BCF\u5F53NiFi\u505C\u6B62\u65F6\uFF0C\u5177\u6709\u6307\u5B9A\u6807\u8BC6\u7B26\u7684\u670D\u52A1\u5C06\u7528\u4E8E\u901A\u77E5\u5176\u914D\u7F6E\u7684\u6536\u4EF6\u4EBA\u3002</td></tr><tr><td>nifi.died.notification.services</td><td>\u6B64\u5C5E\u6027\u662F\u4EE5\u9017\u53F7\u5206\u9694\u7684\u901A\u77E5\u670D\u52A1\u6807\u8BC6\u7B26\u5217\u8868\uFF0C\u8FD9\u4E9B\u6807\u8BC6\u7B26\u5BF9\u5E94\u4E8Enotification.services.file\u5C5E\u6027\u4E2D\u5B9A\u4E49\u7684Notification Services \u3002\u5982\u679C\u5F15\u5BFC\u7A0B\u5E8F\u786E\u5B9ANiFi\u610F\u5916\u6B7B\u4EA1\uFF0C\u5219\u5177\u6709\u6307\u5B9A\u6807\u8BC6\u7B26\u7684\u670D\u52A1\u5C06\u7528\u4E8E\u901A\u77E5\u5176\u914D\u7F6E\u7684\u6536\u4EF6\u4EBA\u3002</td></tr></tbody></table><h2 id="\u901A\u77E5\u670D\u52A1" tabindex="-1"><a class="header-anchor" href="#\u901A\u77E5\u670D\u52A1" aria-hidden="true">#</a> \u901A\u77E5\u670D\u52A1</h2><p>\u5F53NiFi\u5F15\u5BFC\u7A0B\u5E8F\u542F\u52A8\u6216\u505C\u6B62NiFi\uFF0C\u6216\u68C0\u6D4B\u5230\u5B83\u5DF2\u610F\u5916\u6B7B\u4EA1\u65F6\uFF0C\u5B83\u80FD\u591F\u901A\u77E5\u5DF2\u914D\u7F6E\u7684\u6536\u4EF6\u4EBA\u3002\u76EE\u524D\uFF0C\u63D0\u4F9B\u7684\u552F\u4E00\u673A\u5236\u662F\u53D1\u9001\u7535\u5B50\u90AE\u4EF6\u6216HTTP POST\u901A\u77E5\u3002\u901A\u77E5\u670D\u52A1\u914D\u7F6E\u6587\u4EF6\u662F\u4E00\u4E2AXML\u6587\u4EF6\uFF0C\u5176\u4E2D\u914D\u7F6E\u4E86\u901A\u77E5\u529F\u80FD\u3002</p><p>XML\u6587\u4EF6\u7684\u9ED8\u8BA4\u4F4D\u7F6E\u662F <em>conf/bootstrap-notification-services.xml</em>\uFF0C\u4F46\u53EF\u4EE5\uFFFD\uFFFD <em>conf/bootstrap.conf</em> \u6587\u4EF6\u4E2D\u66F4\u6539\u6B64\u503C\u3002</p><p>XML\u6587\u4EF6\u7684\u8BED\u6CD5\u5982\u4E0B:</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>services</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- any number of service elements can be defined. --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>service</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>some-identifier<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- The fully-qualified class name of the Notification Service. --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span><span class="token punctuation">&gt;</span></span>org.apache.nifi.bootstrap.notification.email.EmailNotificationService<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>class</span><span class="token punctuation">&gt;</span></span>

        <span class="token comment">&lt;!-- Any number of properties can be set using this syntax.
             The properties available depend on the Notification Service. --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Property Name 1<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Property Value<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Another Property Name<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Property Value 2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>service</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>services</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u4E00\u65E6\u914D\u7F6E\u4E86\u6240\u9700\u7684\u670D\u52A1\uFF0C\u5C31\u53EF\u4EE5\u5728_bootstrap.conf_\u6587\u4EF6\u4E2D\u5F15\u7528\u5B83\u4EEC\u3002</p><h3 id="\u7535\u5B50\u90AE\u4EF6\u901A\u77E5\u670D\u52A1" tabindex="-1"><a class="header-anchor" href="#\u7535\u5B50\u90AE\u4EF6\u901A\u77E5\u670D\u52A1" aria-hidden="true">#</a> \u7535\u5B50\u90AE\u4EF6\u901A\u77E5\u670D\u52A1</h3><p>\u7B2C\u4E00\u4E2A\u901A\u77E5\u7A0B\u5E8F\u662F\u53D1\u9001\u7535\u5B50\u90AE\u4EF6\uFF0C\u5B9E\u73B0\u662F<code>org.apache.nifi.bootstrap.notification.email.EmailNotificationService</code>\u3002\u5B83\u5177\u6709\u4EE5\u4E0B\u5C5E\u6027:</p><table><thead><tr><th><strong>\u5C5E\u6027</strong></th><th><strong>\u9700\u8981</strong></th><th><strong>\u63CF\u8FF0</strong></th></tr></thead><tbody><tr><td><code>SMTP Hostname</code></td><td>true</td><td>\u7528\u4E8E\u53D1\u9001\u7535\u5B50\u90AE\u4EF6\u901A\u77E5\u7684SMTP\u670D\u52A1\u5668\u7684\u4E3B\u673A\u540D</td></tr><tr><td><code>SMTP Port</code></td><td>true</td><td>\u7528\u4E8ESMTP\u901A\u4FE1\u7684\u7AEF\u53E3</td></tr><tr><td><code>SMTP Username</code></td><td>true</td><td>SMTP\u5E10\u6237\u7684\u7528\u6237\u540D</td></tr><tr><td><code>SMTP Password</code></td><td></td><td>SMTP\u5E10\u6237\u7684\u5BC6\u7801</td></tr><tr><td><code>SMTP Auth</code></td><td></td><td>\u6307\u793A\u662F\u5426\u5E94\u4F7F\u7528\u8EAB\u4EFD\u9A8C\u8BC1\u7684\u6807\u5FD7</td></tr><tr><td><code>SMTP TLS</code></td><td></td><td>\u6307\u793A\u662F\u5426\u5E94\u542F\u7528TLS\u7684\u6807\u5FD7</td></tr><tr><td><code>SMTP Socket Factory</code></td><td></td><td><code>javax.net.ssl.SSLSocketFactory</code></td></tr><tr><td><code>SMTP X-Mailer Header</code></td><td></td><td>X-Mailer\u7528\u4E8E\u4F20\u51FA\u7535\u5B50\u90AE\u4EF6\u7684\u6807\u9898\u4E2D</td></tr><tr><td><code>Content Type</code></td><td></td><td>Mime\u7C7B\u578B\u7528\u4E8E\u89E3\u91CA\u7535\u5B50\u90AE\u4EF6\u7684\u5185\u5BB9\uFF0C\u4F8B\u5982<code>text/plain</code>\u6216<code>text/html</code></td></tr><tr><td><code>From</code></td><td>true</td><td>\u6307\u5B9A\u7528\u4F5C\u53D1\u4EF6\u4EBA\u7684\u7535\u5B50\u90AE\u4EF6\u5730\u5740\u3002\u5426\u5219\uFF0C&quot;\u53CB\u597D\u540D\u79F0&quot;\u53EF\u7528\u4F5C&quot;\u53D1\u4EF6\u4EBA&quot;\u5730\u5740\uFF0C\u4F46\u8BE5\u503C\u5FC5\u987B\u7528\u53CC\u5F15\u53F7\u62EC\u8D77\u6765\u3002</td></tr><tr><td><code>To</code></td><td></td><td>\u6536\u4EF6\u4EBA\u8981\u5305\u542B\u5728\u7535\u5B50\u90AE\u4EF6\u7684&quot;\u6536\u4EF6\u4EBA&quot;\u884C\u4E2D</td></tr><tr><td><code>CC</code></td><td></td><td>\u6536\u4EF6\u4EBA\u5305\u542B\u5728\u7535\u5B50\u90AE\u4EF6\u7684CC-Line\u4E2D</td></tr><tr><td><code>BCC</code></td><td></td><td>\u6536\u4EF6\u4EBA\u5305\u542B\u5728\u7535\u5B50\u90AE\u4EF6\u7684BCC-Line\u4E2D</td></tr></tbody></table><p>\u9664\u4E86\u4E0A\u9762\u6240\u8FF0\u7684\u5C5E\u6027\u6807\u8BB0\u4E3A\u9700\u8981\uFF0C\u7684\u81F3\u5C11\u4E00\u79CD<code>To</code>\uFF0C<code>CC</code>\u6216<code>BCC</code>\u5C5E\u6027\u5FC5\u987B\u88AB\u8BBE\u7F6E\u3002</p><p>\u914D\u7F6E\u7535\u5B50\u90AE\u4EF6\u670D\u52A1\u7684\u5B8C\u6574\u793A\u4F8B\u5982\u4E0B\u6240\u793A:</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>service</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>email-notification<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span><span class="token punctuation">&gt;</span></span>org.apache.nifi.bootstrap.notification.email.EmailNotificationService<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>class</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SMTP Hostname<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>smtp.gmail.com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SMTP Port<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>587<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SMTP Username<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>username@gmail.com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SMTP Password<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>super-secret-password<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>SMTP TLS<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>From<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>&quot;NiFi Service Notifier&quot;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>To<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>username@gmail.com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>service</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="http\u901A\u77E5\u670D\u52A1" tabindex="-1"><a class="header-anchor" href="#http\u901A\u77E5\u670D\u52A1" aria-hidden="true">#</a> HTTP\u901A\u77E5\u670D\u52A1</h3><p>\u7B2C\u4E8C\u4E2A\u901A\u544A\u7A0B\u5E8F\u662F\u53D1\u9001HTTP POST\u8BF7\u6C42\uFF0C\u5B9E\u73B0\u662F<code>org.apache.nifi.bootstrap.notification.http.HttpNotificationService</code>\u3002\u5B83\u5177\u6709\u4EE5\u4E0B\u5C5E\u6027:</p><table><thead><tr><th><strong>\u5C5E\u6027</strong></th><th><strong>\u5FC5\u586B</strong></th><th><strong>\u63CF\u8FF0</strong></th></tr></thead><tbody><tr><td><code>URL</code></td><td>true</td><td>\u53D1\u9001\u901A\u77E5\u7684URL\u3002\u652F\u6301\u8868\u8FBE\u5F0F\u8BED\u8A00\u3002</td></tr><tr><td><code>Connection timeout</code></td><td></td><td>\u8FDE\u63A5\u8FDC\u7A0B\u670D\u52A1\u7684\u6700\u957F\u7B49\u5F85\u65F6\u95F4\u3002\u652F\u6301\u8868\u8FBE\u5F0F\u8BED\u8A00\u3002\u9ED8\u8BA4\u4E3A<code>10s</code>\u3002</td></tr><tr><td><code>Write timeout</code></td><td></td><td>\u8FDC\u7A0B\u670D\u52A1\u8BFB\u53D6\u53D1\u9001\u8BF7\u6C42\u7684\u6700\u957F\u7B49\u5F85\u65F6\u95F4\u3002\u652F\u6301\u8868\u8FBE\u5F0F\u8BED\u8A00\u3002\u9ED8\u8BA4\u4E3A<code>10s</code>\u3002</td></tr><tr><td><code>Truststore Filename</code></td><td></td><td>Truststore\u7684\u5B8C\u5168\u9650\u5B9A\u6587\u4EF6\u540D</td></tr><tr><td><code>Truststore Type</code></td><td></td><td>\u4FE1\u4EFB\u5E93\u7684\u7C7B\u578B\u3002\u65E0\u8BBA\u662F<code>JKS</code>\u6216<code>PKCS12</code></td></tr><tr><td><code>Truststore Password</code></td><td></td><td>Truststore\u7684\u5BC6\u7801</td></tr><tr><td><code>Keystore Filename</code></td><td></td><td>Keystore\u7684\u5B8C\u5168\u9650\u5B9A\u6587\u4EF6\u540D</td></tr><tr><td><code>Keystore Type</code></td><td></td><td>\u5BC6\u94A5\u5E93\u7684\u5BC6\u7801</td></tr><tr><td><code>Keystore Password</code></td><td></td><td>\u5BC6\u94A5\u7684\u5BC6\u7801\u3002\u5982\u679C\u672A\u6307\u5B9A\uFF0C\u4F46\u6307\u5B9A\u4E86\u5BC6\u94A5\u5E93\u6587\u4EF6\u540D\uFF0C\u5BC6\u7801\u548C\u7C7B\u578B\uFF0C\u5219\u5C06\u5047\u5B9A\u5BC6\u94A5\u5E93\u5BC6\u7801\u4E0E\u5BC6\u94A5\u5BC6\u7801\u76F8\u540C\u3002</td></tr><tr><td><code>SSL Protocol</code></td><td></td><td>\u7528\u4E8E\u6B64SSL\u4E0A\u4E0B\u6587\u7684\u7B97\u6CD5\u3002\u8FD9\u53EF\u4EE5\u662F<code>SSL</code>\u6216<code>TLS</code>\u3002</td></tr></tbody></table><p>\u9664\u4E0A\u8FF0\u5C5E\u6027\u5916\uFF0C\u8FD8\u53EF\u4EE5\u6DFB\u52A0\u52A8\u6001\u5C5E\u6027\u3002\u5B83\u4EEC\u5C06\u4F5C\u4E3A\u6807\u5934\u6DFB\u52A0\u5230HTTP\u8BF7\u6C42\u4E2D\u3002\u652F\u6301\u8868\u8FBE\u5F0F\u8BED\u8A00\u3002</p><p>\u901A\u77E5\u6D88\u606F\u4F4D\u4E8EPOST\u8BF7\u6C42\u7684\u6B63\u6587\u4E2D\u3002\u901A\u77E5\u7684\u7C7B\u578B\u4F4D\u4E8E\u6807\u9898&quot;notification.type&quot;\u4E2D\uFF0C\u4E3B\u9898\u4F7F\u7528\u6807\u9898&quot;notification.subject&quot;\u3002</p><p>\u914D\u7F6EHTTP\u670D\u52A1\u7684\u5B8C\u6574\u793A\u4F8B\u5982\u4E0B\u6240\u793A:</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>service</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>http-notification<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>class</span><span class="token punctuation">&gt;</span></span>org.apache.nifi.bootstrap.notification.http.HttpNotificationService<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>class</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>URL<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>https://testServer.com:8080/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Truststore Filename<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>localhost-ts.jks<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Truststore Type<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>JKS<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Truststore Password<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>localtest<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Keystore Filename<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>localhost-ts.jks<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Keystore Type<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>JKS<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Keystore Password<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>localtest<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>notification.timestamp<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>\${now()}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
     <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>service</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u4EE3\u7406\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u4EE3\u7406\u914D\u7F6E" aria-hidden="true">#</a> \u4EE3\u7406\u914D\u7F6E</h2><p>\u5728\u4EE3\u7406\u540E\u9762\u8FD0\u884CApache NiFi\u65F6\uFF0C\u5728\u90E8\u7F72\u671F\u95F4\u9700\u8981\u6CE8\u610F\u51E0\u4E2A\u5173\u952E\u9879\u3002</p><ul><li><p>NiFi\u7531\u8BB8\u591AWeb\u5E94\u7528\u7A0B\u5E8F(Web UI\uFF0CWeb API\uFF0C\u6587\u6863\uFF0C\u81EA\u5B9A\u4E49UI\uFF0C\u6570\u636E\u67E5\u770B\u5668\u7B49)\u7EC4\u6210\uFF0C\u56E0\u6B64\u9700\u8981\u4E3A<strong>\u6839\u8DEF\u5F84</strong>\u914D\u7F6E\u6620\u5C04\u3002\u8FD9\u6837\uFF0C\u6240\u6709\u4E0A\u4E0B\u6587\u8DEF\u5F84\u90FD\u76F8\u5E94\u5730\u4F20\u9012\u3002\u4F8B\u5982\uFF0C\u5982\u679C\u4EC5<code>/NiFi</code>\u6620\u5C04\u4E86\u4E0A\u4E0B\u6587\u8DEF\u5F84\uFF0C\u5219UpdateAttribute\u7684\u81EA\u5B9A\u4E49UI\u5C06\u4E0D\u8D77\u4F5C\u7528\uFF0C\u56E0\u4E3A\u5B83\u53EF\u7528\u4E8E<code>/update-attribute-ui-&lt;version&gt;</code>\u3002</p></li><li><p>NiFi\u7684REST API\u5C06\u4E3A\u56FE\u8868\u4E0A\u7684\u6BCF\u4E2A\u7EC4\u4EF6\u751F\u6210URI\u3002\u7531\u4E8E\u8BF7\u6C42\u662F\u901A\u8FC7\u4EE3\u7406\u53D1\u51FA\u7684\uFF0C\u56E0\u6B64\u9700\u8981\u8986\u76D6\u751F\u6210\u7684URI\u7684\u67D0\u4E9B\u5143\u7D20\u3002\u5982\u679C\u4E0D\u8986\u76D6\uFF0C\u7528\u6237\u5C06\u80FD\u591F\u5728\u753B\u5E03\u4E0A\u67E5\u770B\u6570\u636E\u6D41\uFF0C\u4F46\u65E0\u6CD5\u4FEE\u6539\u73B0\u6709\u7EC4\u4EF6\u3002\u8BF7\u6C42\u5C06\u5C1D\u8BD5\u76F4\u63A5\u56DE\u62E8\u7ED9NiFi\uFF0C\u800C\u4E0D\u662F\u901A\u8FC7\u4EE3\u7406\u3002\u5F53\u4EE3\u7406\u751F\u6210\u5BF9NiFi\u5B9E\u4F8B\u7684HTTP\u8BF7\u6C42\u65F6\uFF0C\u53EF\u4EE5\u901A\u8FC7\u6DFB\u52A0\u4EE5\u4E0BHTTP\u6807\u5934\u6765\u8986\u76D6URI\u7684\u5143\u7D20:</p></li></ul><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>X-ProxyScheme - the scheme to use to connect to the proxy
X-ProxyHost - the host of the proxy
X-ProxyPort - the port the proxy is listening on
X-ProxyContextPath - the path configured to map to the NiFi instance
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>\u5982\u679CNiFi\u5B89\u5168\u8FD0\u884C\uFF0C\u5219\u9700\u8981\u6388\u6743\u4EFB\u4F55\u4EE3\u7406\u6765\u4EE3\u7406\u7528\u6237\u8BF7\u6C42\u3002\u8FD9\u4E9B\u53EF\u4EE5\u901A\u8FC7\u5168\u5C40\u83DC\u5355\u5728NiFi UI\u4E2D\u914D\u7F6E\u3002\u4E00\u65E6\u8FD9\u4E9B\u6743\u9650\u5230\u4F4D\uFF0C\u4EE3\u7406\u5C31\u53EF\u4EE5\u5F00\u59CB\u4EE3\u7406\u7528\u6237\u8BF7\u6C42\u3002\u5FC5\u987B\u5728HTTP\u6807\u5934\u4E2D\u4E2D\u7EE7\u6700\u7EC8\u7528\u6237\u6807\u8BC6\u3002\u4F8B\u5982\uFF0C\u5982\u679C\u6700\u7EC8\u7528\u6237\u5411\u4EE3\u7406\u53D1\u9001\u4E86\u8BF7\u6C42\uFF0C\u5219\u4EE3\u7406\u5FC5\u987B\u5BF9\u7528\u6237\u8FDB\u884C\u8EAB\u4EFD\u9A8C\u8BC1\u3002\u5728\u6B64\u4E4B\u540E\uFF0C\u4EE3\u7406\u53EF\u4EE5\u5C06\u8BF7\u6C42\u53D1\u9001\u5230NiFi\u3002\u5728\u6B64\u8BF7\u6C42\u4E2D\uFF0C\u5E94\u6DFB\u52A0HTTP\u6807\u5934\uFF0C\u5982\u4E0B\u6240\u793A\u3002</li></ul><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>X-ProxiedEntitiesChain:&lt;end-user-identity&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u5982\u679C\u4EE3\u7406\u914D\u7F6E\u4E3A\u53D1\u9001\u5230\u53E6\u4E00\u4E2A\u4EE3\u7406\uFF0C\u5219\u6765\u81EA\u7B2C\u4E8C\u4E2A\u4EE3\u7406\u7684\u5BF9NiFi\u7684\u8BF7\u6C42\u5E94\u5305\u542B\u5982\u4E0B\u6807\u5934\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>X-ProxiedEntitiesChain:&lt;end-user-identity&gt; &lt;proxy-1-identity&gt;
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u8BBE\u7F6E\u6240\u9700\u5C5E\u6027\u7684\u793A\u4F8BApache\u4EE3\u7406\u914D\u7F6E\u53EF\u80FD\u5982\u4E0B\u6240\u793A\u3002\u5B8C\u6574\u7684\u4EE3\u7406\u914D\u7F6E\u8D85\u51FA\u4E86\u672C\u6587\u6863\u7684\u8303\u56F4\u3002\u6709\u5173\u90E8\u7F72\u73AF\u5883\u548C\u7528\u4F8B\u7684\u6307\u5BFC\uFF0C\u8BF7\u53C2\u9605\u4EE3\u7406\u6587\u6863\u3002</p><div class="language-xml ext-xml line-numbers-mode"><pre class="language-xml"><code>...
&lt;Location &quot;/my-NiFi&quot;&gt;
    ...
	SSLEngine On
	SSLCertificateFile /path/to/proxy/certificate.crt
	SSLCertificateKeyFile /path/to/proxy/key.key
	SSLCACertificateFile /path/to/ca/certificate.crt
	SSLVerifyClient require
	RequestHeader add X-ProxyScheme &quot;https&quot;
	RequestHeader add X-ProxyHost &quot;proxy-host&quot;
	RequestHeader add X-ProxyPort &quot;443&quot;
	RequestHeader add X-ProxyContextPath &quot;/my-NiFi&quot;
	RequestHeader add X-ProxiedEntitiesChain &quot;&lt;%{SSL_CLIENT_S_DN}&gt;&quot;
	ProxyPass https://NiFi-host:8443
	ProxyPassReverse https://NiFi-host:8443
	...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Location</span><span class="token punctuation">&gt;</span></span>
...
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,33),no=e("p",null,"\u5FC5\u987B\u66F4\u65B0\u5176\u4ED6NiFi\u4EE3\u7406\u914D\u7F6E\uFF0C\u4EE5\u5141\u8BB8\u9884\u671F\u7684\u4E3B\u673A\u548C\u4E0A\u4E0B\u6587\u8DEF\u5F84HTTP\u6807\u5934\u3002",-1),so=t("\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u5982\u679CNiFi\u5B89\u5168\u8FD0\u884C\uFF0C\u5B83\u5C06\u4EC5\u63A5\u53D7\u5177\u6709\u4E0E\u5176\u7ED1\u5B9A\u7684\u4E3B\u673A[:port]\u5339\u914D\u7684\u4E3B\u673A\u5934\u7684HTTP\u8BF7\u6C42\u3002\u5982\u679CNiFi\u63A5\u53D7\u6307\u5411\u4E0D\u540C\u4E3B\u673A[:port]\u7684\u8BF7\u6C42\uFF0C\u5219\u9700\u8981\u914D\u7F6E\u9884\u671F\u503C\u3002\u5728\u4EE3\u7406\u670D\u52A1\u5668\u540E\u9762\u8FD0\u884C\u6216\u5728\u5BB9\u5668\u5316\u73AF\u5883\u4E2D\u8FD0\u884C\u65F6\u53EF\u80FD\u9700\u8981\u8FD9\u6837\u505A\u3002\u8FD9\u662F\u4F7F\u7528\u5C5E\u6027(\u4F8B\u5982)\u5728 "),oo=e("em",null,"nifi.properties",-1),ao=t(" \u4E2D\u4EE5\u9017\u53F7\u5206\u9694\u7684\u5217\u8868\u914D\u7F6E\u7684\u3002\u63A5\u53D7IPv6\u5730\u5740\u3002\u6709\u5173\u5176\u4ED6\u8BE6\u7EC6\u4FE1\u606F\uFF0C\u8BF7\u53C2\u9605RFC 5952\u7B2C"),io={href:"https://tools.ietf.org/html/rfc5952#section-4",target:"_blank",rel:"noopener noreferrer"},ro=t("4"),co=t("\u8282\u548C\u7B2C"),po={href:"https://tools.ietf.org/html/rfc5952#section-6",target:"_blank",rel:"noopener noreferrer"},lo=t("6"),uo=t("\u8282\u3002"),ho=e("code",null,"nifi.web.proxy.host``localhost:18443\uFF0C proxyhost:443",-1),go=e("li",null,[e("p",null,[t("\u5982\u679C\u8BE5\u503C"),e("code",null,"nifi.web.proxy.context.path"),t("\u5728 "),e("em",null,"nifi.properties"),t(' \u4E2D\u7684\u5C5E\u6027\u4E2D \u5217\u5165\u767D\u540D\u5355\uFF0C\u5219NiFi\u5C06\u4EC5\u63A5\u53D7\u5E26\u6709X-ProxyContextPath\uFF0CX-Forwarded-Context\u6216X-Forwarded-Prefix\u6807\u5934\u7684HTTP\u8BF7\u6C42\u3002\u6B64\u5C5E\u6027\u63A5\u53D7\u4EE5\u9017\u53F7\u5206\u9694\u7684\u9884\u671F\u503C\u5217\u8868\u3002\u5982\u679C\u4F20\u5165\u8BF7\u6C42\u5177\u6709\u767D\u540D\u5355\u4E2D\u4E0D\u5B58\u5728\u7684X-ProxyContextPath\uFF0CX-Forwarded-Context\u6216X-Forwarded-Prefix\u6807\u5934\u503C\uFF0C\u5219\u4F1A\u663E\u793A"\u53D1\u751F\u610F\u5916\u9519\u8BEF"\u9875\u9762\uFF0C\u5E76\u4E14\u5C06\u663E\u793A\u9519\u8BEF\u5199\u5165_NiFi-app.log_\u3002')])],-1),mo=e("li",null,[e("p",null,[t("\u9700\u8981\u5728\u4EE3\u7406\u670D\u52A1\u5668\u548CNiFi\u96C6\u7FA4\u4E0A\u8FDB\u884C\u5176\u4ED6\u914D\u7F6E\uFF0C\u4EE5\u4F7FNiFi\u7AD9\u70B9\u5230\u7AD9\u70B9\u5728\u53CD\u5411\u4EE3\u7406\u540E\u9762\u5DE5\u4F5C\u3002\u6709\u5173\u8BE6\u7EC6\u4FE1\u606F\uFF0C\u8BF7\u53C2\u9605"),e("a",{href:"#%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E7%9A%84%E7%AB%99%E7%82%B9%E5%88%B0%E7%AB%99%E7%82%B9%E8%B7%AF%E7%94%B1%E5%B1%9E%E6%80%A7"},"\u53CD\u5411\u4EE3\u7406\u7684\u7AD9\u70B9\u5230\u7AD9\u70B9\u8DEF\u7531\u5C5E\u6027"),t("\u3002")]),e("ul",null,[e("li",null,`\u4E3A\u4E86\u901A\u8FC7\u53CD\u5411\u4EE3\u7406\u901A\u8FC7\u7AD9\u70B9\u5230\u7AD9\u70B9\u534F\u8BAE\u4F20\u8F93\u6570\u636E\uFF0C\u4EE3\u7406\u548C\u7AD9\u70B9\u5230\u7AD9\u70B9\u5BA2\u6237\u7AEFNiFi\u7528\u6237\u90FD\u9700\u8981\u5177\u6709\u4EE5\u4E0B\u7B56\u7565\uFF0C"\u68C0\u7D22\u7AD9\u70B9\u5230\u7AD9\u70B9\u7684\u8BE6\u7EC6\u4FE1\u606F"\uFF0C"\u901A\u8FC7\u7AD9\u70B9\u63A5\u6536\u6570\u636E"\u5230-site'\u7528\u4E8E\u8F93\u5165\u7AEF\u53E3\uFF0C'\u901A\u8FC7\u7AD9\u70B9\u5230\u7AD9\u70B9\u53D1\u9001\u6570\u636E'\u7528\u4E8E\u8F93\u51FA\u7AEF\u53E3\u3002`)])],-1),vo=o('<h2 id="kerberos\u670D\u52A1-kerberos-service" tabindex="-1"><a class="header-anchor" href="#kerberos\u670D\u52A1-kerberos-service" aria-hidden="true">#</a> Kerberos\u670D\u52A1(Kerberos Service)</h2><p>\u53EF\u4EE5\u5C06NiFi\u914D\u7F6E\u4E3A\u4F7F\u7528Kerberos SPNEGO(\u6216&quot;Kerberos\u670D\u52A1&quot;)\u8FDB\u884C\u8EAB\u4EFD\u9A8C\u8BC1\u3002\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u7528\u6237\u5C06\u70B9\u51FBREST\u7AEF\u70B9<code>/access/kerberos</code>\uFF0C\u670D\u52A1\u5668\u5C06\u4F7F\u7528<code>401</code>\u72B6\u6001\u4EE3\u7801\u548C\u8D28\u8BE2\u54CD\u5E94\u6807\u5934\u8FDB\u884C\u54CD\u5E94<code>WWW-Authenticate: Negotiate</code>\u3002\u8FD9\u5C06\u4E0E\u6D4F\u89C8\u5668\u901A\u4FE1\u4EE5\u4F7F\u7528GSS-API\u5E76\u52A0\u8F7D\u7528\u6237\u7684Kerberos\u7968\u8BC1\uFF0C\u5E76\u5728\u540E\u7EED\u8BF7\u6C42\u4E2D\u5C06\u5176\u4F5C\u4E3ABase64\u7F16\u7801\u7684\u6807\u5934\u503C\u63D0\u4F9B\u3002\u5B83\u5C06\u662F\u5F62\u5F0F<code>Authorization: Negotiate YII\u2026\u200B</code>\u3002NiFi\u5C06\u5C1D\u8BD5\u4F7F\u7528KDC\u9A8C\u8BC1\u6B64\u7968\u8BC1\u3002\u5982\u679C\u6210\u529F\uFF0C\u5219\u4E3A\u7528\u6237\u7684_\u4E3B\u4F53_\u5C06\u4F5C\u4E3A\u6807\u8BC6\u8FD4\u56DE\uFF0C\u5E76\u4E14\u6D41\u5C06\u9075\u5FAA\u767B\u5F55/\u51ED\u8BC1\u8BA4\u8BC1\uFF0C\u56E0\u4E3A\u5C06\u5728\u54CD\u5E94\u4E2D\u53D1\u51FAJWT\u4EE5\u9632\u6B62\u5728\u6BCF\u4E2A\u540E\u7EED\u8BF7\u6C42\u4E0A\u8FDB\u884CKerberos\u8EAB\u4EFD\u9A8C\u8BC1\u7684\u4E0D\u5FC5\u8981\u5F00\u9500\u3002\u5982\u679C\u65E0\u6CD5\u9A8C\u8BC1\u6545\u969C\u5355\uFF0C\u5B83\u5C06\u8FD4\u56DE\u76F8\u5E94\u7684\u9519\u8BEF\u54CD\u5E94\u4EE3\u7801\u3002\u7136\u540E\uFF0C\u5982\u679C<code>KerberosLoginIdentityProvider</code>\u5DF2\u914D\u7F6E\uFF0C\u5219\u7528\u6237\u5C06\u80FD\u591F\u5C06\u5176Kerberos\u51ED\u636E\u63D0\u4F9B\u7ED9\u767B\u5F55\u8868\u5355\u3002\u6709\u5173\u8BE6\u7EC6\u4FE1\u606F\uFF0C\u8BF7\u53C2\u9605<a href="#Kerberos">Kerberos</a>\u767B\u5F55\u6807\u8BC6\u63D0\u4F9B\u7A0B\u5E8F\u3002</p><p>NiFi\u53EA\u4F1A\u901A\u8FC7HTTPS\u8FDE\u63A5\u54CD\u5E94Kerberos SPNEGO\u534F\u5546\uFF0C\u56E0\u4E3A\u4E0D\u5B89\u5168\u7684\u8BF7\u6C42\u6C38\u8FDC\u4E0D\u4F1A\u88AB\u9A8C\u8BC1\u3002</p><p>\u5FC5\u987B\u5728 <em>nifi.properties</em> \u4E2D\u8BBE\u7F6E\u4EE5\u4E0B\u5C5E\u6027\u624D\u80FD\u542F\u7528Kerberos\u670D\u52A1\u8EAB\u4EFD\u9A8C\u8BC1\u3002</p><table><thead><tr><th><strong>\u5C5E\u6027</strong></th><th><strong>\u5FC5\u9700</strong></th><th><strong>\u63CF\u8FF0</strong></th></tr></thead><tbody><tr><td><code>Service Principal</code></td><td>true</td><td>NiFi\u7528\u4E8E\u4E0EKDC\u901A\u4FE1\u7684\u670D\u52A1\u4E3B\u4F53</td></tr><tr><td><code>Keytab Location</code></td><td>true</td><td>\u5305\u542B\u670D\u52A1\u4E3B\u4F53\u7684keytab\u7684\u6587\u4EF6\u8DEF\u5F84</td></tr></tbody></table><p>\u6709\u5173\u5B8C\u6574\u6587\u6863\uFF0C\u8BF7\u53C2\u9605<a href="#Kerberos%E5%B1%9E%E6%80%A7">Kerberos\u5C5E\u6027</a>\u3002</p><h3 id="\u6CE8\u610F\u4E8B\u9879" tabindex="-1"><a class="header-anchor" href="#\u6CE8\u610F\u4E8B\u9879" aria-hidden="true">#</a> \u6CE8\u610F\u4E8B\u9879</h3>',7),bo=e("li",null,[e("p",null,[t("Kerberos\u5728\u8BB8\u591A\u5730\u65B9\u90FD\u662F\u533A\u5206\u5927\u5C0F\u5199\u7684\uFF0C\u5E76\u4E14\u9519\u8BEF\u6D88\u606F(\u6216\u7F3A\u5C11\u9519\u8BEF\u6D88\u606F)\u53EF\u80FD\u6CA1\u6709\u5145\u5206\u89E3\u91CA\u3002\u68C0\u67E5\u914D\u7F6E\u6587\u4EF6\u4E2D\u670D\u52A1\u4E3B\u4F53\u7684\u533A\u5206\u5927\u5C0F\u5199\u3002\u516C\u7EA6\u662F"),e("code",null,"HTTP/fully.qualified.domain@REALM"),t("\u3002")])],-1),ko=t("\u5728\u5904\u7406SPNEGO\u8C08\u5224\u65F6\uFF0C\u6D4F\u89C8\u5668\u6709\u4E0D\u540C\u7A0B\u5EA6\u7684\u9650\u5236\u3002\u6709\u4E9B\u4F1A\u5411\u8BF7\u6C42\u5B83\u7684\u4EFB\u4F55\u57DF\u63D0\u4F9B\u672C\u5730Kerberos\u7968\u8BC1\uFF0C\u800C\u5176\u4ED6\u57DF\u4F1A\u5C06\u53D7\u4FE1\u4EFB\u57DF\u5217\u5165\u767D\u540D\u5355\u3002\u8BF7\u53C2\u9605"),fo={href:"http://docs.spring.io/autorepo/docs/spring-security-kerberos/1.0.2.BUILD-SNAPSHOT/reference/htmlsingle/#browserspnegoconfig",target:"_blank",rel:"noopener noreferrer"},yo=t("Spring Security Kerberos - \u53C2\u8003\u6587\u6863:\u9644\u5F55E."),_o=t("\u4E3A\u5E38\u89C1\u6D4F\u89C8\u5668"),Fo={href:"http://docs.spring.io/autorepo/docs/spring-security-kerberos/1.0.2.BUILD-SNAPSHOT/reference/htmlsingle/#browserspnegoconfig",target:"_blank",rel:"noopener noreferrer"},qo=t("\u914D\u7F6ESPNEGO\u534F\u5546"),xo=t("\u7684\u6D4F\u89C8\u5668\u3002"),No=e("li",null,[e("p",null,"\u67D0\u4E9B\u6D4F\u89C8\u5668(\u4F20\u7EDFIE)\u4E0D\u652F\u6301\u6700\u8FD1\u7684\u52A0\u5BC6\u7B97\u6CD5(\u5982AES)\uFF0C\u5E76\u4E14\u4EC5\u9650\u4E8E\u4F20\u7EDF\u7B97\u6CD5(DES)\u3002\u751F\u6210keytabs\u65F6\u5E94\u6CE8\u610F\u8FD9\u4E00\u70B9\u3002")],-1),Po=t("\u5FC5\u987B\u914D\u7F6EKDC\u5E76\u4E3ANiFi\u5B9A\u4E49\u670D\u52A1\u4E3B\u4F53\u5E76\u5BFC\u51FA\u5BC6\u94A5\u8868\u3002\u6709\u5173Kerberos\u670D\u52A1\u5668\u914D\u7F6E\u548C\u7BA1\u7406\u7684\u7EFC\u5408\u8BF4\u660E\u8D85\u51FA\u4E86\u672C\u6587\u6863\u7684\u8303\u56F4(\u8BF7\u53C2\u9605"),Ao={href:"http://web.mit.edu/kerberos/krb5-current/doc/admin/index.html",target:"_blank",rel:"noopener noreferrer"},So=t("MIT Kerberos\u7BA1\u7406\u5458\u6307\u5357"),To=t(")\uFF0C\u4F46\u793A\u4F8B\u5982\u4E0B:"),wo=o(`<p>\u5728\u670D\u52A1\u5668\u4E0A\u6DFB\u52A0\u670D\u52A1\u4E3B\u4F53<code>nifi.nifi.apache.org</code>\u5E76\u4ECEKDC\u5BFC\u51FAkeytab:</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>root@kdc:/etc/krb5kdc# kadmin.local
Authenticating as principal admin/admin@nifi.APACHE.ORG with password.
kadmin.local:  listprincs
K/M@nifi.APACHE.ORG
admin/admin@nifi.APACHE.ORG
...
kadmin.local:  addprinc -randkey HTTP/nifi.nifi.apache.org
WARNING: no policy specified for HTTP/nifi.nifi.apache.org@nifi.APACHE.ORG; defaulting to no policy
Principal &quot;HTTP/nifi.nifi.apache.org@nifi.APACHE.ORG&quot; created.
kadmin.local:  ktadd -k /http-nifi.keytab HTTP/nifi.nifi.apache.org
Entry for principal HTTP/nifi.nifi.apache.org with kvno 2\uFF0C encryption type des3-cbc-sha1 added to keytab WRFILE:/http-nifi.keytab.
Entry for principal HTTP/nifi.nifi.apache.org with kvno 2\uFF0C encryption type des-cbc-crc added to keytab WRFILE:/http-nifi.keytab.
kadmin.local:  listprincs
HTTP/nifi.nifi.apache.org@nifi.APACHE.ORG
K/M@nifi.APACHE.ORG
admin/admin@nifi.APACHE.ORG
...
kadmin.local: q
root@kdc:~# ll /http*
-rw------- 1 root root 162 Mar 14 21:43 /http-nifi.keytab
root@kdc:~#
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u7CFB\u7EDF\u5C5E\u6027-system-properties" tabindex="-1"><a class="header-anchor" href="#\u7CFB\u7EDF\u5C5E\u6027-system-properties" aria-hidden="true">#</a> \u7CFB\u7EDF\u5C5E\u6027(System Properties)</h2><p><code>conf</code>\u76EE\u5F55\u4E2D\u7684 <em>nifi.properties</em> \u6587\u4EF6\u662F\u7528\u4E8E\u63A7\u5236NiFi\u8FD0\u884C\u65B9\u5F0F\u7684\u4E3B\u8981\u914D\u7F6E\u6587\u4EF6\u3002\u672C\u8282\u6982\u8FF0\u4E86\u6B64\u6587\u4EF6\u4E2D\u7684\u5C5E\u6027\uFF0C\u5E76\u5305\u542B\u6709\u5173\u5982\u4F55\u4EE5\u4FBF\u4E8E\u5347\u7EA7\u7684\u65B9\u5F0F\u5BF9\u5176\u8FDB\u884C\u914D\u7F6E\u7684\u4E00\u4E9B\u6CE8\u610F\u4E8B\u9879\u3002<strong>\u66F4\u6539\u6B64\u6587\u4EF6\u540E\uFF0C\u91CD\u65B0\u542F\u52A8NiFi\u4EE5\u4F7F\u66F4\u6539\u751F\u6548\u3002</strong></p><p><img src="`+a+'" alt="">\u6B64\u6587\u4EF6\u7684\u5185\u5BB9\u76F8\u5BF9\u7A33\u5B9A\uFF0C\u4F46\u4F1A\u4E0D\u65F6\u66F4\u6539\u3002\u5347\u7EA7\u65F6\u67E5\u770B\u6B64\u6587\u4EF6\u59CB\u7EC8\u662F\u4E2A\u597D\u4E3B\u610F\uFF0C\u5E76\u6CE8\u610F\u4EFB\u4F55\u66F4\u6539\u3002\u8003\u8651\u4F7F\u7528\u661F\u53F7(*)\u914D\u7F6E\u4E0B\u9762\u7684\u9879\u76EE\uFF0C\u4EE5\u4FBF\u66F4\u5BB9\u6613\u5347\u7EA7\u3002\u6709\u5173\u8BE6\u7EC6\u4FE1\u606F\uFF0C\u8BF7\u53C2\u9605\u672C\u8282\u672B\u5C3E\u6709\u5173\u5347\u7EA7\u7684\u5B8C\u6574\u8BA8\u8BBA\u3002\u8BF7\u6CE8\u610F\uFF0C\u65F6\u95F4\u6BB5\u548C\u6570\u636E\u5927\u5C0F\u7684\u503C\u5FC5\u987B\u5305\u62EC\u5EA6\u91CF\u5355\u4F4D\uFF0C\u4F8B\u5982&quot;10 secs&quot;\u6216&quot;10 MB&quot;\uFF0C\u800C\u4E0D\u4EC5\u4EC5\u662F&quot;10&quot;\u3002</p><h3 id="\u6838\u5FC3\u5C5E\u6027" tabindex="-1"><a class="header-anchor" href="#\u6838\u5FC3\u5C5E\u6027" aria-hidden="true">#</a> \u6838\u5FC3\u5C5E\u6027</h3><p><em>nifi.properties</em> \u6587\u4EF6\u7684\u7B2C\u4E00\u90E8\u5206\u662F\u6838\u5FC3\u5C5E\u6027\u3002\u8FD9\u4E9B\u5C5E\u6027\u9002\u7528\u4E8E\u6838\u5FC3\u6846\u67B6\u3002</p><table><thead><tr><th><strong>\u5C5E\u6027</strong></th><th><strong>\u63CF\u8FF0</strong></th></tr></thead><tbody><tr><td><code>nifi.flow.configuration.file</code>*</td><td>\u6D41\u914D\u7F6E\u6587\u4EF6\u7684\u4F4D\u7F6E(\u5373\u5305\u542B\u5F53\u524D\u5728NiFi\u56FE\u4E0A\u663E\u793A\u7684\u5185\u5BB9\u7684\u6587\u4EF6)\u3002\u9ED8\u8BA4\u503C\u4E3A<code>./conf/flow.xml.gz</code>\u3002</td></tr><tr><td><code>nifi.flow.configuration.archive.enabled</code>*</td><td>\u6307\u5B9ANiFi\u662F\u5426\u5728\u66F4\u65B0\u6D41\u65F6\u81EA\u52A8\u521B\u5EFA\u6D41\u7684\u5907\u4EFD\u526F\u672C\u3002\u9ED8\u8BA4\u503C\u4E3A<code>true</code>\u3002</td></tr><tr><td><code>nifi.flow.configuration.archive.dir</code>*</td><td>\u5B58\u6863\u76EE\u5F55\u7684\u4F4D\u7F6E\uFF0C\u5176\u4E2D\u4FDD\u5B58\u4E86 <em>flow.xml</em> \u7684\u5907\u4EFD\u526F\u672C\u3002\u9ED8\u8BA4\u503C\u4E3A<code>./conf/archive</code>\u3002NiFi\u6839\u636E\u5F52\u6863\u6587\u4EF6\u7684\u751F\u547D\u5468\u671F\uFF0C\u603B\u5927\u5C0F\u548C\u6587\u4EF6\u6570\u5220\u9664\u65E7\u7684\u5B58\u6863\u6587\u4EF6\uFF0C\u4EE5\u9650\u5236\u78C1\u76D8\u4F7F\u7528\u3002\u5206\u522B\u4F7F\u7528<code>nifi.flow.configuration.archive.max.time</code>\uFF0C<code>max.storage</code>\u548C<code>max.count</code>\u5C5E\u6027\u6307\u5B9A\u751F\u547D\u5468\u671F\uFF0C\u603B\u5927\u5C0F\u548C\u6587\u4EF6\u6570\u3002\u5982\u679C\u672A\u6307\u5B9A\u5F52\u6863\u7684\u8FD9\u4E9B\u9650\u5236\uFF0C\u5219NiFi\u4F7F\u7528\u9ED8\u8BA4\u6761\u4EF6\uFF0C\u5373<code>30 days</code>max.time\u548C<code>500 MB</code>max.storage\u3002\u6B64\u6E05\u7406\u673A\u5236\u4EC5\u8003\u8651\u81EA\u52A8\u521B\u5EFA\u7684\u5F52\u6863 <em>flow.xml</em> \u6587\u4EF6\u3002\u5982\u679C\u6B64\u5B58\u6863\u76EE\u5F55\u4E2D\u6709\u5176\u4ED6\u6587\u4EF6\u6216\u76EE\u5F55\uFF0CNiFi\u5C06\u5FFD\u7565\u5B83\u4EEC\u3002\u81EA\u52A8\u521B\u5EFA\u7684\u5B58\u6863\u5177\u6709\u5E26ISO 8601\u683C\u5F0F\u65F6\u95F4\u6233\u524D\u7F00\u7684\u6587\u4EF6\u540D\uFF0C\u540E\u8DDF<code>&lt;original-filename&gt;</code>\u3002\u5373<code>&lt;year&gt;&lt;month&gt;&lt;day&gt;T&lt;hour&gt;&lt;minute&gt;&lt;second&gt;+&lt;timezone offset&gt;_&lt;original filename&gt;</code>\u3002\u4F8B\u5982\uFF0C<code>20160706T160719+0900_flow.xml.gz</code>\u3002NiFi\u5728\u6E05\u7406\u5B58\u6863\u76EE\u5F55\u65F6\u4F1A\u68C0\u67E5\u6587\u4EF6\u540D\u3002\u5982\u679C\u4F60\u60F3\u5728\u6B64\u76EE\u5F55\u4E2D\u4FDD\u7559\u7279\u5B9A\u5B58\u6863\u800C\u4E0D\u5FC5\u62C5\u5FC3NiFi\u5220\u9664\u5B83\uFF0C\u4F60\u53EF\u4EE5\u901A\u8FC7\u4F7F\u7528\u4E0D\u540C\u7684\u6587\u4EF6\u540D\u6A21\u5F0F\u590D\u5236\u5B83\u3002</td></tr><tr><td><code>nifi.flow.configuration.archive.max.time</code>*</td><td>\u5F52\u6863\u7684_flow.xml_\u6587\u4EF6\u7684\u751F\u547D\u5468\u671F\u3002\u5982\u679C\u6307\u5B9A\u4E86\u6B64\u5C5E\u6027\uFF0CNiFi\u5C06\u5728\u66F4\u65B0 <em>flow.xml</em> \u65F6\u5220\u9664\u8FC7\u671F\u7684\u5F52\u6863\u6587\u4EF6\u3002\u5230\u671F\u65F6\u95F4\u53D6\u51B3\u4E8E\u5F53\u524D\u7CFB\u7EDF\u65F6\u95F4\u548C\u5DF2\u5F52\u6863 <em>flow.xml</em> \u7684\u4E0A\u6B21\u4FEE\u6539\u65F6\u95F4\u6233\u3002\u5982\u679C\u5728 <em>nifi.properties</em> \u4E2D\u672A\u6307\u5B9A\u5B58\u6863\u9650\u5236\uFF0C\u5219NiFi\u5C06\u5220\u9664\u65E9\u4E8E<code>30 days</code>\u7684\u5B58\u6863\u3002</td></tr><tr><td><code>nifi.flow.configuration.archive.max.storage</code>*</td><td>\u5B58\u6863\u7684 <em>flow.xml</em> \u6587\u4EF6\u5141\u8BB8\u7684\u603B\u6570\u636E\u5927\u5C0F\u3002\u5982\u679C\u6307\u5B9A\u4E86\u6B64\u5C5E\u6027\uFF0CNiFi\u5C06\u5220\u9664\u6700\u65E9\u7684\u5F52\u6863\u6587\u4EF6\uFF0C\u76F4\u5230\u603B\u5F52\u6863\u6587\u4EF6\u5927\u5C0F\u5C0F\u4E8E\u6B64\u914D\u7F6E\u503C\u3002\u5982\u679C\u5728 <em>nifi.properties</em> \u4E2D\u672A\u6307\u5B9A\u5B58\u6863\u9650\u5236\uFF0C\u5219NiFi\u4F1A\u4F7F\u7528<code>500 MB</code>\u6B64\u9650\u5236\u3002</td></tr><tr><td><code>nifi.flow.configuration.archive.max.count</code>*</td><td>\u5141\u8BB8\u7684\u5F52\u6863\u6587\u4EF6\u6570\u3002\u5982\u679C\u6307\u5B9A\u4E86\u6B64\u5C5E\u6027\uFF0CNiFi\u5C06\u5220\u9664\u6700\u65E7\u7684\u5B58\u6863\u6587\u4EF6\uFF0C\u4EE5\u4FBF\u53EA\u4FDD\u7559N\u4E2A\u6700\u65B0\u5B58\u6863\u3002</td></tr><tr><td><code>nifi.flowcontroller.autoResumeState</code></td><td>\u6307\u793A\u91CD\u65B0\u542F\u52A8\u65F6NiFi\u4E0A\u7684\u7EC4\u4EF6\u662F\u5426\u5E94\u8FD4\u56DE\u91CD\u542F\u4E4B\u524D\u7684\u72B6\u6001\u3002\u9ED8\u8BA4\u503C\u4E3A<code>true</code>\u3002</td></tr><tr><td><code>nifi.flowcontroller.graceful.shutdown.period</code></td><td>\u8868\u793A\u5173\u673A\u65F6\u95F4\u3002\u9ED8\u8BA4\u503C\u4E3A<code>10 secs</code>\u3002</td></tr><tr><td><code>nifi.flowservice.writedelay.interval</code></td><td>\u5F53\u5BF9 <em>flow.xml</em> \u8FDB\u884C\u8BB8\u591A\u66F4\u6539\u65F6\uFF0C\u6B64\u5C5E\u6027\u6307\u5B9A\u5728\u5199\u51FA\u66F4\u6539\u4E4B\u524D\u7B49\u5F85\u7684\u65F6\u95F4\uFF0C\u4EE5\u4FBF\u6279\u91CF\u5199\u5165\u3002\u9ED8\u8BA4\u503C\u4E3A<code>500 ms</code>\u3002</td></tr><tr><td><code>nifi.administrative.yield.duration</code></td><td>\u5982\u679C\u4E00\u4E2A\u7EC4\u4EF6\u5141\u8BB8\u4E00\u4E2A\u610F\u5916\u7684\u5F02\u5E38\u88AB\u8F6C\u4E49\uFF0C\u90A3\u4E48\u5B83\u5C31\u88AB\u8BA4\u4E3A\u662F\u4E00\u4E2Abug\u3002\u56E0\u6B64\uFF0C\u6846\u67B6\u5C06\u6682\u505C(\u6216\u5728\u7BA1\u7406\u4E0A\u653E\u5F03)\u7EC4\u4EF6\u8FD9\u6BB5\u65F6\u95F4\u3002\u8FD9\u6837\u505A\u662F\u4E3A\u4E86\u4F7F\u7EC4\u4EF6\u4E0D\u4F1A\u56E0\u4E3A\u5DF2\u77E5\u5728\u73B0\u6709\u72B6\u6001\u4E0B\u5B58\u5728\u7684\u95EE\u9898\u800C\u6D88\u8017\u5927\u91CF\u7684\u7CFB\u7EDF\u8D44\u6E90\u3002\u9ED8\u8BA4\u503C\u4E3A<code>30 secs</code>\u3002</td></tr><tr><td><code>nifi.bored.yield.duration</code></td><td>\u5F53\u4E00\u4E2A\u7EC4\u4EF6\u6CA1\u6709\u5DE5\u4F5C\u8981\u505A(\u5373\u65E0\u804A)\u65F6\uFF0C\u8FD9\u662F\u5B83\u5728\u68C0\u67E5\u662F\u5426\u6709\u65B0\u6570\u636E\u8981\u5DE5\u4F5C\u4E4B\u524D\u7B49\u5F85\u7684\u65F6\u95F4\u3002\u8FD9\u6837\uFF0C\u5B83\u4E0D\u4F1A\u8FC7\u591A\u5730\u68C0\u67E5\u65B0\u5DE5\u4F5C\u800C\u8017\u5C3DCPU\u8D44\u6E90\u3002\u8BBE\u7F6E\u6B64\u5C5E\u6027\u65F6\uFF0C\u8BF7\u6CE8\u610F\u5B83\u53EF\u80FD\u4F1A\u4E3A\u4E0D\u7ECF\u5E38\u5DE5\u4F5C\u7684\u7EC4\u4EF6\u6DFB\u52A0\u989D\u5916\u7684\u5EF6\u8FDF\uFF0C\u56E0\u4E3A\u4E00\u65E6\u8FDB\u5165\u8FD9\u79CD\u65E0\u804A\u72B6\u6001\uFF0C\u4ED6\u4EEC\u5C06\u7B49\u5F85\u8FD9\u6BB5\u65F6\u95F4\u540E\u518D\u68C0\u67E5\u66F4\u591A\u5DE5\u4F5C\u3002\u9ED8\u8BA4\u503C\u4E3A<code>10 ms</code>\u3002</td></tr><tr><td><code>nifi.queue.backpressure.count</code></td><td>\u5728\u4E24\u4E2A\u7EC4\u4EF6\u4E4B\u95F4\u7ED8\u5236\u65B0\u8FDE\u63A5\u65F6\uFF0C\u8FD9\u662F\u8BE5\u8FDE\u63A5\u7684\u80CC\u538B\u5BF9\u8C61\u9608\u503C\u7684\u9ED8\u8BA4\u503C\u3002\u9ED8\u8BA4\u503C\u4E3A<code>10000</code>\uFF0C\u4E14\u503C\u5FC5\u987B\u4E3A\u6574\u6570\u3002</td></tr><tr><td><code>nifi.queue.backpressure.size</code></td><td>\u5728\u4E24\u4E2A\u7EC4\u4EF6\u4E4B\u95F4\u7ED8\u5236\u65B0\u8FDE\u63A5\u65F6\uFF0C\u8FD9\u662F\u8BE5\u8FDE\u63A5\u7684\u80CC\u538B\u6570\u636E\u5927\u5C0F\u9608\u503C\u7684\u9ED8\u8BA4\u503C\u3002\u9ED8\u8BA4\u503C\u4E3A<code>1 GB</code>\uFF0C\u503C\u5FC5\u987B\u662F\u5305\u542B\u5EA6\u91CF\u5355\u4F4D\u7684\u6570\u636E\u5927\u5C0F\u3002</td></tr><tr><td><code>nifi.authorizer.configuration.file</code>*</td><td>\u8FD9\u662F\u6307\u5B9A\u5982\u4F55\u5B9A\u4E49\u6388\u6743\u7A0B\u5E8F\u7684\u6587\u4EF6\u7684\u4F4D\u7F6E\u3002\u9ED8\u8BA4\u503C\u4E3A<code>./conf/authorizers.xml</code>\u3002</td></tr><tr><td><code>nifi.login.identity.provider.configuration.file</code>*</td><td>\u8FD9\u662F\u6307\u5B9A\u5982\u4F55\u6267\u884C\u7528\u6237\u540D/\u5BC6\u7801\u8EAB\u4EFD\u9A8C\u8BC1\u7684\u6587\u4EF6\u7684\u4F4D\u7F6E\u3002\u4EC5\u5728<code>nifi.security.user.login.identity.provider</code>\u914D\u7F6E\u4E86\u63D0\u4F9B\u8005\u6807\u8BC6\u7B26\u65F6\u624D\u8003\u8651\u6B64\u6587\u4EF6\u3002\u9ED8\u8BA4\u503C\u4E3A<code>./conf/login-identity-providers.xml</code>\u3002</td></tr><tr><td><code>nifi.templates.directory</code>*</td><td>\u8FD9\u662F\u4FDD\u5B58\u6D41\u6A21\u677F\u7684\u76EE\u5F55\u7684\u4F4D\u7F6E(\u4EC5\u7528\u4E8E\u5411\u540E\u517C\u5BB9)\u3002\u6A21\u677F\u5B58\u50A8\u5728 <em>flow.xml.gz</em> \u4E2D\uFF0C\u4ECENiFi 1.0\u5F00\u59CB\u3002\u6A21\u677F\u76EE\u5F55\u53EF\u7528\u4E8E\u5728NiFi\u542F\u52A8\u65F6\u81EA\u52A8(\u6279\u91CF)\u5C06\u6A21\u677F\u5BFC\u5165\u5230 <em>flow.xml.gz</em> \u4E2D\u3002\u9ED8\u8BA4\u503C\u4E3A<code>./conf/templates</code>\u3002</td></tr><tr><td><code>nifi.ui.banner.text</code></td><td>\u8FD9\u662F\u6A2A\u5E45\u6587\u672C\uFF0C\u53EF\u914D\u7F6E\u4E3A\u663E\u793A\u5728\u7528\u6237\u754C\u9762\u7684\u9876\u90E8\u3002\u9ED8\u8BA4\u4E3A\u7A7A\u767D\u3002</td></tr><tr><td><code>nifi.ui.autorefresh.interval</code></td><td>\u7528\u6237\u754C\u9762\u81EA\u52A8\u5237\u65B0\u7684\u65F6\u95F4\u95F4\u9694\u3002\u9ED8\u8BA4\u503C\u4E3A<code>30 secs</code>\u3002</td></tr><tr><td><code>nifi.nar.library.directory</code></td><td>nar\u5E93\u7684\u4F4D\u7F6E\u3002\u9ED8\u8BA4\u503C\u662F<code>./lib</code>\uFF0C\u53EF\u4FDD\u6301\u539F\u6837\u3002<strong>\u6CE8\u610F</strong>\uFF1A\u53EF\u4EE5\u4F7F\u7528<code>nifi.nar.library.directory.</code>\u5E26\u6709\u552F\u4E00\u540E\u7F00\u7684\u524D\u7F00\u548C\u5355\u72EC\u7684\u8DEF\u5F84\u4F5C\u4E3A\u503C\u6765\u6307\u5B9A\u5176\u4ED6\u5E93\u76EE\u5F55\u3002\u4F8B\u5982\uFF0C\u8981\u63D0\u4F9B\u4E24\u4E2A\u989D\u5916\u7684\u5E93\u4F4D\u7F6E\uFF0C\u7528\u6237\u8FD8\u53EF\u4EE5\u4F7F\u7528\u4EE5\u4E0B\u952E\u6307\u5B9A\u5176\u4ED6\u5C5E\u6027\uFF1A<code>nifi.nar.library.directory.lib1=/nars/lib1``nifi.nar.library.directory.lib2=/nars/lib2</code> \u63D0\u4F9B\u4E09\u4E2A\u603B\u4F4D\u7F6E\uFF0C\u5305\u62EC <code>nifi.nar.library.directory</code>\u3002</td></tr><tr><td><code>nifi.nar.working.directory</code></td><td>nar\u5DE5\u4F5C\u76EE\u5F55\u7684\u4F4D\u7F6E\u3002\u9ED8\u8BA4\u503C\u662F<code>./work/nar</code>\uFF0C\u53EF\u4FDD\u6301\u539F\u6837\u3002</td></tr><tr><td><code>nifi.documentation.working.directory</code></td><td>\u6587\u6863\u5DE5\u4F5C\u76EE\u5F55\u3002\u9ED8\u8BA4\u503C\u662F<code>./work/docs/components</code>\uFF0C\u53EF\u4FDD\u6301\u539F\u6837\u3002</td></tr><tr><td><code>nifi.processor.scheduling.timeout</code></td><td>\u5728\u8C03\u7528\u5176\u4ED6\u751F\u547D\u5468\u671F\u64CD\u4F5C(\u4F8B\u5982\uFF0Cstop)\u4E4B\u524D\uFF0C\u7B49\u5F85\u5904\u7406\u5668\u7684\u751F\u547D\u5468\u671F\u64CD\u4F5C(@OnScheduled\u548C@OnUnscheduled)\u5B8C\u6210\u7684\u65F6\u95F4\u3002\u9ED8\u8BA4\u503C\u662F1\u5206\u949F\u3002</td></tr></tbody></table><h3 id="state\u7BA1\u7406-1" tabindex="-1"><a class="header-anchor" href="#state\u7BA1\u7406-1" aria-hidden="true">#</a> State\u7BA1\u7406</h3><p>&quot;\u5C5E\u6027&quot;\u6587\u4EF6\u7684&quot;\u72B6\u6001\u7BA1\u7406&quot;\u90E8\u5206\u63D0\u4F9B\u4E86\u4E00\u79CD\u673A\u5236\uFF0C\u7528\u4E8E\u914D\u7F6E\u7EC4\u4EF6\u7684\u672C\u5730\u548C\u96C6\u7FA4\u8303\u56F4\u673A\u5236\u4EE5\u4FDD\u6301\u72B6\u6001\u3002\u6709\u5173\u5982\u4F55\u4F7F\u7528\u5B83\u7684\u66F4\u591A\u4FE1\u606F\uFF0C\u8BF7\u53C2\u89C1<a href="#State%E7%AE%A1%E7%90%86">\u72B6\u6001\u7BA1\u7406</a>\u90E8\u5206\u3002</p><table><thead><tr><th><strong>\u5C5E\u6027</strong></th><th><strong>\u63CF\u8FF0</strong></th></tr></thead><tbody><tr><td><code>nifi.state.management.configuration.file</code></td><td>\u5305\u542B\u672C\u5730\u548C\u96C6\u7FA4\u8303\u56F4\u7684\u72B6\u6001\u63D0\u4F9B\u7A0B\u5E8F\u7684\u914D\u7F6E\u7684XML\u6587\u4EF6\u3002\u9ED8\u8BA4\u503C\u4E3A<code>./conf/state-management.xml</code>\u3002</td></tr><tr><td><code>nifi.state.management.provider.local</code></td><td>\u8981\u4F7F\u7528\u7684\u672C\u5730\u72B6\u6001\u63D0\u4F9B\u7A0B\u5E8F\u7684ID\u3002\u6B64\u503C\u5FC5\u987B\u4E0E <em>state-management.xml</em> \u6587\u4EF6\u4E2D\u67D0\u4E2A<code>local-provider</code>\u5143\u7D20\u7684<code>id</code>\u503C\u5339\u914D\u3002</td></tr><tr><td><code>nifi.state.management.provider.cluster</code></td><td>\u8981\u4F7F\u7528\u7684\u96C6\u7FA4\u72B6\u6001\u63D0\u4F9B\u7A0B\u5E8F\u7684ID\u3002\u6B64\u503C\u5FC5\u987B\u4E0E <em>state-management.xml</em> \u6587\u4EF6\u4E2D\u67D0\u4E2A<code>cluster-provider</code>\u5143\u7D20\u7684<code>id</code>\u503C\u5339\u914D\u3002\u5982\u679C\u4E0D\u662F\u96C6\u7FA4\uFF0C\u5219\u5FFD\u7565\u6B64\u503C\uFF0C\u4F46\u96C6\u7FA4\u4E2D\u7684\u8282\u70B9\u9700\u8981\u6B64\u503C\u3002</td></tr><tr><td><code>nifi.state.management.embedded.zookeeper.start</code></td><td>\u6307\u5B9A\u6B64NiFi\u5B9E\u4F8B\u662F\u5426\u5E94\u542F\u52A8\u5D4C\u5165\u5F0FZooKeeper\u670D\u52A1\u5668\u3002\u5B83\u4E0EZooKeeperStateProvider\u4E00\u8D77\u4F7F\u7528\u3002</td></tr><tr><td><code>nifi.state.management.embedded.zookeeper.properties</code></td><td>\u6307\u5B9A\u4E00\u4E2A\u5C5E\u6027\u6587\u4EF6\uFF0C\u5176\u4E2D\u5305\u542B\u5DF2\u542F\u52A8\u7684\u5D4C\u5165\u5F0FZooKeeper\u670D\u52A1\u5668\u7684\u914D\u7F6E(\u5982\u679C\u8BE5<code>nifi.state.management.embedded.zookeeper.start</code>\u5C5E\u6027\u8BBE\u7F6E\u4E3A<code>true</code>)</td></tr></tbody></table><h3 id="h2\u8BBE\u7F6E" tabindex="-1"><a class="header-anchor" href="#h2\u8BBE\u7F6E" aria-hidden="true">#</a> H2\u8BBE\u7F6E</h3><p>H2\u8BBE\u7F6E\u90E8\u5206\u5B9A\u4E49\u4E86H2\u6570\u636E\u5E93\u7684\u8BBE\u7F6E\uFF0C\u8BE5\u6570\u636E\u5E93\u8DDF\u8E2A\u7528\u6237\u8BBF\u95EE\u548C\u6D41\u63A7\u5236\u5668\u5386\u53F2\u8BB0\u5F55\u3002</p><table><thead><tr><th><strong>\u5C5E\u6027</strong></th><th><strong>\u63CF\u8FF0</strong></th></tr></thead><tbody><tr><td><code>nifi.database.directory</code>*</td><td>H2\u6570\u636E\u5E93\u76EE\u5F55\u7684\u4F4D\u7F6E\u3002\u9ED8\u8BA4\u503C\u4E3A<code>./database_repository</code>\u3002</td></tr><tr><td><code>nifi.h2.url.append</code></td><td>\u6B64\u5C5E\u6027\u6307\u5B9A\u8981\u6DFB\u52A0\u5230H2\u6570\u636E\u5E93\u7684\u8FDE\u63A5\u5B57\u7B26\u4E32\u7684\u5176\u4ED6\u53C2\u6570\u3002\u5E94\u4F7F\u7528\u9ED8\u8BA4\u503C\uFF0C\u4E0D\u5E94\u66F4\u6539\u3002\u5B83\u662F\uFF1A<code>;LOCK_TIMEOUT=25000;WRITE_DELAY=0;AUTO_SERVER=FALSE</code>\u3002</td></tr></tbody></table><h3 id="flowfile\u5B58\u50A8\u5E93" tabindex="-1"><a class="header-anchor" href="#flowfile\u5B58\u50A8\u5E93" aria-hidden="true">#</a> FlowFile\u5B58\u50A8\u5E93</h3><p>FlowFile\u5B58\u50A8\u5E93\u8DDF\u8E2A\u7CFB\u7EDF\u4E2D\u6BCF\u4E2AFlowFile\u7684\u5C5E\u6027\u548C\u5F53\u524D\u72B6\u6001\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u6B64\u5B58\u50A8\u5E93\u5B89\u88C5\u5728\u4E0E\u6240\u6709\u5176\u4ED6\u5B58\u50A8\u5E93\u76F8\u540C\u7684\u6839\u5B89\u88C5\u76EE\u5F55\u4E2D; \u4F46\u662F\uFF0C\u5982\u679C\u53EF\u4EE5\u7684\u8BDD\uFF0C\u5EFA\u8BAE\u914D\u7F6E\u5728\u5355\u72EC\u7684\u78C1\u76D8\u6302\u8F7D\u4E0A\u3002</p><table><thead><tr><th><strong>\u5C5E\u6027</strong></th><th><strong>\u63CF\u8FF0</strong></th></tr></thead><tbody><tr><td><code>nifi.flowfile.repository.implementation</code></td><td>FlowFile Repository\u5B9E\u73B0\u3002\u9ED8\u8BA4\u503C\u4E3A<code>org.apache.nifi.controller.repository.WriteAheadFlowFileRepository</code>\u5E94\u8BE5\u8C28\u614E\u66F4\u6539\u3002\u8981\u5C06\u6D41\u6587\u4EF6\u5B58\u50A8\u5728\u5185\u5B58\u800C\u4E0D\u662F\u78C1\u76D8\u4E0A(\u5728\u7535\u6E90/\u673A\u5668\u6545\u969C\u6216\u91CD\u65B0\u542F\u52A8NiFi\u65F6\u63A5\u53D7\u6570\u636E\u4E22\u5931)\uFF0C\u8BF7\u5C06\u6B64\u5C5E\u6027\u8BBE\u7F6E\u4E3A<code>org.apache.nifi.controller.repository.VolatileFlowFileRepository</code>\u3002</td></tr><tr><td><code>nifi.flowfile.repository.wal.implementation</code></td><td>\u5982\u679C\u5B58\u50A8\u5E93\u5B9E\u73B0\u914D\u7F6E\u4E3A\u4F7F\u7528<code>WriteAheadFlowFileRepository</code>\uFF0C\u5219\u53EF\u4EE5\u4F7F\u7528\u6B64\u5C5E\u6027\u6307\u5B9A\u5E94\u4F7F\u7528Write-Ahead Log\u7684\u54EA\u4E2A\u5B9E\u73B0\u3002\u9ED8\u8BA4\u503C\u4E3A<code>org.apache.nifi.wali.SequentialAccessWriteAheadLog</code>\u3002\u6B64\u7248\u672C\u7684\u9884\u5199\u65E5\u5FD7\u662F\u5728Apache NiFi\u76841.6.0\u7248\u672C\u4E2D\u6DFB\u52A0\u7684\uFF0C\u5E76\u4E14\u662F\u4E3A\u4E86\u89E3\u51B3\u65E7\u5B9E\u73B0\u4E2D\u5B58\u5728\u7684\u95EE\u9898\u800C\u5F00\u53D1\u7684\u3002\u5728\u65AD\u7535\u6216\u64CD\u4F5C\u7CFB\u7EDF\u5D29\u6E83\u7684\u60C5\u51B5\u4E0B\uFF0C\u65E7\u7684\u5B9E\u73B0\u5F88\u5BB9\u6613\u9519\u8BEF\u5730\u6062\u590DFlowFiles\u3002\u5728\u65AD\u7535\u6216\u64CD\u4F5C\u7CFB\u7EDF\u5D29\u6E83\u540E\uFF0C\u8FD9\u53EF\u80FD\u4F1A\u5BFC\u81F4\u5728\u91CD\u65B0\u542F\u52A8\u65F6\u5C06\u9519\u8BEF\u7684\u5C5E\u6027\u6216\u5185\u5BB9\u5206\u914D\u7ED9FlowFile\u3002\u4F46\u662F\uFF0C\u5982\u679C\u9700\u8981\uFF0C\u4ECD\u7136\u53EF\u4EE5\u9009\u62E9\u9009\u62E9\u4F7F\u7528\u5148\u524D\u7684\u5B9E\u73B0\u5E76\u63A5\u53D7\u8BE5\u98CE\u9669(\u4F8B\u5982\uFF0C\u5982\u679C\u65B0\u5B9E\u73B0\u4F1A\u51FA\u73B0\u4E00\u4E9B\u610F\u5916\u9519\u8BEF)\u3002\u4E3A\u6B64\uFF0C\u8BF7\u5C06\u6B64\u5C5E\u6027\u7684\u503C\u8BBE\u7F6E\u4E3A<code>org.wali.MinimalLockingWriteAheadLog</code>\u3002\u5982\u679C\u66F4\u6539\u4E86\u6B64\u5C5E\u6027\u7684\u503C\uFF0C\u5219\u5728\u91CD\u65B0\u542F\u52A8\u65F6\uFF0CNiFi\u4ECD\u5C06\u6062\u590D\u4F7F\u7528\u5148\u524D\u914D\u7F6E\u7684\u5B58\u50A8\u5E93\u5199\u5165\u7684\u8BB0\u5F55\uFF0C\u5E76\u5220\u9664\u5148\u524D\u914D\u7F6E\u7684\u5B9E\u73B0\u6240\u5199\u7684\u6587\u4EF6\u3002</td></tr><tr><td><code>nifi.flowfile.repository.directory</code>*</td><td>FlowFile\u5B58\u50A8\u5E93\u7684\u4F4D\u7F6E\u3002\u9ED8\u8BA4\u503C\u4E3A<code>./flowfile_repository</code>\u3002</td></tr><tr><td><code>nifi.flowfile.repository.partitions</code></td><td>\u5206\u533A\u6570\u91CF\u3002\u9ED8\u8BA4\u503C\u4E3A<code>256</code>\u3002</td></tr><tr><td><code>nifi.flowfile.repository.checkpoint.interval</code></td><td>FlowFile\u5B58\u50A8\u5E93\u68C0\u67E5\u70B9\u95F4\u9694\u65F6\u95F4\u3002\u9ED8\u8BA4\u503C\u4E3A<code>2 mins</code>\u3002</td></tr><tr><td><code>nifi.flowfile.repository.always.sync</code></td><td>\u5982\u679C\u8BBE\u7F6E\u4E3A<code>true</code>\uFF0C\u5219\u5BF9\u5B58\u50A8\u5E93\u7684\u4EFB\u4F55\u66F4\u6539\u90FD\u5C06\u540C\u6B65\u5230\u78C1\u76D8\uFF0C\u8FD9\u610F\u5473\u7740NiFi\u5C06\u8981\u6C42\u64CD\u4F5C\u7CFB\u7EDF\u4E0D\u8981\u7F13\u5B58\u4FE1\u606F\u3002\u8FD9\u975E\u5E38\u6602\u8D35\u5E76\u4E14\u53EF\u4EE5\u663E\u7740\u964D\u4F4ENiFi\u6027\u80FD\u3002\u4F46\u662F\uFF0C\u5982\u679C\u662F<code>false</code>\uFF0C\u5982\u679C\u7A81\u7136\u65AD\u7535\u6216\u64CD\u4F5C\u7CFB\u7EDF\u5D29\u6E83\uFF0C\u53EF\u80FD\u4F1A\u6709\u6570\u636E\u4E22\u5931\u7684\u53EF\u80FD\u6027\u3002\u9ED8\u8BA4\u503C\u4E3A<code>false</code>\u3002</td></tr></tbody></table><h3 id="\u4EA4\u6362\u7BA1\u7406-swap-management" tabindex="-1"><a class="header-anchor" href="#\u4EA4\u6362\u7BA1\u7406-swap-management" aria-hidden="true">#</a> \u4EA4\u6362\u7BA1\u7406(Swap Management)</h3><p>NiFi\u5C06FlowFile\u4FE1\u606F\u4FDD\u5B58\u5728\u5185\u5B58(JVM)\u4E2D\uFF0C\u4F46\u5728\u4F20\u5165\u6570\u636E\u6FC0\u589E\u671F\u95F4\uFF0CFlowFile\u6D41\u6587\u4EF6\u4FE1\u606F\u53EF\u80FD\u5F00\u59CB\u5360\u7528\u5927\u91CFJVM\u7A7A\u95F4\uFF0C\u4ECE\u800C\u5F71\u54CD\u7CFB\u7EDF\u6027\u80FD\u3002\u4E3A\u4E86\u62B5\u6D88\u8FD9\u79CD\u5F71\u54CD\uFF0CNiFi\u4E34\u65F6\u5C06\u6D41\u6587\u4EF6\u4FE1\u606F\u4EA4\u6362\u5230\u78C1\u76D8\uFF0C\u76F4\u5230\u66F4\u591A\u7684JVM\u7A7A\u95F4\u518D\u6B21\u53EF\u7528\u3002\u8FD9\u4E9B\u5C5E\u6027\u51B3\u5B9A\u4E86\u8FD9\u4E2A\u8FC7\u7A0B\u662F\u5982\u4F55\u53D1\u751F\u7684\u3002</p><table><thead><tr><th><strong>\u5C5E\u6027</strong></th><th><strong>\u63CF\u8FF0</strong></th></tr></thead><tbody><tr><td><code>nifi.swap.manager.implementation</code></td><td>Swap Manager\u5B9E\u73B0\u3002\u9ED8\u8BA4\u503C\u662F<code>org.apache.nifi.controller.FileSystemSwapManager</code>\u4E14\u4E0D\u5E94\u66F4\u6539\u3002</td></tr><tr><td><code>nifi.queue.swap.threshold</code></td><td>NiFi\u5F00\u59CB\u5C06FlowFile\u4FE1\u606F\u4EA4\u6362\u5230\u78C1\u76D8\u7684\u961F\u5217\u9608\u503C\u3002\u9ED8\u8BA4\u503C\u4E3A<code>20000</code>\u3002</td></tr><tr><td><code>nifi.swap.in.period</code></td><td>\u4EA4\u6362\u671F\u95F4\u3002\u9ED8\u8BA4\u503C\u4E3A<code>5 sec</code>\u3002</td></tr><tr><td><code>nifi.swap.in.threads</code></td><td>\u7528\u4E8E\u4EA4\u6362\u7684\u7EBF\u7A0B\u6570\u3002\u9ED8\u8BA4\u503C\u4E3A<code>1</code>\u3002</td></tr><tr><td><code>nifi.swap.out.period</code></td><td>\u6362\u51FA\u671F\u95F4\u3002\u9ED8\u8BA4\u503C\u4E3A<code>5 sec</code>\u3002</td></tr><tr><td><code>nifi.swap.out.threads</code></td><td>\u7528\u4E8E\u4EA4\u6362\u7684\u7EBF\u7A0B\u6570\u3002\u9ED8\u8BA4\u503C\u4E3A<code>4</code>\u3002</td></tr></tbody></table><h3 id="\u5185\u5BB9\u5B58\u50A8\u5E93-content-repository" tabindex="-1"><a class="header-anchor" href="#\u5185\u5BB9\u5B58\u50A8\u5E93-content-repository" aria-hidden="true">#</a> \u5185\u5BB9\u5B58\u50A8\u5E93 (Content Repository)</h3><p>\u5185\u5BB9\u5B58\u50A8\u5E93\u4FDD\u5B58\u7CFB\u7EDF\u4E2D\u6240\u6709FlowFiles\u7684\u5185\u5BB9\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u5B83\u4E0E\u6240\u6709\u5176\u4ED6\u5B58\u50A8\u5E93\u5B89\u88C5\u5728\u540C\u4E00\u6839\u5B89\u88C5\u76EE\u5F55\u4E2D; \u4F46\u662F\uFF0C\u7BA1\u7406\u5458\u53EF\u80FD\u5E0C\u671B\u628A\u5B83\u914D\u7F6E\u5230\u5355\u72EC\u7684\u78C1\u76D8\u6302\u8F7D(\u5982\u679C\u53EF\u4EE5\u7684\u8BDD)\u3002\u5982\u679C\u6CA1\u6709\u522B\u7684\uFF0C\u6700\u597D\u662F\u5185\u5BB9\u5B58\u50A8\u5E93\u4E0EFlowFile\u5B58\u50A8\u5E93\u76EE\u5F55\u4E0D\u5728\u540C\u4E00\u4E2A\u6302\u8F7D\u4E0B\u3002\u5728\u5904\u7406\u5927\u91CF\u6570\u636E\u7684\u6570\u636E\u6D41\u4E2D\uFF0C\u5185\u5BB9\u5B58\u50A8\u5E93\u53EF\u80FD\u4F1A\u586B\u6EE1\u78C1\u76D8\uFF0C\u800CFlowFile\u5B58\u50A8\u5E93(\u5982\u679C\u4E5F\u5728\u8BE5\u78C1\u76D8\u4E0A)\u53EF\u80FD\u4F1A\u635F\u574F\u3002\u8981\u907F\u514D\u8FD9\u79CD\u60C5\u51B5\uFF0C\u8BF7\u5728\u4E0D\u540C\u7684\u6302\u8F7D\u4E0B\u914D\u7F6E\u8FD9\u4E9B\u5B58\u50A8\u5E93\u3002</p><table><thead><tr><th><strong>\u5C5E\u6027</strong></th><th><strong>\u63CF\u8FF0</strong></th></tr></thead><tbody><tr><td><code>nifi.content.repository.implementation</code></td><td>\u5185\u5BB9\u5B58\u50A8\u5E93\u5B9E\u73B0\u3002\u9ED8\u8BA4\u503C\u4E3A<code>org.apache.nifi.controller.repository.FileSystemRepository</code>\u4E14\u5E94\u8BE5\u8C28\u614E\u66F4\u6539\u3002\u8981\u5C06\u6D41\u6587\u4EF6\u5185\u5BB9\u5B58\u50A8\u5728\u5185\u5B58\u800C\u4E0D\u662F\u78C1\u76D8\u4E0A(\u5728\u7535\u6E90/\u673A\u5668\u53D1\u751F\u6545\u969C\u65F6\u5B58\u5728\u6570\u636E\u4E22\u5931\u7684\u98CE\u9669)\uFF0C\u8BF7\u5C06\u6B64\u5C5E\u6027\u8BBE\u7F6E\u4E3A<code>org.apache.nifi.controller.repository.VolatileContentRepository</code>\u3002</td></tr></tbody></table><h3 id="\u6587\u4EF6\u7CFB\u7EDF\u5185\u5BB9\u5B58\u50A8\u5E93\u5C5E\u6027-file-system-content-repository-properties" tabindex="-1"><a class="header-anchor" href="#\u6587\u4EF6\u7CFB\u7EDF\u5185\u5BB9\u5B58\u50A8\u5E93\u5C5E\u6027-file-system-content-repository-properties" aria-hidden="true">#</a> \u6587\u4EF6\u7CFB\u7EDF\u5185\u5BB9\u5B58\u50A8\u5E93\u5C5E\u6027 (File System Content Repository Properties)</h3><table><thead><tr><th><strong>\u5C5E\u6027</strong></th><th><strong>\u63CF\u8FF0</strong></th></tr></thead><tbody><tr><td><code>nifi.content.repository.implementation</code></td><td>\u5185\u5BB9\u5B58\u50A8\u5E93\u5B9E\u73B0\u3002\u9ED8\u8BA4\u503C\u4E3A<code>org.apache.nifi.controller.repository.FileSystemRepository</code>\u4E14\u5E94\u8BE5\u8C28\u614E\u66F4\u6539\u3002\u8981\u5C06\u6D41\u6587\u4EF6\u5185\u5BB9\u5B58\u50A8\u5728\u5185\u5B58\u800C\u4E0D\u662F\u78C1\u76D8\u4E0A(\u5728\u7535\u6E90/\u673A\u5668\u53D1\u751F\u6545\u969C\u65F6\u5B58\u5728\u6570\u636E\u4E22\u5931\u7684\u98CE\u9669)\uFF0C\u8BF7\u5C06\u6B64\u5C5E\u6027\u8BBE\u7F6E\u4E3A<code>org.apache.nifi.controller.repository.VolatileContentRepository</code>\u3002</td></tr><tr><td><code>nifi.content.claim.max.appendable.size</code></td><td>\u4E00\u4E2A\u5185\u5BB9\u6807\u8BC6\u7684\u6700\u5927\u5927\u5C0F\u3002\u9ED8\u8BA4\u503C\u4E3A<code>1 MB</code>\u3002</td></tr><tr><td><code>nifi.content.claim.max.flow.files</code></td><td>\u8981\u5206\u914D\u7ED9\u4E00\u4E2A\u5185\u5BB9\u6807\u8BC6\u7684\u6700\u5927FlowFiles\u6570\u3002\u9ED8\u8BA4\u503C\u4E3A<code>100</code>\u3002</td></tr><tr><td><code>nifi.content.repository.directory.default</code>*</td><td>\u5185\u5BB9\u5B58\u50A8\u5E93\u7684\u4F4D\u7F6E\u3002\u9ED8\u8BA4\u503C\u4E3A<code>./content_repository</code>\u3002 <strong>\u6CE8\u610F</strong>\uFF1A\u53EF\u4EE5\u4F7F\u7528<code>nifi.content.repository.directory.</code>\u5E26\u6709\u552F\u4E00\u540E\u7F00\u7684\u524D\u7F00\u548C\u5355\u72EC\u7684\u8DEF\u5F84\u4F5C\u4E3A\u503C\u6765\u6307\u5B9A\u591A\u4E2A\u5185\u5BB9\u5B58\u50A8\u5E93\u3002 \u4F8B\u5982\uFF0C\u8981\u63D0\u4F9B\u4E24\u4E2A\u989D\u5916\u7684\u4F4D\u7F6E\u4F5C\u4E3A\u5185\u5BB9\u5B58\u50A8\u5E93\u7684\u4E00\u90E8\u5206\uFF0C\u7528\u6237\u8FD8\u53EF\u4EE5\u4F7F\u7528\u4EE5\u4E0B\u952E\u6307\u5B9A\u5176\u4ED6\u5C5E\u6027\uFF1A<code>nifi.content.repository.directory.content1=/repos/content1</code> <code>nifi.content.repository.directory.content2=/repos/content2</code> \u63D0\u4F9B\u4E09\u4E2A\u603B\u4F4D\u7F6E\uFF0C\u5305\u62EC <code>nifi.content.repository.directory.default</code>\u3002</td></tr><tr><td><code>nifi.content.repository.archive.max.retention.period</code></td><td>\u5982\u679C\u542F\u7528\u4E86\u5F52\u6863(\u8BF7\u53C2\u89C1\u4E0B\u6587<code>nifi.content.repository.archive.enabled</code>)\uFF0C\u5219\u6B64\u5C5E\u6027\u6307\u5B9A\u4FDD\u7559\u5F52\u6863\u6570\u636E\u7684\u6700\u957F\u65F6\u95F4\u3002\u9ED8\u8BA4\u503C\u4E3A<code>12 hours</code>\u3002</td></tr><tr><td><code>nifi.content.repository.archive.max.usage.percentage</code></td><td>\u5982\u679C\u542F\u7528\u4E86\u5F52\u6863(\u8BF7\u53C2\u9605\u4E0B\u6587<code>nifi.content.repository.archive.enabled</code>)\uFF0C\u5219\u6B64\u5C5E\u6027\u5FC5\u987B\u5177\u6709\u4E00\u4E2A\u503C\uFF0C\u8BE5\u503C\u6307\u793A\u5F00\u59CB\u5220\u9664\u5F52\u6863\u6570\u636E\u7684\u5185\u5BB9\u5B58\u50A8\u5E93\u78C1\u76D8\u4F7F\u7528\u767E\u5206\u6BD4\u3002\u5982\u679C\u5B58\u6863\u4E3A\u7A7A\u4E14\u5185\u5BB9\u5B58\u50A8\u5E93\u78C1\u76D8\u4F7F\u7528\u7387\u9AD8\u4E8E\u6B64\u767E\u5206\u6BD4\uFF0C\u5219\u6682\u65F6\u7981\u7528\u5B58\u6863\u3002\u5F53\u78C1\u76D8\u4F7F\u7528\u7387\u4F4E\u4E8E\u6B64\u767E\u5206\u6BD4\u65F6\uFF0C\u5C06\u7EE7\u7EED\u5B58\u6863\u3002\u9ED8\u8BA4\u503C\u4E3A<code>50%</code>\u3002</td></tr><tr><td><code>nifi.content.repository.archive.enabled</code></td><td>\u8981\u542F\u7528\u5185\u5BB9\u5B58\u6863\uFF0C\u8BF7\u5C06\u5176\u8BBE\u7F6E\u4E3A<code>true</code>\u5E76\u6307\u5B9A\u4E0A\u8FF0<code>nifi.content.repository.archive.max.usage.percentage</code>\u5C5E\u6027\u7684\u503C\u3002\u5185\u5BB9\u5F52\u6863\u4F7F\u6765\u6E90UI\u80FD\u591F\u67E5\u770B\u6216\u91CD\u653E\u4E0D\u518D\u4F4D\u4E8E\u6570\u636E\u6D41\u961F\u5217\u4E2D\u7684\u5185\u5BB9\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u542F\u7528\u5B58\u6863\u3002</td></tr><tr><td><code>nifi.content.repository.always.sync</code></td><td>\u5982\u679C\u8BBE\u7F6E\u4E3A<code>true</code>\uFF0C\u5219\u5BF9\u5B58\u50A8\u5E93\u7684\u4EFB\u4F55\u66F4\u6539\u90FD\u5C06\u540C\u6B65\u5230\u78C1\u76D8\uFF0C\u8FD9\u610F\u5473\u7740NiFi\u5C06\u8981\u6C42\u64CD\u4F5C\u7CFB\u7EDF\u4E0D\u8981\u7F13\u5B58\u4FE1\u606F\u3002\u8FD9\u975E\u5E38\u6602\u8D35\u5E76\u4E14\u53EF\u4EE5\u663E\u7740\u964D\u4F4ENiFi\u6027\u80FD\u3002\u4F46\u662F\uFF0C\u5982\u679C\u662F<code>false</code>\uFF0C\u5982\u679C\u7A81\u7136\u65AD\u7535\u6216\u64CD\u4F5C\u7CFB\u7EDF\u5D29\u6E83\uFF0C\u53EF\u80FD\u4F1A\u6709\u6570\u636E\u4E22\u5931\u7684\u53EF\u80FD\u6027\u3002\u9ED8\u8BA4\u503C\u4E3A<code>false</code>\u3002</td></tr><tr><td><code>nifi.content.viewer.url</code></td><td>\u57FA\u4E8EWeb\u7684\u5185\u5BB9\u67E5\u770B\u5668\u7684URL(\u5982\u679C\u6709)\u3002\u9ED8\u8BA4\u4E3A\u7A7A\u767D\u3002</td></tr></tbody></table><h3 id="volatile\u5185\u5BB9\u5B58\u50A8\u5E93\u5C5E\u6027-volatile-content-repository-properties" tabindex="-1"><a class="header-anchor" href="#volatile\u5185\u5BB9\u5B58\u50A8\u5E93\u5C5E\u6027-volatile-content-repository-properties" aria-hidden="true">#</a> Volatile\u5185\u5BB9\u5B58\u50A8\u5E93\u5C5E\u6027 (Volatile Content Repository Properties)</h3><table><thead><tr><th><strong>\u5C5E\u6027</strong></th><th><strong>\u63CF\u8FF0</strong></th></tr></thead><tbody><tr><td><code>nifi.volatile.content.repository.max.size</code></td><td>\u5185\u5BB9\u5B58\u50A8\u5E93\u4E2D\u7684\u5185\u5BB9\u5B58\u50A8\u5E93\u6700\u5927\u5927\u5C0F\u3002\u9ED8\u8BA4\u503C\u4E3A<code>100 MB</code>\u3002</td></tr><tr><td><code>nifi.volatile.content.repository.block.size</code></td><td>\u5185\u5BB9\u5B58\u50A8\u5E93\u5757\u5927\u5C0F\u3002\u9ED8\u8BA4\u503C\u4E3A<code>32 KB</code>\u3002</td></tr></tbody></table><h3 id="provenance\u5B58\u50A8\u5E93-provenance-repository" tabindex="-1"><a class="header-anchor" href="#provenance\u5B58\u50A8\u5E93-provenance-repository" aria-hidden="true">#</a> Provenance\u5B58\u50A8\u5E93(Provenance Repository)</h3><p>Provenance Repository\u5305\u542B\u4E0EData Provenance\u76F8\u5173\u7684\u4FE1\u606F\u3002\u63A5\u4E0B\u6765\u7684\u56DB\u4E2A\u90E8\u5206\u662F\u9488\u5BF9Provenance Repository\u5C5E\u6027\u7684\u3002</p><table><thead><tr><th><strong>\u5C5E\u6027</strong></th><th><strong>\u63CF\u8FF0</strong></th></tr></thead><tbody><tr><td><code>nifi.provenance.repository.implementation</code></td><td>Provenance Repository\u5B9E\u73B0\u3002\u9ED8\u8BA4\u503C\u4E3A<code>org.apache.nifi.provenance.WriteAheadProvenanceRepository</code>\u3002\u8FD8\u6709\u4E09\u4E2A\u989D\u5916\u7684\u5B58\u50A8\u5E93\u3002\u8981\u5C06\u8D77\u6E90\u4E8B\u4EF6\u5B58\u50A8\u5728\u5185\u5B58\u800C\u4E0D\u662F\u78C1\u76D8\u4E0A(\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u6240\u6709\u4E8B\u4EF6\u5C06\u5728\u91CD\u65B0\u542F\u52A8\u65F6\u4E22\u5931\uFF0C\u5E76\u4E14\u4E8B\u4EF6\u5C06\u6309\u5148\u8FDB\u5148\u51FA\u7684\u987A\u5E8F\u9010\u51FA)\uFF0C\u5C06\u6B64\u5C5E\u6027\u8BBE\u7F6E\u4E3A<code>org.apache.nifi.provenance.VolatileProvenanceRepository</code>\u3002\u8FD9\u5728Java\u5806\u4E2D\u4FDD\u5B58\u53EF\u914D\u7F6E\u6570\u91CF\u7684Provenance\u4E8B\u4EF6\uFF0C\u56E0\u6B64\u53EF\u4EE5\u4FDD\u7559\u7684\u4E8B\u4EF6\u6570\u91CF\u975E\u5E38\u6709\u9650\u3002\u7B2C\u4E09\u548C\u7B2C\u56DB\u79CD\u9009\u62E9\u662F\u53EF\u7528\u7684\uFF1A<code>org.apache.nifi.provenance.PersistentProvenanceRepository</code>\u548C<code>org.apache.nifi.provenance.EncryptedWriteAheadProvenanceRepository</code>\u3002\u5728<code>PersistentProvenanceRepository</code>\u6700\u521D\u5199\u6709\u6301\u7EED\u51FA\u5904\u6D3B\u52A8\uFF0C\u56E0\u4E3A\u5B83\u4EEC\u662F\u4EA7\u751F\u548C\u63D0\u4F9B\u4F9D\u6B21\u904D\u5386\u8FD9\u4E9B\u4E8B\u4EF6\u7684\u80FD\u529B\u7684\u7B80\u5355\u7684\u76EE\u6807\u3002\u540E\u6765\uFF0C\u5E0C\u671B\u80FD\u591F\u538B\u7F29\u6570\u636E\u4EE5\u4FBF\u5B58\u50A8\u66F4\u591A\u6570\u636E\u3002\u4E4B\u540E\uFF0C\u6DFB\u52A0\u4E86\u7D22\u5F15\u548C\u67E5\u8BE2\u6570\u636E\u7684\u529F\u80FD\u3002\u968F\u7740\u9700\u6C42\u7684\u4E0D\u65AD\u53D8\u5316\uFF0C\u5B58\u50A8\u5E93\u4E0D\u65AD\u53D8\u5316\uFF0C\u6CA1\u6709\u4EFB\u4F55\u91CD\u5927\u7684\u91CD\u65B0\u8BBE\u8BA1\u3002\u5F53\u5728\u8D1F\u8D23\u5904\u7406\u5927\u91CF\u5C0F\u578BFlowFiles\u7684NiFi\u5B9E\u4F8B\u4E2D\u4F7F\u7528\u65F6\uFF0C<code>PersistentProvenanceRepository</code>\u5F88\u5FEB\u5C31\u4F1A\u6210\u4E3A\u74F6\u9888\u3002\u5728<code>WriteAheadProvenanceRepository</code>\u968F\u540E\u88AB\u5199\u5165\u63D0\u4F9B\u76F8\u540C\u529F\u80FD\u7684<code>PersistentProvenanceRepository</code>\u540C\u65F6\u63D0\u4F9B\u66F4\u597D\u7684\u6027\u80FD\u3002\u8BE5<code>WriteAheadProvenanceRepository</code>\u662F\u5728NiFi\u7248\u672C1.2.0\u4E2D\u6DFB\u52A0\u7684\u3002\u4ECE\u90A3\u65F6\u8D77\uFF0C\u5B83\u5DF2\u88AB\u8BC1\u660E\u975E\u5E38\u7A33\u5B9A\u548C\u5F3A\u5927\uFF0C\u56E0\u6B64\u88AB\u4F5C\u4E3A\u9ED8\u8BA4\u5B9E\u73B0\u3002<code>PersistentProvenanceRepository</code>\u73B0\u5728\u88AB\u8BA4\u4E3A\u662F\u8FC7\u65F6\u7684\uFF0C\u4E0D\u5E94\u518D\u4F7F\u7528\u3002\u5982\u679C\u7BA1\u7406\u5F53\u524D\u6B63\u5728\u4F7F\u7528\u7684NiFi\u5B9E\u4F8B\uFF0C <code>PersistentProvenanceRepository</code>\u5F3A\u70C8\u5EFA\u8BAE\u5347\u7EA7\u5230<code>WriteAheadProvenanceRepository</code>\u3002\u7531\u4E8EProvenance Repository\u662F\u5411\u540E\u517C\u5BB9\u7684\uFF0C\u56E0\u6B64\u4E0D\u4F1A\u4E22\u5931\u6570\u636E\u6216\u529F\u80FD\u3002<code>EncryptedWriteAheadProvenanceRepository</code>\u662F\u5EFA\u7ACB\u5728<code>WriteAheadProvenanceRepository</code>\uFF0C\u4E3A\u6570\u636E\u52A0\u5BC6\u3002<strong>\u6CE8\uFF1A</strong><code>WriteAheadProvenanceRepository</code>\u65E0\u6CD5\u66F4\u6539\u56DE<code>PersistentProvenanceRepository</code></td></tr></tbody></table><h3 id="write-ahead-provenance\u5C5E\u6027-write-ahead-provenance-repository-properties" tabindex="-1"><a class="header-anchor" href="#write-ahead-provenance\u5C5E\u6027-write-ahead-provenance-repository-properties" aria-hidden="true">#</a> Write Ahead Provenance\u5C5E\u6027(Write Ahead Provenance Repository Properties)</h3><table><thead><tr><th><strong>\u5C5E\u6027</strong></th><th><strong>\u63CF\u8FF0</strong></th></tr></thead><tbody><tr><td><code>nifi.provenance.repository.directory.default</code>*</td><td>Provenance\u5B58\u50A8\u5E93\u7684\u4F4D\u7F6E\u3002\u9ED8\u8BA4\u503C\u4E3A<code>./provenance_repository</code>\u3002 <strong>\u6CE8\u610F</strong>\uFF1A\u53EF\u4EE5\u4F7F\u7528<code>nifi.provenance.repository.directory.</code>\u5E26\u6709\u552F\u4E00\u540E\u7F00\u7684\u524D\u7F00\u548C\u5355\u72EC\u7684\u8DEF\u5F84\u4F5C\u4E3A\u503C\u6765\u6307\u5B9A\u591A\u4E2A\u51FA\u5904\u5B58\u50A8\u5E93\u3002 \u4F8B\u5982\uFF0C\u8981\u63D0\u4F9B\u53E6\u5916\u4E24\u4E2A\u4F4D\u7F6E\u4F5C\u4E3A\u8D77\u6E90\u5E93\u7684\u4E00\u90E8\u5206\uFF0C\u7528\u6237\u8FD8\u53EF\u4EE5\u4F7F\u7528\u4EE5\u4E0B\u952E\u6307\u5B9A\u5176\u4ED6\u5C5E\u6027\uFF1A<code>nifi.provenance.repository.directory.provenance1=/repos/provenance1</code> <code>nifi.provenance.repository.directory.provenance2=/repos/provenance2</code> \u63D0\u4F9B\u4E09\u4E2A\u603B\u4F4D\u7F6E\uFF0C\u5305\u62EC<code>nifi.provenance.repository.directory.default</code>\u3002</td></tr><tr><td><code>nifi.provenance.repository.max.storage.time</code></td><td>\u4FDD\u7559\u6570\u636E\u51FA\u5904\u4FE1\u606F\u7684\u6700\u957F\u65F6\u95F4\u3002\u9ED8\u8BA4\u503C\u4E3A<code>24 hours</code>\u3002</td></tr><tr><td><code>nifi.provenance.repository.max.storage.size</code></td><td>\u4E00\u6B21\u5B58\u50A8\u7684\u6700\u5927\u6570\u636E\u6E90\u4FE1\u606F\u91CF\u3002\u9ED8\u8BA4\u503C\u4E3A<code>1 GB</code>\u3002Data Provenance\u529F\u80FD\u53EF\u80FD\u4F1A\u5360\u7528\u5927\u91CF\u5B58\u50A8\u7A7A\u95F4\uFF0C\u56E0\u4E3A\u4FDD\u7559\u4E86\u5927\u91CF\u6570\u636E\u3002\u5BF9\u4E8E\u751F\u4EA7\u73AF\u5883\uFF0C1-2 TB\u6216\u66F4\u591A\u7684\u503C\u5E76\u4E0D\u7F55\u89C1\u3002\u5982\u679C\u5B9A\u4E49\u4E86\u591A\u4E2A\u5B58\u50A8\u4F4D\u7F6E\uFF0C\u5982\u4E0A\u6240\u8FF0\uFF0C\u5B58\u50A8\u5E93\u5C06\u5199\u5165\u5355\u4E2A&quot;\u4E8B\u4EF6\u6587\u4EF6&quot;(\u6216\u4E00\u7EC4&quot;\u4E8B\u4EF6\u6587\u4EF6&quot;)\u4E00\u6BB5\u65F6\u95F4(\u7531<code>nifi.provenance.repository.rollover.time</code>\u548C<code>nifi.provenance.repository.rollover.size</code>\u5C5E\u6027\u5B9A\u4E49 )\u3002\u6570\u636E\u603B\u662F\u4E00\u6B21\u8001\u5316\u4E00\u4E2A\u6587\u4EF6\uFF0C\u56E0\u6B64\u4E0D\u5EFA\u8BAE\u5728\u5F88\u957F\u4E00\u6BB5\u65F6\u95F4\u5185\u5199\u5165\u5355\u4E2A&quot;\u4E8B\u4EF6\u6587\u4EF6&quot;\uFF0C\u56E0\u4E3A\u8FD9\u6837\u53EF\u4EE5\u9632\u6B62\u65E7\u6570\u636E\u5E73\u6ED1\u8001\u5316\u3002</td></tr><tr><td><code>nifi.provenance.repository.rollover.time</code></td><td>\u6EDA\u52A8\u5B58\u50A8\u5E93\u6B63\u5728\u5199\u5165\u7684&quot;\u4E8B\u4EF6\u6587\u4EF6&quot;\u4E4B\u524D\u7B49\u5F85\u7684\u65F6\u95F4\u3002</td></tr><tr><td><code>nifi.provenance.repository.rollover.size</code></td><td>\u8981\u5199\u5165\u5355\u4E2A&quot;\u4E8B\u4EF6\u6587\u4EF6&quot;\u7684\u6570\u636E\u91CF\u3002\u9ED8\u8BA4\u503C\u4E3A<code>100 MB</code>\u3002\u5BF9\u4E8E\u751F\u6210\u5927\u91CFData Provenance\u7684\u751F\u4EA7\u73AF\u5883\uFF0C\u503C<code>1 GB</code>\u4E5F\u975E\u5E38\u5408\u7406\u3002</td></tr><tr><td><code>nifi.provenance.repository.query.threads</code></td><td>\u7528\u4E8EProvenance Repository\u67E5\u8BE2\u7684\u7EBF\u7A0B\u6570\u3002\u9ED8\u8BA4\u503C\u4E3A<code>2</code>\u3002</td></tr><tr><td><code>nifi.provenance.repository.index.threads</code></td><td>\u7528\u4E8E\u7D22\u5F15Provenance\u4E8B\u4EF6\u7684\u7EBF\u7A0B\u6570\uFF0C\u4EE5\u4FBF\u53EF\u4EE5\u641C\u7D22\u5B83\u4EEC\u3002\u9ED8\u8BA4\u503C\u4E3A<code>2</code>\u3002\u5BF9\u4E8E\u5728\u5927\u91CFFlowFiles\u4E0A\u8FD0\u884C\u7684\u6D41\uFF0CProvenance\u4E8B\u4EF6\u7684\u7D22\u5F15\u53EF\u80FD\u6210\u4E3A\u74F6\u9888\u3002\u5982\u679C\u53D1\u751F\u8FD9\u79CD\u60C5\u51B5\uFF0C\u589E\u52A0\u6B64\u5C5E\u6027\u7684\u503C\u53EF\u80FD\u4F1A\u63D0\u9AD8Provenance Repository\u80FD\u591F\u5904\u7406\u8FD9\u4E9B\u8BB0\u5F55\u7684\u901F\u7387\uFF0C\u4ECE\u800C\u63D0\u9AD8\u6574\u4F53\u541E\u5410\u91CF\u3002\u5EFA\u8BAE\u6BCF\u4E2A\u5B58\u50A8\u4F4D\u7F6E\u4F7F\u7528\u81F3\u5C111\u4E2A\u7EBF\u7A0B(\u5373\uFF0C\u5982\u679C\u67093\u4E2A\u5B58\u50A8\u4F4D\u7F6E\uFF0C\u5219\u5E94\u4F7F\u7528\u81F3\u5C113\u4E2A\u7EBF\u7A0B)\u3002\u5BF9\u4E8E\u5177\u6709\u66F4\u591ACPU\u548C\u78C1\u76D8I / O\u7684\u9AD8\u541E\u5410\u91CF\u73AF\u5883\uFF0C\u53EF\u80FD\u4F1A\u663E\u7740\u589E\u52A0\u6B64\u503C\u3002\u901A\u5E38\u6BCF\u4E2A\u5B58\u50A8\u4F4D\u7F6E\u8D85\u8FC72-4\u4E2A\u7EBF\u7A0B\u662F\u6CA1\u6709\u4EF7\u503C\u7684\u3002\u4F46\u662F\uFF0C\u8FD9\u53EF\u4EE5\u6839\u636E\u4E0EI / O\u8D44\u6E90\u76F8\u6BD4\u53EF\u7528\u7684CPU\u8D44\u6E90\u8FDB\u884C\u8C03\u6574\u3002</td></tr><tr><td><code>nifi.provenance.repository.compress.on.rollover</code></td><td>\u6307\u793A\u5728\u6EDA\u52A8&quot;\u4E8B\u4EF6\u6587\u4EF6&quot;\u65F6\u662F\u5426\u538B\u7F29\u8D77\u6E90\u4FE1\u606F\u3002\u9ED8\u8BA4\u503C\u4E3A<code>true</code>\u3002</td></tr><tr><td><code>nifi.provenance.repository.always.sync</code></td><td>\u5982\u679C\u8BBE\u7F6E\u4E3A<code>true</code>\uFF0C\u5219\u5BF9\u5B58\u50A8\u5E93\u7684\u4EFB\u4F55\u66F4\u6539\u90FD\u5C06\u540C\u6B65\u5230\u78C1\u76D8\uFF0C\u8FD9\u610F\u5473\u7740NiFi\u5C06\u8981\u6C42\u64CD\u4F5C\u7CFB\u7EDF\u4E0D\u8981\u7F13\u5B58\u4FE1\u606F\u3002\u8FD9\u975E\u5E38\u6602\u8D35\u5E76\u4E14\u53EF\u4EE5\u663E\u7740\u964D\u4F4ENiFi\u6027\u80FD\u3002\u4F46\u662F\uFF0C\u5982\u679C\u662F<code>false</code>\uFF0C\u5982\u679C\u7A81\u7136\u65AD\u7535\u6216\u64CD\u4F5C\u7CFB\u7EDF\u5D29\u6E83\uFF0C\u53EF\u80FD\u4F1A\u6709\u6570\u636E\u4E22\u5931\u7684\u53EF\u80FD\u6027\u3002\u9ED8\u8BA4\u503C\u4E3A<code>false</code>\u3002</td></tr><tr><td><code>nifi.provenance.repository.indexed.fields</code></td><td>\u8FD9\u662F\u4E00\u4E2A\u4EE5\u9017\u53F7\u5206\u9694\u7684\u5B57\u6BB5\u5217\u8868\uFF0C\u5E94\u8BE5\u5C06\u5176\u7F16\u5165\u7D22\u5F15\u5E76\u8FDB\u884C\u641C\u7D22\u3002\u672A\u7F16\u5236\u7D22\u5F15\u7684\u5B57\u6BB5\u5C06\u65E0\u6CD5\u641C\u7D22\u3002\u6709\u6548\u7684\u5B57\u6BB5\u6709\uFF1A<code>EventType</code>\uFF0C<code>FlowFileUUID</code>\uFF0C<code>Filename</code>\uFF0C<code>TransitURI</code>\uFF0C<code>ProcessorID</code>\uFF0C <code>AlternateIdentifierURI</code>\uFF0C<code>Relationship</code>\uFF0C<code>Details</code>\u3002\u9ED8\u8BA4\u503C\u4E3A\uFF1A<code>EventType\uFF0C FlowFileUUID\uFF0C Filename\uFF0C ProcessorID</code>\u3002</td></tr><tr><td><code>nifi.provenance.repository.indexed.attributes</code></td><td>\u8FD9\u662F\u4E00\u4E2A\u4EE5\u9017\u53F7\u5206\u9694\u7684FlowFile\u5C5E\u6027\u5217\u8868\uFF0C\u5E94\u8BE5\u5BF9\u5176\u8FDB\u884C\u7D22\u5F15\u5E76\u4F7F\u5176\u53EF\u641C\u7D22\u3002\u9ED8\u8BA4\u4E3A\u7A7A\u767D\u3002\u4F46\u4E00\u4E9B\u5F88\u597D\u7684\u4F8B\u5B50\u8981\u8003\u8651\u7684\u662F<code>filename</code>\u548C<code>mime.type</code>\u4EE5\u53CA\u4EFB\u4F55\u81EA\u5B9A\u4E49\u5C5E\u6027\uFF0C\u4F60\u53EF\u4EE5\u4F7F\u7528\u8FD9\u5BF9\u4F60\u7684\u4F7F\u7528\u60C5\u51B5\u6709\u4EF7\u503C\u3002</td></tr><tr><td><code>nifi.provenance.repository.index.shard.size</code></td><td>\u5B58\u50A8\u5E93\u4F7F\u7528Apache Lucene\u6267\u884C\u7D22\u5F15\u548C\u641C\u7D22\u529F\u80FD\u3002\u6B64\u503C\u6307\u793A\u5728Repository\u5F00\u59CB\u5199\u5165\u65B0\u7D22\u5F15\u4E4B\u524DLucene\u7D22\u5F15\u5E94\u8BE5\u6709\u591A\u5927\u3002\u5728\u641C\u7D22Provenance\u5B58\u50A8\u5E93\u65F6\uFF0C\u5206\u7247\u5927\u5C0F\u7684\u8F83\u5927\u503C\u5C06\u5BFC\u81F4\u66F4\u591AJava\u5806\u4F7F\u7528\uFF0C\u4F46\u5E94\u63D0\u4F9B\u66F4\u597D\u7684\u6027\u80FD\u3002\u9ED8\u8BA4\u503C\u4E3A<code>500 MB</code>\u3002\u4F46\u662F\uFF0C\u8FD9\u662F\u56E0\u4E3A\u9ED8\u8BA4\u60C5\u51B5\u9002\u7528\u4E8E\u5927\u591A\u6570\u7528\u6237\u5F00\u59CB\u4F7F\u7528NiFi\u7684\u975E\u5E38\u5C0F\u7684\u73AF\u5883\u3002\u5BF9\u4E8E\u751F\u4EA7\u73AF\u5883\uFF0C\u5EFA\u8BAE\u5C06\u6B64\u503C\u66F4\u6539<code>4</code>\u4E3A<code>8 GB</code>\u3002\u4E00\u65E6\u7D22\u5F15\u4E2D\u7684\u6240\u6709Provenance Events\u90FD\u4ECE&quot;\u4E8B\u4EF6\u6587\u4EF6&quot;\u4E2D\u5220\u9664\uFF0C\u7D22\u5F15\u4E5F\u5C06\u88AB\u9500\u6BC1\u3002**\u6CE8\u610F\uFF1A**\u6B64\u503C\u5E94\u5C0F\u4E8E(\u4E0D\u8D85\u8FC7\u4E00\u534A)<code>nifi.provenance.repository.max.storage.size</code>\u5C5E\u6027\u3002</td></tr><tr><td><code>nifi.provenance.repository.max.attribute.length</code></td><td>\u6307\u793A\u4ECE\u5B58\u50A8\u5E93\u68C0\u7D22Provenance\u4E8B\u4EF6\u65F6FlowFile\u5C5E\u6027\u7684\u6700\u5927\u957F\u5EA6\u3002\u5982\u679C\u4EFB\u4F55\u5C5E\u6027\u7684\u957F\u5EA6\u8D85\u8FC7\u6B64\u503C\uFF0C\u5219\u5728\u68C0\u7D22\u4E8B\u4EF6\u65F6\u5C06\u622A\u65AD\u8BE5\u503C\u3002\u9ED8\u8BA4\u503C\u4E3A<code>65536</code>\u3002</td></tr><tr><td><code>nifi.provenance.repository.concurrent.merge.threads</code></td><td>Apache Lucene\u5728\u7D22\u5F15\u4E2D\u521B\u5EFA\u4E86\u51E0\u4E2A&quot;\u6BB5&quot;\u3002\u8FD9\u4E9B\u6BB5\u5B9A\u671F\u5408\u5E76\u5728\u4E00\u8D77\uFF0C\u4EE5\u63D0\u4F9B\u66F4\u5FEB\u7684\u67E5\u8BE2\u3002\u6B64\u5C5E\u6027\u6307\u5B9A\u5141\u8BB8\u7528\u4E8E<strong>\u6BCF\u4E2A</strong>\u5B58\u50A8\u76EE\u5F55\u7684\u6700\u5927\u7EBF\u7A0B\u6570\u3002\u9ED8\u8BA4\u503C\u4E3A<code>2</code>\u3002\u5BF9\u4E8E\u9AD8\u541E\u5410\u91CF\u73AF\u5883\uFF0C\u5EFA\u8BAE\u5C06\u7D22\u5F15\u7EBF\u7A0B\u6570\u8BBE\u7F6E\u4E3A\u5927\u4E8E\u5408\u5E76\u7EBF\u7A0B\u6570*\u5B58\u50A8\u4F4D\u7F6E\u6570\u3002\u4F8B\u5982\uFF0C\u5982\u679C\u67092\u4E2A\u5B58\u50A8\u4F4D\u7F6E\u5E76\u4E14\u7D22\u5F15\u7EBF\u7A0B\u7684\u6570\u91CF\u8BBE\u7F6E\u4E3A<code>8</code>\uFF0C\u5219\u5408\u5E76\u7EBF\u7A0B\u7684\u6570\u91CF\u5E94\u8BE5\u5C0F\u4E8E<code>4</code>\u3002\u867D\u7136\u5B8C\u6210\u6B64\u64CD\u4F5C\u5E76\u4E0D\u91CD\u8981\uFF0C\u4F46\u8BBE\u7F6E\u5927\u4E8E\u6B64\u6570\u91CF\u7684\u5408\u5E76\u7EBF\u7A0B\u6570\u4F1A\u5BFC\u81F4\u6240\u6709\u7D22\u5F15\u7EBF\u7A0B\u88AB\u7528\u4E8E\u5408\u5E76\uFF0C\u8FD9\u4F1A\u5BFC\u81F4NiFi\u6D41\u5728\u7D22\u5F15\u53D1\u751F\u65F6\u5468\u671F\u6027\u5730\u6682\u505C\uFF0C\u4ECE\u800C\u5BFC\u81F4\u67D0\u4E9B\u6570\u636E\u88AB\u5904\u7406\u5177\u6709\u6BD4\u5176\u4ED6\u6570\u636E\u66F4\u9AD8\u7684\u5EF6\u8FDF\u3002</td></tr><tr><td><code>nifi.provenance.repository.warm.cache.frequency</code></td><td>\u6BCF\u6B21\u8FD0\u884CProvenance\u67E5\u8BE2\u65F6\uFF0C\u67E5\u8BE2\u5FC5\u987B\u9996\u5148\u641C\u7D22Apache Lucene\u7D22\u5F15(\u81F3\u5C11\u5728\u5927\u591A\u6570\u60C5\u51B5\u4E0B - \u6709\u4E00\u4E9B\u67E5\u8BE2\u7ECF\u5E38\u8FD0\u884C\u5E76\u4E14\u7ED3\u679C\u88AB\u7F13\u5B58\u4EE5\u907F\u514D\u641C\u7D22Lucene\u7D22\u5F15)\u3002\u5F53Lucene\u7D22\u5F15\u9996\u6B21\u6253\u5F00\u65F6\uFF0C\u5B83\u53EF\u80FD\u975E\u5E38\u6602\u8D35\u5E76\u4E14\u9700\u8981\u51E0\u79D2\u949F\u3002\u8FD9\u6709\u5F88\u591A\u4E0D\u540C\u7684\u7D22\u5F15\uFF0C\u5E76\u4E14\u53EF\u80FD\u5BFC\u81F4Provenance\u67E5\u8BE2\u82B1\u8D39\u66F4\u957F\u65F6\u95F4\u3002\u6253\u5F00\u7D22\u5F15\u540E\uFF0C\u64CD\u4F5C\u7CFB\u7EDF\u7684\u78C1\u76D8\u7F13\u5B58\u901A\u5E38\u4F1A\u4FDD\u7559\u8DB3\u591F\u7684\u6570\u636E\uFF0C\u4EE5\u4FBF\u66F4\u5FEB\u5730\u91CD\u65B0\u6253\u5F00\u7D22\u5F15 - \u81F3\u5C11\u5728\u4E00\u6BB5\u65F6\u95F4\u5185\uFF0C\u76F4\u5230\u78C1\u76D8\u7F13\u5B58\u9010\u51FA\u8BE5\u6570\u636E\u3002\u5982\u679C\u8BBE\u7F6E\u4E86\u6B64\u503C\uFF0CNiFi\u5C06\u5B9A\u671F\u6253\u5F00\u6BCF\u4E2ALucene\u7D22\u5F15\uFF0C\u7136\u540E\u5173\u95ED\u5B83\uFF0C\u4EE5&quot;\u52A0\u70ED&quot;\u7F13\u5B58\u3002\u5F53Provenance Repository\u5F88\u5927\u65F6\uFF0C\u8FD9\u5C06\u5BFC\u81F4\u66F4\u5FEB\u7684\u67E5\u8BE2\u3002\u7136\u800C\uFF0C\u4E0E\u6240\u6709\u4F1F\u5927\u7684\u4E8B\u7269\u4E00\u6837\uFF0C\u5B83\u5E26\u6765\u4E86\u6210\u672C\u3002\u52A0\u70ED\u7F13\u5B58\u786E\u5B9E\u9700\u8981\u4E00\u4E9BCPU\u8D44\u6E90\uFF0C\u4F46\u66F4\u91CD\u8981\u7684\u662F\uFF0C\u5B83\u4F1A\u4ECE\u64CD\u4F5C\u7CFB\u7EDF\u78C1\u76D8\u7F13\u5B58\u4E2D\u9A71\u9010\u5176\u4ED6\u6570\u636E\uFF0C\u5E76\u5BFC\u81F4\u4ECE\u78C1\u76D8\u8BFB\u53D6(\u53EF\u80FD\u662F\u5927\u91CF\u7684)\u6570\u636E\u3002\u8FD9\u53EF\u80FD\u5BFC\u81F4\u8F83\u4F4E\u7684NiFi\u6027\u80FD\u3002\u4F46\u662F\uFF0C\u5982\u679CNiFi\u5728CPU\u548C\u78C1\u76D8\u672A\u5145\u5206\u5229\u7528\u7684\u73AF\u5883\u4E2D\u8FD0\u884C\uFF0C\u5219\u6B64\u529F\u80FD\u53EF\u4EE5\u4F7FProvenance\u67E5\u8BE2\u901F\u5EA6\u5FEB\u5F97\u591A\u3002\u6B64\u5C5E\u6027\u7684\u9ED8\u8BA4\u503C\u4E3A\u7A7A(\u5373\u7981\u7528)\u3002\u4F46\u66F4\u91CD\u8981\u7684\u662F\uFF0C\u5B83\u5C06\u4ECE\u64CD\u4F5C\u7CFB\u7EDF\u78C1\u76D8\u7F13\u5B58\u4E2D\u9A71\u9010\u5176\u4ED6\u6570\u636E\uFF0C\u5E76\u5C06\u5BFC\u81F4\u4ECE\u78C1\u76D8\u8BFB\u53D6(\u53EF\u80FD\u662F\u5927\u91CF)\u6570\u636E\u3002\u8FD9\u53EF\u80FD\u5BFC\u81F4\u8F83\u4F4E\u7684NiFi\u6027\u80FD\u3002\u4F46\u662F\uFF0C\u5982\u679CNiFi\u5728CPU\u548C\u78C1\u76D8\u672A\u5145\u5206\u5229\u7528\u7684\u73AF\u5883\u4E2D\u8FD0\u884C\uFF0C\u5219\u6B64\u529F\u80FD\u53EF\u4EE5\u4F7FProvenance\u67E5\u8BE2\u901F\u5EA6\u5FEB\u5F97\u591A\u3002\u6B64\u5C5E\u6027\u7684\u9ED8\u8BA4\u503C\u4E3A\u7A7A(\u5373\u7981\u7528)\u3002\u4F46\u66F4\u91CD\u8981\u7684\u662F\uFF0C\u5B83\u5C06\u4ECE\u64CD\u4F5C\u7CFB\u7EDF\u78C1\u76D8\u7F13\u5B58\u4E2D\u9A71\u9010\u5176\u4ED6\u6570\u636E\uFF0C\u5E76\u5C06\u5BFC\u81F4\u4ECE\u78C1\u76D8\u8BFB\u53D6(\u53EF\u80FD\u662F\u5927\u91CF)\u6570\u636E\u3002\u8FD9\u53EF\u80FD\u5BFC\u81F4\u8F83\u4F4E\u7684NiFi\u6027\u80FD\u3002\u4F46\u662F\uFF0C\u5982\u679CNiFi\u5728CPU\u548C\u78C1\u76D8\u672A\u5145\u5206\u5229\u7528\u7684\u73AF\u5883\u4E2D\u8FD0\u884C\uFF0C\u5219\u6B64\u529F\u80FD\u53EF\u4EE5\u4F7FProvenance\u67E5\u8BE2\u901F\u5EA6\u5FEB\u5F97\u591A\u3002\u6B64\u5C5E\u6027\u7684\u9ED8\u8BA4\u503C\u4E3A\u7A7A(\u5373\u7981\u7528)\u3002</td></tr></tbody></table><h3 id="\u52A0\u5BC6\u7684\u63D0\u524D\u5199\u5165\u5B58\u50A8\u5E93\u5C5E\u6027-encrypted-write-ahead-provenance-repository-properties" tabindex="-1"><a class="header-anchor" href="#\u52A0\u5BC6\u7684\u63D0\u524D\u5199\u5165\u5B58\u50A8\u5E93\u5C5E\u6027-encrypted-write-ahead-provenance-repository-properties" aria-hidden="true">#</a> \u52A0\u5BC6\u7684\u63D0\u524D\u5199\u5165\u5B58\u50A8\u5E93\u5C5E\u6027(Encrypted Write Ahead Provenance Repository Properties)</h3>',33),Eo=t('\u4E0A\u9762\u5B9A\u4E49\u7684\u6240\u6709\u5C5E\u6027(\u8BF7\u53C2\u9605" '),Uo={href:"http://nifi.apache.org/docs/NiFi-docs/html/administration-guide.html#write-ahead-provenance-repository-properties",target:"_blank",rel:"noopener noreferrer"},Co=t('\u7F16\u5199\u9884\u5148\u5B58\u50A8\u5E93\u5C5E\u6027"'),Lo=t(")\u4ECD\u7136\u9002\u7528\u3002\u6B64\u5904\u4EC5\u5217\u51FA\u7279\u5B9A\u4E8E\u52A0\u5BC6\u7684\u5C5E\u6027\u3002\u6709\u5173\u8BE6\u7EC6\u4FE1\u606F\uFF0C\u8BF7\u53C2\u9605"),Io={href:"http://nifi.apache.org/docs/NiFi-docs/html/user-guide.html#encrypted-provenance",target:"_blank",rel:"noopener noreferrer"},Ko=t('"\u7528\u6237\u6307\u5357"\u4E2D\u7684"\u52A0\u5BC6\u7684\u6E90\u4EE3\u7801\u5B58\u50A8\u5E93"'),zo=t("\u3002"),Do=e("thead",null,[e("tr",null,[e("th",null,[e("strong",null,"\u5C5E\u6027")]),e("th",null,[e("strong",null,"\u63CF\u8FF0")])])],-1),Bo=e("tr",null,[e("td",null,[e("code",null,"nifi.provenance.repository.debug.frequency")]),e("td",null,"\u63A7\u5236\u5728\u8BB0\u5F55\u5B58\u50A8\u5E93\u6027\u80FD\u6307\u6807\u7684DEBUG\u8BED\u53E5\u4E4B\u95F4\u5904\u7406\u7684\u4E8B\u4EF6\u6570\u3002\u4EC5\u5F53\u5728\u65E5\u5FD7\u914D\u7F6E\u4E2D\u542F\u7528DEBUG\u7EA7\u522B\u8BED\u53E5\u65F6\u624D\u4F7F\u7528\u6B64\u503C\u3002")],-1),Ro=e("tr",null,[e("td",null,[e("code",null,"nifi.provenance.repository.encryption.key.provider.implementation")]),e("td",null,[t("\u8FD9\u662F"),e("strong",null,"\u5BC6\u94A5\u63D0\u4F9B\u8005"),t("\u7684\u5B8C\u5168\u9650\u5B9A\u7C7B\u540D\u3002\u5BC6\u94A5\u63D0\u4F9B\u7A0B\u5E8F\uFFFD\uFFFD\uFFFD\u7528\u4E8E\u8BBF\u95EE\u52A0\u5BC6\u5BC6\u94A5\u4EE5\u4FDD\u62A4\u8D77\u6E90\u4E8B\u4EF6\u7684\u6570\u636E\u5B58\u50A8\u533A\u63A5\u53E3\u3002\u76EE\u524D\u6709\u4E24\u79CD\u5B9E\u73B0\u65B9\u5F0F-\u2009 "),e("code",null,"StaticKeyProvider"),t("\u76F4\u63A5\u4ECE\u8BFB\u53D6\u952E_nifi.properties_\u548C"),e("code",null,"FileBasedKeyProvider"),t("\u8BFB\u53D6"),e("strong",null,"\xF1"),t("\u4ECE\u52A0\u5BC6\u7684\u6587\u4EF6\u5F88\u591A\u5173\u952E\u70B9\u3002\u8BE5\u63A5\u53E3\u662F\u53EF\u6269\u5C55\u7684\uFF0C\u672A\u6765\u9884\u8BA1\u5C06\u652F\u6301HSM\u6216\u5176\u4ED6\u63D0\u4F9B\u5546\u3002")])],-1),Go=e("tr",null,[e("td",null,[e("code",null,"nifi.provenance.repository.encryption.key.provider.location")]),e("td",null,[t("\u8BE5\u952E\u5B9A\u4E49\u8D44\u6E90\u7684\u8DEF\u5F84(\u4E3A\u7A7A"),e("code",null,"StaticKeyProvider"),t("\uFF0C"),e("code",null,"./keys.nkp"),t("\u6216\u7C7B\u4F3C\u7684\u8DEF\u5F84"),e("code",null,"FileBasedKeyProvider"),t(")\u3002\u5BF9\u4E8E\u50CFHSM\u8FD9\u6837\u7684\u672A\u6765\u63D0\u4F9B\u5546\uFF0C\u8FD9\u53EF\u80FD\u662F\u8FDE\u63A5\u5B57\u7B26\u4E32\u6216URL\u3002")])],-1),Mo=e("tr",null,[e("td",null,[e("code",null,"nifi.provenance.repository.encryption.key.id")]),e("td",null,[t("\u7528\u4E8E\u52A0\u5BC6\u7684\u6D3B\u52A8\u5BC6\u94A5ID(\u4F8B\u5982"),e("code",null,"Key1"),t(")\u3002")])],-1),Ho=e("td",null,[e("code",null,"nifi.provenance.repository.encryption.key")],-1),Oo=t("\u4F7F\u7528\u7684\u5173\u952E"),Zo=e("code",null,"StaticKeyProvider",-1),Wo=t("\u3002\u5BC6\u94A5\u683C\u5F0F\u4E3A\u5341\u516D\u8FDB\u5236\u7F16\u7801("),jo=e("code",null,"0123456789ABCDEFFEDCBA98765432100123456789ABCDEFFEDCBA9876543210",-1),Jo=t(")\uFF0C\u4F46\u4E5F\u53EF\u4EE5\u4F7F\u7528"),Vo=e("code",null,"./encrypt-config.sh",-1),Xo=t("NiFi Toolkit\u4E2D\u7684\u5DE5\u5177\u8FDB\u884C\u52A0\u5BC6(\u6709\u5173\u8BE6\u7EC6\u4FE1\u606F\uFF0C\u8BF7\u53C2\u9605"),$o={href:"http://nifi.apache.org/docs/NiFi-docs/html/toolkit-guide.html",target:"_blank",rel:"noopener noreferrer"},Yo=t("NiFi\u5DE5\u5177\u5305\u6307\u5357\u4E2D"),Qo=t("\u7684"),ea={href:"http://nifi.apache.org/docs/NiFi-docs/html/toolkit-guide.html#encrypt_config_tool",target:"_blank",rel:"noopener noreferrer"},ta=t("\u52A0\u5BC6\u914D\u7F6E\u5DE5\u5177"),na=t("\u90E8\u5206)\u3002"),sa=e("tr",null,[e("td",null,[e("code",null,"nifi.provenance.repository.encryption.key.id."),t("*")]),e("td",null,[t("\u5141\u8BB8\u4E3A\u5176\u6307\u5B9A\u5176\u4ED6\u952E"),e("code",null,"StaticKeyProvider"),t("\u3002\u4F8B\u5982\uFF0C\u8BE5\u884C\u5C06"),e("code",null,"nifi.provenance.repository.encryption.key.id.Key2=012\u2026\u200B210"),t("\u63D0\u4F9B\u53EF\u7528\u5BC6\u94A5"),e("code",null,"Key2"),t("\u3002")])],-1),oa=o(`<p>\u6700\u7B80\u5355\u7684\u914D\u7F6E\u5982\u4E0B\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>nifi.provenance.repository.implementation = org.apache.nifi.provenance.EncryptedWriteAheadProvenanceRepositorynifi.provenance.repository.debug.frequency = 100nifi.provenance.repository.encryption.key.provider.implementation = org.apache.nifi.security.kms.StaticKeyProvidernifi.provenance.repository.encryption.key.provider.location =nifi.provenance.repository.encryption.key.id =key1nifi.provenance.repository.encryption.key = 0123456789ABCDEFFEDCBA98765432100123456789ABCDEFFEDCBA9876543210
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="\u6301\u4E45\u6027\u6E90\u4EE3\u7801\u5E93\u5C5E\u6027-persistent-provenance-repository-properties" tabindex="-1"><a class="header-anchor" href="#\u6301\u4E45\u6027\u6E90\u4EE3\u7801\u5E93\u5C5E\u6027-persistent-provenance-repository-properties" aria-hidden="true">#</a> \u6301\u4E45\u6027\u6E90\u4EE3\u7801\u5E93\u5C5E\u6027(Persistent Provenance Repository Properties)</h3><table><thead><tr><th><strong>\u5C5E\u6027</strong></th><th><strong>\u63CF\u8FF0</strong></th></tr></thead><tbody><tr><td><code>nifi.provenance.repository.directory.default</code>*</td><td>Provenance\u5B58\u50A8\u5E93\u7684\u4F4D\u7F6E\u3002\u9ED8\u8BA4\u503C\u4E3A<code>./provenance_repository</code>\u3002 <strong>\u6CE8\u610F</strong>\uFF1A\u53EF\u4EE5\u4F7F\u7528<code>nifi.provenance.repository.directory.</code>\u5E26\u6709\u552F\u4E00\u540E\u7F00\u7684\u524D\u7F00\u548C\u5355\u72EC\u7684\u8DEF\u5F84\u4F5C\u4E3A\u503C\u6765\u6307\u5B9A\u591A\u4E2A\u51FA\u5904\u5B58\u50A8\u5E93\u3002 \u4F8B\u5982\uFF0C\u8981\u63D0\u4F9B\u53E6\u5916\u4E24\u4E2A\u4F4D\u7F6E\u4F5C\u4E3A\u8D77\u6E90\u5E93\u7684\u4E00\u90E8\u5206\uFF0C\u7528\u6237\u8FD8\u53EF\u4EE5\u4F7F\u7528\u4EE5\u4E0B\u952E\u6307\u5B9A\u5176\u4ED6\u5C5E\u6027\uFF1A <code>nifi.provenance.repository.directory.provenance1=/repos/provenance1</code> <code>nifi.provenance.repository.directory.provenance2=/repos/provenance2</code> \u63D0\u4F9B\u4E09\u4E2A\u603B\u4F4D\u7F6E\uFF0C\u5305\u62EC<code>nifi.provenance.repository.directory.default</code>\u3002</td></tr><tr><td><code>nifi.provenance.repository.max.storage.time</code></td><td>\u4FDD\u7559\u6570\u636E\u51FA\u5904\u4FE1\u606F\u7684\u6700\u957F\u65F6\u95F4\u3002\u9ED8\u8BA4\u503C\u4E3A<code>24 hours</code>\u3002</td></tr><tr><td><code>nifi.provenance.repository.max.storage.size</code></td><td>\u4E00\u6B21\u5B58\u50A8\u7684\u6700\u5927\u6570\u636E\u6E90\u4FE1\u606F\u91CF\u3002\u9ED8\u8BA4\u503C\u4E3A<code>1 GB</code>\u3002</td></tr><tr><td><code>nifi.provenance.repository.rollover.time</code></td><td>\u5728\u6EDA\u52A8\u6700\u65B0\u6570\u636E\u51FA\u5904\u4FE1\u606F\u4E4B\u524D\u7B49\u5F85\u7684\u65F6\u95F4\u91CF\uFF0C\u4EE5\u4FBF\u5728\u7528\u6237\u754C\u9762\u4E2D\u53EF\u7528\u3002\u9ED8\u8BA4\u503C\u4E3A<code>30 secs</code>\u3002</td></tr><tr><td><code>nifi.provenance.repository.rollover.size</code></td><td>\u4E00\u6B21\u6EDA\u52A8\u7684\u4FE1\u606F\u91CF\u3002\u9ED8\u8BA4\u503C\u4E3A<code>100 MB</code>\u3002</td></tr><tr><td><code>nifi.provenance.repository.query.threads</code></td><td>\u7528\u4E8EProvenance Repository\u67E5\u8BE2\u7684\u7EBF\u7A0B\u6570\u3002\u9ED8\u8BA4\u503C\u4E3A<code>2</code>\u3002</td></tr><tr><td><code>nifi.provenance.repository.index.threads</code></td><td>\u7528\u4E8E\u7D22\u5F15Provenance\u4E8B\u4EF6\u7684\u7EBF\u7A0B\u6570\uFF0C\u4EE5\u4FBF\u53EF\u4EE5\u641C\u7D22\u5B83\u4EEC\u3002\u9ED8\u8BA4\u503C\u4E3A<code>2</code>\u3002\u5BF9\u4E8E\u5728\u5927\u91CFFlowFiles\u4E0A\u8FD0\u884C\u7684\u6D41\uFF0CProvenance\u4E8B\u4EF6\u7684\u7D22\u5F15\u53EF\u80FD\u6210\u4E3A\u74F6\u9888\u3002\u5982\u679C\u662F\u8FD9\u79CD\u60C5\u51B5\uFF0C\u5C06\u51FA\u73B0\u4E00\u4E2A\u516C\u544A\uFF0C\u8868\u660E&quot;\u6570\u636E\u6D41\u7684\u901F\u7387\u8D85\u8FC7\u4E86\u51FA\u5904\u8BB0\u5F55\u7387\u3002\u51CF\u5C11\u6D41\u91CF\u4EE5\u9002\u5E94\u3002&quot; \u5982\u679C\u53D1\u751F\u8FD9\u79CD\u60C5\u51B5\uFF0C\u589E\u52A0\u6B64\u5C5E\u6027\u7684\u503C\u53EF\u80FD\u4F1A\u63D0\u9AD8Provenance Repository\u80FD\u591F\u5904\u7406\u8FD9\u4E9B\u8BB0\u5F55\u7684\u901F\u7387\uFF0C\u4ECE\u800C\u63D0\u9AD8\u6574\u4F53\u541E\u5410\u91CF\u3002</td></tr><tr><td><code>nifi.provenance.repository.compress.on.rollover</code></td><td>\u6307\u793A\u5728\u7FFB\u8F6C\u65F6\u662F\u5426\u538B\u7F29\u51FA\u5904\u4FE1\u606F\u3002\u9ED8\u8BA4\u503C\u4E3A<code>true</code>\u3002</td></tr><tr><td><code>nifi.provenance.repository.always.sync</code></td><td>\u5982\u679C\u8BBE\u7F6E\u4E3A<code>true</code>\uFF0C\u5219\u5BF9\u5B58\u50A8\u5E93\u7684\u4EFB\u4F55\u66F4\u6539\u90FD\u5C06\u540C\u6B65\u5230\u78C1\u76D8\uFF0C\u8FD9\u610F\u5473\u7740NiFi\u5C06\u8981\u6C42\u64CD\u4F5C\u7CFB\u7EDF\u4E0D\u8981\u7F13\u5B58\u4FE1\u606F\u3002\u8FD9\u975E\u5E38\u6602\u8D35\u5E76\u4E14\u53EF\u4EE5\u663E\u7740\u964D\u4F4ENiFi\u6027\u80FD\u3002\u4F46\u662F\uFF0C\u5982\u679C\u662F<code>false</code>\uFF0C\u5982\u679C\u7A81\u7136\u65AD\u7535\u6216\u64CD\u4F5C\u7CFB\u7EDF\u5D29\u6E83\uFF0C\u53EF\u80FD\u4F1A\u6709\u6570\u636E\u4E22\u5931\u7684\u53EF\u80FD\u6027\u3002\u9ED8\u8BA4\u503C\u4E3A<code>false</code>\u3002</td></tr><tr><td><code>nifi.provenance.repository.journal.count</code></td><td>\u5E94\u8BE5\u7528\u4E8E\u5E8F\u5217\u5316Provenance\u4E8B\u4EF6\u6570\u636E\u7684\u65E5\u5FD7\u6587\u4EF6\u6570\u3002\u589E\u52A0\u6B64\u503C\u5C06\u5141\u8BB8\u66F4\u591A\u4EFB\u52A1\u540C\u65F6\u66F4\u65B0\u5B58\u50A8\u5E93\uFF0C\u4F46\u7A0D\u540E\u5C06\u5BFC\u81F4\u66F4\u6602\u8D35\u7684\u65E5\u5FD7\u6587\u4EF6\u5408\u5E76\u3002\u7406\u60F3\u60C5\u51B5\u4E0B\uFF0C\u6B64\u503C\u5E94\u7B49\u4E8E\u9884\u671F\u540C\u65F6\u66F4\u65B0\u5B58\u50A8\u5E93\u7684\u7EBF\u7A0B\u6570\uFF0C\u4F4616\u5FC5\u987B\u5728\u5FC5\u9700\u73AF\u5883\u4E2D\u6B63\u5E38\u5DE5\u4F5C\u3002\u9ED8\u8BA4\u503C\u4E3A<code>16</code>\u3002</td></tr><tr><td><code>nifi.provenance.repository.indexed.fields</code></td><td>\u8FD9\u662F\u4E00\u4E2A\u4EE5\u9017\u53F7\u5206\u9694\u7684\u5B57\u6BB5\u5217\u8868\uFF0C\u5E94\u8BE5\u5C06\u5176\u7F16\u5165\u7D22\u5F15\u5E76\u8FDB\u884C\u641C\u7D22\u3002\u672A\u7F16\u5236\u7D22\u5F15\u7684\u5B57\u6BB5\u5C06\u65E0\u6CD5\u641C\u7D22\u3002\u6709\u6548\u7684\u5B57\u6BB5\u6709\uFF1A<code>EventType</code>\uFF0C<code>FlowFileUUID</code>\uFF0C<code>Filename</code>\uFF0C<code>TransitURI</code>\uFF0C<code>ProcessorID</code>\uFF0C<code>AlternateIdentifierURI</code>\uFF0C<code>Relationship</code>\uFF0C<code>Details</code>\u3002\u9ED8\u8BA4\u503C\u4E3A\uFF1A<code>EventType\uFF0C FlowFileUUID\uFF0C Filename\uFF0C ProcessorID</code>\u3002</td></tr><tr><td><code>nifi.provenance.repository.indexed.attributes</code></td><td>\u8FD9\u662F\u4E00\u4E2A\u4EE5\u9017\u53F7\u5206\u9694\u7684FlowFile\u5C5E\u6027\u5217\u8868\uFF0C\u5E94\u8BE5\u5BF9\u5176\u8FDB\u884C\u7D22\u5F15\u5E76\u4F7F\u5176\u53EF\u641C\u7D22\u3002\u9ED8\u8BA4\u4E3A\u7A7A\u767D\u3002\u4F46\u4E00\u4E9B\u5F88\u597D\u7684\u4F8B\u5B50\u8981\u8003\u8651\u7684\u662F<code>filename</code>\uFF0C<code>uuid</code>\u548C<code>mime.type</code>\uFF0C\u4EE5\u53CA\u4F60\u53EF\u4EE5\u4F7F\u7528\u4EFB\u4F55\u81EA\u5B9A\u4E49attritubes\u8FD9\u5BF9\u4F60\u7684\u4F7F\u7528\u60C5\u51B5\u6709\u4EF7\u503C\u3002</td></tr><tr><td><code>nifi.provenance.repository.index.shard.size</code></td><td>\u5728\u641C\u7D22Provenance\u5B58\u50A8\u5E93\u65F6\uFF0C\u5206\u7247\u5927\u5C0F\u7684\u8F83\u5927\u503C\u5C06\u5BFC\u81F4\u66F4\u591AJava\u5806\u4F7F\u7528\uFF0C\u4F46\u5E94\u63D0\u4F9B\u66F4\u597D\u7684\u6027\u80FD\u3002\u9ED8\u8BA4\u503C\u4E3A<code>500 MB</code>\u3002</td></tr><tr><td><code>nifi.provenance.repository.max.attribute.length</code></td><td>\u6307\u793A\u4ECE\u5B58\u50A8\u5E93\u68C0\u7D22Provenance\u4E8B\u4EF6\u65F6FlowFile\u5C5E\u6027\u7684\u6700\u5927\u957F\u5EA6\u3002\u5982\u679C\u4EFB\u4F55\u5C5E\u6027\u7684\u957F\u5EA6\u8D85\u8FC7\u6B64\u503C\uFF0C\u5219\u5728\u68C0\u7D22\u4E8B\u4EF6\u65F6\u5C06\u622A\u65AD\u8BE5\u503C\u3002\u9ED8\u8BA4\u503C\u4E3A<code>65536</code>\u3002</td></tr></tbody></table><h3 id="\u6613\u5931\u6027\u6765\u6E90\u5B58\u50A8\u5E93\u5C5E\u6027-volatile-provenance-repository-properties" tabindex="-1"><a class="header-anchor" href="#\u6613\u5931\u6027\u6765\u6E90\u5B58\u50A8\u5E93\u5C5E\u6027-volatile-provenance-repository-properties" aria-hidden="true">#</a> \u6613\u5931\u6027\u6765\u6E90\u5B58\u50A8\u5E93\u5C5E\u6027(Volatile Provenance Repository Properties)</h3><table><thead><tr><th><strong>\u5C5E\u6027</strong></th><th><strong>\u63CF\u8FF0</strong></th></tr></thead><tbody><tr><td><code>nifi.provenance.repository.buffer.size</code></td><td>Provenance Repository\u7F13\u51B2\u533A\u5927\u5C0F\u3002<code>100000</code>\u539F\u59CB\u4E8B\u4EF6\u662F\u9ED8\u8BA4\u503C\u3002</td></tr></tbody></table><h3 id="\u7EC4\u4EF6\u72B6\u6001\u5B58\u50A8\u5E93-component-status-repository" tabindex="-1"><a class="header-anchor" href="#\u7EC4\u4EF6\u72B6\u6001\u5B58\u50A8\u5E93-component-status-repository" aria-hidden="true">#</a> \u7EC4\u4EF6\u72B6\u6001\u5B58\u50A8\u5E93(Component Status Repository)</h3><p>\u7EC4\u4EF6\u72B6\u6001\u5B58\u50A8\u5E93\u5305\u542B\u7528\u6237\u754C\u9762\u4E2D&quot;\u7EC4\u4EF6\u72B6\u6001\u5386\u53F2\u8BB0\u5F55&quot;\u5DE5\u5177\u7684\u4FE1\u606F\u3002\u8FD9\u4E9B\u5C5E\u6027\u63A7\u5236\u7740\u8BE5\u5DE5\u5177\u7684\u5DE5\u4F5C\u65B9\u5F0F\u3002</p><p>\u5728<code>buffer.size</code>\u548C<code>snapshot.frequency</code>\u4E00\u8D77\u5DE5\u4F5C\u4EE5\u786E\u5B9A\u5386\u53F2\u6570\u636E\u4FDD\u7559\u91CF\u3002\u4F8B\u5982\uFF0C\u914D\u7F6E\u4E24\u5929\u7684\u5386\u53F2\u6570\u636E\uFF0C\u6BCF5\u5206\u949F\u53D1\u751F\u4E00\u6B21\u6570\u636E\u70B9\u5FEB\u7167\uFF0C\u4F60\u5C06\u914D\u7F6E <code>snapshot.frequency</code>\u4E3A&quot;5\u5206\u949F&quot;\uFF0C\u7F13\u51B2\u533A\u5927\u5C0F\u4E3A&quot;576&quot;\u3002\u4E3A\u4E86\u8FDB\u4E00\u6B65\u89E3\u91CA\u6B64\u793A\u4F8B\u6BCF60\u5206\u949F\uFF0C\u8BE5\u65F6\u95F4\u6BB5\u670912(60/5)\u4E2A\u5FEB\u7167\u7A97\u53E3\u3002\u4E3A\u4E86\u4FDD\u630148\u5C0F\u65F6(12 * 48)\u7684\u6570\u636E\uFF0C\u6700\u7EC8\u7F13\u51B2\u533A\u5927\u5C0F\u4E3A576\u3002</p><table><thead><tr><th><strong>\u5C5E\u6027</strong></th><th><strong>\u63CF\u8FF0</strong></th></tr></thead><tbody><tr><td><code>nifi.components.status.repository.implementation</code></td><td>\u7EC4\u4EF6\u72B6\u6001\u5B58\u50A8\u5E93\u5B9E\u73B0\u3002\u9ED8\u8BA4\u503C\u662F<code>org.apache.nifi.controller.status.history.VolatileComponentStatusRepository</code>\u4E14\u4E0D\u5E94\u66F4\u6539\u3002</td></tr><tr><td><code>nifi.components.status.repository.buffer.size</code></td><td>\u6307\u5B9A\u7EC4\u4EF6\u72B6\u6001\u5B58\u50A8\u5E93\u7684\u7F13\u51B2\u533A\u5927\u5C0F\u3002\u9ED8\u8BA4\u503C\u4E3A<code>1440</code>\u3002</td></tr><tr><td><code>nifi.components.status.snapshot.frequency</code></td><td>\u6B64\u503C\u6307\u793A\u663E\u793A\u7EC4\u4EF6\u72B6\u6001\u5386\u53F2\u8BB0\u5F55\u5FEB\u7167\u7684\u9891\u7387\u3002\u9ED8\u8BA4\u503C\u4E3A<code>1 min</code>\u3002</td></tr></tbody></table><h3 id="\u7AD9\u70B9\u5230\u7AD9\u70B9\u5C5E\u6027-site-to-site-properties" tabindex="-1"><a class="header-anchor" href="#\u7AD9\u70B9\u5230\u7AD9\u70B9\u5C5E\u6027-site-to-site-properties" aria-hidden="true">#</a> \u7AD9\u70B9\u5230\u7AD9\u70B9\u5C5E\u6027(Site to Site Properties)</h3><p>\u8FD9\u4E9B\u5C5E\u6027\u63A7\u5236\u5728\u6570\u636E\u6D41\u4E2D\u914D\u7F6E\u8FDC\u7A0B\u8FDB\u7A0B\u7EC4\u65F6\uFF0C\u6B64NiFi\u5B9E\u4F8B\u5982\u4F55\u4E0E\u8FDC\u7A0BNiFi\u5B9E\u4F8B\u901A\u4FE1\u3002\u8FDC\u7A0B\u8FDB\u7A0B\u7EC4\u53EF\u4EE5\u4ECERAW\u548CHTTP\u4E2D\u9009\u62E9\u4F20\u8F93\u534F\u8BAE\u3002\u547D\u540D\u7684\u5C5E\u6027<code>nifi.remote.input.socket.*</code>\u662F\u7279\u5B9A\u4E8ERAW\u4F20\u8F93\u534F\u8BAE\u7684\u3002\u540C\u6837\uFF0C<code>nifi.remote.input.http.*</code>HTTP\u4F20\u8F93\u534F\u8BAE\u7279\u5B9A\u5C5E\u6027\u3002</p>`,12),aa=e("thead",null,[e("tr",null,[e("th",null,[e("strong",null,"\u5C5E\u6027")]),e("th",null,[e("strong",null,"\u63CF\u8FF0")])])],-1),ia=e("tr",null,[e("td",null,[e("code",null,"nifi.remote.input.host")]),e("td",null,[t("\u5C06\u53D1\u9001\u7ED9\u5BA2\u6237\u7AEF\u4EE5\u8FDE\u63A5\u5230\u6B64NiFi\u5B9E\u4F8B\u4EE5\u8FDB\u884C\u7AD9\u70B9\u5230\u7AD9\u70B9\u901A\u4FE1\u7684\u4E3B\u673A\u540D\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u5B83\u662F\u6765\u81EA\u7684\u503C"),e("code",null,"InetAddress.getLocalHost().getHostName()"),t("\u3002\u5728\u7C7BUNIX\u64CD\u4F5C\u7CFB\u7EDF\u4E0A\uFF0C\u8FD9\u901A\u5E38\u662F"),e("code",null,"hostname"),t("\u547D\u4EE4\u7684\u8F93\u51FA\u3002")])],-1),ra=e("td",null,[e("code",null,"nifi.remote.input.secure")],-1),da=t("\u8FD9\u8868\u660E\u6B64NiFi\u5B9E\u4F8B\u4E0E\u8FDC\u7A0BNiFi\u5B9E\u4F8B\u4E4B\u95F4\u7684\u901A\u4FE1\u662F\u5426\u5E94\u8BE5\u662F\u5B89\u5168\u7684\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u5B83\u8BBE\u7F6E\u4E3A"),ca=e("code",null,"false",-1),pa=t("\u3002\u8981\u4F7F\u5B89\u5168\u7684\u7AD9\u70B9\u5230\u7AD9\u70B9\u5DE5\u4F5C\uFF0C\u8BF7\u5C06\u5C5E\u6027\u8BBE\u7F6E\u4E3A"),la=e("code",null,"true",-1),ua=t("\u3002\u8FD8\u5FC5\u987B\u914D\u7F6E\u8BB8\u591A\u5176\u4ED6"),ha={href:"http://nifi.apache.org/docs/NiFi-docs/html/administration-guide.html#security_properties",target:"_blank",rel:"noopener noreferrer"},ga=t("\u5B89\u5168\u5C5E\u6027"),ma=t("\u3002"),va=e("tr",null,[e("td",null,[e("code",null,"nifi.remote.input.socket.port")]),e("td",null,"\u7528\u4E8E\u7AD9\u70B9\u5230\u7AD9\u70B9\u901A\u4FE1\u7684\u8FDC\u7A0B\u8F93\u5165\u5957\u63A5\u5B57\u7AEF\u53E3\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u5B83\u662F\u7A7A\u767D\u7684\uFF0C\u4F46\u5B83\u5FC5\u987B\u5177\u6709\u4E00\u4E2A\u503C\u624D\u80FD\u4F7F\u7528RAW\u5957\u63A5\u5B57\u4F5C\u4E3A\u7AD9\u70B9\u5230\u7AD9\u70B9\u7684\u4F20\u8F93\u534F\u8BAE\u3002")],-1),ba=e("tr",null,[e("td",null,[e("code",null,"nifi.remote.input.http.enabled")]),e("td",null,[t("\u6307\u5B9A\u662F\u5426\u5E94\u5728\u6B64\u4E3B\u673A\u4E0A\u542F\u7528HTTP\u7AD9\u70B9\u5230\u7AD9\u70B9\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u5B83\u8BBE\u7F6E\u4E3A"),e("code",null,"true"),t("\u3002")])],-1),ka=e("tr",null,[e("td",null,[t("\u7AD9\u70B9\u5230\u7AD9\u70B9\u5BA2\u6237\u7AEF\u662F\u4F7F\u7528HTTP\u8FD8\u662FHTTPS\u53D6\u51B3\u4E8E"),e("code",null,"nifi.remote.input.secure"),t("\u3002\u5982\u679C\u8BBE\u7F6E\u4E3A"),e("code",null,"true"),t("\uFF0C\u5219\u5C06\u8BF7\u6C42\u4F5C\u4E3AHTTPS\u53D1\u9001\u5230"),e("code",null,"nifi.web.https.port"),t("\u3002\u5982\u679C\u8BBE\u7F6E\u4E3A"),e("code",null,"false"),t("\uFF0C\u5219\u53D1\u9001HTTP\u8BF7\u6C42"),e("code",null,"nifi.web.http.port"),t("\u3002")]),e("td")],-1),fa=e("tr",null,[e("td",null,[e("code",null,"nifi.remote.input.http.transaction.ttl")]),e("td",null,[t("\u6307\u5B9A\u4E8B\u52A1\u5728\u670D\u52A1\u5668\u4E0A\u4FDD\u6301\u6D3B\u52A8\u72B6\u6001\u7684\u65F6\u95F4\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u5B83\u8BBE\u7F6E\u4E3A"),e("code",null,"30 secs"),t("\u3002")])],-1),ya=e("tr",null,[e("td",null,"\u5982\u679C\u7AD9\u70B9\u5230\u7AD9\u70B9\u5BA2\u6237\u7AEF\u5728\u8FD9\u6BB5\u65F6\u95F4\u4E4B\u540E\u6CA1\u6709\u7EE7\u7EED\u8FDB\u884C\u4E0B\u4E00\u4E2A\u64CD\u4F5C\uFF0C\u5219\u4ECE\u8FDC\u7A0BNiFi\u5B9E\u4F8B\u4E2D\u4E22\u5F03\u8BE5\u4E8B\u52A1\u3002\u4F8B\u5982\uFF0C\u5F53\u5BA2\u6237\u7AEF\u521B\u5EFA\u4E8B\u52A1\u4F46\u4E0D\u53D1\u9001\u6216\u63A5\u6536\u6D41\u6587\u4EF6\u65F6\uFF0C\u6216\u8005\u5BA2\u6237\u7AEF\u53D1\u9001\u6216\u63A5\u6536\u6D41\u6587\u4EF6\u4F46\u672A\u786E\u8BA4\u8BE5\u4E8B\u52A1\u65F6\u3002"),e("td")],-1),_a=e("tr",null,[e("td",null,[e("code",null,"nifi.remote.contents.cache.expiration")]),e("td",null,"\u6307\u5B9ANiFi\u5728\u901A\u8FC7\u7AD9\u70B9\u5230\u7AD9\u70B9\u8FDB\u884C\u901A\u4FE1\u65F6\u5E94\u7F13\u5B58\u6709\u5173\u8FDC\u7A0BNiFi\u5B9E\u4F8B\u7684\u4FE1\u606F\u7684\u65F6\u95F4\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0CNiFi\u5C06\u7F13\u5B58")],-1),Fa=e("tr",null,[e("td",null,[t("\u6765\u81EA\u8FDC\u7A0B\u7CFB\u7EDF\u7684\u54CD\u5E94"),e("code",null,"30 secs"),t("\u3002\u8FD9\u5141\u8BB8NiFi\u907F\u514D\u4E0D\u65AD\u5730\u5411\u8FDC\u7A0B\u7CFB\u7EDF\u53D1\u51FAHTTP\u8BF7\u6C42\uFF0C\u8FD9\u5728NiFi\u7684\u8FD9\u4E2A\u5B9E\u4F8B")]),e("td")],-1),qa=e("tr",null,[e("td",null,"\u5177\u6709\u8BB8\u591A\u8FDC\u7A0B\u8FDB\u7A0B\u7EC4\u5B9E\u4F8B\u65F6\u5C24\u4E3A\u91CD\u8981\u3002"),e("td")],-1),xa=o('<h3 id="\u53CD\u5411\u4EE3\u7406\u7684\u7AD9\u70B9\u5230\u7AD9\u70B9\u8DEF\u7531\u5C5E\u6027-site-to-site-routing-properties-for-reverse-proxies" tabindex="-1"><a class="header-anchor" href="#\u53CD\u5411\u4EE3\u7406\u7684\u7AD9\u70B9\u5230\u7AD9\u70B9\u8DEF\u7531\u5C5E\u6027-site-to-site-routing-properties-for-reverse-proxies" aria-hidden="true">#</a> \u53CD\u5411\u4EE3\u7406\u7684\u7AD9\u70B9\u5230\u7AD9\u70B9\u8DEF\u7531\u5C5E\u6027(Site to Site Routing Properties for Reverse Proxies)</h3><p>\u7AD9\u70B9\u5230\u7AD9\u70B9\u9700\u8981\u5BA2\u6237\u7AEF\u548C\u8FDC\u7A0BNiFi\u8282\u70B9\u4E4B\u95F4\u7684\u5BF9\u7B49\u901A\u4FE1\u3002\u4F8B\u5982\uFF0C\u5982\u679C\u8FDC\u7A0BNiFi\u96C6\u7FA4\u5177\u67093\u4E2A\u8282\u70B9(<code>NiFi0</code>\uFF0C<code>NiFi1</code>\u548C<code>NiFi2</code>)\uFF0C\u5219\u5FC5\u987B\u80FD\u591F\u5230\u8FBE\u6BCF\u4E2A\u8FDC\u7A0B\u8282\u70B9\u7684\u5BA2\u6237\u7AEF\u8BF7\u6C42\u3002</p><p>\u5982\u679C\u8BA1\u5212\u901A\u8FC7\u4E92\u8054\u7F51\u6216\u516C\u53F8\u9632\u706B\u5899\u4ECE/\u5411\u7AD9\u70B9\u5230\u7AD9\u70B9\u5BA2\u6237\u7AEF\u63A5\u6536/\u4F20\u8F93\u6570\u636E\uFF0C\u5219\u53EF\u4EE5\u5728NiFi\u96C6\u7FA4\u8282\u70B9\u524D\u90E8\u7F72\u53CD\u5411\u4EE3\u7406\u670D\u52A1\u5668\uFF0C\u4F5C\u4E3A\u5C06\u5BA2\u6237\u7AEF\u8BF7\u6C42\u8DEF\u7531\u5230\u7684\u7F51\u5173\u4E0A\u6E38NiFi\u8282\u70B9\uFF0C\u4EE5\u51CF\u5C11\u5FC5\u987B\u66B4\u9732\u7684\u670D\u52A1\u5668\u548C\u7AEF\u53E3\u7684\u6570\u91CF\u3002</p><p>\u5728\u8FD9\u6837\u7684\u73AF\u5883\u4E2D\uFF0C\u540C\u4E00\u7F51\u7EDC\u4E2D\u7684\u7AD9\u70B9\u5230\u7AD9\u70B9\u5BA2\u6237\u7AEF\u4E5F\u53EF\u4EE5\u8BBF\u95EE\u76F8\u540C\u7684NiFi\u96C6\u7FA4\u3002\u5C06\u6D41\u6587\u4EF6\u53D1\u9001\u7ED9\u81EA\u8EAB\u4EE5\u5728NiFi\u96C6\u7FA4\u8282\u70B9\u4E4B\u95F4\u8FDB\u884C\u8D1F\u8F7D\u5206\u914D\u53EF\u4EE5\u662F\u5178\u578B\u793A\u4F8B\u3002\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u5BA2\u6237\u7AEF\u8BF7\u6C42\u5E94\u8BE5\u76F4\u63A5\u8DEF\u7531\u5230\u8282\u70B9\u800C\u4E0D\u901A\u8FC7\u53CD\u5411\u4EE3\u7406\u3002</p><p>\u4E3A\u4E86\u652F\u6301\u6B64\u7C7B\u90E8\u7F72\uFF0C\u8FDC\u7A0BNiFi\u96C6\u7FA4\u9700\u8981\u6839\u636E\u5BA2\u6237\u7AEF\u8BF7\u6C42\u4E0A\u4E0B\u6587\u52A8\u6001\u516C\u5F00\u5176\u7AD9\u70B9\u5230\u7AD9\u70B9\u7AEF\u70B9\u3002\u4EE5\u4E0B\u5C5E\u6027\u914D\u7F6E\u5BF9\u7B49\u65B9\u5E94\u5982\u4F55\u5411\u5BA2\u6237\u7AEF\u516C\u5F00\u3002\u8DEF\u7531\u5B9A\u4E49\u5305\u62EC4\u4E2A\u5C5E\u6027\uFF0C<code>when</code>\uFF0C<code>hostname</code>\uFF0C<code>port</code>\uFF0C\u548C<code>secure</code>\uFF0C\u901A\u8FC7\u5206\u7EC4<code>protocol</code>\u548C<code>name</code>\u3002\u53EF\u4EE5\u914D\u7F6E\u591A\u4E2A\u8DEF\u7531\u5B9A\u4E49\u3002<code>protocol</code>\u8868\u793A\u7AD9\u70B9\u5230\u7AD9\u70B9\u4F20\u8F93\u534F\u8BAE\uFF0C\u5373<code>RAW</code>\u6216<code>HTTP</code>\u3002</p><table><thead><tr><th><strong>\u5C5E\u6027</strong></th><th><strong>\u63CF\u8FF0</strong></th></tr></thead><tbody><tr><td><code>nifi.remote.route.{protocol}.{name}.when</code></td><td>\u5E03\u5C14\u503C\uFF0C<code>true</code>\u6216<code>false</code>\u3002\u63A7\u5236\u662F\u5426\u5E94\u4F7F\u7528\u6B64\u540D\u79F0\u7684\u8DEF\u7531\u5B9A\u4E49\u3002</td></tr><tr><td><code>nifi.remote.route.{protocol}.{name}.hostname</code></td><td>\u6307\u5B9A\u5C06\u5F15\u5165\u7AD9\u70B9\u5230\u7AD9\u70B9\u5BA2\u6237\u7AEF\u4EE5\u8FDB\u884C\u8FDB\u4E00\u6B65\u901A\u4FE1\u7684\u4E3B\u673A\u540D\u3002</td></tr><tr><td><code>nifi.remote.route.{protocol}.{name}.port</code></td><td>\u6307\u5B9A\u5C06\u5F15\u5165\u7AD9\u70B9\u5230\u7AD9\u70B9\u5BA2\u6237\u7AEF\u4EE5\u8FDB\u884C\u8FDB\u4E00\u6B65\u901A\u4FE1\u7684\u7AEF\u53E3\u53F7\u3002</td></tr><tr><td><code>nifi.remote.route.{protocol}.{name}.secure</code></td><td>\u5E03\u5C14\u503C\uFF0C<code>true</code>\u6216<code>false</code>\u3002\u6307\u5B9A\u662F\u5426\u5E94\u901A\u8FC7\u5B89\u5168\u534F\u8BAE\u8BBF\u95EE\u8FDC\u7A0B\u5BF9\u7B49\u65B9\u3002\u9ED8\u8BA4\u4E3A<code>false</code>\u3002</td></tr></tbody></table><p>\u4EE5\u4E0A\u6240\u6709\u8DEF\u7531\u5C5E\u6027\u90FD\u53EF\u4EE5\u4F7F\u7528NiFi\u8868\u8FBE\u5F0F\u8BED\u8A00\u4ECE\u8BF7\u6C42\u4E0A\u4E0B\u6587\u8BA1\u7B97\u76EE\u6807\u5BF9\u7B49\u9879\u63CF\u8FF0\u3002\u53EF\u7528\u53D8\u91CF\u662F\uFF1A</p><table><thead><tr><th><strong>\u53D8\u91CF\u540D</strong></th><th><strong>\u63CF\u8FF0</strong></th></tr></thead><tbody><tr><td>`s2s.{source</td><td>target}.hostname`</td></tr><tr><td>`s2s.{source</td><td>target}.port`</td></tr><tr><td>`s2s.{source</td><td>target}.secure`</td></tr><tr><td><code>s2s.protocol</code></td><td>\u6B63\u5728\u4F7F\u7528\u7684\u7AD9\u70B9\u5230\u7AD9\u70B9\u534F\u8BAE\u7684\u540D\u79F0\uFF0C<code>RAW</code>\u6216<code>HTTP</code>\u3002</td></tr><tr><td><code>s2s.request</code></td><td>\u5F53\u524D\u8BF7\u6C42\u7C7B\u578B\u7684\u540D\u79F0\uFF0C<code>SiteToSiteDetail</code>\u6216<code>Peers</code>\u3002\u6709\u5173\u8BE6\u7EC6\u4FE1\u606F\uFF0C\u8BF7\u53C2\u9605\u4E0B\u9762\u7684\u7AD9\u70B9\u5230\u7AD9\u70B9\u534F\u8BAE\u5E8F\u5217\u3002</td></tr><tr><td><code>HTTP request headers</code></td><td>HTTP\u8BF7\u6C42\u6807\u5934\u503C\u53EF\u4EE5\u901A\u8FC7\u5176\u540D\u79F0\u5F15\u7528\u3002</td></tr></tbody></table><p>\u7AD9\u70B9\u5230\u7AD9\u70B9\u534F\u8BAE\u5E8F\u5217(Site to Site protocol sequence)</p><p>\u6B63\u786E\u914D\u7F6E\u8FD9\u4E9B\u5C5E\u6027\u9700\u8981\u5BF9\u7AD9\u70B9\u5230\u7AD9\u70B9\u534F\u8BAE\u5E8F\u5217\u6709\u4E00\u4E9B\u4E86\u89E3\u3002</p><ol><li><p>\u5BA2\u6237\u7AEF\u901A\u8FC7\u5411\u6307\u5B9A\u7684\u8FDC\u7A0BURL\u53D1\u9001HTTP(S)\u8BF7\u6C42\u6765\u83B7\u53D6\u7AD9\u70B9\u5230\u7AD9\u70B9\u534F\u8BAE\uFF0C\u4EE5\u83B7\u53D6\u8FDC\u7A0B\u96C6\u7FA4\u7AD9\u70B9\u5230\u7AD9\u70B9\u4FE1\u606F\u3002\u5177\u4F53\u6765\u8BF4\uFF0C\u5230&#39; <em>/NiFi-api/site-to-site</em> &#39;\u3002\u8C03\u7528\u6B64\u8BF7\u6C42<code>SiteToSiteDetail</code>\u3002</p></li><li><p>\u8FDC\u7A0BNiFi\u8282\u70B9\u54CD\u5E94\u5176\u8F93\u5165\u548C\u8F93\u51FA\u7AEF\u53E3\uFF0C\u4EE5\u53CARAW\u548CTCP\u4F20\u8F93\u534F\u8BAE\u7684TCP\u7AEF\u53E3\u53F7\u3002</p></li><li><p>\u5BA2\u6237\u7AEF\u4F7F\u7528\uFF032\u8FD4\u56DE\u7684TCP\u7AEF\u53E3\u53F7\u53D1\u9001\u53E6\u4E00\u4E2A\u8BF7\u6C42\u4EE5\u83B7\u53D6\u8FDC\u7A0B\u5BF9\u7B49\u65B9\u3002\u6839\u636E\u6B64\u8BF7\u6C42\uFF0C\u539F\u59CB\u5957\u63A5\u5B57\u901A\u4FE1\u7528\u4E8ERAW\u4F20\u8F93\u534F\u8BAE\uFF0C\u800CHTTP\u7EE7\u7EED\u4F7F\u7528HTTP(S)\u3002\u8C03\u7528\u6B64\u8BF7\u6C42<code>Peers</code>\u3002</p></li><li><p>\u8FDC\u7A0BNiFi\u8282\u70B9\u4F7F\u7528\u5305\u542B\u4E3B\u673A\u540D\uFF0C\u7AEF\u53E3\uFF0C\u5B89\u5168\u6027\u548C\u5DE5\u4F5C\u8D1F\u8F7D(\u4F8B\u5982\u6392\u961F\u7684FlowFiles\u6570)\u7684\u53EF\u7528\u8FDC\u7A0B\u5BF9\u7B49\u4F53\u5217\u8868\u8FDB\u884C\u54CD\u5E94\u3002\u4ECE\u8FD9\u4E00\u70B9\u5F00\u59CB\uFF0C\u5728\u5BA2\u6237\u7AEF\u548C\u8FDC\u7A0BNiFi\u8282\u70B9\u4E4B\u95F4\u8FDB\u884C\u8FDB\u4E00\u6B65\u7684\u901A\u4FE1\u3002</p></li><li><p>\u5BA2\u6237\u7AEF\u6839\u636E\u5DE5\u4F5C\u8D1F\u8F7D\u4FE1\u606F\u51B3\u5B9A\u4ECE\u54EA\u4E2A\u5BF9\u7B49\u65B9\u4F20\u8F93\u6570\u636E\u3002</p></li><li><p>\u5BA2\u6237\u7AEF\u5411\u8FDC\u7A0BNiFi\u8282\u70B9\u53D1\u9001\u521B\u5EFA\u4E8B\u52A1\u7684\u8BF7\u6C42\u3002</p></li><li><p>\u8FDC\u7A0BNiFi\u8282\u70B9\u63A5\u53D7\u8BE5\u4E8B\u52A1\u3002</p></li><li><p>\u6570\u636E\u88AB\u53D1\u9001\u5230\u76EE\u6807\u5BF9\u7B49\u65B9\u3002\u53EF\u4EE5\u6279\u91CF\u53D1\u9001\u591A\u4E2A\u6570\u636E\u5305\u3002</p></li><li><p>\u5F53\u6CA1\u6709\u66F4\u591A\u6570\u636E\u8981\u53D1\u9001\u6216\u8FBE\u5230\u6279\u91CF\u9650\u5236\u65F6\uFF0C\u901A\u8FC7\u8BA1\u7B97\u53D1\u9001\u6570\u636E\u7684CRC32\u54C8\u5E0C\u6765\u786E\u8BA4\u4E24\u7AEF\u7684\u4E8B\u52A1\u3002</p></li><li><p>\u4EA4\u6613\u5728\u4E24\u7AEF\u90FD\u6709\u3002</p></li></ol><p>\u53CD\u5411\u4EE3\u7406\u914D\u7F6E</p><p>\u5927\u591A\u6570\u53CD\u5411\u4EE3\u7406\u8F6F\u4EF6\u90FD\u5B9E\u73B0HTTP\u548CTCP\u4EE3\u7406\u6A21\u5F0F\u3002\u5BF9\u4E8ENiFi RAW\u7AD9\u70B9\u5230\u7AD9\u70B9\u534F\u8BAE\uFF0C\u9700\u8981HTTP\u548CTCP\u4EE3\u7406\u914D\u7F6E\uFF0C\u5E76\u4E14\u81F3\u5C11\u9700\u8981\u6253\u5F002\u4E2A\u7AEF\u53E3\u3002NiFi HTTP\u7AD9\u70B9\u5230\u7AD9\u70B9\u534F\u8BAE\u53EF\u4EE5\u5C06\u53CD\u5411\u4EE3\u7406\u6240\u9700\u7684\u5F00\u653E\u7AEF\u53E3\u6570\u91CF\u6700\u5C0F\u5316\u4E3A1\u3002</p>',13),Na=t("\u5728\u53CD\u5411\u4EE3\u7406\u4E2D\u8BBE\u7F6E\u6B63\u786E\u7684HTTP\u5934\u5BF9\u4E8ENiFi\u6B63\u5E38\u5DE5\u4F5C\u81F3\u5173\u91CD\u8981\uFF0C\u4E0D\u4EC5\u53EF\u4EE5\u8DEF\u7531\u8BF7\u6C42\uFF0C\u8FD8\u53EF\u4EE5\u6388\u6743\u5BA2\u6237\u7AEF\u8BF7\u6C42\u3002\u53E6\u8BF7\u53C2\u9605"),Pa={href:"http://nifi.apache.org/docs/NiFi-docs/html/administration-guide.html#proxy_configuration",target:"_blank",rel:"noopener noreferrer"},Aa=t("\u4EE3\u7406\u914D\u7F6E"),Sa=t("\u4EE5\u83B7\u53D6\u8BE6\u7EC6\u4FE1"),Ta=o(`<p>\u53EF\u4EE5\u5728\u53CD\u5411\u4EE3\u7406\u670D\u52A1\u5668\u4E0A\u5E94\u7528\u4E24\u79CD\u7C7B\u578B\u7684\u8BF7\u6C42\u5230NiFi\u8282\u70B9\u6620\u5C04\u6280\u672F\u3002\u4E00\u4E2A\u662F&quot;\u670D\u52A1\u5668\u540D\u79F0\u5230\u8282\u70B9&quot;\uFF0C\u53E6\u4E00\u4E2A\u662F&quot;\u7AEF\u53E3\u53F7\u5230\u8282\u70B9&quot;\u3002</p><p>\u4F7F\u7528&quot;\u670D\u52A1\u5668\u540D\u79F0\u5230\u8282\u70B9&quot;\uFF0C\u53EF\u4EE5\u4F7F\u7528\u76F8\u540C\u7684\u7AEF\u53E3\u6839\u636E\u8BF7\u6C42\u7684\u670D\u52A1\u5668\u540D\u79F0(\u4F8B\u5982<code>NiFi0.example.com</code>\uFF0C<code>NiFi1.example.com</code>)\u5C06\u8BF7\u6C42\u8DEF\u7531\u5230\u4E0D\u540C\u7684\u4E0A\u6E38NiFi\u8282\u70B9\u3002\u5E94\u5C06\u4E3B\u673A\u540D\u89E3\u6790\u914D\u7F6E\u4E3A\u5C06\u4E0D\u540C\u7684\u4E3B\u673A\u540D\u6620\u5C04\u5230\u76F8\u540C\u7684\u53CD\u5411\u4EE3\u7406\u5730\u5740\uFF0C\u8FD9\u53EF\u4EE5\u901A\u8FC7\u6DFB\u52A0/ etc / hosts\u6587\u4EF6\u6216DNS\u670D\u52A1\u5668\u6761\u76EE\u6765\u5B8C\u6210\u3002\u6B64\u5916\uFF0C\u5982\u679C\u53CD\u5411\u4EE3\u7406\u7684\u5BA2\u6237\u7AEF\u4F7F\u7528HTTPS\uFF0C\u5219\u53CD\u5411\u4EE3\u7406\u670D\u52A1\u5668\u8BC1\u4E66\u5E94\u5177\u6709\u901A\u914D\u7B26\u516C\u7528\u540D\u6216SAN\uFF0C\u4EE5\u4FBF\u7531\u4E0D\u540C\u7684\u4E3B\u673A\u540D\u8BBF\u95EE\u3002</p><p>\u67D0\u4E9B\u53CD\u5411\u4EE3\u7406\u6280\u672F\u4E0D\u652F\u6301\u670D\u52A1\u5668\u540D\u79F0\u8DEF\u7531\u89C4\u5219\uFF0C\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u8BF7\u4F7F\u7528&quot;\u7AEF\u53E3\u53F7\u5230\u8282\u70B9&quot;\u6280\u672F\u3002&quot;\u7AEF\u53E3\u53F7\u5230\u8282\u70B9&quot;\u6620\u5C04\u8981\u6C42NiFi\u96C6\u7FA4\u7684\u53CD\u5411\u4EE3\u7406\u5904\u7684N\u5F00\u653E\u7AEF\u53E3\u7531N\u4E2A\u8282\u70B9\u7EC4\u6210\u3002</p><p>\u6709\u5173\u5B9E\u9645\u914D\u7F6E\uFF0C\u8BF7\u53C2\u9605\u4EE5\u4E0B\u793A\u4F8B\u3002</p><p>\u7AD9\u70B9\u5230\u7AD9\u70B9\u548C\u53CD\u5411\u4EE3\u7406\u793A\u4F8B</p><p>\u4E0B\u9762\u662F\u4E00\u4E9B\u793A\u4F8B\u53CD\u5411\u4EE3\u7406\u548CNiFi\u8BBE\u7F6E\uFF0C\u4EE5\u8BF4\u660E\u914D\u7F6E\u6587\u4EF6\u7684\u5916\u89C2\u3002</p><p>\u4E0B\u56FE\u4E2D\u7684Client1\u8868\u793A\u65E0\u6CD5\u76F4\u63A5\u8BBF\u95EENiFi\u8282\u70B9\u7684\u5BA2\u6237\u7AEF\uFF0C\u5B83\u901A\u8FC7\u53CD\u5411\u4EE3\u7406\u8FDB\u884C\u8BBF\u95EE\uFF0C\u800CClient2\u5177\u6709\u76F4\u63A5\u8BBF\u95EE\u6743\u9650\u3002</p><p>\u5728\u6B64\u793A\u4F8B\u4E2D\uFF0CNginx\u7528\u4F5C\u53CD\u5411\u4EE3\u7406\u3002</p><p>\u793A\u4F8B1\uFF1ARAW - \u670D\u52A1\u5668\u540D\u79F0\u5230\u8282\u70B9\u6620\u5C04</p><p><img src="https://nifichina.gitee.io/image/general/s2s-rproxy-servername.svg" alt="\u670D\u52A1\u5668\u540D\u79F0\u5230\u8282\u70B9\u6620\u5C04"></p><ol><li><p>Client1\u542F\u52A8\u7AD9\u70B9\u5230\u7AD9\u70B9\u534F\u8BAE\uFF0C\u8BF7\u6C42\u88AB\u8DEF\u7531\u5230\u4E0A\u6E38NiFi\u8282\u70B9\u4E4B\u4E00\u3002NiFi\u8282\u70B9\u8BA1\u7B97RAW\u7684\u7AD9\u70B9\u5230\u7AD9\u70B9\u7AEF\u53E3\u3002\u901A\u8FC7\u4E0B\u9762\u663E\u793A\u7684_nifi.properties_\u4E2D\u7684\u8DEF\u7531\u89C4\u5219<strong>example1</strong>\uFF0C\u8FD4\u56DE\u7AEF\u53E310443\u3002</p></li><li><p>Client1\u8981\u6C42\u5BF9\u7B49\u65B9<code>nifi.example.com:10443</code>\uFF0C\u8BF7\u6C42\u88AB\u8DEF\u7531\u5230<code>NiFi0:8081</code>\u3002NiFi\u8282\u70B9\u8BA1\u7B97\u53EF\u7528\u7684\u5BF9\u7B49\u4F53\uFF0C\u901A\u8FC7<strong>example1</strong>\u8DEF\u7531\u89C4\u5219\uFF0C<code>NiFi0:8081</code>\u8F6C\u6362\u4E3A<code>NiFi0.example.com:10443</code>\uFF0C<code>NiFi1</code>\u4EE5\u53CA\u548C<code>NiFi2</code>\u3002\u5176\u7ED3\u679C\u662F\uFF0C<code>NiFi0.example.com:10443</code>\uFF0C<code>NiFi1.example.com:10443</code>\u548C<code>NiFi2.example.com:10443</code>\u8FD4\u56DE\u3002</p></li><li><p>Client1\u51B3\u5B9A<code>NiFi2.example.com:10443</code>\u7528\u4E8E\u8FDB\u4E00\u6B65\u7684\u901A\u4FE1\u3002</p></li><li><p>\u53E6\u4E00\u65B9\u9762\uFF0CClient2\u6709\u4E24\u4E2A\u7528\u4E8E\u7AD9\u70B9\u5230\u7AD9\u70B9\u5F15\u5BFCURI\u7684URI\uFF0C\u5E76\u4F7F\u7528\u5176\u4E2D\u4E00\u4E2A\u542F\u52A8\u534F\u8BAE\u3002\u5728<strong>\u4F8B1</strong>\u8DEF\u7531\u4E0D\u5339\u914D\uFF0C\u8FD9\u5BF9\u4E8E\u8BE5\u8BF7\u6C42\uFF0C\u5E76\u8FD4\u56DE\u7AEF\u53E38081\u3002</p></li><li><p>Client2\u5411\u540C\u884C\u8BE2\u95EE<code>NiFi1:8081</code>\u3002\u8BE5<strong>\u4F8B1</strong>\u4E0D\u5339\u914D\uFF0C\u6240\u4EE5\u539F\u6765\u7684<code>NiFi0:8081</code>\uFF0C<code>NiFi1:8081</code>\u5E76\u4E14<code>NiFi2:8081</code>\u56E0\u4E3A\u5B83\u4EEC\u8FD4\u56DE\u3002</p></li><li><p>Client2\u51B3\u5B9A\u4F7F\u7528<code>NiFi2:8081</code>\u8FDB\u4E00\u6B65\u7684\u901A\u4FE1\u3002</p></li></ol><p>\u5728_nifi.properties\u4E2D_\u5B9A\u4E49\u7684\u8DEF\u7531\u89C4\u5219<strong>example1</strong>(\u6240\u6709\u8282\u70B9\u5177\u6709\u76F8\u540C\u7684\u8DEF\u7531\u914D\u7F6E)\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># S2S Routing for RAW\uFF0C using server name to node
nifi.remote.route.raw.example1.when=\\
\${X-ProxyHost:equals(&#39;nifi.example.com&#39;):or(\\
\${s2s.source.hostname:equals(&#39;nifi.example.com&#39;):or(\\
\${s2s.source.hostname:equals(&#39;192.168.99.100&#39;)})})}
nifi.remote.route.raw.example1.hostname=\${s2s.target.hostname}.example.com
nifi.remote.route.raw.example1.port=10443
nifi.remote.route.raw.example1.secure=true
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><em>nginx.conf</em>\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>http {

    upstream NiFi {
        server NiFi0:8443;
        server NiFi1:8443;
        server NiFi2:8443;
    }

    # Use dnsmasq so that hostnames such as &#39;NiFi0&#39; can be resolved by /etc/hosts
    resolver 127.0.0.1;

    server {
        listen 443 ssl;
        server_name nifi.example.com;
        ssl_certificate /etc/nginx/nginx.crt;
        ssl_certificate_key /etc/nginx/nginx.key;

        proxy_ssl_certificate /etc/nginx/nginx.crt;
        proxy_ssl_certificate_key /etc/nginx/nginx.key;
        proxy_ssl_trusted_certificate /etc/nginx/NiFi-cert.pem;

        location / {
            proxy_pass https://NiFi;
            proxy_set_header X-ProxyScheme https;
            proxy_set_header X-ProxyHost nginx.example.com;
            proxy_set_header X-ProxyPort 17590;
            proxy_set_header X-ProxyContextPath /;
            proxy_set_header X-ProxiedEntitiesChain $ssl_client_s_dn;
        }
    }
}

stream {

    map $ssl_preread_server_name $NiFi {
        NiFi0.example.com NiFi0;
        NiFi1.example.com NiFi1;
        NiFi2.example.com NiFi2;
        default NiFi0;
    }

    resolver 127.0.0.1;

    server {
        listen 10443;
        proxy_pass $NiFi:8081;
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u793A\u4F8B2\uFF1ARAW - \u8282\u70B9\u6620\u5C04\u7684\u7AEF\u53E3\u53F7</p><p><img src="https://nifichina.gitee.io/image/general/s2s-rproxy-portnumber.svg" alt="\u7AEF\u53E3\u53F7\u5230\u8282\u70B9\u6620\u5C04"></p><p>\u8BE5<strong>\u4F8B\u9898</strong>\u8DEF\u7531\u6620\u5C04\u539F\u59CB\u4E3B\u673A\u540D(<code>NiFi0</code>\uFF0C<code>NiFi1</code>\u548C<code>NiFi2</code>)\uFF0C\u4EE5\u4E0D\u540C\u7684\u4EE3\u7406\u7AEF\u53E3(<code>10443</code>\uFF0C<code>10444</code>\u4EE5\u53CA<code>10445</code>\u4F7F\u7528)<code>equals</code>\u548C<code>ifElse</code>\u8868\u8FBE\u5F0F\u3002</p><p>\u5728 <em>nifi.properties</em> \u4E2D\u5B9A\u4E49\u7684\u8DEF\u7531\u89C4\u5219<strong>example2</strong>(\u6240\u6709\u8282\u70B9\u5177\u6709\u76F8\u540C\u7684\u8DEF\u7531\u914D\u7F6E)\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>#S2S\u8DEF\u7531\u4E3ARAW\uFF0C\u4F7F\u7528\u7AEF\u53E3\u53F7\u5230\u8282\u70B9
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># S2S Routing for RAW\uFF0C using port number to node
nifi.remote.route.raw.example2.when=\\
\${X-ProxyHost:equals(&#39;nifi.example.com&#39;):or(\\
\${s2s.source.hostname:equals(&#39;nifi.example.com&#39;):or(\\
\${s2s.source.hostname:equals(&#39;192.168.99.100&#39;)})})}
nifi.remote.route.raw.example2.hostname=nifi.example.com
nifi.remote.route.raw.example2.port=\\
\${s2s.target.hostname:equals(&#39;NiFi0&#39;):ifElse(&#39;10443&#39;\uFF0C\\
\${s2s.target.hostname:equals(&#39;NiFi1&#39;):ifElse(&#39;10444&#39;\uFF0C\\
\${s2s.target.hostname:equals(&#39;NiFi2&#39;):ifElse(&#39;10445&#39;\uFF0C\\
&#39;undefined&#39;)})})}
nifi.remote.route.raw.example2.secure=true
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><em>nginx.conf</em>\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>http {
    # Same as example 1.
}

stream {

    map $ssl_preread_server_name $NiFi {
        NiFi0.example.com NiFi0;
        NiFi1.example.com NiFi1;
        NiFi2.example.com NiFi2;
        default NiFi0;
    }

    resolver 127.0.0.1;

    server {
        listen 10443;
        proxy_pass NiFi0:8081;
    }
    server {
        listen 10444;
        proxy_pass NiFi1:8081;
    }
    server {
        listen 10445;
        proxy_pass NiFi2:8081;
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u793A\u4F8B3\uFF1AHTTP - \u670D\u52A1\u5668\u540D\u79F0\u5230\u8282\u70B9\u6620\u5C04</p><p><img src="https://nifichina.gitee.io/image/general/s2s-rproxy-http.svg" alt="\u670D\u52A1\u5668\u540D\u79F0\u5230\u8282\u70B9\u6620\u5C04"></p><p>_nifi.properties\u4E2D_\u5B9A\u4E49\u7684\u8DEF\u7531\u89C4\u5219<strong>example3</strong>(\u6240\u6709\u8282\u70B9\u5177\u6709\u76F8\u540C\u7684\u8DEF\u7531\u914D\u7F6E)\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code># S2S Routing for HTTP
nifi.remote.route.http.example3.when=\${X-ProxyHost:contains(&#39;.example.com&#39;)}
nifi.remote.route.http.example3.hostname=\${s2s.target.hostname}.example.com
nifi.remote.route.http.example3.port=443
nifi.remote.route.http.example3.secure=true
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><em>nginx.conf</em>\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>http {
    upstream NiFi_cluster {
        server NiFi0:8443;
        server NiFi1:8443;
        server NiFi2:8443;
    }

    # If target node is not specified\uFF0C use one from cluster.
    map $http_host $NiFi {
        NiFi0.example.com:443 &quot;NiFi0:8443&quot;;
        NiFi1.example.com:443 &quot;NiFi1:8443&quot;;
        NiFi2.example.com:443 &quot;NiFi2:8443&quot;;
        default &quot;NiFi_cluster&quot;;
    }

    resolver 127.0.0.1;

    server {
        listen 443 ssl;
        server_name ~^(.+\\.example\\.com)$;
        ssl_certificate /etc/nginx/nginx.crt;
        ssl_certificate_key /etc/nginx/nginx.key;

        proxy_ssl_certificate /etc/nginx/nginx.crt;
        proxy_ssl_certificate_key /etc/nginx/nginx.key;
        proxy_ssl_trusted_certificate /etc/nginx/NiFi-cert.pem;

        location / {
            proxy_pass https://$NiFi;
            proxy_set_header X-ProxyScheme https;
            proxy_set_header X-ProxyHost $1;
            proxy_set_header X-ProxyPort 443;
            proxy_set_header X-ProxyContextPath /;
            proxy_set_header X-ProxiedEntitiesChain $ssl_client_s_dn;
        }
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u7F51\u7EDC\u5C5E\u6027-web-properties" tabindex="-1"><a class="header-anchor" href="#\u7F51\u7EDC\u5C5E\u6027-web-properties" aria-hidden="true">#</a> \u7F51\u7EDC\u5C5E\u6027 (Web Properties)</h3><p>\u8FD9\u4E9B\u5C5E\u6027\u4E0E\u57FA\u4E8EWeb\u7684\u7528\u6237\u754C\u9762\u6709\u5173\u3002</p><table><thead><tr><th><strong>\u5C5E\u6027</strong></th><th><strong>\u63CF\u8FF0</strong></th></tr></thead><tbody><tr><td><code>nifi.web.war.directory</code></td><td>\u8FD9\u662Fweb war\u76EE\u5F55\u7684\u4F4D\u7F6E\u3002\u9ED8\u8BA4\u503C\u4E3A<code>./lib</code>\u3002</td></tr><tr><td><code>nifi.web.http.host</code></td><td>HTTP\u4E3B\u673A\u3002\u9ED8\u8BA4\u4E3A\u7A7A\u767D\u3002</td></tr><tr><td><code>nifi.web.http.port</code></td><td>HTTP\u7AEF\u53E3\u3002\u9ED8\u8BA4\u503C\u4E3A<code>8080</code>\u3002</td></tr><tr><td><code>nifi.web.http.port.forwarding</code></td><td>\u5C06\u4F20\u5165\u7684HTTP\u8BF7\u6C42\u8F6C\u53D1\u5230\u7684\u7AEF\u53E3<code>nifi.web.http.host</code>\u3002\u6B64\u5C5E\u6027\u65E8\u5728\u4E0E&quot;\u7AEF\u53E3\u8F6C\u53D1&quot;\u4E00\u8D77\u4F7F\u7528\uFF0C\u5F53NiFi\u5FC5\u987B\u7531\u975Eroot\u7528\u6237\u542F\u52A8\u4EE5\u83B7\u5F97\u66F4\u597D\u7684\u5B89\u5168\u6027\u65F6\uFF0C\u9700\u8981\u901A\u8FC7\u4F4E\u7AEF\u53E3\u8BBF\u95EE\u4EE5\u901A\u8FC7\u9632\u706B\u5899\u3002\u4F8B\u5982\uFF0C\u8981\u5728\u7AEF\u53E380\u4E0A\u901A\u8FC7HTTP\u534F\u8BAE\u516C\u5F00NiFi\uFF0C\u4F46\u5B9E\u9645\u4E0A\u5728\u7AEF\u53E38080\u4E0A\u4FA6\u542C\uFF0C\u5219\u9700\u8981\u914D\u7F6EOS\u7EA7\u522B\u7AEF\u53E3\u8F6C\u53D1\uFF0C\u4F8B\u5982<code>iptables</code>(Linux / Unix)\u6216<code>pfctl</code>(OS X)\u5C06\u8BF7\u6C42\u4ECE80\u91CD\u5B9A\u5411\u52308080.\u7136\u540E\u8BBE\u7F6E<code>nifi.web.http.port</code>\u59828080\u548C<code>nifi.web.http.port.forwarding</code>80.\u9ED8\u8BA4\u4E3A\u7A7A\u3002</td></tr><tr><td><code>nifi.web.http.network.interface</code>*</td><td>NiFi\u5E94\u4E3AHTTP\u8BF7\u6C42\u7ED1\u5B9A\u7684\u7F51\u7EDC\u63A5\u53E3\u7684\u540D\u79F0\u3002\u9ED8\u8BA4\u4E3A\u7A7A\u767D\u3002<strong>\u6CE8\u610F</strong>\uFF1A\u53EF\u4EE5\u4F7F\u7528<code>nifi.web.http.network.interface.</code>\u5E26\u6709\u552F\u4E00\u540E\u7F00\u7684\u524D\u7F00\u548C\u5355\u72EC\u7684\u7F51\u7EDC\u63A5\u53E3\u540D\u79F0\u4F5C\u4E3A\u503C\u6765\u6307\u5B9A\u591A\u4E2A\u7F51\u7EDC\u63A5\u53E3\u3002\u4F8B\u5982\uFF0C\u8981\u63D0\u4F9B\u4E24\u4E2A\u989D\u5916\u7684\u7F51\u7EDC\u63A5\u53E3\uFF0C\u7528\u6237\u8FD8\u53EF\u4EE5\u4F7F\u7528\u4EE5\u4E0B\u952E\u6307\u5B9A\u5176\u4ED6\u5C5E\u6027\uFF1A <br><code>nifi.web.http.network.interface.eth0=eth0</code><br><code>nifi.web.http.network.interface.eth1=eth1</code> \u63D0\u4F9B\u4E09\u4E2A\u603B\u7F51\u7EDC\u63A5\u53E3\uFF0C\u5305\u62EC<code>nifi.web.http.network.interface.default</code>\u3002</td></tr><tr><td><code>nifi.web.https.host</code></td><td>HTTPS\u4E3B\u673A\u3002\u9ED8\u8BA4\u4E3A\u7A7A\u767D\u3002</td></tr><tr><td><code>nifi.web.https.port</code></td><td>HTTPS\u7AEF\u53E3\u3002\u9ED8\u8BA4\u4E3A\u7A7A\u767D\u3002\u914D\u7F6ENiFi\u4EE5\u5B89\u5168\u8FD0\u884C\u65F6\uFF0C\u5E94\u914D\u7F6E\u6B64\u7AEF\u53E3\u3002</td></tr><tr><td><code>nifi.web.https.port.forwarding</code></td><td><code>nifi.web.http.port.forwarding</code>\u4E0EHTTPS \u76F8\u540C\uFF0C\u4F46\u4F7F\u7528HTTPS\u8FDB\u884C\u5B89\u5168\u901A\u4FE1\u3002\u9ED8\u8BA4\u4E3A\u7A7A\u767D\u3002</td></tr><tr><td><code>nifi.web.https.network.interface</code>*</td><td>NiFi\u5E94\u4E3AHTTPS\u8BF7\u6C42\u7ED1\u5B9A\u7684\u7F51\u7EDC\u63A5\u53E3\u7684\u540D\u79F0\u3002\u9ED8\u8BA4\u4E3A\u7A7A\u767D\u3002<strong>\u6CE8\u610F</strong>\uFF1A\u53EF\u4EE5\u4F7F\u7528<code>nifi.web.https.network.interface.</code>\u5E26\u6709\u552F\u4E00\u540E\u7F00\u7684\u524D\u7F00\u548C\u5355\u72EC\u7684\u7F51\u7EDC\u63A5\u53E3\u540D\u79F0\u4F5C\u4E3A\u503C\u6765\u6307\u5B9A\u591A\u4E2A\u7F51\u7EDC\u63A5\u53E3\u3002 \u4F8B\u5982\uFF0C\u8981\u63D0\u4F9B\u4E24\u4E2A\u989D\u5916\u7684\u7F51\u7EDC\u63A5\u53E3\uFF0C\u7528\u6237\u8FD8\u53EF\u4EE5\u4F7F\u7528\u4EE5\u4E0B\u952E\u6307\u5B9A\u5176\u4ED6\u5C5E\u6027\uFF1A <br><code>nifi.web.https.network.interface.eth0=eth0</code><br><code>nifi.web.https.network.interface.eth1=eth1</code> \u63D0\u4F9B\u4E09\u4E2A\u603B\u7F51\u7EDC\u63A5\u53E3\uFF0C\u5305\u62EC<code>nifi.web.https.network.interface.default</code>\u3002</td></tr><tr><td><code>nifi.web.jetty.working.directory</code></td><td>Jetty\u5DE5\u4F5C\u76EE\u5F55\u7684\u4F4D\u7F6E\u3002\u9ED8\u8BA4\u503C\u4E3A<code>./work/jetty</code>\u3002</td></tr><tr><td><code>nifi.web.jetty.threads</code></td><td>Jetty\u7EBF\u7A0B\u7684\u6570\u91CF\u3002\u9ED8\u8BA4\u503C\u4E3A<code>200</code>\u3002</td></tr><tr><td><code>nifi.web.max.header.size</code></td><td>\u8BF7\u6C42\u548C\u54CD\u5E94\u6807\u5934\u5141\u8BB8\u7684\u6700\u5927\u5927\u5C0F\u3002\u9ED8\u8BA4\u503C\u4E3A<code>16 KB</code>\u3002</td></tr><tr><td><code>nifi.web.proxy.host</code></td><td>\u4EE5\u9017\u53F7\u5206\u9694\u7684\u5141\u8BB8\u7684HTTP\u4E3B\u673A\u6807\u5934\u503C\u5217\u8868\uFF0C\u5F53NiFi\u5B89\u5168\u8FD0\u884C\u65F6\u5C06\u8003\u8651\u8FD9\u4E9B\u503C\uFF0C\u5E76\u4E14\u5C06\u63A5\u6536\u5230\u4E0E\u5176\u7ED1\u5B9A\u7684\u4E0D\u540C\u4E3B\u673A[\uFF1Aport]\u7684\u8BF7\u6C42\u3002\u4F8B\u5982\uFF0C\u5728Docker\u5BB9\u5668\u4E2D\u8FD0\u884C\u6216\u5728\u4EE3\u7406\u540E\u9762\u8FD0\u884C\u65F6(\u4F8B\u5982localhost\uFF1A18443\uFF0Cproxyhost\uFF1A443)\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u6B64\u503C\u4E3A\u7A7A\uFF0C\u8868\u793ANiFi\u5E94\u4EC5\u5141\u8BB8\u53D1\u9001\u5230NiFi\u7ED1\u5B9A\u7684\u4E3B\u673A[\uFF1Aport]\u7684\u8BF7\u6C42\u3002</td></tr><tr><td><code>nifi.web.proxy.context.path</code></td><td>\u8981\u8003\u8651\u7684\u5141\u8BB8HTTP X-ProxyContextPath\uFF0CX-Forwarded-Context\u6216X-Forwarded-Prefix\u6807\u5934\u503C\u7684\u9017\u53F7\u5206\u9694\u5217\u8868\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u6B64\u503C\u4E3A\u7A7A\uFF0C\u8868\u793A\u62D2\u7EDD\u5305\u542B\u4EE3\u7406\u4E0A\u4E0B\u6587\u8DEF\u5F84\u7684\u6240\u6709\u8BF7\u6C42\u3002\u914D\u7F6E\u6B64\u5C5E\u6027\u5C06\u5141\u8BB8\u6B64\u5217\u8868\u4E2D\u5305\u542B\u4EE3\u7406\u8DEF\u5F84\u7684\u8BF7\u6C42\u3002</td></tr></tbody></table><h3 id="\u5B89\u5168\u5C5E\u6027-security-properties" tabindex="-1"><a class="header-anchor" href="#\u5B89\u5168\u5C5E\u6027-security-properties" aria-hidden="true">#</a> \u5B89\u5168\u5C5E\u6027(Security Properties)</h3>`,33),wa=t('\u8FD9\u4E9B\u5C5E\u6027\u4E0ENiFi\u4E2D\u7684\u5404\u79CD\u5B89\u5168\u529F\u80FD\u6709\u5173\u3002\u672C"\u7BA1\u7406\u5458\u6307\u5357"\u7684'),Ea={href:"http://nifi.apache.org/docs/NiFi-docs/html/administration-guide.html#security_configuration",target:"_blank",rel:"noopener noreferrer"},Ua=t("\u5B89\u5168\u914D\u7F6E"),Ca=t("\u90E8\u5206\u8BE6\u7EC6\u4ECB\u7ECD\u4E86\u5176\u4E2D\u8BB8\u591A\u5C5E\u6027 \u3002"),La=e("thead",null,[e("tr",null,[e("th",null,[e("strong",null,"\u5C5E\u6027")]),e("th",null,[e("strong",null,"\u63CF\u8FF0")])])],-1),Ia=e("tr",null,[e("td",null,[e("code",null,"nifi.sensitive.props.key")]),e("td",null,"\u8FD9\u662F\u7528\u4E8E\u52A0\u5BC6\u5904\u7406\u5668\u4E2D\u914D\u7F6E\u7684\u4EFB\u4F55\u654F\u611F\u5C5E\u6027\u503C\u7684\u5BC6\u7801\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u5B83\u662F\u7A7A\u767D\u7684\uFF0C\u4F46\u7CFB\u7EDF\u7BA1\u7406\u5458\u5E94\u4E3A\u5176\u63D0\u4F9B\u503C\u3002\u5B83\u53EF\u4EE5\u662F\u4EFB\u610F\u957F\u5EA6\u7684\u5B57\u7B26\u4E32\uFF0C\u4F46\u5EFA\u8BAE\u7684\u6700\u5C0F\u957F\u5EA6\u4E3A10\u4E2A\u5B57\u7B26\u3002\u8BF7\u6CE8\u610F\uFF0C\u4E00\u65E6\u8BBE\u7F6E\u4E86\u6B64\u5BC6\u7801\u5E76\u4E14\u914D\u7F6E\u4E86\u4E00\u4E2A\u6216\u591A\u4E2A\u654F\u611F\u5904\u7406\u5668\u5C5E\u6027\uFF0C\u5C31\u4E0D\u5E94\u66F4\u6539\u6B64\u5BC6\u7801\u3002")],-1),Ka=e("tr",null,[e("td",null,[e("code",null,"nifi.sensitive.props.algorithm")]),e("td",null,[t("\u7528\u4E8E\u52A0\u5BC6\u654F\u611F\u5C5E\u6027\u7684\u7B97\u6CD5\u3002\u9ED8\u8BA4\u503C\u4E3A"),e("code",null,"PBEWITHMD5AND256BITAES-CBC-OPENSSL"),t("\u3002")])],-1),za=e("tr",null,[e("td",null,[e("code",null,"nifi.sensitive.props.provider")]),e("td",null,[t("\u654F\u611F\u7684\u8D22\u4EA7\u63D0\u4F9B\u8005\u3002\u9ED8\u8BA4\u503C\u4E3A"),e("code",null,"BC"),t("\u3002")])],-1),Da=e("td",null,[e("code",null,"nifi.sensitive.props.additional.keys")],-1),Ba=t("\u9664\u4E86\u9ED8\u8BA4\u654F\u611F\u5C5E\u6027\u4E4B\u5916\uFF0C_nifi.properties\u4E2D_\u7684\u9017\u53F7\u5206\u9694\u5C5E\u6027\u5217\u8868\u8FD8\u8981\u52A0\u5BC6(\u8BF7\u53C2\u9605"),Ra={href:"http://nifi.apache.org/docs/NiFi-docs/html/administration-guide.html#encrypt-config_tool",target:"_blank",rel:"noopener noreferrer"},Ga=t("\u914D\u7F6E\u6587\u4EF6\u4E2D\u7684\u52A0\u5BC6\u5BC6\u7801"),Ma=t(")\u3002"),Ha=e("tr",null,[e("td",null,[e("code",null,"nifi.security.keystore"),t("*")]),e("td",null,"\u5BC6\u94A5\u5E93\u7684\u5B8C\u6574\u8DEF\u5F84\u548C\u540D\u79F0\u3002\u9ED8\u8BA4\u4E3A\u7A7A\u767D\u3002")],-1),Oa=e("tr",null,[e("td",null,[e("code",null,"nifi.security.keystoreType")]),e("td",null,"\u5BC6\u94A5\u5E93\u7C7B\u578B\u3002\u9ED8\u8BA4\u4E3A\u7A7A\u767D\u3002")],-1),Za=e("tr",null,[e("td",null,[e("code",null,"nifi.security.keystorePasswd")]),e("td",null,"\u5BC6\u94A5\u5E93\u5BC6\u7801\u3002\u9ED8\u8BA4\u4E3A\u7A7A\u767D\u3002")],-1),Wa=e("tr",null,[e("td",null,[e("code",null,"nifi.security.keyPasswd")]),e("td",null,"\u5BC6\u94A5\u5BC6\u7801\u3002\u9ED8\u8BA4\u4E3A\u7A7A\u767D\u3002")],-1),ja=e("tr",null,[e("td",null,[e("code",null,"nifi.security.truststore"),t("*")]),e("td",null,"\u4FE1\u4EFB\u5E93\u7684\u5B8C\u6574\u8DEF\u5F84\u548C\u540D\u79F0\u3002\u9ED8\u8BA4\u4E3A\u7A7A\u767D\u3002")],-1),Ja=e("tr",null,[e("td",null,[e("code",null,"nifi.security.truststoreType")]),e("td",null,"\u4FE1\u4EFB\u5E93\u7C7B\u578B\u3002\u9ED8\u8BA4\u4E3A\u7A7A\u767D\u3002")],-1),Va=e("tr",null,[e("td",null,[e("code",null,"nifi.security.truststorePasswd")]),e("td",null,"\u4FE1\u4EFB\u5E93\u5BC6\u7801\u3002\u9ED8\u8BA4\u4E3A\u7A7A\u767D\u3002")],-1),Xa=e("tr",null,[e("td",null,[e("code",null,"nifi.security.user.authorizer")]),e("td",null,[t("\u6307\u5B9A_authorizers.xml_\u6587\u4EF6\u4E2D\u8981\u4F7F\u7528\u7684\u5DF2\u914D\u7F6EAuthorizer \u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u5B83\u8BBE\u7F6E\u4E3A"),e("code",null,"file-provider"),t("\u3002")])],-1),$a=e("tr",null,[e("td",null,[e("code",null,"nifi.security.user.login.identity.provider")]),e("td",null,[t("\u8FD9\u8868\u793A\u8981\u4F7F\u7528\u7684\u767B\u5F55\u6807\u8BC6\u63D0\u4F9B\u7A0B\u5E8F\u7C7B\u578B\u3002\u9ED8\u8BA4\u503C\u4E3A\u7A7A\uFF0C\u53EF\u4EE5\u4ECE\u6307\u5B9A\u6587\u4EF6\u4E2D\u7684\u63D0\u4F9B\u7A0B\u5E8F\u8BBE\u7F6E\u4E3A\u6807\u8BC6\u7B26"),e("code",null,"nifi.login.identity.provider.configuration.file"),t("\u3002\u8BBE\u7F6E\u6B64\u5C5E\u6027\u5C06\u89E6\u53D1NiFi\u4EE5\u652F\u6301\u7528\u6237\u540D/\u5BC6\u7801\u8EAB\u4EFD\u9A8C\u8BC1\u3002")])],-1),Ya=e("tr",null,[e("td",null,[e("code",null,"nifi.security.ocsp.responder.url")]),e("td",null,"\u8FD9\u662F\u5728\u7EBF\u8BC1\u4E66\u72B6\u6001\u534F\u8BAE(OCSP)\u54CD\u5E94\u7A0B\u5E8F\u7684URL(\u5982\u679C\u6B63\u5728\u4F7F\u7528)\u3002\u9ED8\u8BA4\u4E3A\u7A7A\u767D\u3002")],-1),Qa=e("tr",null,[e("td",null,[e("code",null,"nifi.security.ocsp.responder.certificate")]),e("td",null,"\u8FD9\u662FOCSP\u54CD\u5E94\u8005\u8BC1\u4E66\u7684\u4F4D\u7F6E(\u5982\u679C\u6B63\u5728\u4F7F\u7528)\u3002\u9ED8\u8BA4\u4E3A\u7A7A\u767D\u3002")],-1),ei=o(`<h3 id="\u8EAB\u4EFD\u6620\u5C04\u5C5E\u6027-identity-mapping-properties" tabindex="-1"><a class="header-anchor" href="#\u8EAB\u4EFD\u6620\u5C04\u5C5E\u6027-identity-mapping-properties" aria-hidden="true">#</a> \u8EAB\u4EFD\u6620\u5C04\u5C5E\u6027 ( Identity Mapping Properties )</h3><p>\u8FD9\u4E9B\u5C5E\u6027\u53EF\u7528\u4E8E\u89C4\u8303\u7528\u6237\u8EAB\u4EFD\u3002\u5B9E\u65BD\u540E\uFF0C\u7531\u4E0D\u540C\u8EAB\u4EFD\u63D0\u4F9B\u5546(\u8BC1\u4E66\uFF0CLDAP\uFF0CKerberos)\u8FDB\u884C\u8EAB\u4EFD\u9A8C\u8BC1\u7684\u8EAB\u4EFD\u5728NiFi\u5185\u90E8\u5904\u7406\u76F8\u540C\u3002\u56E0\u6B64\uFF0C\u907F\u514D\u4E86\u91CD\u590D\u7684\u7528\u6237\uFF0C\u5E76\u4E14\u4EC5\u9700\u8981\u4E3A\u6BCF\u4E2A\u7528\u6237\u8BBE\u7F6E\u4E00\u6B21\u7279\u5B9A\u4E8E\u7528\u6237\u7684\u914D\u7F6E(\u4F8B\u5982\u6388\u6743)\u3002</p><p>\u4EE5\u4E0B\u793A\u4F8B\u6F14\u793A\u4E86\u5982\u4F55\u4ECE\u8BC1\u4E66\u548CKerberos\u4E3B\u4F53\u4E2D\u89C4\u8303\u5316DN\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>nifi.security.identity.mapping.pattern.dn=^CN=(.*?)\uFF0C OU=(.*?)\uFF0C O=(.*?)\uFF0C L=(.*?)\uFF0C ST=(.*?)\uFF0C C=(.*?)$
nifi.security.identity.mapping.value.dn=$1@$2
nifi.security.identity.mapping.transform.dn=NONE
nifi.security.identity.mapping.pattern.kerb=^(.*?)/instance@(.*?)$
nifi.security.identity.mapping.value.kerb=$1@$2
nifi.security.identity.mapping.transform.kerb=NONE

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6BCF\u4E2A\u5C5E\u6027\u7684\u6700\u540E\u4E00\u6BB5\u662F\u7528\u4E8E\u5C06\u6A21\u5F0F\u4E0E\u66FF\u6362\u503C\u76F8\u5173\u8054\u7684\u6807\u8BC6\u7B26\u3002\u5F53\u7528\u6237\u5411NiFi\u53D1\u51FA\u8BF7\u6C42\u65F6\uFF0C\u5C06\u68C0\u67E5\u5176\u8EAB\u4EFD\u4EE5\u67E5\u770B\u5B83\u662F\u5426\u4E0E\u5B57\u5178\u987A\u5E8F\u4E2D\u7684\u6BCF\u4E2A\u6A21\u5F0F\u5339\u914D\u3002\u5BF9\u4E8E\u5339\u914D\u7684\u7B2C\u4E00\u4E2A\uFF0C<code>nifi.security.identity.mapping.value.xxxx</code>\u4F7F\u7528\u5C5E\u6027\u4E2D\u6307\u5B9A\u7684\u66FF\u6362\u3002\u56E0\u6B64\uFF0C\u767B\u5F55\u4E0E<code>CN=localhost\uFF0C OU=Apache NiFi\uFF0C O=Apache\uFF0C L=Santa Monica\uFF0C ST=CA\uFF0C C=US</code>\u4E0A\u9762\u7684DN\u6620\u5C04\u6A21\u5F0F\u5339\u914D\uFF0C\u5E76<code>$1@$2</code>\u5E94\u7528DN\u6620\u5C04\u503C\u3002\u7528\u6237\u6807\u51C6\u5316\u4E3A<code>localhost@Apache NiFi</code>\u3002</p><p>\u9664\u4E86\u6620\u5C04\u4E4B\u5916\uFF0C\u8FD8\u53EF\u4EE5\u5E94\u7528\u53D8\u6362\u3002\u652F\u6301\u7684\u7248\u672C\u662F<code>NONE</code>(\u672A\u5E94\u7528\u8F6C\u6362)\uFF0C<code>LOWER</code>(\u6807\u8BC6\u5C0F\u5199)\u548C<code>UPPER</code>(\u6807\u8BC6\u5927\u5199)\u3002\u5982\u679C\u672A\u6307\u5B9A\uFF0C\u5219\u9ED8\u8BA4\u503C\u4E3A<code>NONE</code>\u3002</p>`,6),ti=e("img",{src:a,alt:""},null,-1),ni=t(' \u8FD9\u4E9B\u6620\u5C04\u8FD8\u5E94\u7528\u4E8E"\u521D\u59CB\u7BA1\u7406\u5458\u6807\u8BC6"\uFF0C"\u96C6\u7FA4\u8282\u70B9\u6807\u8BC6"\u4EE5\u53CA_authorizers.xml_\u6587\u4EF6\u4E2D\u7684\u6240\u6709\u65E7\u7528\u6237\u4EE5\u53CA\u4ECELDAP\u5BFC\u5165\u7684\u7528\u6237(\u8BF7\u53C2\u9605'),si={href:"http://nifi.apache.org/docs/NiFi-docs/html/administration-guide.html#authorizers-setup",target:"_blank",rel:"noopener noreferrer"},oi=t("Authorizers.xml\u5B89\u88C5\u7A0B\u5E8F"),ai=t(")\u3002"),ii=o(`<p>\u7EC4\u540D\u4E5F\u53EF\u4EE5\u6620\u5C04\u3002\u4EE5\u4E0B\u793A\u4F8B\u5C06\u63A5\u53D7\u73B0\u6709\u7684\u7EC4\u540D\u79F0\uFF0C\u4F46\u4F1A\u5C06\u5176\u5C0F\u5199\u3002\u4E0E\u5916\u90E8\u6388\u6743\u4EBA\u4E00\u8D77\u4F7F\u7528\u65F6\uFF0C\u8FD9\u53EF\u80FD\u4F1A\u6709\u6240\u5E2E\u52A9\u3002</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>nifi.security.group.mapping.pattern.anygroup=^(.*)$
nifi.security.group.mapping.value.anygroup=$1
nifi.security.group.mapping.transform.anygroup=LOWER
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+a+'" alt=""> \u8FD9\u4E9B\u6620\u5C04\u9002\u7528\u4E8E_authorizers.xml\u4E2D_\u5F15\u7528\u7684\u4EFB\u4F55\u9057\u7559\u7EC4\u4EE5\u53CA\u4ECELDAP\u5BFC\u5165\u7684\u7EC4\u3002</p><h3 id="\u96C6\u7FA4\u516C\u5171\u5C5E\u6027" tabindex="-1"><a class="header-anchor" href="#\u96C6\u7FA4\u516C\u5171\u5C5E\u6027" aria-hidden="true">#</a> \u96C6\u7FA4\u516C\u5171\u5C5E\u6027</h3><p>\u8BBE\u7F6ENiFi\u96C6\u7FA4\u65F6\uFF0C\u5E94\u5728\u6240\u6709\u8282\u70B9\u4E0A\u4EE5\u76F8\u540C\u65B9\u5F0F\u914D\u7F6E\u8FD9\u4E9B\u5C5E\u6027\u3002</p><table><thead><tr><th><strong>\u5C5E\u6027</strong></th><th><strong>\u63CF\u8FF0</strong></th></tr></thead><tbody><tr><td><code>nifi.cluster.protocol.heartbeat.interval</code></td><td>\u8282\u70B9\u5E94\u5411\u96C6\u7FA4\u534F\u8C03\u5668\u53D1\u51FA\u5FC3\u8DF3\u7684\u65F6\u95F4\u95F4\u9694\u3002\u9ED8\u8BA4\u503C\u4E3A<code>5 sec</code>\u3002</td></tr><tr><td><code>nifi.cluster.protocol.is.secure</code></td><td>\u8FD9\u8868\u660E\u96C6\u7FA4\u901A\u4FE1\u662F\u5426\u5B89\u5168\u3002\u9ED8\u8BA4\u503C\u4E3A<code>false</code>\u3002</td></tr></tbody></table><h3 id="\u96C6\u7FA4\u8282\u70B9\u5C5E\u6027" tabindex="-1"><a class="header-anchor" href="#\u96C6\u7FA4\u8282\u70B9\u5C5E\u6027" aria-hidden="true">#</a> \u96C6\u7FA4\u8282\u70B9\u5C5E\u6027</h3><p>\u4E3A\u96C6\u7FA4\u8282\u70B9\u914D\u7F6E\u8FD9\u4E9B\u5C5E\u6027\u3002</p><table><thead><tr><th><strong>\u5C5E\u6027</strong></th><th><strong>\u63CF\u8FF0</strong></th></tr></thead><tbody><tr><td><code>nifi.cluster.is.node</code></td><td><code>true</code>\u5982\u679C\u5B9E\u4F8B\u662F\u96C6\u7FA4\u4E2D\u7684\u8282\u70B9\uFF0C\u8BF7\u5C06\u6B64\u9879\u8BBE\u7F6E\u4E3A\u3002\u9ED8\u8BA4\u503C\u4E3A<code>false</code>\u3002</td></tr><tr><td><code>nifi.cluster.node.address</code></td><td>\u8282\u70B9\u7684\u5B8C\u5168\u9650\u5B9A\u5730\u5740\u3002\u9ED8\u8BA4\u4E3A\u7A7A\u767D\u3002</td></tr><tr><td><code>nifi.cluster.node.protocol.port</code></td><td>\u8282\u70B9\u7684\u534F\u8BAE\u7AEF\u53E3\u3002\u9ED8\u8BA4\u4E3A\u7A7A\u767D\u3002</td></tr><tr><td><code>nifi.cluster.node.protocol.threads</code></td><td>\u5E94\u8BE5\u7528\u4E8E\u4E0E\u96C6\u7FA4\u4E2D\u7684\u5176\u4ED6\u8282\u70B9\u901A\u4FE1\u7684\u7EBF\u7A0B\u6570\u3002\u6B64\u5C5E\u6027\u9ED8\u8BA4\u4E3A<code>10</code>\uFF0C\u4F46\u5BF9\u4E8E\u5927\u578B\u96C6\u7FA4\uFF0C\u6B64\u503C\u53EF\u80FD\u9700\u8981\u66F4\u5927\u3002</td></tr><tr><td><code>nifi.cluster.node.protocol.max.threads</code></td><td>\u5E94\u8BE5\u7528\u4E8E\u4E0E\u96C6\u7FA4\u4E2D\u5176\u4ED6\u8282\u70B9\u901A\u4FE1\u7684\u6700\u5927\u7EBF\u7A0B\u6570\u3002\u6B64\u5C5E\u6027\u9ED8\u8BA4\u4E3A<code>50</code>\u3002</td></tr><tr><td><code>nifi.cluster.node.event.history.size</code></td><td>\u66F4\u6539\u96C6\u7FA4\u4E2D\u8282\u70B9\u7684\u72B6\u6001\u65F6\uFF0C\u5C06\u751F\u6210\u4E00\u4E2A\u4E8B\u4EF6\uFF0C\u5E76\u53EF\u5728&quot;\u96C6\u7FA4&quot;\u9875\u9762\u4E2D\u67E5\u770B\u8BE5\u4E8B\u4EF6\u3002\u6B64\u503C\u6307\u793A\u6BCF\u4E2A\u8282\u70B9\u5728\u5185\u5B58\u4E2D\u4FDD\u7559\u7684\u4E8B\u4EF6\u6570\u3002\u9ED8\u8BA4\u503C\u4E3A<code>25</code>\u3002</td></tr><tr><td><code>nifi.cluster.node.connection.timeout</code></td><td>\u8FDE\u63A5\u5230\u96C6\u7FA4\u4E2D\u7684\u53E6\u4E00\u4E2A\u8282\u70B9\u65F6\uFF0C\u6307\u5B9A\u5728\u8003\u8651\u8FDE\u63A5\u5931\u8D25\u4E4B\u524D\u6B64\u8282\u70B9\u5E94\u7B49\u5F85\u7684\u65F6\u95F4\u3002\u9ED8\u8BA4\u503C\u4E3A<code>5 secs</code>\u3002</td></tr><tr><td><code>nifi.cluster.node.read.timeout</code></td><td>\u4E0E\u96C6\u7FA4\u4E2D\u7684\u53E6\u4E00\u4E2A\u8282\u70B9\u901A\u4FE1\u65F6\uFF0C\u6307\u5B9A\u6B64\u8282\u70B9\u5728\u8003\u8651\u4E0E\u8282\u70B9\u901A\u4FE1\u5931\u8D25\u4E4B\u524D\u5E94\u7B49\u5F85\u591A\u957F\u65F6\u95F4\u4ECE\u8FDC\u7A0B\u8282\u70B9\u63A5\u6536\u4FE1\u606F\u3002\u9ED8\u8BA4\u503C\u4E3A<code>5 secs</code>\u3002</td></tr><tr><td><code>nifi.cluster.node.max.concurrent.requests</code></td><td>\u53EF\u4EE5\u590D\u5236\u5230\u96C6\u7FA4\u4E2D\u8282\u70B9\u7684\u672A\u5B8C\u6210Web\u8BF7\u6C42\u7684\u6700\u5927\u6570\u91CF\u3002\u5982\u679C\u8D85\u8FC7\u6B64\u6570\u91CF\u7684\u8BF7\u6C42\uFF0C\u5D4C\u5165\u5F0FJetty\u670D\u52A1\u5668\u5C06\u8FD4\u56DE&quot;409\uFF1AConflict&quot;\u54CD\u5E94\u3002\u6B64\u5C5E\u6027\u9ED8\u8BA4\u4E3A<code>100</code>\u3002</td></tr><tr><td><code>nifi.cluster.firewall.file</code></td><td>\u8282\u70B9\u9632\u706B\u5899\u6587\u4EF6\u7684\u4F4D\u7F6E\u3002\u8FD9\u662F\u4E00\u4E2A\u6587\u4EF6\uFF0C\u53EF\u7528\u4E8E\u5217\u51FA\u5141\u8BB8\u8FDE\u63A5\u5230\u96C6\u7FA4\u7684\u6240\u6709\u8282\u70B9\u3002\u5B83\u63D0\u4F9B\u4E86\u989D\u5916\u7684\u5B89\u5168\u5C42\u3002\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C\u6B64\u503C\u4E3A\u7A7A\uFF0C\u8868\u793A\u4E0D\u4F7F\u7528\u9632\u706B\u5899\u6587\u4EF6\u3002</td></tr><tr><td><code>nifi.cluster.flow.election.max.wait.time</code></td><td>\u6307\u5B9A\u5728\u9009\u62E9Flow\u4F5C\u4E3A&quot;\u6B63\u786E&quot;\u6D41\u4E4B\u524D\u7B49\u5F85\u7684\u65F6\u95F4\u91CF\u3002\u5982\u679C\u5DF2\u6295\u7968\u7684\u8282\u70B9\u6570\u7B49\u4E8E<code>nifi.cluster.flow.election.max.candidates</code>\u5C5E\u6027\u6307\u5B9A\u7684\u6570\u91CF\uFF0C\u5219\u96C6\u7FA4\u5C06\u4E0D\u4F1A\u7B49\u5F85\u8FD9\u4E48\u957F\u65F6\u95F4\u3002\u9ED8\u8BA4\u503C\u4E3A<code>5 mins</code>\u3002\u8BF7\u6CE8\u610F\uFF0C\u4E00\u65E6\u6295\u7968\u7B2C\u4E00\u6B21\u6295\u7968\uFF0C\u65F6\u95F4\u5C31\u4F1A\u5F00\u59CB\u3002</td></tr><tr><td><code>nifi.cluster.flow.election.max.candidates</code></td><td>\u6307\u5B9A\u96C6\u7FA4\u4E2D\u6240\u9700\u7684\u8282\u70B9\u6570\uFF0C\u4EE5\u4FBF\u63D0\u524D\u9009\u62E9\u6D41\u3002\u8FD9\u5141\u8BB8\u96C6\u7FA4\u4E2D\u7684\u8282\u70B9\u907F\u514D\u5728\u5F00\u59CB\u5904\u7406\u4E4B\u524D\u7B49\u5F85\u5F88\u957F\u65F6\u95F4\uFF0C\u5982\u679C\u6211\u4EEC\u81F3\u5C11\u8FBE\u5230\u96C6\u7FA4\u4E2D\u7684\u6B64\u6570\u91CF\u7684\u8282\u70B9\u3002</td></tr><tr><td><code>nifi.cluster.flow.election.max.wait.time</code></td><td>\u6307\u5B9A\u5728\u9009\u62E9Flow\u4F5C\u4E3A&quot;\u6B63\u786E&quot;\u6D41\u4E4B\u524D\u7B49\u5F85\u7684\u65F6\u95F4\u91CF\u3002\u5982\u679C\u5DF2\u6295\u7968\u7684\u8282\u70B9\u6570\u7B49\u4E8E<code>nifi.cluster.flow.election.max.candidates</code>\u5C5E\u6027\u6307\u5B9A\u7684\u6570\u91CF\uFF0C\u5219\u96C6\u7FA4\u5C06\u4E0D\u4F1A\u7B49\u5F85\u8FD9\u4E48\u957F\u65F6\u95F4\u3002\u9ED8\u8BA4\u503C\u4E3A<code>5 mins</code>\u3002\u8BF7\u6CE8\u610F\uFF0C\u4E00\u65E6\u6295\u7968\u7B2C\u4E00\u6B21\u6295\u7968\uFF0C\u65F6\u95F4\u5C31\u4F1A\u5F00\u59CB\u3002</td></tr><tr><td><code>nifi.cluster.flow.election.max.candidates</code></td><td>\u6307\u5B9A\u96C6\u7FA4\u4E2D\u6240\u9700\u7684\u8282\u70B9\u6570\uFF0C\u4EE5\u4FBF\u63D0\u524D\u9009\u62E9\u6D41\u3002\u8FD9\u5141\u8BB8\u96C6\u7FA4\u4E2D\u7684\u8282\u70B9\u907F\u514D\u5728\u5F00\u59CB\u5904\u7406\u4E4B\u524D\u7B49\u5F85\u5F88\u957F\u65F6\u95F4\uFF0C\u5982\u679C\u6211\u4EEC\u81F3\u5C11\u8FBE\u5230\u96C6\u7FA4\u4E2D\u7684\u6B64\u6570\u91CF\u7684\u8282\u70B9\u3002</td></tr><tr><td><code>nifi.cluster.load.balance.port</code></td><td>\u6307\u5B9A\u8981\u4FA6\u542C\u4F20\u5165\u8FDE\u63A5\u7684\u7AEF\u53E3\uFF0C\u4EE5\u4FBF\u8DE8\u96C6\u7FA4\u8D1F\u8F7D\u5E73\u8861\u6570\u636E\u3002\u9ED8\u8BA4\u503C\u4E3A<code>6342</code>\u3002</td></tr><tr><td><code>nifi.cluster.load.balance.host</code></td><td>\u6307\u5B9A\u8981\u4FA6\u542C\u4F20\u5165\u8FDE\u63A5\u7684\u4E3B\u673A\u540D\uFF0C\u4EE5\u4FBF\u8DE8\u96C6\u7FA4\u8D1F\u8F7D\u5E73\u8861\u6570\u636E\u3002\u5982\u679C\u672A\u6307\u5B9A\uFF0C\u5C06\u9ED8\u8BA4\u4E3A<code>nifi.cluster.node.address</code>\u5C5E\u6027\u4F7F\u7528\u7684\u503C\u3002</td></tr><tr><td><code>nifi.cluster.load.balance.connections.per.node</code></td><td>\u6B64\u8282\u70B9\u4E0E\u96C6\u7FA4\u4E2D\u6BCF\u4E2A\u5176\u4ED6\u8282\u70B9\u4E4B\u95F4\u8981\u521B\u5EFA\u7684\u6700\u5927\u8FDE\u63A5\u6570\u3002\u4F8B\u5982\uFF0C\u5982\u679C\u96C6\u7FA4\u4E2D\u67095\u4E2A\u8282\u70B9\u4E14\u6B64\u503C\u8BBE\u7F6E\u4E3A4\uFF0C\u5219\u6700\u591A\u5C06\u5EFA\u7ACB20\u4E2A\u5957\u63A5\u5B57\u8FDE\u63A5\u4EE5\u5B9E\u73B0\u8D1F\u8F7D\u5E73\u8861(5 x 4 = 20)\u3002\u9ED8\u8BA4\u503C\u4E3A<code>4</code>\u3002</td></tr><tr><td><code>nifi.cluster.load.balance.max.thread.count</code></td><td>\u7528\u4E8E\u5C06\u6570\u636E\u4ECE\u6B64\u8282\u70B9\u4F20\u8F93\u5230\u96C6\u7FA4\u4E2D\u5176\u4ED6\u8282\u70B9\u7684\u6700\u5927\u7EBF\u7A0B\u6570\u3002\u4F8B\u5982\uFF0C\u5982\u679C\u6B64\u503C\u8BBE\u7F6E\u4E3A8\uFF0C\u5219\u6700\u591A\u67098\u4E2A\u7EBF\u7A0B\u8D1F\u8D23\u5C06\u6570\u636E\u4F20\u8F93\u5230\u5176\u4ED6\u8282\u70B9\uFF0C\u800C\u4E0D\u7BA1\u96C6\u7FA4\u4E2D\u6709\u591A\u5C11\u4E2A\u8282\u70B9\u3002\u867D\u7136\u7ED9\u5B9A\u7EBF\u7A0B\u4E00\u6B21\u53EA\u80FD\u5199\u5165\u4E00\u4E2A\u5957\u63A5\u5B57\uFF0C\u4F46\u662F\u5355\u4E2A\u7EBF\u7A0B\u80FD\u591F\u540C\u65F6\u4E3A\u591A\u4E2A\u8FDE\u63A5\u63D0\u4F9B\u670D\u52A1\uFF0C\u56E0\u4E3A\u7ED9\u5B9A\u7684\u8FDE\u63A5\u53EF\u80FD\u65E0\u6CD5\u5728\u4EFB\u4F55\u7ED9\u5B9A\u65F6\u95F4\u8FDB\u884C\u8BFB/\u5199\u3002\u9ED8\u8BA4\u503C\u4E3A<code>8</code>\u3002</td></tr><tr><td><code>nifi.cluster.load.balance.comms.timeout</code></td><td>\u4E0E\u53E6\u4E00\u4E2A\u8282\u70B9\u901A\u4FE1\u65F6\uFF0C\u5982\u679C\u5728\u8BFB\u53D6\u6216\u5199\u5165\u5957\u63A5\u5B57\u65F6\u7ECF\u8FC7\u4E86\u8FD9\u6BB5\u65F6\u95F4\u800C\u6CA1\u6709\u53D6\u5F97\u4EFB\u4F55\u8FDB\u5C55\uFF0C\u5219\u4F1A\u629B\u51FATimeoutException\u3002\u8FD9\u5C06\u5BFC\u81F4\u6570\u636E\u88AB\u91CD\u8BD5\u6216\u53D1\u9001\u5230\u96C6\u7FA4\u4E2D\u7684\u53E6\u4E00\u4E2A\u8282\u70B9\uFF0C\u5177\u4F53\u53D6\u51B3\u4E8E\u914D\u7F6E\u7684\u8D1F\u8F7D\u5E73\u8861\u7B56\u7565\u3002\u9ED8\u8BA4\u503C\u4E3A<code>30 sec</code>\u3002</td></tr></tbody></table><h3 id="\u7D22\u8D54\u7BA1\u7406" tabindex="-1"><a class="header-anchor" href="#\u7D22\u8D54\u7BA1\u7406" aria-hidden="true">#</a> \u7D22\u8D54\u7BA1\u7406</h3><p>\u6BCF\u5F53\u8BF7\u6C42\u66F4\u6539\u6570\u636E\u6D41\u65F6\uFF0C\u91CD\u8981\u7684\u662FNiFi\u96C6\u7FA4\u4E2D\u7684\u6240\u6709\u8282\u70B9\u90FD\u4FDD\u6301\u540C\u6B65\u3002\u4E3A\u4E86\u5B9E\u73B0\u8FD9\u4E00\u70B9\uFF0CNiFi\u91C7\u7528\u4E86\u4E24\u9636\u6BB5\u63D0\u4EA4\u3002\u9996\u5148\u5C06\u8BF7\u6C42\u590D\u5236\u5230\u96C6\u7FA4\u4E2D\u7684\u6240\u6709\u8282\u70B9\uFF0C\u53EA\u8BE2\u95EE\u662F\u5426\u5141\u8BB8\u8BE5\u8BF7\u6C42\u3002\u7136\u540E\uFF0C\u6BCF\u4E2A\u8282\u70B9\u786E\u5B9A\u5B83\u662F\u5426\u5141\u8BB8\u8BE5\u8BF7\u6C42\uFF0C\u5982\u679C\u662F\uFF0C\u5219\u5728\u88AB\u4FEE\u6539\u7684\u7EC4\u4EF6\u4E0A\u53D1\u51FA&quot;\u58F0\u660E&quot;\u3002\u53EF\u4EE5\u5C06\u6B64\u58F0\u660E\u89C6\u4E3A\u8BF7\u6C42\u8005\u62E5\u6709\u7684\u4E92\u65A5\u9501\u3002\u4E00\u65E6\u6240\u6709\u8282\u70B9\u90FD\u5BF9\u662F\u5426\u5141\u8BB8\u8BE5\u8BF7\u6C42\u8FDB\u884C\u4E86\u6295\u7968\uFF0C\u5219\u53D1\u8D77\u8BF7\u6C42\u7684\u8282\u70B9\u5FC5\u987B\u51B3\u5B9A\u662F\u5426\u5B8C\u6210\u8BE5\u8BF7\u6C42\u3002\u5982\u679C\u4EFB\u4F55\u8282\u70B9\u6295\u7968\u4E3A&quot;\u5426&quot;\uFF0C\u5219\u53D6\u6D88\u8BF7\u6C42\u5E76\u53D6\u6D88\u58F0\u660E\uFF0C\u5E76\u5C06\u9519\u8BEF\u6D88\u606F\u53D1\u9001\u56DE\u7528\u6237\u3002\u4F46\u662F\uFF0C\u5982\u679C\u8282\u70B9\u5168\u90E8\u6295\u7968&#39; \u662F&#39;\u7136\u540E\u8BF7\u6C42\u5B8C\u6210\u3002\u5728\u8FD9\u79CD\u5206\u5E03\u5F0F\u73AF\u5883\u4E2D\uFF0C\u5728\u53D1\u751F\u6295\u7968\u4E4B\u540E\u548C\u8BF7\u6C42\u5B8C\u6210\u4E4B\u524D\uFF0C\u53D1\u51FA\u539F\u59CB\u8BF7\u6C42\u7684\u8282\u70B9\u53EF\u80FD\u4F1A\u5931\u8D25\u3002\u8FD9\u5C06\u4F7F\u7EC4\u4EF6\u65E0\u9650\u671F\u5730\u9501\u5B9A\uFF0C\u4EE5\u4FBF\u4E0D\u518D\u5BF9\u7EC4\u4EF6\u8FDB\u884C\u66F4\u6539\u3002\u4E3A\u4E86\u907F\u514D\u8FD9\u79CD\u60C5\u51B5\uFF0C\u7D22\u8D54\u5C06\u5728\u4E00\u6BB5\u65F6\u95F4\u540E\u8D85\u65F6\u3002</p><h3 id="zookeeper\u5C5E\u6027" tabindex="-1"><a class="header-anchor" href="#zookeeper\u5C5E\u6027" aria-hidden="true">#</a> ZooKeeper\u5C5E\u6027</h3><p>NiFi\u4F9D\u8D56\u4E8EApache ZooKeeper\u6765\u786E\u5B9A\u96C6\u7FA4\u4E2D\u54EA\u4E2A\u8282\u70B9\u5E94\u8BE5\u626E\u6F14\u4E3B\u8282\u70B9\u7684\u89D2\u8272\u4EE5\u53CA\u54EA\u4E2A\u8282\u70B9\u5E94\u8BE5\u626E\u6F14\u96C6\u7FA4\u534F\u8C03\u5668\u7684\u89D2\u8272\u3002\u5FC5\u987B\u914D\u7F6E\u8FD9\u4E9B\u5C5E\u6027\u624D\u80FD\u4F7FNiFi\u52A0\u5165\u96C6\u7FA4\u3002</p><table><thead><tr><th><strong>\u5C5E\u6027</strong></th><th><strong>\u63CF\u8FF0</strong></th></tr></thead><tbody><tr><td><code>nifi.zookeeper.connect.string</code></td><td>\u8FDE\u63A5\u5230Apache ZooKeeper\u6240\u9700\u7684Connect String\u3002\u8FD9\u662F\u4E00\u4E2A\u4EE5\u9017\u53F7\u5206\u9694\u7684hostname\uFF1Aport\u5BF9\u5217\u8868\u3002\u4F8B\u5982\uFF0C<code>localhost:2181\uFF0Clocalhost:2182\uFF0Clocalhost:2183</code>\u3002\u8FD9\u5E94\u8BE5\u5305\u542BZooKeeper\u4EF2\u88C1\u4E2D\u6240\u6709ZooKeeper\u5B9E\u4F8B\u7684\u5217\u8868\u3002\u5FC5\u987B\u6307\u5B9A\u6B64\u5C5E\u6027\u624D\u80FD\u52A0\u5165\u96C6\u7FA4\uFF0C\u5E76\u4E14\u6CA1\u6709\u9ED8\u8BA4\u503C\u3002</td></tr><tr><td><code>nifi.zookeeper.connect.timeout</code></td><td>\u5728\u8003\u8651\u8FDE\u63A5\u5931\u8D25\u4E4B\u524D\u8FDE\u63A5\u5230ZooKeeper\u65F6\u9700\u8981\u7B49\u5F85\u591A\u957F\u65F6\u95F4\u3002\u9ED8\u8BA4\u503C\u4E3A<code>3 secs</code>\u3002</td></tr><tr><td><code>nifi.zookeeper.session.timeout</code></td><td>\u5728\u4F1A\u8BDD\u8FC7\u671F\u4E4B\u524D\u4E22\u5931\u4E0EZooKeeper\u7684\u8FDE\u63A5\u540E\u7B49\u5F85\u591A\u957F\u65F6\u95F4\u3002\u9ED8\u8BA4\u503C\u4E3A<code>3 secs</code>\u3002</td></tr><tr><td><code>nifi.zookeeper.root.node</code></td><td>\u5E94\u8BE5\u5728ZooKeeper\u4E2D\u4F7F\u7528\u7684\u6839ZNode\u3002ZooKeeper\u63D0\u4F9B\u4E86\u4E00\u4E2A\u7C7B\u4F3C\u76EE\u5F55\u7684\u7ED3\u6784\u6765\u5B58\u50A8\u6570\u636E\u3002\u6B64\u7ED3\u6784\u4E2D\u7684\u6BCF\u4E2A&quot;\u76EE\u5F55&quot;\u79F0\u4E3AZNode\u3002\u8FD9\u8868\u793A\u5E94\u8BE5\u7528\u4E8E\u5B58\u50A8\u6570\u636E\u7684\u6839ZNode\u6216&quot;\u76EE\u5F55&quot;\u3002\u9ED8\u8BA4\u503C\u4E3A<code>/root</code>\u3002\u8FD9\u5BF9\u4E8E\u6B63\u786E\u8BBE\u7F6E\u5F88\u91CD\u8981\uFF0C\u56E0\u4E3ANiFi\u5B9E\u4F8B\u5C1D\u8BD5\u52A0\u5165\u7684\u96C6\u7FA4\u53D6\u51B3\u4E8E\u5B83\u8FDE\u63A5\u5230\u54EA\u4E2AZooKeeper\u5B9E\u4F8B\u4EE5\u53CA\u6307\u5B9A\u7684ZooKeeper\u6839\u8282\u70B9\u3002</td></tr></tbody></table><h3 id="kerberos\u5C5E\u6027" tabindex="-1"><a class="header-anchor" href="#kerberos\u5C5E\u6027" aria-hidden="true">#</a> Kerberos\u5C5E\u6027</h3><table><thead><tr><th><strong>\u5C5E\u6027</strong></th><th><strong>\u63CF\u8FF0</strong></th></tr></thead><tbody><tr><td><code>nifi.kerberos.krb5.file</code>*</td><td>krb5\u6587\u4EF6\u7684\u4F4D\u7F6E(\u5982\u679C\u4F7F\u7528)\u3002\u9ED8\u8BA4\u4E3A\u7A7A\u767D\u3002\u6B64\u65F6\uFF0C\u6BCF\u4E2ANiFi\u5B9E\u4F8B\u53EA\u5141\u8BB8\u6307\u5B9A\u4E00\u4E2Akrb5\u6587\u4EF6\uFF0C\u56E0\u6B64\u6B64\u5C5E\u6027\u5728\u6B64\u5904\u914D\u7F6E\u4E3A\u652F\u6301SPNEGO\u548C\u670D\u52A1\u4E3B\u4F53\uFF0C\u800C\u4E0D\u662F\u5355\u4E2A\u5904\u7406\u5668\u3002\u5982\u6709\u5FC5\u8981\uFF0Ckrb5\u6587\u4EF6\u53EF\u4EE5\u652F\u6301\u591A\u4E2A\u9886\u57DF\u3002\u4F8B\uFF1A<code>/etc/krb5.conf</code></td></tr><tr><td><code>nifi.kerberos.service.principal</code>*</td><td>NiFi Kerberos\u670D\u52A1\u4E3B\u4F53\u7684\u540D\u79F0(\u5982\u679C\u4F7F\u7528)\u3002\u9ED8\u8BA4\u4E3A\u7A7A\u767D\u3002\u8BF7\u6CE8\u610F\uFF0C\u6B64\u5C5E\u6027\u9002\u7528\u4E8ENiFi\u4F5C\u4E3A\u5BA2\u6237\u7AEF\u5176\u4ED6\u7CFB\u7EDF\u8FDB\u884C\u8EAB\u4EFD\u9A8C\u8BC1\u3002\u793A\u4F8B\uFF1A<code>NiFi/nifi.example.com</code>\u6216<code>NiFi/nifi.example.com@EXAMPLE.COM</code></td></tr><tr><td><code>nifi.kerberos.service.keytab.location</code>*</td><td>NiFi Kerberos\u5BC6\u94A5\u8868\u7684\u6587\u4EF6\u8DEF\u5F84(\u5982\u679C\u4F7F\u7528)\u3002\u9ED8\u8BA4\u4E3A\u7A7A\u767D\u3002\u8BF7\u6CE8\u610F\uFF0C\u6B64\u5C5E\u6027\u9002\u7528\u4E8ENiFi\u4F5C\u4E3A\u5BA2\u6237\u7AEF\u5176\u4ED6\u7CFB\u7EDF\u8FDB\u884C\u8EAB\u4EFD\u9A8C\u8BC1\u3002\u4F8B\uFF1A<code>/etc/nifi.keytab</code></td></tr><tr><td><code>nifi.kerberos.spnego.principal</code>*</td><td>NiFi Kerberos\u670D\u52A1\u4E3B\u4F53\u7684\u540D\u79F0(\u5982\u679C\u4F7F\u7528)\u3002\u9ED8\u8BA4\u4E3A\u7A7A\u767D\u3002\u8BF7\u6CE8\u610F\uFF0C\u6B64\u5C5E\u6027\u7528\u4E8E\u9A8C\u8BC1NiFi\u7528\u6237\u3002\u793A\u4F8B\uFF1A<code>HTTP/nifi.example.com</code>\u6216<code>HTTP/nifi.example.com@EXAMPLE.COM</code></td></tr><tr><td><code>nifi.kerberos.spnego.keytab.location</code>*</td><td>NiFi Kerberos\u5BC6\u94A5\u8868\u7684\u6587\u4EF6\u8DEF\u5F84(\u5982\u679C\u4F7F\u7528)\u3002\u9ED8\u8BA4\u4E3A\u7A7A\u767D\u3002\u8BF7\u6CE8\u610F\uFF0C\u6B64\u5C5E\u6027\u7528\u4E8E\u9A8C\u8BC1NiFi\u7528\u6237\u3002\u4F8B\uFF1A<code>/etc/http-nifi.keytab</code></td></tr><tr><td><code>nifi.kerberos.spengo.authentication.expiration</code>*</td><td>\u6210\u529F\u4F7F\u7528Kerberos\u7528\u6237\u8EAB\u4EFD\u9A8C\u8BC1\u7684\u5230\u671F\u6301\u7EED\u65F6\u95F4(\u5982\u679C\u4F7F\u7528)\u3002\u9ED8\u8BA4\u503C\u4E3A<code>12 hours</code>\u3002</td></tr></tbody></table><h3 id="\u81EA\u5B9A\u4E49\u5C5E\u6027" tabindex="-1"><a class="header-anchor" href="#\u81EA\u5B9A\u4E49\u5C5E\u6027" aria-hidden="true">#</a> \u81EA\u5B9A\u4E49\u5C5E\u6027</h3><p>\u914D\u7F6E\u7528\u4E8ENiFi\u8868\u8FBE\u5F0F\u8BED\u8A00\u7684\u81EA\u5B9A\u4E49\u5C5E\u6027\uFF1A</p><ul><li><p>\u521B\u5EFA\u81EA\u5B9A\u4E49\u5C5E\u6027\u3002\u786E\u4FDD\u8FD9\u4EF6\u4E8B\uFF1A</p><ul><li><p>\u6BCF\u4E2A\u81EA\u5B9A\u4E49\u5C5E\u6027\u90FD\u5305\u542B\u4E00\u4E2A\u4E0D\u540C\u7684\u5C5E\u6027\u503C\uFF0C\u56E0\u6B64\u5B83\u4E0D\u4F1A\u88AB\u73B0\u6709\u7684\u73AF\u5883\u5C5E\u6027\uFF0C\u7CFB\u7EDF\u5C5E\u6027\u6216FlowFile\u5C5E\u6027\u8986\u76D6\u3002</p></li><li><p>\u96C6\u7FA4\u73AF\u5883\u4E2D\u7684\u6BCF\u4E2A\u8282\u70B9\u90FD\u914D\u7F6E\u6709\u76F8\u540C\u7684\u81EA\u5B9A\u4E49\u5C5E\u6027\u3002</p></li></ul></li><li><p><code>nifi.variable.registry.properties</code>\u4F7F\u7528\u81EA\u5B9A\u4E49\u5C5E\u6027\u6587\u4EF6\u7684\u4F4D\u7F6E\u8FDB\u884C\u66F4\u65B0\uFF1A</p></li></ul><table><thead><tr><th><strong>\u5C5E\u6027</strong></th><th><strong>\u63CF\u8FF0</strong></th></tr></thead><tbody><tr><td><code>nifi.variable.registry.properties</code></td><td>\u8FD9\u662F\u4E00\u4E2A\u9017\u53F7\u5206\u9694\u7684\u4E00\u4E2A\u6216\u591A\u4E2A\u81EA\u5B9A\u4E49\u5C5E\u6027\u6587\u4EF6\u7684\u6587\u4EF6\u4F4D\u7F6E\u8DEF\u5F84\u5217\u8868\u3002</td></tr></tbody></table><ul><li>\u91CD\u65B0\u542F\u52A8NiFi\u5B9E\u4F8B\u4EE5\u83B7\u53D6\u8981\u66F4\u65B0\u7684\u66F4\u65B0\u3002</li></ul>',21),ri=t('\u4E5F\u53EF\u4EE5\u5728NiFi UI\u4E2D\u914D\u7F6E\u81EA\u5B9A\u4E49\u5C5E\u6027\u3002\u6709\u5173\u8BE6\u7EC6\u4FE1\u606F\uFF0C\u8BF7\u53C2\u9605"\u7528\u6237\u6307\u5357"\u4E2D\u7684'),di={href:"http://nifi.apache.org/docs/NiFi-docs/html/user-guide.html#Variables_Window",target:"_blank",rel:"noopener noreferrer"},ci=t("\u53D8\u91CF\u7A97\u53E3"),pi=t("\u90E8\u5206\u3002"),li=o('<p><img src="'+i+`" alt=""><em>\u5347\u7EA7</em></p><p>\u914D\u7F6E\u4E0A\u9762\u6807\u6709\u661F\u53F7(*)\u7684\u5C5E\u6027\u65F6\u8981\u5C0F\u5FC3\u3002\u8981\u4F7F\u5347\u7EA7\u8FC7\u7A0B\u66F4\u5BB9\u6613\uFF0C\u5EFA\u8BAE\u5C06\u9ED8\u8BA4\u914D\u7F6E\u66F4\u6539\u4E3A\u4E3B\u6839\u5B89\u88C5\u76EE\u5F55\u4E4B\u5916\u7684\u4F4D\u7F6E\u3002\u901A\u8FC7\u8FD9\u79CD\u65B9\u5F0F\uFF0C\u8FD9\u4E9B\u9879\u76EE\u53EF\u4EE5\u901A\u8FC7\u5347\u7EA7\u4FDD\u7559\u5728\u5176\u914D\u7F6E\u7684\u4F4D\u7F6E\uFF0CNiFi\u53EF\u4EE5\u627E\u5230\u6240\u6709\u5B58\u50A8\u5E93\u548C\u914D\u7F6E\u6587\u4EF6\uFF0C\u5E76\u5728\u65E7\u7248\u672C\u505C\u6B62\u5E76\u542F\u52A8\u65B0\u7248\u672C\u540E\u7ACB\u5373\u4ECE\u4E2D\u65AD\u5904\u7EE7\u7EED\u3002\u6B64\u5916\uFF0C\u7BA1\u7406\u5458\u53EF\u4EE5\u91CD\u590D\u4F7F\u7528\u6B64_nifi.properties_\u6587\u4EF6\u548C\u4EFB\u4F55\u5176\u4ED6\u914D\u7F6E\u6587\u4EF6\uFF0C\u800C\u65E0\u9700\u5728\u6BCF\u6B21\u5347\u7EA7\u65F6\u91CD\u65B0\u914D\u7F6E\u5B83\u4EEC\u3002\u5982\u524D\u6240\u8FF0\uFF0C\u68C0\u67E5_nifi.properties\u4E2D\u7684_\u4EFB\u4F55\u66F4\u6539\u975E\u5E38\u91CD\u8981\u5347\u7EA7\u65F6\u65B0\u7248\u672C\u7684\u6587\u4EF6\uFF0C\u5E76\u786E\u4FDD\u5B83\u4EEC\u53CD\u6620\u5728\u4F60\u4F7F\u7528\u7684_nifi.properties_\u6587\u4EF6\u4E2D\u3002</p><h2 id="nifi\u5347\u7EA7" tabindex="-1"><a class="header-anchor" href="#nifi\u5347\u7EA7" aria-hidden="true">#</a> NiFi\u5347\u7EA7</h2><p>\u4EE5\u4E0B\u8BF4\u660E\u662F\u4ECE1.x.0\u7248\u672C\u5347\u7EA7\u5230\u53E6\u4E00\u4E2A\u7248\u672C\u65F6\u8981\u9075\u5FAA\u7684\u4E00\u822C\u6B65\u9AA4\u3002</p><p>\u5728\u5347\u7EA7\u4E4B\u524D\uFF0C\u4F60\u5E94\u8BE5\u4ED4\u7EC6\u67E5\u770B\u4EE5\u4E0B\u94FE\u63A5\uFF1Ahttps://cwiki.apache.org/confluence/display/NiFi/Release+Notes\uFF0C\u4EE5\u786E\u4FDD\u4F60\u4E86\u89E3\u65B0\u7248\u672C\u4E2D\u6240\u505A\u7684\u66F4\u6539\u53CA\u5176\u5F71\u54CD\u53EF\u80FD\u5B58\u5728\u4E8E\u4F60\u73B0\u6709\u7684\u6570\u636E\u6D41\u548C/\u6216\u73AF\u5883\u4E2D\u3002\u6B64\u5916\uFF0C\u8BF7\u67E5\u770B\u94FE\u63A5\uFF1Ahttps://cwiki.apache.org/confluence/display/NiFi/Migration+Guidance \u9875\u9762\uFF0C\u4EE5\u83B7\u53D6\u5728\u7279\u5B9ANiFi\u7248\u672C\u4E4B\u95F4\u79FB\u52A8\u65F6\u5E94\u6CE8\u610F\u7684\u4E8B\u9879\u3002</p><p>\u8B66\u544A\uFF1A\u7FA4\u96C6\u4E2D\u7684\u6240\u6709\u8282\u70B9\u90FD\u5FC5\u987B\u5347\u7EA7\u5230\u76F8\u540C\u7684NiFi\u7248\u672C\uFF0C\u56E0\u4E3A\u540C\u4E00\u7FA4\u96C6\u4E2D\u4E0D\u652F\u6301\u5177\u6709\u4E0D\u540CNiFi\u7248\u672C\u7684\u8282\u70B9\u3002</p><h3 id="\u4FDD\u7559\u81EA\u5B9A\u4E49\u7EC4\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u4FDD\u7559\u81EA\u5B9A\u4E49\u7EC4\u4EF6" aria-hidden="true">#</a> \u4FDD\u7559\u81EA\u5B9A\u4E49\u7EC4\u4EF6</h3><p>\u5982\u679C\u4F60\u6709\u4EFB\u4F55\u81EA\u5B9A\u4E49NAR\uFF0C\u8BF7\u5728\u5347\u7EA7\u8FC7\u7A0B\u4E2D\u901A\u8FC7\u5C06\u5176\u5B58\u50A8\u5728\u96C6\u4E2D\u4F4D\u7F6E\u6765\u4FDD\u7559\u5B83\u4EEC\uFF0C\u5982\u4E0B\u6240\u793A\uFF1A</p><ol><li>\u521B\u5EFA\u53E6\u4E00\u4E2A\u540D\u4E3A\u201C custom_lib\u201D\u7684\u5E93\u76EE\u5F55\u3002</li><li>\u5C06\u4F60\u7684\u81EA\u5B9A\u4E49NAR\u79FB\u5230\u8FD9\u4E2A\u65B0\u7684lib\u76EE\u5F55\u4E2D\u3002</li><li>\u5728 <em>nifi.properties</em> \u6587\u4EF6\u4E2D\u6DFB\u52A0\u65B0\u884C\u4EE5\u6307\u5B9A\u6B64\u65B0\u7684lib\u76EE\u5F55\uFF1A</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>   nifi.nar.library.directory=./lib
   nifi.nar.library.directory.custom=/opt/configuration_resources/custom_lib
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u4FDD\u7559\u4FEE\u6539\u7684nar\u5305" tabindex="-1"><a class="header-anchor" href="#\u4FDD\u7559\u4FEE\u6539\u7684nar\u5305" aria-hidden="true">#</a> \u4FDD\u7559\u4FEE\u6539\u7684NAR\u5305</h3><p>\u5982\u679C\u4F60\u4FEE\u6539\u4E86\u4EFB\u4F55\u9ED8\u8BA4\u7684NAR\u6587\u4EF6\uFF0C\u5219\u5347\u7EA7\u5C06\u8986\u76D6\u8FD9\u4E9B\u66F4\u6539\u3002\u4FDD\u7559\u4F60\u7684\u81EA\u5B9A\u4E49\u5185\u5BB9\uFF0C\u5982\u4E0B\u6240\u793A\uFF1A</p><ol><li>\u8BC6\u522B\u5E76\u4FDD\u5B58\u5BF9\u9ED8\u8BA4NAR\u6587\u4EF6\u6240\u505A\u7684\u66F4\u6539\u3002</li><li>\u6267\u884CNiFi\u5347\u7EA7\u3002</li><li>\u5728\u65B0\u7684NiFi\u5B9E\u4F8B\u4E2D\u5B9E\u65BD\u76F8\u540C\u7684NAR\u6587\u4EF6\u66F4\u6539\u3002</li></ol><h3 id="\u6E05\u9664\u6D3B\u52A8\u5E76\u5173\u95ED\u73B0\u6709\u7684nifi" tabindex="-1"><a class="header-anchor" href="#\u6E05\u9664\u6D3B\u52A8\u5E76\u5173\u95ED\u73B0\u6709\u7684nifi" aria-hidden="true">#</a> \u6E05\u9664\u6D3B\u52A8\u5E76\u5173\u95ED\u73B0\u6709\u7684NiFi</h3><p>\u5728\u4F60\u73B0\u6709\u7684NiFi\u5B89\u88C5\u4E0A\uFF1A</p><ol><li>\u505C\u6B62\u6240\u6709\u6E90\u5904\u7406\u5668\uFF0C\u4EE5\u9632\u6B62\u6444\u53D6\u65B0\u6570\u636E\u3002</li><li>\u5141\u8BB8NiFi\u8FD0\u884C\uFF0C\u76F4\u5230\u6570\u636E\u6D41\u4E2D\u7684\u4EFB\u4F55\u961F\u5217\u4E2D\u6CA1\u6709\u6D3B\u52A8\u6570\u636E\u4E3A\u6B62\u3002</li><li>\u5173\u95ED\u73B0\u6709\u7684NiFi\u5B9E\u4F8B\u3002</li></ol><h3 id="\u5B89\u88C5\u65B0\u7248\u672Cnifi" tabindex="-1"><a class="header-anchor" href="#\u5B89\u88C5\u65B0\u7248\u672Cnifi" aria-hidden="true">#</a> \u5B89\u88C5\u65B0\u7248\u672CNiFi</h3><p>\u5C06\u65B0\u7684NiFi\u5B89\u88C5\u5230\u4E0E\u73B0\u6709NiFi\u5B89\u88C5\u5E73\u884C\u7684\u76EE\u5F55\u4E2D\u3002</p><ol><li>\u4E0B\u8F7DApache NiFi\u7684\u94FE\u63A5\uFF1Ahttps://nifi.apache.org/download.html \u3002</li><li>\u5C06NiFi <em>.tar</em> \u6587\u4EF6\uFF08\u201C tar -xvzf\u6587\u4EF6\u540D\u201D\uFF09\u89E3\u538B\u7F29\u5230\u4E0E\u73B0\u6709NiFi\u76EE\u5F55\u5E73\u884C\u7684\u76EE\u5F55\u4E2D\u3002\u4F8B\u5982\uFF0C\u5982\u679C\u4F60\u73B0\u6709\u7684NiFi\u5B89\u88C5\u5B89\u88C5\u5728<code>/opt/NiFi/existing-NiFi/</code>\u4E2D\uFF0C\u5219\u5C06\u65B0\u7684NiFi\u7248\u672C\u5B89\u88C5\u5728<code>/opt/NiFi/new-NiFi/</code>\u4E2D\u3002</li><li>\u5982\u679C\u8981\u5347\u7EA7NiFi\u7FA4\u96C6\uFF0C\u8BF7\u5728\u7FA4\u96C6\u4E2D\u7684\u6BCF\u4E2A\u8282\u70B9\u4E0A\u91CD\u590D\u8FD9\u4E9B\u6B65\u9AA4\u3002</li></ol><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>  Host Machine - Node 1
  |--&gt; opt/
     |--&gt; existing-NiFi
     |--&gt; new-NiFi

  Host Machine - Node 2
  |--&gt; opt/
     |--&gt; existing-NiFi
     |--&gt; new-NiFi

  Host Machine - Node 3
  |--&gt; opt/
     |--&gt; existing-NiFi
     |--&gt; new-NiFi

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6CE8\u610F\uFF1A\u786E\u4FDD\u65B0NiFi\u76EE\u5F55\u7684\u6240\u6709\u6587\u4EF6\u548C\u76EE\u5F55\u6240\u6709\u6743\u4E0E\u4F60\u5728\u73B0\u6709\u76EE\u5F55\u4E0A\u8BBE\u7F6E\u7684\u6240\u6709\u6743\u76F8\u5339\u914D\u3002</p><h3 id="\u66F4\u65B0\u65B0nifi\u5B89\u88C5\u7684\u914D\u7F6E\u6587\u4EF6" tabindex="-1"><a class="header-anchor" href="#\u66F4\u65B0\u65B0nifi\u5B89\u88C5\u7684\u914D\u7F6E\u6587\u4EF6" aria-hidden="true">#</a> \u66F4\u65B0\u65B0NiFi\u5B89\u88C5\u7684\u914D\u7F6E\u6587\u4EF6</h3><p>\u4F7F\u7528\u73B0\u6709NiFi\u5B89\u88C5\u4E2D\u7684\u914D\u7F6E\u6587\u4EF6\u6765\u624B\u52A8\u66F4\u65B0\u65B0NiFi\u90E8\u7F72\u4E2D\u7684\u76F8\u5E94\u5C5E\u6027\u3002</p><p>\u8B66\u544A\uFF1A\u901A\u5E38\uFF0C\u8BF7\u52FF\u5C06\u914D\u7F6E\u6587\u4EF6\u4ECE\u73B0\u6709\u7684NiFi\u7248\u672C\u590D\u5236\u5230\u65B0\u7684NiFi\u7248\u672C\u3002\u8F83\u65B0\u7684\u914D\u7F6E\u6587\u4EF6\u53EF\u80FD\u4F1A\u5F15\u5165\u65B0\u5C5E\u6027\uFF0C\u5982\u679C\u4F60\u590D\u5236\u548C\u7C98\u8D34\u914D\u7F6E\u6587\u4EF6\uFF0C\u8FD9\u4E9B\u65B0\u5C5E\u6027\u5C06\u4F1A\u4E22\u5931\u3002</p><p>\u4F7F\u7528\u4E0B\u8868\u6765\u6307\u5BFC\u4F4D\u4E8Econf\u4E2D\u7684\u914D\u7F6E\u6587\u4EF6\u7684\u66F4\u65B0\u3002</p><table><thead><tr><th>Configuration file</th><th>Necessary changes</th></tr></thead><tbody><tr><td><em>authorizers.xml</em></td><td>Copy the <code>&lt;authorizer&gt;...&lt;/authorizer&gt;</code> configured in the existing <em>authorizers.xml</em> to the new NiFi file.If you are using the <code>file-provider</code> authorizer\uFF0C ensure that you copy the <em>users.xml</em> and <em>authorizations.xml</em> files from the existing to the new nifi.Configuration best practices recommend creating a separate location outside of the NiFi base directory for storing such configuration files\uFF0C for example: <code>/opt/NiFi/configuration-resources/</code>. If you are storing these files in a separate directory\uFF0C you do not need to move them. Instead\uFF0C ensure that the new NiFi is pointing to the same files.</td></tr><tr><td><em>bootstrap-notification-services.xml</em></td><td>Use the existing NiFi <em>bootstrap-notification-services.xml</em> file to update properties in the new nifi.</td></tr><tr><td><em>bootstrap.conf</em></td><td>Use the existing NiFi <em>bootstrap.conf</em> file to update properties in the new nifi.</td></tr><tr><td><em>flow.xml.gz</em></td><td>If you retained the default location for storing flows (<code>&lt;installation-directory&gt;/conf/</code>)\uFF0C copy <em>flow.xml.gz</em> from the existing to the new NiFi base install <code>conf</code> directory. If you stored flows to an external location via <em>nifi.properties</em>\uFF0C update the property <code>nifi.flow.configuration.file</code> to point there.If you are encrypting sensitive component properties in your dataflow via the sensitive properties key in <em>nifi.properties</em>\uFF0C make sure the same key is used when copying over your <em>flow.xml.gz</em>. If you need to change the key\uFF0C see the &lt;&lt;sensitive_flow_migration&gt;&gt; section below.</td></tr><tr><td><em>nifi.properties</em></td><td>Use the existing <em>nifi.properties</em> to populate the same properties in the new NiFi file.<br><br><em>Note:</em> This file contains the majority of NiFi configuration settings\uFF0C so ensure that you have copied the values correctly.<br>If you followed NiFi best practices\uFF0C the following properties should be pointing to external directories outside of the base NiFi installation path.<br>If the below properties point to directories inside the NiFi base installation path\uFF0C you must copy the target directories to the new nifi. Stop your existing NiFi installation before you do this.<br><br><code>nifi.flow.configuration.file=</code><br>If you have retained the default value (<code>./conf/flow.xml.gz</code>)\uFF0C copy <em>flow.xml.gz</em> from the existing to the new NiFi base install conf directory.<br>If you stored flows to an external location\uFF0C update the property value to point there.<br><br><code>nifi.flow.configuration.archive.dir=</code><br>Same applies as above if you want to retain archived copies of the <em>flow.xml.gz</em>.<br><br><code>nifi.database.directory=</code><br>Best practices recommends that you use an external location for each repository. Point the new NiFi at the same external database repository location.<br><br><code>nifi.flowfile.repository.directory=</code><br>Best practices recommends that you use an external location for each repository. Point the new NiFi at the same external flowfile repository location.<br><em>Warning:</em> You may experience data loss if flowfile repositories are not accessible to the new nifi.<br><br><code>nifi.content.repository.directory.default=</code><br>Best practices recommends that you use an external location for each repository. Point the new NiFi at the same external content repository location.<br>Your existing NiFi may have multiple content repos defined. Make sure the exact same property names are used and point to the appropriate matching content repo locations. For example:<br><code>nifi.content.repository.directory.content1=</code><br><code>nifi.content.repository.directory.content2=</code><br><em>Warning:</em> You may experience data loss if content repositories are not accessible to the new nifi.<br><em>Warning:</em> You may experience data loss if property names are wrong or the property points to the wrong content repository.<br><code>nifi.provenance.repository.directory.default=</code><br>Best practices recommends that you use an external location for each repository. Point the new NiFi at the same external provenance repository location.<br>Your existing NiFi may have multiple content repos defined. Make sure the exact same property names are used and point to the appropriate matching provenance repo locations. For example:<br><code>nifi.provenance.repository.directory.provenance1=</code><br><code>nifi.provenance.repository.directory.provenance2=</code><br><em>Note:</em> You may not be able to query old events if provenance repos are not moved correctly or properties are not updated correctly.</td></tr><tr><td><em>state-management.xml</em></td><td>For the <code>local-provider</code> state provider\uFF0C verify the location of the local directory.<br>If you have retained the default location (<code>./state/local</code>)\uFF0C copy the complete directory tree to the new nifi. The existing NiFi should be stopped if you are copying this directory because it may be constantly writing to this directory while running.<br>Configuration best practices recommend that you move the state to an external directory like <code>/opt/NiFi/configuration-resources/</code> to facilitate easier upgrading later.<br><br>For a NiFi cluster\uFF0C the <code>cluster-provider</code><br>ZooKeeper \u201CConnect String&quot; property should be set to the same external ZooKeeper as the existing NiFi installation.<br><br>For a NiFi cluster\uFF0C make sure the <code>cluster-provider</code> ZooKeeper &quot;Root Node&quot; property matches exactly the value used in the existing nifi.<br><br>If you are also setting up a new external ZooKeeper\uFF0C see the &lt;&lt;zookeeper_migrator&gt;&gt; section for instructions on how to move ZooKeeper information from one cluster to another and migrate ZooKeeper node ownership.</td></tr></tbody></table><p>\u8B66\u544A\uFF1A\u4ED4\u7EC6\u68C0\u67E5\u6240\u6709\u914D\u7F6E\u7684\u5C5E\u6027\u662F\u5426\u5B58\u5728\u9519\u522B\u5B57\u3002</p><h5 id="\u8FC1\u79FB\u5177\u6709\u654F\u611F\u5C5E\u6027\u7684\u6D41" tabindex="-1"><a class="header-anchor" href="#\u8FC1\u79FB\u5177\u6709\u654F\u611F\u5C5E\u6027\u7684\u6D41" aria-hidden="true">#</a> \u8FC1\u79FB\u5177\u6709\u654F\u611F\u5C5E\u6027\u7684\u6D41</h5><p>\u5728 <em>nifi.properties</em> \u4E2D\u4E3A<code>nifi.sensitive.props.key</code>\u8BBE\u7F6E\u503C\u65F6\uFF0C\u6307\u5B9A\u7684\u5BC6\u94A5\u7528\u4E8E\u52A0\u5BC6\u6D41\u4E2D\u7684\u654F\u611F\u5C5E\u6027\uFF08\u4F8B\u5982\uFF0C\u7EC4\u4EF6\u4E2D\u7684\u5BC6\u7801\u5B57\u6BB5\uFF09\u3002\u5982\u679C\u5BC6\u94A5\u9700\u8981\u66F4\u6539\uFF0CNiFi\u5DE5\u5177\u5305\u4E2D\u7684Encrypt-Config\u5DE5\u5177\u53EF\u4EE5\u8FC1\u79FB\u654F\u611F\u5C5E\u6027\u5BC6\u94A5\u5E76\u66F4\u65B0_flow.xml.gz_\u3002\u5177\u4F53\u6765\u8BF4\uFF0C\u52A0\u5BC6\u914D\u7F6E\uFF1A</p><ol><li>\u8BFB\u53D6\u73B0\u6709\u7684 <em>flow.xml.gz</em> \u5E76\u4F7F\u7528\u5F53\u524D\u5BC6\u94A5\u89E3\u5BC6\u654F\u611F\u503C\u3002</li><li>\u4F7F\u7528\u6307\u5B9A\u7684\u65B0\u5BC6\u94A5\u52A0\u5BC6\u6240\u6709\u654F\u611F\u503C\u3002</li><li>\u66F4\u65B0 <em>nifi.properties</em> \u548C <em>flow.xml.gz</em> \u6587\u4EF6\u6216\u521B\u5EFA\u5B83\u4EEC\u7684\u65B0\u7248\u672C\u3002</li></ol><p>\u4F8B\u5982\uFF0C\u5047\u8BBE\u7248\u672C1.9.2\u662F\u73B0\u6709\u7684NiFi\u5B9E\u4F8B\uFF0C\u5E76\u4E14\u654F\u611F\u5C5E\u6027\u952E\u8BBE\u7F6E\u4E3A\u201C\u5BC6\u7801\u201D\u3002\u76EE\u6807\u662F\u4F7F\u7528\u65B0\u7684\u654F\u611F\u5C5E\u6027\u952E\u201Cnew_password\u201D\u5C061.9.2 <em>flow.xml.gz</em> \u79FB\u81F31.10.0\u5B9E\u4F8B\u3002\u8FD0\u884C\u4EE5\u4E0BEncrypt-Config\u547D\u4EE4\u5C06\u4F7F\u7528\u539F\u59CB\u654F\u611F\u5C5E\u6027\u5BC6\u94A5\u4ECE1.9.2\u8BFB\u53D6 <em>flow.xml.gz</em> \u548C <em>nifi.properties</em> \u6587\u4EF6\uFF0C\u5E76\u57281.10.0\u4E2D\u5199\u51FA\u65B0\u7248\u672C\uFF0C\u5E76\u4F7F\u7528\u65B0\u5BC6\u7801\u5BF9\u654F\u611F\u5C5E\u6027\u8FDB\u884C\u52A0\u5BC6\uFF1A</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>$ ./NiFi-toolkit-1.10.0/bin/encrypt-config.sh -f /path/to/NiFi/NiFi-1.9.2/conf/flow.xml.gz -g /path/to/NiFi/NiFi-1.10.0/conf/flow.xml.gz -s new_password -n /path/to/NiFi/NiFi-1.9.2/conf/nifi.properties -o /path/to/NiFi/NiFi-1.10.0/conf/nifi.properties -x
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li><code>-f</code> specifies the source <em>flow.xml.gz</em> (NiFi-1.9.2)</li><li><code>-g</code> specifies the destination <em>flow.xml.gz</em> (NiFi-1.10.0)</li><li><code>-s</code> specifies the new sensitive properties key (<code>new_password</code>)</li><li><code>-n</code> specifies the source <em>nifi.properties</em> (NiFi-1.9.2)</li><li><code>-o</code> specifies the destination <em>nifi.properties</em> (NiFi-1.10.0)</li><li><code>-x</code> tells Encrypt-Config to only process the sensitive properties</li></ul><p>\u66F4\u591A\u4FE1\u606F\uFF0C\u8BF7\u53C2\u9605\u300A NiFi\u5DE5\u5177\u5305\u6307\u5357\u300B\u4E2D\u7684&lt;&lt; toolkit-guide.adoc\uFF03encrypt_config_tool\uFF0CEncrypt-Config Tool &gt;&gt;\u90E8\u5206\u3002</p><h3 id="\u542F\u52A8\u65B0\u7684nifi" tabindex="-1"><a class="header-anchor" href="#\u542F\u52A8\u65B0\u7684nifi" aria-hidden="true">#</a> \u542F\u52A8\u65B0\u7684NiFi</h3><ol><li>\u542F\u52A8\u6BCF\u4E2A\u65B0\u7684NiFi\u5B9E\u4F8B\u3002</li><li>\u9A8C\u8BC1\uFF1A <ul><li>\u4F60\u7684\u6240\u6709\u6570\u636E\u6D41\u90FD\u5DF2\u8FD4\u56DE\u8FD0\u884C\u72B6\u6001\u3002\u67D0\u4E9B\u5904\u7406\u5668\u53EF\u80FD\u5177\u6709\u9700\u8981\u914D\u7F6E\u7684\u65B0\u5C5E\u6027\uFF0C\u5728\u8FD9\u79CD\u60C5\u51B5\u4E0B\uFF0C\u5B83\u4EEC\u5C06\u88AB\u505C\u6B62\u5E76\u6807\u8BB0\u4E3A\u65E0\u6548\u3002</li><li>\u4F60\u6240\u6709\u9884\u671F\u7684\u63A7\u5236\u5668\u670D\u52A1\u548C\u62A5\u544A\u4EFB\u52A1\u5C06\u518D\u6B21\u8FD0\u884C\u3002\u89E3\u51B3\u4EFB\u4F55\u6807\u8BB0\u4E3A\u65E0\u6548\u7684\u63A7\u5236\u5668\u670D\u52A1\u6216\u62A5\u544A\u4EFB\u52A1\u3002</li></ul></li><li>\u786E\u8BA4\u65B0\u7684NiFi\u5B9E\u4F8B\u7A33\u5B9A\u5E76\u4E14\u53EF\u4EE5\u6B63\u5E38\u5DE5\u4F5C\u540E\uFF0C\u53EF\u4EE5\u5220\u9664\u65E7\u7684\u5B89\u88C5\u3002</li></ol><p>\u6CE8\u610F\uFF1A\u5982\u679C\u5C06\u539F\u59CBNiFi\u8BBE\u7F6E\u4E3A\u4F5C\u4E3A\u670D\u52A1\u8FD0\u884C\uFF0C\u8BF7\u66F4\u65B0\u6240\u6709\u7B26\u53F7\u94FE\u63A5\u6216\u670D\u52A1\u811A\u672C\u4EE5\u6307\u5411\u65B0\u7684NiFi\u7248\u672C\u53EF\u6267\u884C\u6587\u4EF6\u3002</p>`,37);function ui(hi,gi){const n=d("ExternalLinkIcon");return c(),p("div",null,[te,e("p",null,[ne,e("a",se,[oe,s(n)]),ae]),ie,e("p",null,[re,e("a",de,[ce,s(n)]),pe,le,ue]),he,e("ul",null,[e("li",null,[e("a",ge,[me,s(n)])]),e("li",null,[e("a",ve,[be,s(n)])])]),ke,e("p",null,[fe,ye,_e,Fe,qe,xe,Ne,e("a",Pe,[Ae,s(n)]),Se]),Te,e("p",null,[we,Ee,Ue,Ce,Le,e("a",Ie,[Ke,s(n)]),ze]),De,e("p",null,[Be,e("a",Re,[Ge,s(n)]),Me,e("a",He,[Oe,s(n)]),Ze]),We,e("table",null,[je,e("tbody",null,[Je,e("tr",null,[Ve,e("td",null,[Xe,e("a",$e,[Ye,s(n)]),Qe])]),et,tt,nt,st,ot,at,it,rt,dt])]),ct,e("p",null,[pt,e("a",lt,[ut,s(n)]),ht,e("a",gt,[mt,s(n)]),vt,bt,kt,ft,yt,_t,Ft,qt,xt,Nt,Pt,At,St]),e("ul",null,[Tt,e("li",null,[wt,e("ul",null,[Et,e("li",null,[e("p",null,[e("a",Ut,[Ct,s(n)]),Lt,e("a",It,[Kt,s(n)]),zt,e("a",Dt,[Bt,s(n)]),Rt,e("a",Gt,[Mt,s(n)]),Ht])]),Ot,Zt,e("li",null,[Wt,e("ul",null,[e("li",null,[e("p",null,[jt,Jt,e("a",Vt,[Xt,s(n)]),$t,Yt,Qt])]),en,tn])])])]),e("li",null,[nn,e("ul",null,[sn,e("li",null,[e("p",null,[e("a",on,[an,s(n)]),rn,dn,cn])]),pn])]),e("li",null,[ln,e("ul",null,[un,e("li",null,[e("p",null,[e("a",hn,[gn,s(n)]),mn])]),vn,bn,e("li",null,[e("p",null,[kn,e("a",fn,[yn,s(n)]),_n])])])]),Fn]),qn,e("ul",null,[e("li",null,[e("p",null,[e("a",xn,[Nn,s(n)])])]),e("li",null,[e("p",null,[e("a",Pn,[An,s(n)])])]),e("li",null,[e("p",null,[e("a",Sn,[Tn,s(n)])])]),e("li",null,[e("p",null,[e("a",wn,[En,s(n)])])]),e("li",null,[e("p",null,[e("a",Un,[Cn,s(n)])])]),e("li",null,[e("p",null,[e("a",Ln,[In,s(n)])])]),e("li",null,[e("p",null,[e("a",Kn,[zn,s(n)])])]),e("li",null,[e("p",null,[e("a",Dn,[Bn,s(n)])])]),e("li",null,[e("p",null,[e("a",Rn,[Gn,s(n)])])]),e("li",null,[e("p",null,[e("a",Mn,[Hn,s(n)])])]),e("li",null,[e("p",null,[e("a",On,[Zn,s(n)])])]),e("li",null,[e("p",null,[e("a",Wn,[jn,s(n)])])])]),Jn,e("p",null,[Vn,e("a",Xn,[$n,s(n)]),Yn,e("a",Qn,[es,s(n)]),ts,ns,ss,os,as]),is,e("ul",null,[e("li",null,[e("a",rs,[ds,s(n)])])]),cs,ps,e("p",null,[ls,e("a",us,[hs,s(n)]),gs,e("a",ms,[vs,s(n)]),bs,e("a",ks,[fs,s(n)]),ys]),_s,e("ul",null,[Fs,e("li",null,[e("p",null,[qs,xs,Ns,e("a",Ps,[As,s(n)])])]),Ss]),Ts,e("p",null,[ws,e("a",Es,[Us,s(n)]),Cs]),Ls,e("p",null,[Is,e("a",Ks,[zs,s(n)]),Ds,e("a",Bs,[Rs,s(n)]),Gs]),Ms,e("p",null,[Hs,e("a",Os,[Zs,s(n)]),Ws]),js,e("p",null,[Js,e("a",Vs,[Xs,s(n)]),$s,e("a",Ys,[Qs,s(n)]),eo]),to,e("ul",null,[e("li",null,[no,e("ul",null,[e("li",null,[e("p",null,[so,oo,ao,e("a",io,[ro,s(n)]),co,e("a",po,[lo,s(n)]),uo,ho])]),go])]),mo]),vo,e("ul",null,[bo,e("li",null,[e("p",null,[ko,e("a",fo,[yo,s(n)]),_o,e("a",Fo,[qo,s(n)]),xo])]),No,e("li",null,[e("p",null,[Po,e("a",Ao,[So,s(n)]),To])])]),wo,e("p",null,[Eo,e("a",Uo,[Co,s(n)]),Lo,e("a",Io,[Ko,s(n)]),zo]),e("table",null,[Do,e("tbody",null,[Bo,Ro,Go,Mo,e("tr",null,[Ho,e("td",null,[Oo,Zo,Wo,jo,Jo,Vo,Xo,e("a",$o,[Yo,s(n)]),Qo,e("a",ea,[ta,s(n)]),na])]),sa])]),oa,e("table",null,[aa,e("tbody",null,[ia,e("tr",null,[ra,e("td",null,[da,ca,pa,la,ua,e("a",ha,[ga,s(n)]),ma])]),va,ba,ka,fa,ya,_a,Fa,qa])]),xa,e("p",null,[Na,e("a",Pa,[Aa,s(n)]),Sa]),Ta,e("p",null,[wa,e("a",Ea,[Ua,s(n)]),Ca]),e("table",null,[La,e("tbody",null,[Ia,Ka,za,e("tr",null,[Da,e("td",null,[Ba,e("a",Ra,[Ga,s(n)]),Ma])]),Ha,Oa,Za,Wa,ja,Ja,Va,Xa,$a,Ya,Qa])]),ei,e("p",null,[ti,ni,e("a",si,[oi,s(n)]),ai]),ii,e("p",null,[ri,e("a",di,[ci,s(n)]),pi]),li])}var bi=r(ee,[["render",ui],["__file","6-AdminGuide.html.vue"]]);export{bi as default};
