<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Apache NiFi RecordPath Guide | Apache NIFI中文文档</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/logo.png">
    <script language="javascript" type="text/javascript" src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script language="javascript" type="text/javascript" src="/js/MouseClickEffect.js"></script>
    <meta name="description" content="Apache NIFI中文文档">
    
    <link rel="preload" href="/assets/css/0.styles.ed588d1d.css" as="style"><link rel="preload" href="/assets/js/app.4ea34ae1.js" as="script"><link rel="preload" href="/assets/js/2.65ffbe52.js" as="script"><link rel="preload" href="/assets/js/12.45dad5d3.js" as="script"><link rel="preload" href="/assets/js/4.e4643266.js" as="script"><link rel="prefetch" href="/assets/js/10.62ab199b.js"><link rel="prefetch" href="/assets/js/11.cfe5b742.js"><link rel="prefetch" href="/assets/js/13.cfe1fa99.js"><link rel="prefetch" href="/assets/js/14.eb6d6361.js"><link rel="prefetch" href="/assets/js/15.f5f50038.js"><link rel="prefetch" href="/assets/js/16.bcbbe899.js"><link rel="prefetch" href="/assets/js/17.ed2a7766.js"><link rel="prefetch" href="/assets/js/18.91234958.js"><link rel="prefetch" href="/assets/js/19.5ce78400.js"><link rel="prefetch" href="/assets/js/20.3098155d.js"><link rel="prefetch" href="/assets/js/21.d12c27c3.js"><link rel="prefetch" href="/assets/js/22.31fa88b8.js"><link rel="prefetch" href="/assets/js/23.16cacd3d.js"><link rel="prefetch" href="/assets/js/24.bed5c53c.js"><link rel="prefetch" href="/assets/js/25.566183db.js"><link rel="prefetch" href="/assets/js/26.9a38edc1.js"><link rel="prefetch" href="/assets/js/27.242651ed.js"><link rel="prefetch" href="/assets/js/28.6814bdc5.js"><link rel="prefetch" href="/assets/js/29.1affeb48.js"><link rel="prefetch" href="/assets/js/3.ed0d22fe.js"><link rel="prefetch" href="/assets/js/30.24593a12.js"><link rel="prefetch" href="/assets/js/31.6cc0823f.js"><link rel="prefetch" href="/assets/js/32.213c428a.js"><link rel="prefetch" href="/assets/js/33.25ef114a.js"><link rel="prefetch" href="/assets/js/34.9cc91d3b.js"><link rel="prefetch" href="/assets/js/35.19d26cf9.js"><link rel="prefetch" href="/assets/js/36.1db6e40a.js"><link rel="prefetch" href="/assets/js/37.ac0b2488.js"><link rel="prefetch" href="/assets/js/38.4dd3b7df.js"><link rel="prefetch" href="/assets/js/39.e7593b19.js"><link rel="prefetch" href="/assets/js/40.cdf5329e.js"><link rel="prefetch" href="/assets/js/41.6109e14b.js"><link rel="prefetch" href="/assets/js/42.06bfe4a5.js"><link rel="prefetch" href="/assets/js/43.9032d6e0.js"><link rel="prefetch" href="/assets/js/44.f028bb5d.js"><link rel="prefetch" href="/assets/js/45.82adf304.js"><link rel="prefetch" href="/assets/js/46.0fab72e0.js"><link rel="prefetch" href="/assets/js/47.51b0145e.js"><link rel="prefetch" href="/assets/js/48.2abe71f7.js"><link rel="prefetch" href="/assets/js/49.1ac12cd8.js"><link rel="prefetch" href="/assets/js/5.89b22d2c.js"><link rel="prefetch" href="/assets/js/50.6ac70c7e.js"><link rel="prefetch" href="/assets/js/51.3535db59.js"><link rel="prefetch" href="/assets/js/52.fe1cd272.js"><link rel="prefetch" href="/assets/js/53.be3d6d1b.js"><link rel="prefetch" href="/assets/js/54.7cf39450.js"><link rel="prefetch" href="/assets/js/55.d7db0fc1.js"><link rel="prefetch" href="/assets/js/56.3168a434.js"><link rel="prefetch" href="/assets/js/57.45cbe2ee.js"><link rel="prefetch" href="/assets/js/58.6dce84f9.js"><link rel="prefetch" href="/assets/js/59.6ad12285.js"><link rel="prefetch" href="/assets/js/6.026d10ac.js"><link rel="prefetch" href="/assets/js/60.c8f81731.js"><link rel="prefetch" href="/assets/js/61.aded0aa1.js"><link rel="prefetch" href="/assets/js/62.f750a668.js"><link rel="prefetch" href="/assets/js/63.00d64b1b.js"><link rel="prefetch" href="/assets/js/64.8ac8064c.js"><link rel="prefetch" href="/assets/js/65.dfa74a78.js"><link rel="prefetch" href="/assets/js/66.70b2bbec.js"><link rel="prefetch" href="/assets/js/67.859b57ab.js"><link rel="prefetch" href="/assets/js/68.431ced11.js"><link rel="prefetch" href="/assets/js/69.64f25751.js"><link rel="prefetch" href="/assets/js/7.df44c01a.js"><link rel="prefetch" href="/assets/js/70.4f7d846c.js"><link rel="prefetch" href="/assets/js/71.d926c988.js"><link rel="prefetch" href="/assets/js/72.704557ef.js"><link rel="prefetch" href="/assets/js/73.13a15d26.js"><link rel="prefetch" href="/assets/js/74.06f0410a.js"><link rel="prefetch" href="/assets/js/75.a6007c8e.js"><link rel="prefetch" href="/assets/js/76.81c76a80.js"><link rel="prefetch" href="/assets/js/77.4b53ed34.js"><link rel="prefetch" href="/assets/js/78.8eeea126.js"><link rel="prefetch" href="/assets/js/79.a85390e2.js"><link rel="prefetch" href="/assets/js/8.6b67bf95.js"><link rel="prefetch" href="/assets/js/80.a7998fe3.js"><link rel="prefetch" href="/assets/js/81.ea335a79.js"><link rel="prefetch" href="/assets/js/82.5bfbb658.js"><link rel="prefetch" href="/assets/js/83.0e859121.js"><link rel="prefetch" href="/assets/js/84.e11a0662.js"><link rel="prefetch" href="/assets/js/85.f038cdb7.js"><link rel="prefetch" href="/assets/js/86.2ef33950.js"><link rel="prefetch" href="/assets/js/9.d1154cbc.js">
    <link rel="stylesheet" href="/assets/css/0.styles.ed588d1d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Apache NIFI中文文档</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>1-基础文档</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/1-基础文档/1-Overview.html" class="sidebar-link">概览(Apache NiFi Overview)</a></li><li><a href="/1-基础文档/2-GettingStarted.html" class="sidebar-link">入门(Getting Started with Apache NiFi)</a></li><li><a href="/1-基础文档/3-UserGuide.html" class="sidebar-link">用户指南(Apache NiFi User Guide)</a></li><li><a href="/1-基础文档/5-RecordPathGuide.html" class="active sidebar-link">Apache NiFi RecordPath Guide</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/1-基础文档/5-RecordPathGuide.html#overview" class="sidebar-link">Overview</a></li><li class="sidebar-sub-header"><a href="/1-基础文档/5-RecordPathGuide.html#structure-of-a-recordpath" class="sidebar-link">Structure of a RecordPath</a></li><li class="sidebar-sub-header"><a href="/1-基础文档/5-RecordPathGuide.html#child-operator" class="sidebar-link">Child Operator</a></li><li class="sidebar-sub-header"><a href="/1-基础文档/5-RecordPathGuide.html#descendant-operator" class="sidebar-link">Descendant Operator</a></li><li class="sidebar-sub-header"><a href="/1-基础文档/5-RecordPathGuide.html#filters" class="sidebar-link">Filters</a></li><li class="sidebar-sub-header"><a href="/1-基础文档/5-RecordPathGuide.html#function-usage" class="sidebar-link">Function Usage</a></li><li class="sidebar-sub-header"><a href="/1-基础文档/5-RecordPathGuide.html#maps" class="sidebar-link">Maps</a></li><li class="sidebar-sub-header"><a href="/1-基础文档/5-RecordPathGuide.html#predicates" class="sidebar-link">Predicates</a></li><li class="sidebar-sub-header"><a href="/1-基础文档/5-RecordPathGuide.html#functions" class="sidebar-link">Functions</a></li><li class="sidebar-sub-header"><a href="/1-基础文档/5-RecordPathGuide.html#standalone-functions" class="sidebar-link">Standalone Functions</a></li><li class="sidebar-sub-header"><a href="/1-基础文档/5-RecordPathGuide.html#filter-functions" class="sidebar-link">Filter Functions</a></li><li class="sidebar-sub-header"><a href="/1-基础文档/5-RecordPathGuide.html#公众号" class="sidebar-link">公众号</a></li></ul></li><li><a href="/1-基础文档/6-AdminGuide.html" class="sidebar-link">系统管理员指南</a></li><li><a href="/1-基础文档/7-ToolkitGuide.html" class="sidebar-link">Apache NiFi Toolkit Guide</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>2-开发文档</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>3-Processors</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>4-ControllerService</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>5-ReportingTask</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="apache-nifi-recordpath-guide"><a href="#apache-nifi-recordpath-guide" class="header-anchor">#</a> Apache NiFi RecordPath Guide</h1> <h2 id="overview"><a href="#overview" class="header-anchor">#</a> Overview</h2> <p>Apache NiFi提供了一组非常强大的处理器，能够提取，处理，路由，转换和传递任何格式的数据。这是因为NiFi框架本身与数据无关。不管您的数据是100字节JSON消息还是100 GB的视频。这是一个非常强大的功能。除此之外还有有许多模式已迅速发展为处理不同类型的数据。</p> <p>NiFi经常处理的一类数据是面向record的数据。当我们说面向record的数据时，我们经常（但并非总是）谈论诸如JSON，CSV和Avro之类的结构化数据。但是，还有许多其他类型的数据也可以表示为“records”或“messages”。NIFI提供了一组Controller Services，用于解析这些不同的数据格式并使用RecordReader API以一致的方式表示数据。只要有一个RecordReader能够产生代表该数据的Record对象，就可以将以任何数据格式写入的数据视为相同。</p> <p>当我们谈论record时，这是一种抽象，它使我们能够以相同的方式处理数据，而不管其采用的格式。record由一个或多个字段组成。每个字段都有一个名称和与之关联的类型。使用record schema描述record的字段。schema指示哪些字段构成特定类型的record。字段的类型将是以下之一：</p> <ol><li><p>String</p></li> <li><p>Boolean</p></li> <li><p>Byte</p></li> <li><p>Character</p></li> <li><p>Short</p></li> <li><p>Integer</p></li> <li><p>Long</p></li> <li><p>BigInt</p></li> <li><p>Float</p></li> <li><p>Double</p></li> <li><p>Date - 表示没有Time部分的日期</p></li> <li><p>Time - 表示不包含Date部分的一天中的时间</p></li> <li><p>Timestamp - Represents a Date and Time</p></li> <li><p>Embedded Record - 可以通过允许字段本身为Type Record来表示诸如JSON之类的分层数据。</p></li> <li><p>Choice - 字段可以是几种类型中的任何一种。</p></li> <li><p>Array - 数组的所有元素都具有相同的类型。</p></li> <li><p>Map - 所有映射键的类型均为字符串。值是同一类型。</p></li></ol> <p>将数据流转换为Records后，RecordWriter API允许我们将这些Records序列化回字节流，以便可以将它们传递到其他系统上。</p> <p>当然，如果我们不打算对两者之间的数据做任何事情，那么读取和写入这些数据就没有多大意义。NiFi提供了多种处理器，它们提供了一些非常强大的功能，用于路由，查询和转换面向record的数据。通常，为了执行所需的功能，处理器将需要来自用户的输入，以便确定应对record中的哪些字段或对record中的哪些值进行操作。</p> <p>输入NiFi RecordPath语言。 RecordPath旨在成为一种简单易用的领域特定语言（DSL），用于指定在配置处理器时我们关心或希望访问的record中的哪些字段。</p> <h2 id="structure-of-a-recordpath"><a href="#structure-of-a-recordpath" class="header-anchor">#</a> Structure of a RecordPath</h2> <p>NiFi中的record由（可能）许多字段组成，并且这些字段中的每个字段实际上都可以是record。这意味着可以将record视为具有层次结构或嵌套结构。我们将“inner Record”称为“outer Record”的子代。因此，内部Record的子级是最外部record的后代。同样，我们可以将外部record称为内部record的祖先。</p> <h2 id="child-operator"><a href="#child-operator" class="header-anchor">#</a> Child Operator</h2> <p>RecordPath语言的结构使我们能够轻松引用最外层Record的字段，子Record或后代Record的字段。为此，我们用斜杠字符（/）分隔子代的名称，我们将其称为子运算符。例如，假设我们有一个包含两个字段的record：name,details。此外，假设详细信息是一个字段，该字段本身就是一个Record，并且具有两个字段：identifier,address。此外，让我们考虑一下地址本身就是一个包含5个字段的record：number, street, city, state, zip。为了说明目的，此处以JSON编写的示例可能如下所示：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;John Doe&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;details&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;identifier&quot;</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
		<span class="token property">&quot;address&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token property">&quot;number&quot;</span><span class="token operator">:</span> <span class="token string">&quot;123&quot;</span><span class="token punctuation">,</span>
			<span class="token property">&quot;street&quot;</span><span class="token operator">:</span> <span class="token string">&quot;5th Avenue&quot;</span><span class="token punctuation">,</span>
			<span class="token property">&quot;city&quot;</span><span class="token operator">:</span> <span class="token string">&quot;New York&quot;</span><span class="token punctuation">,</span>
			<span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token string">&quot;NY&quot;</span><span class="token punctuation">,</span>
			<span class="token property">&quot;zip&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10020&quot;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>我们可以使用RecordPath来引用zip字段：<code>/details/address/zip</code>。这告诉我们我们要使用“root”record的详细信息字段。然后，我们要引用子record的address字段和该record的zip字段。</p> <h2 id="descendant-operator"><a href="#descendant-operator" class="header-anchor">#</a> Descendant Operator</h2> <p>除了提供到达zip字段的显式路径之外，有时在不知道完整路径的情况下引用zip字段有时可能很有用。在这种情况下，我们可以使用后代运算符（//）代替子运算符（/）。要获得与上述相同的zip字段，我们只需使用路径<code>//zip</code>即可完成此操作。</p> <p>但是，子运算符和后代运算符之间有一个非常重要的区别：后代运算符可以匹配许多字段，而子运算符最多可以匹配一个字段。为了帮助理解这一点，请考虑以下record：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;John Doe&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;workAddress&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;number&quot;</span><span class="token operator">:</span> <span class="token string">&quot;123&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;street&quot;</span><span class="token operator">:</span> <span class="token string">&quot;5th Avenue&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;city&quot;</span><span class="token operator">:</span> <span class="token string">&quot;New York&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token string">&quot;NY&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;zip&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10020&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token property">&quot;homeAddress&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;number&quot;</span><span class="token operator">:</span> <span class="token string">&quot;456&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;street&quot;</span><span class="token operator">:</span> <span class="token string">&quot;116th Avenue&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;city&quot;</span><span class="token operator">:</span> <span class="token string">&quot;New York&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token string">&quot;NY&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;zip&quot;</span><span class="token operator">:</span> <span class="token string">&quot;11697&quot;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>现在，如果我们使用RecordPath <code>/workAddress/zip</code>，我们将引用值为“10020”的zip字段。 RecordPath <code>/homeAddress/zip</code>将引用值为“11697”的zip字段。但是，RecordPath <code>//zip</code>将引用这两个字段。</p> <h2 id="filters"><a href="#filters" class="header-anchor">#</a> Filters</h2> <p>通过以上示例和说明，我们可以轻松引用Record中的特定字段。但是，在实际情况下，数据很少像上面的示例那样简单。通常，我们需要过滤掉或优化我们要引用的字段。当我们引用一个Array字段并且只想引用该数组中的某些元素时，可能需要这样做。当我们引用Map字段并希望引用Map中的一个或几个特定条目时；或者仅在符合某些条件的情况下我们才想引用record。我们可以通过在方括号内为RecordPath提供条件（使用<code>[,]</code>字符）来完成此操作。我们将在下面介绍每种情况。</p> <h2 id="function-usage"><a href="#function-usage" class="header-anchor">#</a> Function Usage</h2> <p>如上文“Filters”部分所述，除了从record中检索字段外，有时我们还需要优化我们要选择的字段。或者，我们可能想返回字段的修改后版本。为此，我们依靠功能。函数的语法为<code>&lt;function name&gt; &lt;open parenthesis&gt; &lt;args&gt; &lt;close parenthesis&gt;</code>，其中<code>&lt;args&gt;</code>表示一个或多个用逗号分隔的参数。参数可以是字符串文字（如“hello”）或数字文字（如48），也可以是相对或绝对的RecordPath（如./name或/id）。另外，我们可以在过滤器中使用函数。例如，我们可以使用诸如<code>/person[isEmpty('name')]/id</code>之类的RecordPath来检索名称为空的任何人的id字段。可用功能列表及其相应文档可在下面的“Functions”部分中找到。</p> <h3 id="arrays"><a href="#arrays" class="header-anchor">#</a> Arrays</h3> <p>当我们引用数组字段时，该字段的值可能是一个包含多个元素的数组，但我们可能只需要其中的几个元素。例如，我们可能只想引用第一个元素；只引用最后一个元素；或者可能引用第一个、第二个、第三个和最后一个元素。我们可以简单地使用方括号内元素的索引来引用特定元素（索引是从0开始的）。因此，让我们考虑一下上述record的修改版本：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;John Doe&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;addresses&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
		<span class="token property">&quot;work&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token property">&quot;number&quot;</span><span class="token operator">:</span> <span class="token string">&quot;123&quot;</span><span class="token punctuation">,</span>
			<span class="token property">&quot;street&quot;</span><span class="token operator">:</span> <span class="token string">&quot;5th Avenue&quot;</span><span class="token punctuation">,</span>
			<span class="token property">&quot;city&quot;</span><span class="token operator">:</span> <span class="token string">&quot;New York&quot;</span><span class="token punctuation">,</span>
			<span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token string">&quot;NY&quot;</span><span class="token punctuation">,</span>
			<span class="token property">&quot;zip&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10020&quot;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token property">&quot;home&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token property">&quot;number&quot;</span><span class="token operator">:</span> <span class="token string">&quot;456&quot;</span><span class="token punctuation">,</span>
			<span class="token property">&quot;street&quot;</span><span class="token operator">:</span> <span class="token string">&quot;116th Avenue&quot;</span><span class="token punctuation">,</span>
			<span class="token property">&quot;city&quot;</span><span class="token operator">:</span> <span class="token string">&quot;New York&quot;</span><span class="token punctuation">,</span>
			<span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token string">&quot;NY&quot;</span><span class="token punctuation">,</span>
			<span class="token property">&quot;zip&quot;</span><span class="token operator">:</span> <span class="token string">&quot;11697&quot;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>我们现在可以使用RecordPath <code>/addresses[0]</code>引用addresses数组中的第一个元素。我们可以使用RecordPath <code>/addresses[1]</code>访问第二个元素。不过，有时我们不知道数组中会有多少个元素。所以我们可以使用负索引从数组的末尾倒数。例如，我们可以将最后一个元素作为<code>/addresses[-1]</code>访问，也可以将倒数第二个元素作为<code>/addresses[-2]</code>访问。如果要引用多个元素，可以使用逗号分隔的元素列表，例如<code>/addresses[0，1，2，3]</code>。或者，要访问元素0到8，我们可以使用范围运算符（<code>..</code>），如<code>/addresses[0..8]</code>。我们还可以混合使用这些元素，并使用语法<code>/addresses[0..-1]</code>或甚至<code>/addresses[0，1，4，6..-1]</code>引用所有元素。当然，并不是这里引用的所有索引都与上面的record匹配，因为addresses数组只有2个元素。不匹配的索引将被跳过。</p> <h2 id="maps"><a href="#maps" class="header-anchor">#</a> Maps</h2> <p>与数组字段类似，映射字段实际上可能由几个不同的值组成。RecordPath使我们能够根据键选择一组值。我们通过在方括号内使用带引号的字符串来实现这一点。作为一个例子，让我们从上面重新访问我们的原始record：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;John Doe&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;details&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;identifier&quot;</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
		<span class="token property">&quot;address&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
			<span class="token property">&quot;number&quot;</span><span class="token operator">:</span> <span class="token string">&quot;123&quot;</span><span class="token punctuation">,</span>
			<span class="token property">&quot;street&quot;</span><span class="token operator">:</span> <span class="token string">&quot;5th Avenue&quot;</span><span class="token punctuation">,</span>
			<span class="token property">&quot;city&quot;</span><span class="token operator">:</span> <span class="token string">&quot;New York&quot;</span><span class="token punctuation">,</span>
			<span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token string">&quot;NY&quot;</span><span class="token punctuation">,</span>
			<span class="token property">&quot;zip&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10020&quot;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>现在，让我们假设与这个Record相关联的Schema指示address字段不是Record而是Map。在这种情况下，如果我们试图使用RecordPath<code>/details/address/zip</code>引用zip，那么RecordPath将不匹配，因为address字段不是record，因此没有任何名为zip的子record。相反，它是一个Map，具有String类型的键和值。不幸的是，当查看JSON时，这可能看起来有点混乱，因为JSON没有真正的类型系统。但是，当我们将JSON转换为Record对象以便对数据进行操作时，这种区别可能很重要。</p> <p>在上述情况下，我们仍然可以使用RecordPath访问zip字段。现在我们必须使用稍微不同的语法：<code>/details/address['zip']</code>。这告诉RecordPath我们要访问最高级别的details字段。然后我们要访问它的address字段。因为address字段是一个Map，所以我们可以使用方括号来表示要指定一个映射键，然后用引号指定键。</p> <p>此外，我们可以使用逗号分隔的列表选择多个映射键：<code>/details/address['city'，'state'，'zip']</code>。如果需要，我们还可以使用通配符(*)：<code>/details/address[*]</code>选择所有字段。映射字段不包含任何排序，因此无法通过数字索引引用键。</p> <h2 id="predicates"><a href="#predicates" class="header-anchor">#</a> Predicates</h2> <p>到目前为止，我们已经讨论了两种不同类型的过滤器。每种方法都允许我们从允许多个值的字段中选择一个或多个元素。但是，通常我们需要应用一个过滤器，允许我们限制选择哪些record字段。例如，如果我们想选择zip字段，但只为值不是纽约的address字段选择呢？上面的例子并没有给我们提供任何方法来做到这一点。</p> <p>RecordPath为用户提供了指定谓词的能力。谓词只是一个过滤器，它可以应用于一个字段，以确定该字段是否应包含在结果中。与其他过滤器一样，谓词在方括号内指定。谓词的语法是<code>&lt;Relative RecordPath&gt;&lt;Operator&gt;&lt;Expression&gt;</code>。<code>Relative RecordPath</code>的工作方式与其他RecordPath相同，但必须以<code>.</code>（参考当前字段）或<code>..</code>(引用当前字段的父字段）开头而不是斜杠，并引用与谓词应用的字段相关的字段。操作必须是以下之一：</p> <ol><li><p>Equals (<code>=</code>)</p></li> <li><p>Not Equal (<code>!=</code>)</p></li> <li><p>Greater Than (<code>&gt;</code>)</p></li> <li><p>Greater Than or Equal To (<code>&gt;=</code>)</p></li> <li><p>Less Than (<code>&lt;</code>)</p></li> <li><p>Less Than or Equal To (<code>&lt;=</code>)</p></li></ol> <p>表达式可以是文字值，例如50或Hello，也可以是另一个RecordPath。为了说明这一点，让我们以下面的record为例：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;John Doe&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;workAddress&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;number&quot;</span><span class="token operator">:</span> <span class="token string">&quot;123&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;street&quot;</span><span class="token operator">:</span> <span class="token string">&quot;5th Avenue&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;city&quot;</span><span class="token operator">:</span> <span class="token string">&quot;New York&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token string">&quot;NY&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;zip&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10020&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token property">&quot;homeAddress&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;number&quot;</span><span class="token operator">:</span> <span class="token string">&quot;456&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;street&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Grand St&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;city&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Jersey City&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token string">&quot;NJ&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;zip&quot;</span><span class="token operator">:</span> <span class="token string">&quot;07304&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token property">&quot;details&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;position&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Dataflow Engineer&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;preferredState&quot;</span><span class="token operator">:</span> <span class="token string">&quot;NY&quot;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>现在我们可以使用谓词来仅选择state不是New York的字段。 例如，我们可以使用<code>/*[./state！='NY']</code>. 如果state不具有“NY”值，则它将选择任何具有state字段的record字段。请注意，将不返回详细details Record，因为它没有名为state的字段。因此，在此示例中，RecordPath将仅选择homeAddress字段。一旦选择了该字段，就可以继续我们的RecordPath。如上所述，我们可以选择zip字段：<code>/*[./state！='NY']/zip</code>。此RecordPath将导致仅从homeAddress字段中选择zip字段。</p> <p>我们还可以将一个字段中的值与另一字段中的值进行比较。例如，我们可以使用RecordPath <code>/*[./state = /details/preferredState]</code>选择处于该人的首选状态的地址。在此示例中，此RecordPath将检索workAddress字段，因为其状态字段与preferredState字段的值匹配。</p> <p>另外，我们可以通过使用父运算符（..）：<code>/*/city[../state ='NJ']</code>来写一个RecordPath来引用状态为“NJ”的任何record的“city”字段。</p> <h2 id="functions"><a href="#functions" class="header-anchor">#</a> Functions</h2> <p>在上面的“Function Usage”部分，我们描述了如何以及为什么在RecordPath中使用函数。在这里，我们将描述可用的不同功能，它们的功能以及它们的工作方式。函数可以分为两类：<code>Standalone Functions</code>(可以是RecordPath的“root”，例如<code>substringAfter(/name,'')</code>)和<code>Filter Functions</code>(它们可以用作过滤器，例如<code>/name[ contains('John')]</code>。<code>Standalone Functions</code>也可以在过滤器中使用，但不返回布尔值（true或false），因此本身不能是整个过滤器。例如，我们可以使用诸如<code>/name[ substringAfter(., ' ') = 'Doe']</code>之类的路径，但是我们不能简单地使用<code>/name[ substringAfter(., ' ') ]</code>，因为这样做实际上没有任何意义，因为过滤器必须为布尔值。</p> <p>除非另有说明，否则下面的所有示例均将根据以下record进行操作：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
	<span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;John Doe&quot;</span><span class="token punctuation">,</span>
	<span class="token property">&quot;workAddress&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;number&quot;</span><span class="token operator">:</span> <span class="token string">&quot;123&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;street&quot;</span><span class="token operator">:</span> <span class="token string">&quot;5th Avenue&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;city&quot;</span><span class="token operator">:</span> <span class="token string">&quot;New York&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token string">&quot;NY&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;zip&quot;</span><span class="token operator">:</span> <span class="token string">&quot;10020&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token property">&quot;homeAddress&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;number&quot;</span><span class="token operator">:</span> <span class="token string">&quot;456&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;street&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Grand St&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;city&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Jersey City&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token string">&quot;NJ&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;zip&quot;</span><span class="token operator">:</span> <span class="token string">&quot;07304&quot;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token property">&quot;details&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		<span class="token property">&quot;position&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Dataflow Engineer&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;preferredState&quot;</span><span class="token operator">:</span> <span class="token string">&quot;NY&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;employer&quot;</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span>
		<span class="token property">&quot;vehicle&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span>
		<span class="token property">&quot;phrase&quot;</span><span class="token operator">:</span> <span class="token string">&quot;   &quot;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="standalone-functions"><a href="#standalone-functions" class="header-anchor">#</a> Standalone Functions</h2> <h3 id="substring"><a href="#substring" class="header-anchor">#</a> substring</h3> <p>substring函数返回String值的一部分。该函数需要3个参数：值的一部分，从0开始的索引（包括），从0开始的结束索引（不包括）。起始索引和结束索引可以为0以指示字符串的第一个字符，可以为正整数以指示字符串的第n个索引，也可以为负整数。如果该值为负整数，例如-n，则表示结尾的第n个字符。值-1表示字符串中的最后一个字符。因此，例如，<code>substring( 'hello world', 0, -1 )</code>表示采用字符串hello，并从最后一个字符返回字符0，因此返回值将为hello world。</p> <table><thead><tr><th>col 1</th> <th>col 2</th></tr></thead> <tbody><tr><td>RecordPath</td> <td>Return value</td></tr> <tr><td><code>substring( /name, 0, -1 )</code></td> <td>John Doe</td></tr> <tr><td><code>substring( /name, 0, -5 )</code></td> <td>John</td></tr> <tr><td><code>substring( /name, 1000, 1005 )</code></td> <td><code>&lt;empty string&gt;</code></td></tr> <tr><td><code>substring( /name, 0, 1005)</code></td> <td>John Doe</td></tr> <tr><td><code>substring( /name, -50, -1)</code></td> <td><code>&lt;empty string&gt;</code></td></tr></tbody></table> <h3 id="substringafter"><a href="#substringafter" class="header-anchor">#</a> substringAfter</h3> <p>返回String值的一部分，该值出现在其他值的第一次出现之后。</p> <table><thead><tr><th>col 1</th> <th>col 2</th></tr></thead> <tbody><tr><td>RecordPath</td> <td>Return value</td></tr> <tr><td><code>substringAfter( /name, ' ' )</code></td> <td>Doe</td></tr> <tr><td><code>substringAfter( /name, 'o' )</code></td> <td>hn Doe</td></tr> <tr><td><code>substringAfter( /name, '' )</code></td> <td>John Doe</td></tr> <tr><td><code>substringAfter( /name, 'xyz' )</code></td> <td>John Doe</td></tr></tbody></table> <h3 id="substringafterlast"><a href="#substringafterlast" class="header-anchor">#</a> substringAfterLast</h3> <p>返回在其他值的最后一次出现之后出现的String值的一部分。</p> <table><thead><tr><th>col 1</th> <th>col 2</th></tr></thead> <tbody><tr><td>RecordPath</td> <td>Return value</td></tr> <tr><td><code>substringAfterLast( /name, ' ' )</code></td> <td>Doe</td></tr> <tr><td><code>substringAfterLast( /name, 'o' )</code></td> <td>e</td></tr> <tr><td><code>substringAfterLast( /name, '' )</code></td> <td>John Doe</td></tr> <tr><td><code>substringAfterLast( /name, 'xyz' )</code></td> <td>John Doe</td></tr></tbody></table> <h3 id="substringbefore"><a href="#substringbefore" class="header-anchor">#</a> substringBefore</h3> <p>返回String值的出现在其他值的第一次出现之前的部分。</p> <table><thead><tr><th>col 1</th> <th>col 2</th></tr></thead> <tbody><tr><td>RecordPath</td> <td>Return value</td></tr> <tr><td><code>substringBefore( /name, ' ' )</code></td> <td>John</td></tr> <tr><td><code>substringBefore( /name, 'o' )</code></td> <td>J</td></tr> <tr><td><code>substringBefore( /name, '' )</code></td> <td>John Doe</td></tr> <tr><td><code>substringBefore( /name, 'xyz' )</code></td> <td>John Doe</td></tr></tbody></table> <h3 id="substringbeforelast"><a href="#substringbeforelast" class="header-anchor">#</a> substringBeforeLast</h3> <p>返回在其他值的最后一次出现之前出现的String值的一部分。</p> <table><thead><tr><th>col 1</th> <th>col 2</th></tr></thead> <tbody><tr><td>RecordPath</td> <td>Return value</td></tr> <tr><td><code>substringBeforeLast( /name, ' ' )</code></td> <td>John</td></tr> <tr><td><code>substringBeforeLast( /name, 'o' )</code></td> <td>John D</td></tr> <tr><td><code>substringBeforeLast( /name, '' )</code></td> <td>John Doe</td></tr> <tr><td><code>substringBeforeLast( /name, 'xyz' )</code></td> <td>John Doe</td></tr></tbody></table> <h3 id="replace"><a href="#replace" class="header-anchor">#</a> replace</h3> <p>用另一个字符串替换所有出现的字符串。</p> <table><thead><tr><th>col 1</th> <th>col 2</th></tr></thead> <tbody><tr><td>RecordPath</td> <td>Return value</td></tr> <tr><td><code>replace( /name, 'o', 'x' )</code></td> <td>Jxhn Dxe</td></tr> <tr><td><code>replace( /name, 'o', 'xyz' )</code></td> <td>Jxyzhn Dxyze</td></tr> <tr><td><code>replace( /name, 'xyz', 'zyx' )</code></td> <td>John Doe</td></tr> <tr><td><code>replace( /name, 'Doe', /workAddress/city )</code></td> <td>John New York</td></tr></tbody></table> <h3 id="replaceregex"><a href="#replaceregex" class="header-anchor">#</a> replaceRegex</h3> <p>根据字符串值的内容评估正则表达式，并将任何匹配项替换为另一个值。此函数需要3个参数：要针对其运行正则表达式的字符串，要运行的正则表达式，
和替换的值。替换值可以选择使用反向引用，例如<code>$1</code>和<code>${named_group}</code>。</p> <table><thead><tr><th>col 1</th> <th>col 2</th></tr></thead> <tbody><tr><td>RecordPath</td> <td>Return value</td></tr> <tr><td><code>replaceRegex( /name, 'o', 'x' )</code></td> <td>Jxhn Dxe</td></tr> <tr><td><code>replaceRegex( /name, 'o', 'xyz' )</code></td> <td>Jxyzhn Dxyze</td></tr> <tr><td><code>replaceRegex( /name, 'xyz', 'zyx' )</code></td> <td>John Doe</td></tr> <tr><td><code>replaceRegex( /name, '\s+.*', /workAddress/city )</code></td> <td>John New York</td></tr> <tr><td><code>replaceRegex(/name, '([JD])', '$1x')</code></td> <td>Jxohn Dxoe</td></tr> <tr><td><code>replaceRegex(/name, '(?&lt;hello&gt;[JD])', '${hello}x')</code></td> <td>Jxohn Dxoe</td></tr></tbody></table> <h3 id="concat"><a href="#concat" class="header-anchor">#</a> concat</h3> <p>将所有参数串联在一起。</p> <table><thead><tr><th>col 1</th> <th>col 2</th></tr></thead> <tbody><tr><td>RecordPath</td> <td>Return value</td></tr> <tr><td><code>concat( /name, ' lives in ', /homeAddress/city )</code></td> <td>John Doe lives in Jersey City</td></tr></tbody></table> <h3 id="fieldname"><a href="#fieldname" class="header-anchor">#</a> fieldName</h3> <p>通常，当为record中的特定字段指定路径时，返回的是该字段的值。它有时对于获取字段名称而不是值很有用。为此，我们可以使用fieldName函数。</p> <table><thead><tr><th>col 1</th> <th>col 2</th></tr></thead> <tbody><tr><td>RecordPath</td> <td>Return value</td></tr> <tr><td><code>fieldName(//city/..)</code></td> <td><code>workAddress</code> and <code>homeAddress</code></td></tr> <tr><td><code>//city[not(startsWith(fieldName(..), 'work'))]</code></td> <td>Jersey City</td></tr></tbody></table> <p>在上面的示例中，第一个RecordPath返回两个单独的字段名称：“workAddress”和“homeAddress”。相反，第二个RecordPath返回“city”字段的值，并使用fieldName函数作为谓词。第二个RecordPath查找一个“city”字段，其父级没有以“work”开头的名称。这意味着它将返回父项为“homeAddress”的“city”字段的值，而不返回父项为“ workAddress”的“city”字段的值。</p> <h3 id="todate"><a href="#todate" class="header-anchor">#</a> toDate</h3> <p>将字符串转换为日期。例如，给定一个schema，例如：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;record&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;events&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;fields&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eventDate&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>以及诸如以下的record：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;My Event&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;eventDate&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;2017-10-20T00:00:00Z&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>以下RecordPath会将eventDate字段解析为Date：</p> <p><code>toDate( /eventDate, &quot;yyyy-MM-dd’T’HH:mm:ss’Z'&quot;)</code></p> <p><code>toDate( /eventDate, &quot;yyyy-MM-dd’T’HH:mm:ss’Z'&quot;, &quot;GMT+8:00&quot;)</code></p> <h3 id="tostring"><a href="#tostring" class="header-anchor">#</a> toString</h3> <p>如果输入类型为“bytes”，则使用给定的字符集将值转换为字符串。例如，给定一个schema，例如：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;record&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;events&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;fields&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;bytes&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;bytes&quot;</span><span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>以及诸如以下的record：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;My Event&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;bytes&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Hello World!&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>以下RecordPath会将bytes字段解析为String：</p> <p><code>toString(/bytes, &quot;UTF-8&quot;)</code></p> <h3 id="tobytes"><a href="#tobytes" class="header-anchor">#</a> toBytes</h3> <p>使用给定的字符集将String转换为byte[]。例如，给定一个schema，例如：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;record&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;events&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;fields&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;s&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>以及诸如以下的record：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;My Event&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;s&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Hello World!&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>以下RecordPath将使用UTF-16编码将String字段转换为字节数组：
<code>toBytes( /s, &quot;UTF-16&quot;)</code></p> <h3 id="format"><a href="#format" class="header-anchor">#</a> format</h3> <p>使用给定的时区（可选，默认时区为GMT）将Date转换为给定格式的字符串。</p> <p>此函数的第一个参数必须为Date或Number，第二个参数必须为Java SimpleDateFormat后面的格式字符串，第三个参数（可选）必须为缩写形式（例如“PST”）的格式字符串，全名（例如“America/Los_Angeles”）或自定义ID（例如“GMT-8：00”），例如，给定以下schema：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;record&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;events&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;fields&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eventDate&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;long&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;logicalType&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;timestamp-millis&quot;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>以及诸如以下的record：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;My Event&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;eventDate&quot;</span> <span class="token operator">:</span> <span class="token number">1508457600000</span>
<span class="token punctuation">}</span>
</code></pre></div><p>以下RecordPath表达式会将日期格式设置为字符串：</p> <table><thead><tr><th>col 1</th> <th>col 2</th></tr></thead> <tbody><tr><td>RecordPath</td> <td>Return value</td></tr> <tr><td><code>format( /eventDate, &quot;yyyy-MM-dd’T’HH:mm:ss’Z'&quot;)</code></td> <td>2017-10-20T00:00:00Z</td></tr> <tr><td><code>format( /eventDate, &quot;yyyy-MM-dd&quot;)</code></td> <td>2017-10-20</td></tr> <tr><td><code>format( /eventDate, &quot;yyyy-MM-dd HH:mm:ss Z&quot;, &quot;GMT+8:00&quot;)</code></td> <td>2017-10-20 08:00:00 +0800</td></tr> <tr><td><code>format( /eventDate, &quot;yyyy-MM-dd&quot;, &quot;GMT+8:00&quot;)</code></td> <td>2017-10-20</td></tr></tbody></table> <p>在将字段声明为String的情况下，必须在格式化之前调用toDate函数。例如，给定一个schema，例如：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;record&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;events&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;fields&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eventDate&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;type&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>以及诸如以下的record：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;My Event&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;eventDate&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;2017-10-20T00:00:00Z&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>以下RecordPath将重新格式化日期字符串：</p> <table><thead><tr><th>col 1</th> <th>col 2</th></tr></thead> <tbody><tr><td>RecordPath</td> <td>Return value</td></tr> <tr><td><code>format( toDate(/eventDate, &quot;yyyy-MM-dd’T’HH:mm:ss’Z'&quot;), 'yyyy-MM-dd')</code></td> <td>2017-10-20</td></tr></tbody></table> <h3 id="trim"><a href="#trim" class="header-anchor">#</a> trim</h3> <p>从字符串的开头和结尾删除空格。</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;record&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;events&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;fields&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>以及诸如以下的record：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;    John Smith    &quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>以下RecordPath表达式将删除多余的空白：</p> <table><thead><tr><th>col 1</th> <th>col 2</th></tr></thead> <tbody><tr><td>RecordPath</td> <td>Return value</td></tr> <tr><td><code>trim(/name)</code></td> <td>John Smith</td></tr></tbody></table> <h3 id="touppercase"><a href="#touppercase" class="header-anchor">#</a> toUpperCase</h3> <p>将整个字符串改为大写</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;record&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;events&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;fields&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;fullName&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>以及诸如以下的record：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;fullName&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;john smith&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>以下RecordPath表达式将删除多余的空白：</p> <table><thead><tr><th>col 1</th> <th>col 2</th></tr></thead> <tbody><tr><td>RecordPath</td> <td>Return value</td></tr> <tr><td><code>toUpperCase(/name)</code></td> <td>JOHN SMITH</td></tr></tbody></table> <h3 id="tolowercase"><a href="#tolowercase" class="header-anchor">#</a> toLowerCase</h3> <p>Changes the entire string to lower case.</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;record&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;events&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;fields&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;message&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>以及诸如以下的record：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;hEllO wORLd&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>以下RecordPath表达式将删除多余的空白：</p> <table><thead><tr><th>col 1</th> <th>col 2</th></tr></thead> <tbody><tr><td>RecordPath</td> <td>Return value</td></tr> <tr><td><code>trim(/message)</code></td> <td>hello world</td></tr></tbody></table> <h3 id="base64encode"><a href="#base64encode" class="header-anchor">#</a> base64Encode</h3> <p>使用Base64编码，使用UTF-8字符集转换字符串或byte[]。例如，给定一个schema，例如：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;record&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;events&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;fields&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>以及诸如以下的record：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;John&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>以下RecordPath表达式将使用Base64对字符串进行编码：</p> <table><thead><tr><th>col 1</th> <th>col 2</th></tr></thead> <tbody><tr><td>RecordPath</td> <td>Return value</td></tr> <tr><td><code>base64Encode(/name)</code></td> <td>Sm9obg==</td></tr></tbody></table> <h3 id="base64decode"><a href="#base64decode" class="header-anchor">#</a> base64Decode</h3> <p>解码Base64编码的字符串或byte[]。例如，给定一个schema，例如：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;record&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;events&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;fields&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>以及诸如以下的record：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;Sm9obg==&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>以下RecordPath表达式将使用Base64对字符串进行解码：</p> <table><thead><tr><th>col 1</th> <th>col 2</th></tr></thead> <tbody><tr><td>RecordPath</td> <td>Return value</td></tr> <tr><td><code>base64Decode(/name)</code></td> <td>John</td></tr></tbody></table> <h3 id="hash"><a href="#hash" class="header-anchor">#</a> hash</h3> <p>使用哈希算法转换字符串。例如，给定一个schema，例如：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;record&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;events&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;fields&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>以及诸如以下的record：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;John&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>下面的RecordPath表达式将使用以下<code>[SHA-384，SHA-224，SHA-256，MD2，SHA，SHA-512，MD5]</code>算法之一散列字符串。</p> <table><thead><tr><th>col 1</th> <th>col 2</th></tr></thead> <tbody><tr><td>RecordPath</td> <td>Return value</td></tr> <tr><td><code>hash(/name, 'MD5')</code></td> <td>527bd5b5d689e2c32ae974c6229ff785</td></tr></tbody></table> <h3 id="padleft"><a href="#padleft" class="header-anchor">#</a> padLeft</h3> <p>在输入字符串前面加上字符，直到它达到所需的长度。</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;record&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;events&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;fields&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>以及诸如以下的record：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;john smith&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>以下RecordPath表达式将在输入字符串前面加上“@”字符：</p> <table><thead><tr><th>col 1</th> <th>col 2</th></tr></thead> <tbody><tr><td>RecordPath</td> <td>Return value</td></tr> <tr><td><code>padLeft(/name, 15, '@')</code></td> <td>@@@@@john smith</td></tr></tbody></table> <h3 id="padright"><a href="#padright" class="header-anchor">#</a> padRight</h3> <p>向输入字符串追加字符，直到达到所需长度。</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;record&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;events&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;fields&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span> <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>以及诸如以下的record：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;john smith&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>以下RecordPath表达式将在输入字符串后附加“@”字符：</p> <table><thead><tr><th>col 1</th> <th>col 2</th></tr></thead> <tbody><tr><td>RecordPath</td> <td>Return value</td></tr> <tr><td><code>padRight(/name, 15, '@')</code></td> <td>john smith@@@@@</td></tr></tbody></table> <h2 id="filter-functions"><a href="#filter-functions" class="header-anchor">#</a> Filter Functions</h2> <h3 id="contains"><a href="#contains" class="header-anchor">#</a> contains</h3> <p>如果字符串值包含提供的子字符串，则返回“true”；否则返回“false”</p> <table><thead><tr><th>col 1</th> <th>col 2</th></tr></thead> <tbody><tr><td>RecordPath</td> <td>Return value</td></tr> <tr><td><code>/name[contains(., 'o')]</code></td> <td>John Doe</td></tr> <tr><td><code>/name[contains(., 'x')]</code></td> <td><code>&lt;returns no results&gt;</code></td></tr> <tr><td><code>/name[contains( ../workAddress/state, /details/preferredState )]</code></td> <td>John Doe</td></tr></tbody></table> <h3 id="matchesregex"><a href="#matchesregex" class="header-anchor">#</a> matchesRegex</h3> <p>根据字符串值的内容计算正则表达式，如果正则表达式与字符串值完全匹配，则返回“true”，否则返回“false”。</p> <table><thead><tr><th>col 1</th> <th>col 2</th></tr></thead> <tbody><tr><td>RecordPath</td> <td>Return value</td></tr> <tr><td><code>/name[matchesRegex(., 'John Doe')]</code></td> <td>John Doe</td></tr> <tr><td><code>/name[matchesRegex(., 'John')]</code></td> <td><code>&lt;returns no results&gt;</code></td></tr> <tr><td><code>/name[matchesRegex(., '.* Doe' )]</code></td> <td>John Doe</td></tr></tbody></table> <h3 id="startswith"><a href="#startswith" class="header-anchor">#</a> startsWith</h3> <p>如果字符串值以提供的子字符串开头，则返回“true”；否则返回“false”</p> <table><thead><tr><th>col 1</th> <th>col 2</th></tr></thead> <tbody><tr><td>RecordPath</td> <td>Return value</td></tr> <tr><td><code>/name[startsWith(., 'J')]</code></td> <td>John Doe</td></tr> <tr><td><code>/name[startsWith(., 'x')]</code></td> <td><code>&lt;returns no results&gt;</code></td></tr> <tr><td><code>/name[startsWith(., 'xyz')]</code></td> <td><code>&lt;returns no results&gt;</code></td></tr> <tr><td><code>/name[startsWith(., '')]</code></td> <td>John Doe</td></tr></tbody></table> <h3 id="endswith"><a href="#endswith" class="header-anchor">#</a> endsWith</h3> <p>如果字符串值以提供的子字符串结尾，则返回“true”；否则返回“false”</p> <table><thead><tr><th>col 1</th> <th>col 2</th></tr></thead> <tbody><tr><td>RecordPath</td> <td>Return value</td></tr> <tr><td><code>/name[endsWith(., 'e')]</code></td> <td>John Doe</td></tr> <tr><td><code>/name[endsWith(., 'x')]</code></td> <td><code>&lt;returns no results&gt;</code></td></tr> <tr><td><code>/name[endsWith(., 'xyz')]</code></td> <td><code>&lt;returns no results&gt;</code></td></tr> <tr><td><code>/name[endsWith(., '')]</code></td> <td>John Doe</td></tr></tbody></table> <h3 id="not"><a href="#not" class="header-anchor">#</a> not</h3> <p>反转传递给“not”函数的函数或表达式的值。</p> <table><thead><tr><th>col 1</th> <th>col 2</th></tr></thead> <tbody><tr><td>RecordPath</td> <td>Return value</td></tr> <tr><td><code>/name[not(endsWith(., 'x'))]</code></td> <td>John Doe</td></tr> <tr><td><code>/name[not(contains(., 'x'))]</code></td> <td>John Doe</td></tr> <tr><td><code>/name[not(endsWith(., 'e'))]</code></td> <td><code>&lt;returns no results&gt;</code></td></tr></tbody></table> <h3 id="isempty"><a href="#isempty" class="header-anchor">#</a> isEmpty</h3> <p>如果提供的值为null或为空字符串，则返回“true”。</p> <table><thead><tr><th>col 1</th> <th>col 2</th></tr></thead> <tbody><tr><td>RecordPath</td> <td>Return value</td></tr> <tr><td><code>/name[isEmpty(/details/employer)]</code></td> <td>John Doe</td></tr> <tr><td><code>/name[isEmpty(/details/vehicle)]</code></td> <td>John Doe</td></tr> <tr><td><code>/name[isEmpty(/details/phase)]</code></td> <td><code>&lt;returns no results&gt;</code></td></tr> <tr><td><code>/name[isEmpty(.)]</code></td> <td><code>&lt;returns no results&gt;</code></td></tr></tbody></table> <h3 id="isblank"><a href="#isblank" class="header-anchor">#</a> isBlank</h3> <p>如果提供的值为null或是空字符串或仅由空格（空格、制表符、回车符和换行符）组成的字符串，则返回“true”。</p> <table><thead><tr><th>col 1</th> <th>col 2</th></tr></thead> <tbody><tr><td>RecordPath</td> <td>Return value</td></tr> <tr><td><code>/name[isBlank(/details/employer)]</code></td> <td>John Doe</td></tr> <tr><td><code>/name[isBlank(/details/vehicle)]</code></td> <td>John Doe</td></tr> <tr><td><code>/name[isBlank(/details/phase)]</code></td> <td>John Doe</td></tr> <tr><td><code>/name[isBlank(.)]</code></td> <td><code>&lt;returns no results&gt;</code></td></tr></tbody></table> <h2 id="公众号"><a href="#公众号" class="header-anchor">#</a> 公众号</h2> <p>关注公众号 得到第一手文章/文档更新推送。</p> <p><img src="https://nifichina.gitee.io/image/donate/wechat.jpg" alt=""></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">12/5/2020, 11:01:48 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/1-基础文档/3-UserGuide.html" class="prev">
        用户指南(Apache NiFi User Guide)
      </a></span> <span class="next"><a href="/1-基础文档/6-AdminGuide.html">
        系统管理员指南
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.4ea34ae1.js" defer></script><script src="/assets/js/2.65ffbe52.js" defer></script><script src="/assets/js/12.45dad5d3.js" defer></script><script src="/assets/js/4.e4643266.js" defer></script>
  </body>
</html>
