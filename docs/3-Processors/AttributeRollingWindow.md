# AttributeRollingWindow
***
编辑人(全网同名)：__**酷酷的诚**__  邮箱：**zhangchengk@foxmail.com**
***

## 描述

本组件在一个时间窗口内，计算每一个流经的流文件的对应的NIFI表达式，然后把这些值记录在组件的state中。在这个时间窗口内的流文件，会在流属性中记录组件处理它时一共处理了多少的流文件，NIFI表达式计算结果的总和均值。

## 属性配置

在下面的列表中，必需属性的名称以粗体显示。任何其他属性(不是粗体)都被认为是可选的，并且指出属性默认值（如果有默认值），以及属性是否支持表达式语言。

|属性名称|默认值|可选值|描述|
|----|----|----|----|
|**Value to track**|||每个流文件要计算的NIFI表达式，计算得到的结果会添加到时间窗口的值里。<br/>支持表达式语言：true|
|**Time window**|||时间窗口大小|
|Sub-window length|||当设置时，值将批量分配到设置长度的子时间窗口中。这就允许设置更长的总时间窗口，但可能会牺牲一些精度。如果未设置此值(或为0)，则每个值都以接收时的时间戳的状态存储。在时间窗口滑过所配置的时间长度之后，该值将被删除。如果设置了这个属性，那么每隔X个时间段(其中X是为该属性设置的时间段)就会将值组合在一起，然后一次性删除所有值。|

## 连接关系

|名称|描述|
|----|----|
|set state fail|当处理流文件时，状态保存失败时，将路由流文件到这里。|
|success|成功的流文件|
|failure|除了设置state失败，其他失败的流文件路由到这里|

## 读取属性

没有指定。

## 写属性

|名称|描述|
|----|----|
|rolling_window_value|到当前流文件为止在时间窗口内计算值的总和|
|rolling_window_count|到当前流文件为止在时间窗口内处理流文件的数量|
|rolling_window_mean|到当前流文件为止在时间窗口内计算的平均值|

## 状态管理

|Scope|Description|
|----|----|
|LOCAL|存储时间滚动窗口的值。这包括存储单个值及其时间戳或批值及其计数。|

## 限制

此组件不受限制。

## 输入要求

此组件需要传入关系。

## 系统资源方面的考虑

没有指定。

## 公众号

关注公众号 得到第一手文章/文档更新推送。

![](../image/wechat.jpg)